function getAmbisonicChannelCount(p) {
  return (p + 1) * (p + 1);
}
function getAmbisonicChannelCount2D(p) {
  return 2 * p + 1;
}
function degreesToRadians(p) {
  return p * Math.PI / 180;
}
function radiansToDegrees(p) {
  return p * 180 / Math.PI;
}
var commonjsGlobal = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, numeric1_2_6 = {};
(function(exports$1) {
  var numeric = exports$1;
  typeof commonjsGlobal < "u" && (commonjsGlobal.numeric = numeric), numeric.version = "1.2.6", numeric.bench = function(t, n) {
    var r, i, a, e;
    for (typeof n > "u" && (n = 15), a = 0.5, r = /* @__PURE__ */ new Date(); ; ) {
      for (a *= 2, e = a; e > 3; e -= 4)
        t(), t(), t(), t();
      for (; e > 0; )
        t(), e--;
      if (i = /* @__PURE__ */ new Date(), i - r > n) break;
    }
    for (e = a; e > 3; e -= 4)
      t(), t(), t(), t();
    for (; e > 0; )
      t(), e--;
    return i = /* @__PURE__ */ new Date(), 1e3 * (3 * a - 1) / (i - r);
  }, numeric._myIndexOf = function(t) {
    var n = this.length, r;
    for (r = 0; r < n; ++r) if (this[r] === t) return r;
    return -1;
  }, numeric.myIndexOf = Array.prototype.indexOf ? Array.prototype.indexOf : numeric._myIndexOf, numeric.Function = Function, numeric.precision = 4, numeric.largeArray = 50, numeric.prettyPrint = function(t) {
    function n(a) {
      if (a === 0)
        return "0";
      if (isNaN(a))
        return "NaN";
      if (a < 0)
        return "-" + n(-a);
      if (isFinite(a)) {
        var e = Math.floor(Math.log(a) / Math.log(10)), c = a / Math.pow(10, e), f = c.toPrecision(numeric.precision);
        return parseFloat(f) === 10 && (e++, c = 1, f = c.toPrecision(numeric.precision)), parseFloat(f).toString() + "e" + e.toString();
      }
      return "Infinity";
    }
    var r = [];
    function i(a) {
      var e;
      if (typeof a > "u")
        return r.push(Array(numeric.precision + 8).join(" ")), !1;
      if (typeof a == "string")
        return r.push('"' + a + '"'), !1;
      if (typeof a == "boolean")
        return r.push(a.toString()), !1;
      if (typeof a == "number") {
        var c = n(a), f = a.toPrecision(numeric.precision), o = parseFloat(a.toString()).toString(), h = [c, f, o, parseFloat(f).toString(), parseFloat(o).toString()];
        for (e = 1; e < h.length; e++)
          h[e].length < c.length && (c = h[e]);
        return r.push(Array(numeric.precision + 8 - c.length).join(" ") + c), !1;
      }
      if (a === null)
        return r.push("null"), !1;
      if (typeof a == "function") {
        r.push(a.toString());
        var u = !1;
        for (e in a)
          a.hasOwnProperty(e) && (u ? r.push(`,
`) : r.push(`
{`), u = !0, r.push(e), r.push(`: 
`), i(a[e]));
        return u && r.push(`}
`), !0;
      }
      if (a instanceof Array) {
        if (a.length > numeric.largeArray)
          return r.push("...Large Array..."), !0;
        var u = !1;
        for (r.push("["), e = 0; e < a.length; e++)
          e > 0 && (r.push(","), u && r.push(`
 `)), u = i(a[e]);
        return r.push("]"), !0;
      }
      r.push("{");
      var u = !1;
      for (e in a)
        a.hasOwnProperty(e) && (u && r.push(`,
`), u = !0, r.push(e), r.push(`: 
`), i(a[e]));
      return r.push("}"), !0;
    }
    return i(t), r.join("");
  }, numeric.parseDate = function(t) {
    function n(r) {
      if (typeof r == "string")
        return Date.parse(r.replace(/-/g, "/"));
      if (!(r instanceof Array))
        throw new Error("parseDate: parameter must be arrays of strings");
      var i = [], a;
      for (a = 0; a < r.length; a++)
        i[a] = n(r[a]);
      return i;
    }
    return n(t);
  }, numeric.parseFloat = function(t) {
    function n(r) {
      if (typeof r == "string")
        return parseFloat(r);
      if (!(r instanceof Array))
        throw new Error("parseFloat: parameter must be arrays of strings");
      var i = [], a;
      for (a = 0; a < r.length; a++)
        i[a] = n(r[a]);
      return i;
    }
    return n(t);
  }, numeric.parseCSV = function(t) {
    var n = t.split(`
`), r, i, a = [], e = /(([^'",]*)|('[^']*')|("[^"]*")),/g, c = /^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/, f = function(M) {
      return M.substr(0, M.length - 1);
    }, o = 0;
    for (i = 0; i < n.length; i++) {
      var h = (n[i] + ",").match(e), u;
      if (h.length > 0) {
        for (a[o] = [], r = 0; r < h.length; r++)
          u = f(h[r]), c.test(u) ? a[o][r] = parseFloat(u) : a[o][r] = u;
        o++;
      }
    }
    return a;
  }, numeric.toCSV = function(t) {
    var n = numeric.dim(t), r, i, a, e, c;
    for (a = n[0], n[1], c = [], r = 0; r < a; r++) {
      for (e = [], i = 0; i < a; i++)
        e[i] = t[r][i].toString();
      c[r] = e.join(", ");
    }
    return c.join(`
`) + `
`;
  }, numeric.getURL = function(t) {
    var n = new XMLHttpRequest();
    return n.open("GET", t, !1), n.send(), n;
  }, numeric.imageURL = function(t) {
    function n(_) {
      var L = _.length, F, x, O, R, I, l, b, Z, G = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", J = "";
      for (F = 0; F < L; F += 3)
        x = _[F], O = _[F + 1], R = _[F + 2], I = x >> 2, l = ((x & 3) << 4) + (O >> 4), b = ((O & 15) << 2) + (R >> 6), Z = R & 63, F + 1 >= L ? b = Z = 64 : F + 2 >= L && (Z = 64), J += G.charAt(I) + G.charAt(l) + G.charAt(b) + G.charAt(Z);
      return J;
    }
    function r(_, L, F) {
      typeof L > "u" && (L = 0), typeof F > "u" && (F = _.length);
      var x = [
        0,
        1996959894,
        3993919788,
        2567524794,
        124634137,
        1886057615,
        3915621685,
        2657392035,
        249268274,
        2044508324,
        3772115230,
        2547177864,
        162941995,
        2125561021,
        3887607047,
        2428444049,
        498536548,
        1789927666,
        4089016648,
        2227061214,
        450548861,
        1843258603,
        4107580753,
        2211677639,
        325883990,
        1684777152,
        4251122042,
        2321926636,
        335633487,
        1661365465,
        4195302755,
        2366115317,
        997073096,
        1281953886,
        3579855332,
        2724688242,
        1006888145,
        1258607687,
        3524101629,
        2768942443,
        901097722,
        1119000684,
        3686517206,
        2898065728,
        853044451,
        1172266101,
        3705015759,
        2882616665,
        651767980,
        1373503546,
        3369554304,
        3218104598,
        565507253,
        1454621731,
        3485111705,
        3099436303,
        671266974,
        1594198024,
        3322730930,
        2970347812,
        795835527,
        1483230225,
        3244367275,
        3060149565,
        1994146192,
        31158534,
        2563907772,
        4023717930,
        1907459465,
        112637215,
        2680153253,
        3904427059,
        2013776290,
        251722036,
        2517215374,
        3775830040,
        2137656763,
        141376813,
        2439277719,
        3865271297,
        1802195444,
        476864866,
        2238001368,
        4066508878,
        1812370925,
        453092731,
        2181625025,
        4111451223,
        1706088902,
        314042704,
        2344532202,
        4240017532,
        1658658271,
        366619977,
        2362670323,
        4224994405,
        1303535960,
        984961486,
        2747007092,
        3569037538,
        1256170817,
        1037604311,
        2765210733,
        3554079995,
        1131014506,
        879679996,
        2909243462,
        3663771856,
        1141124467,
        855842277,
        2852801631,
        3708648649,
        1342533948,
        654459306,
        3188396048,
        3373015174,
        1466479909,
        544179635,
        3110523913,
        3462522015,
        1591671054,
        702138776,
        2966460450,
        3352799412,
        1504918807,
        783551873,
        3082640443,
        3233442989,
        3988292384,
        2596254646,
        62317068,
        1957810842,
        3939845945,
        2647816111,
        81470997,
        1943803523,
        3814918930,
        2489596804,
        225274430,
        2053790376,
        3826175755,
        2466906013,
        167816743,
        2097651377,
        4027552580,
        2265490386,
        503444072,
        1762050814,
        4150417245,
        2154129355,
        426522225,
        1852507879,
        4275313526,
        2312317920,
        282753626,
        1742555852,
        4189708143,
        2394877945,
        397917763,
        1622183637,
        3604390888,
        2714866558,
        953729732,
        1340076626,
        3518719985,
        2797360999,
        1068828381,
        1219638859,
        3624741850,
        2936675148,
        906185462,
        1090812512,
        3747672003,
        2825379669,
        829329135,
        1181335161,
        3412177804,
        3160834842,
        628085408,
        1382605366,
        3423369109,
        3138078467,
        570562233,
        1426400815,
        3317316542,
        2998733608,
        733239954,
        1555261956,
        3268935591,
        3050360625,
        752459403,
        1541320221,
        2607071920,
        3965973030,
        1969922972,
        40735498,
        2617837225,
        3943577151,
        1913087877,
        83908371,
        2512341634,
        3803740692,
        2075208622,
        213261112,
        2463272603,
        3855990285,
        2094854071,
        198958881,
        2262029012,
        4057260610,
        1759359992,
        534414190,
        2176718541,
        4139329115,
        1873836001,
        414664567,
        2282248934,
        4279200368,
        1711684554,
        285281116,
        2405801727,
        4167216745,
        1634467795,
        376229701,
        2685067896,
        3608007406,
        1308918612,
        956543938,
        2808555105,
        3495958263,
        1231636301,
        1047427035,
        2932959818,
        3654703836,
        1088359270,
        936918e3,
        2847714899,
        3736837829,
        1202900863,
        817233897,
        3183342108,
        3401237130,
        1404277552,
        615818150,
        3134207493,
        3453421203,
        1423857449,
        601450431,
        3009837614,
        3294710456,
        1567103746,
        711928724,
        3020668471,
        3272380065,
        1510334235,
        755167117
      ], O = -1, R = 0;
      _.length;
      var I;
      for (I = L; I < F; I++)
        R = (O ^ _[I]) & 255, O = O >>> 8 ^ x[R];
      return O ^ -1;
    }
    var i = t[0].length, a = t[0][0].length, e, c, f, o, h, u, M, v, m, y, D = [
      137,
      80,
      78,
      71,
      13,
      10,
      26,
      10,
      //  0: PNG signature
      0,
      0,
      0,
      13,
      //  8: IHDR Chunk length
      73,
      72,
      68,
      82,
      // 12: "IHDR" 
      a >> 24 & 255,
      a >> 16 & 255,
      a >> 8 & 255,
      a & 255,
      // 16: Width
      i >> 24 & 255,
      i >> 16 & 255,
      i >> 8 & 255,
      i & 255,
      // 20: Height
      8,
      // 24: bit depth
      2,
      // 25: RGB
      0,
      // 26: deflate
      0,
      // 27: no filter
      0,
      // 28: no interlace
      -1,
      -2,
      -3,
      -4,
      // 29: CRC
      -5,
      -6,
      -7,
      -8,
      // 33: IDAT Chunk length
      73,
      68,
      65,
      84,
      // 37: "IDAT"
      // RFC 1950 header starts here
      8,
      // 41: RFC1950 CMF
      29
      // 42: RFC1950 FLG
    ];
    for (y = r(D, 12, 29), D[29] = y >> 24 & 255, D[30] = y >> 16 & 255, D[31] = y >> 8 & 255, D[32] = y & 255, e = 1, c = 0, M = 0; M < i; M++) {
      for (M < i - 1 ? D.push(0) : D.push(1), h = 3 * a + 1 + (M === 0) & 255, u = 3 * a + 1 + (M === 0) >> 8 & 255, D.push(h), D.push(u), D.push(~h & 255), D.push(~u & 255), M === 0 && D.push(0), v = 0; v < a; v++)
        for (f = 0; f < 3; f++)
          h = t[f][M][v], h > 255 ? h = 255 : h < 0 ? h = 0 : h = Math.round(h), e = (e + h) % 65521, c = (c + e) % 65521, D.push(h);
      D.push(0);
    }
    return m = (c << 16) + e, D.push(m >> 24 & 255), D.push(m >> 16 & 255), D.push(m >> 8 & 255), D.push(m & 255), o = D.length - 41, D[33] = o >> 24 & 255, D[34] = o >> 16 & 255, D[35] = o >> 8 & 255, D[36] = o & 255, y = r(D, 37), D.push(y >> 24 & 255), D.push(y >> 16 & 255), D.push(y >> 8 & 255), D.push(y & 255), D.push(0), D.push(0), D.push(0), D.push(0), D.push(73), D.push(69), D.push(78), D.push(68), D.push(174), D.push(66), D.push(96), D.push(130), "data:image/png;base64," + n(D);
  }, numeric._dim = function(t) {
    for (var n = []; typeof t == "object"; )
      n.push(t.length), t = t[0];
    return n;
  }, numeric.dim = function(t) {
    var n, r;
    return typeof t == "object" ? (n = t[0], typeof n == "object" ? (r = n[0], typeof r == "object" ? numeric._dim(t) : [t.length, n.length]) : [t.length]) : [];
  }, numeric.mapreduce = function(t, n) {
    return Function(
      "x",
      "accum",
      "_s",
      "_k",
      'if(typeof accum === "undefined") accum = ' + n + `;
if(typeof x === "number") { var xi = x; ` + t + `; return accum; }
if(typeof _s === "undefined") _s = numeric.dim(x);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i,xi;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) {
        accum = arguments.callee(x[i],accum,_s,_k+1);
    }    return accum;
}
for(i=_n-1;i>=1;i-=2) { 
    xi = x[i];
    ` + t + `;
    xi = x[i-1];
    ` + t + `;
}
if(i === 0) {
    xi = x[i];
    ` + t + `
}
return accum;`
    );
  }, numeric.mapreduce2 = function(t, n) {
    return Function(
      "x",
      `var n = x.length;
var i,xi;
` + n + `;
for(i=n-1;i!==-1;--i) { 
    xi = x[i];
    ` + t + `;
}
return accum;`
    );
  }, numeric.same = function p(t, n) {
    var r, i;
    if (!(t instanceof Array) || !(n instanceof Array) || (i = t.length, i !== n.length))
      return !1;
    for (r = 0; r < i; r++)
      if (t[r] !== n[r])
        if (typeof t[r] == "object") {
          if (!p(t[r], n[r])) return !1;
        } else
          return !1;
    return !0;
  }, numeric.rep = function(t, n, r) {
    typeof r > "u" && (r = 0);
    var i = t[r], a = Array(i), e;
    if (r === t.length - 1) {
      for (e = i - 2; e >= 0; e -= 2)
        a[e + 1] = n, a[e] = n;
      return e === -1 && (a[0] = n), a;
    }
    for (e = i - 1; e >= 0; e--)
      a[e] = numeric.rep(t, n, r + 1);
    return a;
  }, numeric.dotMMsmall = function(t, n) {
    var r, i, a, e, c, f, o, h, u, M, v;
    for (e = t.length, c = n.length, f = n[0].length, o = Array(e), r = e - 1; r >= 0; r--) {
      for (h = Array(f), u = t[r], a = f - 1; a >= 0; a--) {
        for (M = u[c - 1] * n[c - 1][a], i = c - 2; i >= 1; i -= 2)
          v = i - 1, M += u[i] * n[i][a] + u[v] * n[v][a];
        i === 0 && (M += u[0] * n[0][a]), h[a] = M;
      }
      o[r] = h;
    }
    return o;
  }, numeric._getCol = function(t, n, r) {
    var i = t.length, a;
    for (a = i - 1; a > 0; --a)
      r[a] = t[a][n], --a, r[a] = t[a][n];
    a === 0 && (r[0] = t[0][n]);
  }, numeric.dotMMbig = function(t, n) {
    var r = numeric._getCol, i = n.length, a = Array(i), e = t.length, c = n[0].length, f = new Array(e), o, h = numeric.dotVV, u, M;
    for (--i, --e, u = e; u !== -1; --u) f[u] = Array(c);
    for (--c, u = c; u !== -1; --u)
      for (r(n, u, a), M = e; M !== -1; --M)
        o = t[M], f[M][u] = h(o, a);
    return f;
  }, numeric.dotMV = function(t, n) {
    var r = t.length;
    n.length;
    var i, a = Array(r), e = numeric.dotVV;
    for (i = r - 1; i >= 0; i--)
      a[i] = e(t[i], n);
    return a;
  }, numeric.dotVM = function(t, n) {
    var r, i, a, e, c, f, o;
    for (a = t.length, e = n[0].length, c = Array(e), i = e - 1; i >= 0; i--) {
      for (f = t[a - 1] * n[a - 1][i], r = a - 2; r >= 1; r -= 2)
        o = r - 1, f += t[r] * n[r][i] + t[o] * n[o][i];
      r === 0 && (f += t[0] * n[0][i]), c[i] = f;
    }
    return c;
  }, numeric.dotVV = function(t, n) {
    var r, i = t.length, a, e = t[i - 1] * n[i - 1];
    for (r = i - 2; r >= 1; r -= 2)
      a = r - 1, e += t[r] * n[r] + t[a] * n[a];
    return r === 0 && (e += t[0] * n[0]), e;
  }, numeric.dot = function(t, n) {
    var r = numeric.dim;
    switch (r(t).length * 1e3 + r(n).length) {
      case 2002:
        return n.length < 10 ? numeric.dotMMsmall(t, n) : numeric.dotMMbig(t, n);
      case 2001:
        return numeric.dotMV(t, n);
      case 1002:
        return numeric.dotVM(t, n);
      case 1001:
        return numeric.dotVV(t, n);
      case 1e3:
        return numeric.mulVS(t, n);
      case 1:
        return numeric.mulSV(t, n);
      case 0:
        return t * n;
      default:
        throw new Error("numeric.dot only works on vectors and matrices");
    }
  }, numeric.diag = function(t) {
    var n, r, i, a = t.length, e = Array(a), c;
    for (n = a - 1; n >= 0; n--) {
      for (c = Array(a), r = n + 2, i = a - 1; i >= r; i -= 2)
        c[i] = 0, c[i - 1] = 0;
      for (i > n && (c[i] = 0), c[n] = t[n], i = n - 1; i >= 1; i -= 2)
        c[i] = 0, c[i - 1] = 0;
      i === 0 && (c[0] = 0), e[n] = c;
    }
    return e;
  }, numeric.getDiag = function(p) {
    var t = Math.min(p.length, p[0].length), n, r = Array(t);
    for (n = t - 1; n >= 1; --n)
      r[n] = p[n][n], --n, r[n] = p[n][n];
    return n === 0 && (r[0] = p[0][0]), r;
  }, numeric.identity = function(t) {
    return numeric.diag(numeric.rep([t], 1));
  }, numeric.pointwise = function(t, n, r) {
    typeof r > "u" && (r = "");
    var i = [], a, e = /\[i\]$/, c, f = "", o = !1;
    for (a = 0; a < t.length; a++)
      e.test(t[a]) ? (c = t[a].substring(0, t[a].length - 3), f = c) : c = t[a], c === "ret" && (o = !0), i.push(c);
    return i[t.length] = "_s", i[t.length + 1] = "_k", i[t.length + 2] = 'if(typeof _s === "undefined") _s = numeric.dim(' + f + `);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i` + (o ? "" : ", ret = Array(_n)") + `;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(` + t.join(",") + `,_s,_k+1);
    return ret;
}
` + r + `
for(i=_n-1;i!==-1;--i) {
    ` + n + `
}
return ret;`, Function.apply(null, i);
  }, numeric.pointwise2 = function(t, n, r) {
    typeof r > "u" && (r = "");
    var i = [], a, e = /\[i\]$/, c, f = "", o = !1;
    for (a = 0; a < t.length; a++)
      e.test(t[a]) ? (c = t[a].substring(0, t[a].length - 3), f = c) : c = t[a], c === "ret" && (o = !0), i.push(c);
    return i[t.length] = "var _n = " + f + `.length;
var i` + (o ? "" : ", ret = Array(_n)") + `;
` + r + `
for(i=_n-1;i!==-1;--i) {
` + n + `
}
return ret;`, Function.apply(null, i);
  }, numeric._biforeach = function p(t, n, r, i, a) {
    if (i === r.length - 1) {
      a(t, n);
      return;
    }
    var e, c = r[i];
    for (e = c - 1; e >= 0; e--)
      p(typeof t == "object" ? t[e] : t, typeof n == "object" ? n[e] : n, r, i + 1, a);
  }, numeric._biforeach2 = function p(t, n, r, i, a) {
    if (i === r.length - 1)
      return a(t, n);
    var e, c = r[i], f = Array(c);
    for (e = c - 1; e >= 0; --e)
      f[e] = p(typeof t == "object" ? t[e] : t, typeof n == "object" ? n[e] : n, r, i + 1, a);
    return f;
  }, numeric._foreach = function p(t, n, r, i) {
    if (r === n.length - 1) {
      i(t);
      return;
    }
    var a, e = n[r];
    for (a = e - 1; a >= 0; a--)
      p(t[a], n, r + 1, i);
  }, numeric._foreach2 = function p(t, n, r, i) {
    if (r === n.length - 1)
      return i(t);
    var a, e = n[r], c = Array(e);
    for (a = e - 1; a >= 0; a--)
      c[a] = p(t[a], n, r + 1, i);
    return c;
  }, numeric.ops2 = {
    add: "+",
    sub: "-",
    mul: "*",
    div: "/",
    mod: "%",
    and: "&&",
    or: "||",
    eq: "===",
    neq: "!==",
    lt: "<",
    gt: ">",
    leq: "<=",
    geq: ">=",
    band: "&",
    bor: "|",
    bxor: "^",
    lshift: "<<",
    rshift: ">>",
    rrshift: ">>>"
  }, numeric.opseq = {
    addeq: "+=",
    subeq: "-=",
    muleq: "*=",
    diveq: "/=",
    modeq: "%=",
    lshifteq: "<<=",
    rshifteq: ">>=",
    rrshifteq: ">>>=",
    bandeq: "&=",
    boreq: "|=",
    bxoreq: "^="
  }, numeric.mathfuns = [
    "abs",
    "acos",
    "asin",
    "atan",
    "ceil",
    "cos",
    "exp",
    "floor",
    "log",
    "round",
    "sin",
    "sqrt",
    "tan",
    "isNaN",
    "isFinite"
  ], numeric.mathfuns2 = ["atan2", "pow", "max", "min"], numeric.ops1 = {
    neg: "-",
    not: "!",
    bnot: "~",
    clone: ""
  }, numeric.mapreducers = {
    any: ["if(xi) return true;", "var accum = false;"],
    all: ["if(!xi) return false;", "var accum = true;"],
    sum: ["accum += xi;", "var accum = 0;"],
    prod: ["accum *= xi;", "var accum = 1;"],
    norm2Squared: ["accum += xi*xi;", "var accum = 0;"],
    norminf: ["accum = max(accum,abs(xi));", "var accum = 0, max = Math.max, abs = Math.abs;"],
    norm1: ["accum += abs(xi)", "var accum = 0, abs = Math.abs;"],
    sup: ["accum = max(accum,xi);", "var accum = -Infinity, max = Math.max;"],
    inf: ["accum = min(accum,xi);", "var accum = Infinity, min = Math.min;"]
  }, function() {
    var p, t;
    for (p = 0; p < numeric.mathfuns2.length; ++p)
      t = numeric.mathfuns2[p], numeric.ops2[t] = t;
    for (p in numeric.ops2)
      if (numeric.ops2.hasOwnProperty(p)) {
        t = numeric.ops2[p];
        var n, r, i = "";
        numeric.myIndexOf.call(numeric.mathfuns2, p) !== -1 ? (i = "var " + t + " = Math." + t + `;
`, n = function(a, e, c) {
          return a + " = " + t + "(" + e + "," + c + ")";
        }, r = function(a, e) {
          return a + " = " + t + "(" + a + "," + e + ")";
        }) : (n = function(a, e, c) {
          return a + " = " + e + " " + t + " " + c;
        }, numeric.opseq.hasOwnProperty(p + "eq") ? r = function(a, e) {
          return a + " " + t + "= " + e;
        } : r = function(a, e) {
          return a + " = " + a + " " + t + " " + e;
        }), numeric[p + "VV"] = numeric.pointwise2(["x[i]", "y[i]"], n("ret[i]", "x[i]", "y[i]"), i), numeric[p + "SV"] = numeric.pointwise2(["x", "y[i]"], n("ret[i]", "x", "y[i]"), i), numeric[p + "VS"] = numeric.pointwise2(["x[i]", "y"], n("ret[i]", "x[i]", "y"), i), numeric[p] = Function(
          `var n = arguments.length, i, x = arguments[0], y;
var VV = numeric.` + p + "VV, VS = numeric." + p + "VS, SV = numeric." + p + `SV;
var dim = numeric.dim;
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof x === "object") {
      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);
      else x = numeric._biforeach2(x,y,dim(x),0,VS);
  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);
  else ` + r("x", "y") + `
}
return x;
`
        ), numeric[t] = numeric[p], numeric[p + "eqV"] = numeric.pointwise2(["ret[i]", "x[i]"], r("ret[i]", "x[i]"), i), numeric[p + "eqS"] = numeric.pointwise2(["ret[i]", "x"], r("ret[i]", "x"), i), numeric[p + "eq"] = Function(
          `var n = arguments.length, i, x = arguments[0], y;
var V = numeric.` + p + "eqV, S = numeric." + p + `eqS
var s = numeric.dim(x);
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);
  else numeric._biforeach(x,y,s,0,S);
}
return x;
`
        );
      }
    for (p = 0; p < numeric.mathfuns2.length; ++p)
      t = numeric.mathfuns2[p], delete numeric.ops2[t];
    for (p = 0; p < numeric.mathfuns.length; ++p)
      t = numeric.mathfuns[p], numeric.ops1[t] = t;
    for (p in numeric.ops1)
      numeric.ops1.hasOwnProperty(p) && (i = "", t = numeric.ops1[p], numeric.myIndexOf.call(numeric.mathfuns, p) !== -1 && Math.hasOwnProperty(t) && (i = "var " + t + " = Math." + t + `;
`), numeric[p + "eqV"] = numeric.pointwise2(["ret[i]"], "ret[i] = " + t + "(ret[i]);", i), numeric[p + "eq"] = Function(
        "x",
        'if(typeof x !== "object") return ' + t + `x
var i;
var V = numeric.` + p + `eqV;
var s = numeric.dim(x);
numeric._foreach(x,s,0,V);
return x;
`
      ), numeric[p + "V"] = numeric.pointwise2(["x[i]"], "ret[i] = " + t + "(x[i]);", i), numeric[p] = Function(
        "x",
        'if(typeof x !== "object") return ' + t + `(x)
var i;
var V = numeric.` + p + `V;
var s = numeric.dim(x);
return numeric._foreach2(x,s,0,V);
`
      ));
    for (p = 0; p < numeric.mathfuns.length; ++p)
      t = numeric.mathfuns[p], delete numeric.ops1[t];
    for (p in numeric.mapreducers)
      numeric.mapreducers.hasOwnProperty(p) && (t = numeric.mapreducers[p], numeric[p + "V"] = numeric.mapreduce2(t[0], t[1]), numeric[p] = Function(
        "x",
        "s",
        "k",
        t[1] + `if(typeof x !== "object") {    xi = x;
` + t[0] + `;
    return accum;
}if(typeof s === "undefined") s = numeric.dim(x);
if(typeof k === "undefined") k = 0;
if(k === s.length-1) return numeric.` + p + `V(x);
var xi;
var n = x.length, i;
for(i=n-1;i!==-1;--i) {
   xi = arguments.callee(x[i]);
` + t[0] + `;
}
return accum;
`
      ));
  }(), numeric.truncVV = numeric.pointwise(["x[i]", "y[i]"], "ret[i] = round(x[i]/y[i])*y[i];", "var round = Math.round;"), numeric.truncVS = numeric.pointwise(["x[i]", "y"], "ret[i] = round(x[i]/y)*y;", "var round = Math.round;"), numeric.truncSV = numeric.pointwise(["x", "y[i]"], "ret[i] = round(x/y[i])*y[i];", "var round = Math.round;"), numeric.trunc = function(t, n) {
    return typeof t == "object" ? typeof n == "object" ? numeric.truncVV(t, n) : numeric.truncVS(t, n) : typeof n == "object" ? numeric.truncSV(t, n) : Math.round(t / n) * n;
  }, numeric.inv = function(y) {
    var n = numeric.dim(y), r = Math.abs, i = n[0], a = n[1], e = numeric.clone(y), c, f, o = numeric.identity(i), h, u, M, v, m, y;
    for (v = 0; v < a; ++v) {
      var D = -1, _ = -1;
      for (M = v; M !== i; ++M)
        m = r(e[M][v]), m > _ && (D = M, _ = m);
      for (f = e[D], e[D] = e[v], e[v] = f, u = o[D], o[D] = o[v], o[v] = u, y = f[v], m = v; m !== a; ++m) f[m] /= y;
      for (m = a - 1; m !== -1; --m) u[m] /= y;
      for (M = i - 1; M !== -1; --M)
        if (M !== v) {
          for (c = e[M], h = o[M], y = c[v], m = v + 1; m !== a; ++m) c[m] -= f[m] * y;
          for (m = a - 1; m > 0; --m)
            h[m] -= u[m] * y, --m, h[m] -= u[m] * y;
          m === 0 && (h[0] -= u[0] * y);
        }
    }
    return o;
  }, numeric.det = function(t) {
    var n = numeric.dim(t);
    if (n.length !== 2 || n[0] !== n[1])
      throw new Error("numeric: det() only works on square matrices");
    var r = n[0], i = 1, a, e, c, f = numeric.clone(t), o, h, u, M, v;
    for (e = 0; e < r - 1; e++) {
      for (c = e, a = e + 1; a < r; a++)
        Math.abs(f[a][e]) > Math.abs(f[c][e]) && (c = a);
      for (c !== e && (M = f[c], f[c] = f[e], f[e] = M, i *= -1), o = f[e], a = e + 1; a < r; a++) {
        for (h = f[a], u = h[e] / o[e], c = e + 1; c < r - 1; c += 2)
          v = c + 1, h[c] -= o[c] * u, h[v] -= o[v] * u;
        c !== r && (h[c] -= o[c] * u);
      }
      if (o[e] === 0)
        return 0;
      i *= o[e];
    }
    return i * f[e][e];
  }, numeric.transpose = function(t) {
    var n, r, i = t.length, a = t[0].length, e = Array(a), c, f, o;
    for (r = 0; r < a; r++) e[r] = Array(i);
    for (n = i - 1; n >= 1; n -= 2) {
      for (f = t[n], c = t[n - 1], r = a - 1; r >= 1; --r)
        o = e[r], o[n] = f[r], o[n - 1] = c[r], --r, o = e[r], o[n] = f[r], o[n - 1] = c[r];
      r === 0 && (o = e[0], o[n] = f[0], o[n - 1] = c[0]);
    }
    if (n === 0) {
      for (c = t[0], r = a - 1; r >= 1; --r)
        e[r][0] = c[r], --r, e[r][0] = c[r];
      r === 0 && (e[0][0] = c[0]);
    }
    return e;
  }, numeric.negtranspose = function(t) {
    var n, r, i = t.length, a = t[0].length, e = Array(a), c, f, o;
    for (r = 0; r < a; r++) e[r] = Array(i);
    for (n = i - 1; n >= 1; n -= 2) {
      for (f = t[n], c = t[n - 1], r = a - 1; r >= 1; --r)
        o = e[r], o[n] = -f[r], o[n - 1] = -c[r], --r, o = e[r], o[n] = -f[r], o[n - 1] = -c[r];
      r === 0 && (o = e[0], o[n] = -f[0], o[n - 1] = -c[0]);
    }
    if (n === 0) {
      for (c = t[0], r = a - 1; r >= 1; --r)
        e[r][0] = -c[r], --r, e[r][0] = -c[r];
      r === 0 && (e[0][0] = -c[0]);
    }
    return e;
  }, numeric._random = function p(t, n) {
    var r, i = t[n], a = Array(i), e;
    if (n === t.length - 1) {
      for (e = Math.random, r = i - 1; r >= 1; r -= 2)
        a[r] = e(), a[r - 1] = e();
      return r === 0 && (a[0] = e()), a;
    }
    for (r = i - 1; r >= 0; r--) a[r] = p(t, n + 1);
    return a;
  }, numeric.random = function(t) {
    return numeric._random(t, 0);
  }, numeric.norm2 = function(t) {
    return Math.sqrt(numeric.norm2Squared(t));
  }, numeric.linspace = function(t, n, r) {
    if (typeof r > "u" && (r = Math.max(Math.round(n - t) + 1, 1)), r < 2)
      return r === 1 ? [t] : [];
    var i, a = Array(r);
    for (r--, i = r; i >= 0; i--)
      a[i] = (i * n + (r - i) * t) / r;
    return a;
  }, numeric.getBlock = function(t, n, r) {
    var i = numeric.dim(t);
    function a(e, c) {
      var f, o = n[c], h = r[c] - o, u = Array(h);
      if (c === i.length - 1) {
        for (f = h; f >= 0; f--)
          u[f] = e[f + o];
        return u;
      }
      for (f = h; f >= 0; f--)
        u[f] = a(e[f + o], c + 1);
      return u;
    }
    return a(t, 0);
  }, numeric.setBlock = function(t, n, r, i) {
    var a = numeric.dim(t);
    function e(c, f, o) {
      var h, u = n[o], M = r[o] - u;
      if (o === a.length - 1)
        for (h = M; h >= 0; h--)
          c[h + u] = f[h];
      for (h = M; h >= 0; h--)
        e(c[h + u], f[h], o + 1);
    }
    return e(t, i, 0), t;
  }, numeric.getRange = function(t, n, r) {
    var i = n.length, a = r.length, e, c, f = Array(i), o, h;
    for (e = i - 1; e !== -1; --e)
      for (f[e] = Array(a), o = f[e], h = t[n[e]], c = a - 1; c !== -1; --c) o[c] = h[r[c]];
    return f;
  }, numeric.blockMatrix = function(t) {
    var n = numeric.dim(t);
    if (n.length < 4) return numeric.blockMatrix([t]);
    var r = n[0], i = n[1], a, e, c, f, o;
    for (a = 0, e = 0, c = 0; c < r; ++c) a += t[c][0].length;
    for (f = 0; f < i; ++f) e += t[0][f][0].length;
    var h = Array(a);
    for (c = 0; c < a; ++c) h[c] = Array(e);
    var u = 0, M, v, m, y, D;
    for (c = 0; c < r; ++c) {
      for (M = e, f = i - 1; f !== -1; --f)
        for (o = t[c][f], M -= o[0].length, m = o.length - 1; m !== -1; --m)
          for (D = o[m], v = h[u + m], y = D.length - 1; y !== -1; --y) v[M + y] = D[y];
      u += t[c][0].length;
    }
    return h;
  }, numeric.tensor = function(t, n) {
    if (typeof t == "number" || typeof n == "number") return numeric.mul(t, n);
    var r = numeric.dim(t), i = numeric.dim(n);
    if (r.length !== 1 || i.length !== 1)
      throw new Error("numeric: tensor product is only defined for vectors");
    var a = r[0], e = i[0], c = Array(a), f, o, h, u;
    for (o = a - 1; o >= 0; o--) {
      for (f = Array(e), u = t[o], h = e - 1; h >= 3; --h)
        f[h] = u * n[h], --h, f[h] = u * n[h], --h, f[h] = u * n[h], --h, f[h] = u * n[h];
      for (; h >= 0; )
        f[h] = u * n[h], --h;
      c[o] = f;
    }
    return c;
  }, numeric.T = function(t, n) {
    this.x = t, this.y = n;
  }, numeric.t = function(t, n) {
    return new numeric.T(t, n);
  }, numeric.Tbinop = function(t, n, r, i, a) {
    if (numeric.indexOf, typeof a != "string") {
      var e;
      a = "";
      for (e in numeric)
        numeric.hasOwnProperty(e) && (t.indexOf(e) >= 0 || n.indexOf(e) >= 0 || r.indexOf(e) >= 0 || i.indexOf(e) >= 0) && e.length > 1 && (a += "var " + e + " = numeric." + e + `;
`);
    }
    return Function(
      ["y"],
      `var x = this;
if(!(y instanceof numeric.T)) { y = new numeric.T(y); }
` + a + `
if(x.y) {  if(y.y) {    return new numeric.T(` + i + `);
  }
  return new numeric.T(` + r + `);
}
if(y.y) {
  return new numeric.T(` + n + `);
}
return new numeric.T(` + t + `);
`
    );
  }, numeric.T.prototype.add = numeric.Tbinop(
    "add(x.x,y.x)",
    "add(x.x,y.x),y.y",
    "add(x.x,y.x),x.y",
    "add(x.x,y.x),add(x.y,y.y)"
  ), numeric.T.prototype.sub = numeric.Tbinop(
    "sub(x.x,y.x)",
    "sub(x.x,y.x),neg(y.y)",
    "sub(x.x,y.x),x.y",
    "sub(x.x,y.x),sub(x.y,y.y)"
  ), numeric.T.prototype.mul = numeric.Tbinop(
    "mul(x.x,y.x)",
    "mul(x.x,y.x),mul(x.x,y.y)",
    "mul(x.x,y.x),mul(x.y,y.x)",
    "sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"
  ), numeric.T.prototype.reciprocal = function() {
    var t = numeric.mul, n = numeric.div;
    if (this.y) {
      var r = numeric.add(t(this.x, this.x), t(this.y, this.y));
      return new numeric.T(n(this.x, r), n(numeric.neg(this.y), r));
    }
    return new T(n(1, this.x));
  }, numeric.T.prototype.div = function(t) {
    if (t instanceof numeric.T || (t = new numeric.T(t)), t.y)
      return this.mul(t.reciprocal());
    var n = numeric.div;
    return this.y ? new numeric.T(n(this.x, t.x), n(this.y, t.x)) : new numeric.T(n(this.x, t.x));
  }, numeric.T.prototype.dot = numeric.Tbinop(
    "dot(x.x,y.x)",
    "dot(x.x,y.x),dot(x.x,y.y)",
    "dot(x.x,y.x),dot(x.y,y.x)",
    "sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"
  ), numeric.T.prototype.transpose = function() {
    var t = numeric.transpose, n = this.x, r = this.y;
    return r ? new numeric.T(t(n), t(r)) : new numeric.T(t(n));
  }, numeric.T.prototype.transjugate = function() {
    var t = numeric.transpose, n = this.x, r = this.y;
    return r ? new numeric.T(t(n), numeric.negtranspose(r)) : new numeric.T(t(n));
  }, numeric.Tunop = function(t, n, r) {
    return typeof r != "string" && (r = ""), Function(
      `var x = this;
` + r + `
if(x.y) {  ` + n + `;
}
` + t + `;
`
    );
  }, numeric.T.prototype.exp = numeric.Tunop(
    "return new numeric.T(ex)",
    "return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))",
    "var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"
  ), numeric.T.prototype.conj = numeric.Tunop(
    "return new numeric.T(x.x);",
    "return new numeric.T(x.x,numeric.neg(x.y));"
  ), numeric.T.prototype.neg = numeric.Tunop(
    "return new numeric.T(neg(x.x));",
    "return new numeric.T(neg(x.x),neg(x.y));",
    "var neg = numeric.neg;"
  ), numeric.T.prototype.sin = numeric.Tunop(
    "return new numeric.T(numeric.sin(x.x))",
    "return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"
  ), numeric.T.prototype.cos = numeric.Tunop(
    "return new numeric.T(numeric.cos(x.x))",
    "return x.exp().add(x.neg().exp()).div(2);"
  ), numeric.T.prototype.abs = numeric.Tunop(
    "return new numeric.T(numeric.abs(x.x));",
    "return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));",
    "var mul = numeric.mul;"
  ), numeric.T.prototype.log = numeric.Tunop(
    "return new numeric.T(numeric.log(x.x));",
    `var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();
return new numeric.T(numeric.log(r.x),theta.x);`
  ), numeric.T.prototype.norm2 = numeric.Tunop(
    "return numeric.norm2(x.x);",
    `var f = numeric.norm2Squared;
return Math.sqrt(f(x.x)+f(x.y));`
  ), numeric.T.prototype.inv = function() {
    var t = this;
    if (typeof t.y > "u")
      return new numeric.T(numeric.inv(t.x));
    var n = t.x.length, y, D, _, r = numeric.identity(n), i = numeric.rep([n, n], 0), a = numeric.clone(t.x), e = numeric.clone(t.y), c, f, o, h, u, M, v, m, y, D, _, L, F, x, O, R, I, l;
    for (y = 0; y < n; y++) {
      for (x = a[y][y], O = e[y][y], L = x * x + O * O, _ = y, D = y + 1; D < n; D++)
        x = a[D][y], O = e[D][y], F = x * x + O * O, F > L && (_ = D, L = F);
      for (_ !== y && (l = a[y], a[y] = a[_], a[_] = l, l = e[y], e[y] = e[_], e[_] = l, l = r[y], r[y] = r[_], r[_] = l, l = i[y], i[y] = i[_], i[_] = l), c = a[y], f = e[y], u = r[y], M = i[y], x = c[y], O = f[y], D = y + 1; D < n; D++)
        R = c[D], I = f[D], c[D] = (R * x + I * O) / L, f[D] = (I * x - R * O) / L;
      for (D = 0; D < n; D++)
        R = u[D], I = M[D], u[D] = (R * x + I * O) / L, M[D] = (I * x - R * O) / L;
      for (D = y + 1; D < n; D++) {
        for (o = a[D], h = e[D], v = r[D], m = i[D], x = o[y], O = h[y], _ = y + 1; _ < n; _++)
          R = c[_], I = f[_], o[_] -= R * x - I * O, h[_] -= I * x + R * O;
        for (_ = 0; _ < n; _++)
          R = u[_], I = M[_], v[_] -= R * x - I * O, m[_] -= I * x + R * O;
      }
    }
    for (y = n - 1; y > 0; y--)
      for (u = r[y], M = i[y], D = y - 1; D >= 0; D--)
        for (v = r[D], m = i[D], x = a[D][y], O = e[D][y], _ = n - 1; _ >= 0; _--)
          R = u[_], I = M[_], v[_] -= x * R - O * I, m[_] -= x * I + O * R;
    return new numeric.T(r, i);
  }, numeric.T.prototype.get = function(t) {
    var n = this.x, r = this.y, i = 0, a, e = t.length;
    if (r) {
      for (; i < e; )
        a = t[i], n = n[a], r = r[a], i++;
      return new numeric.T(n, r);
    }
    for (; i < e; )
      a = t[i], n = n[a], i++;
    return new numeric.T(n);
  }, numeric.T.prototype.set = function(t, n) {
    var r = this.x, i = this.y, a = 0, e, c = t.length, f = n.x, o = n.y;
    if (c === 0)
      return o ? this.y = o : i && (this.y = void 0), this.x = r, this;
    if (o) {
      for (i || (i = numeric.rep(numeric.dim(r), 0), this.y = i); a < c - 1; )
        e = t[a], r = r[e], i = i[e], a++;
      return e = t[a], r[e] = f, i[e] = o, this;
    }
    if (i) {
      for (; a < c - 1; )
        e = t[a], r = r[e], i = i[e], a++;
      return e = t[a], r[e] = f, f instanceof Array ? i[e] = numeric.rep(numeric.dim(f), 0) : i[e] = 0, this;
    }
    for (; a < c - 1; )
      e = t[a], r = r[e], a++;
    return e = t[a], r[e] = f, this;
  }, numeric.T.prototype.getRows = function(t, n) {
    var r = n - t + 1, i, a = Array(r), e, c = this.x, f = this.y;
    for (i = t; i <= n; i++)
      a[i - t] = c[i];
    if (f) {
      for (e = Array(r), i = t; i <= n; i++)
        e[i - t] = f[i];
      return new numeric.T(a, e);
    }
    return new numeric.T(a);
  }, numeric.T.prototype.setRows = function(t, n, r) {
    var i, a = this.x, e = this.y, c = r.x, f = r.y;
    for (i = t; i <= n; i++)
      a[i] = c[i - t];
    if (f)
      for (e || (e = numeric.rep(numeric.dim(a), 0), this.y = e), i = t; i <= n; i++)
        e[i] = f[i - t];
    else if (e)
      for (i = t; i <= n; i++)
        e[i] = numeric.rep([c[i - t].length], 0);
    return this;
  }, numeric.T.prototype.getRow = function(t) {
    var n = this.x, r = this.y;
    return r ? new numeric.T(n[t], r[t]) : new numeric.T(n[t]);
  }, numeric.T.prototype.setRow = function(t, n) {
    var r = this.x, i = this.y, a = n.x, e = n.y;
    return r[t] = a, e ? (i || (i = numeric.rep(numeric.dim(r), 0), this.y = i), i[t] = e) : i && (i = numeric.rep([a.length], 0)), this;
  }, numeric.T.prototype.getBlock = function(t, n) {
    var r = this.x, i = this.y, a = numeric.getBlock;
    return i ? new numeric.T(a(r, t, n), a(i, t, n)) : new numeric.T(a(r, t, n));
  }, numeric.T.prototype.setBlock = function(t, n, r) {
    r instanceof numeric.T || (r = new numeric.T(r));
    var i = this.x, a = this.y, e = numeric.setBlock, c = r.x, f = r.y;
    if (f)
      return a || (this.y = numeric.rep(numeric.dim(this), 0), a = this.y), e(i, t, n, c), e(a, t, n, f), this;
    e(i, t, n, c), a && e(a, t, n, numeric.rep(numeric.dim(c), 0));
  }, numeric.T.rep = function(t, n) {
    var r = numeric.T;
    n instanceof r || (n = new r(n));
    var i = n.x, a = n.y, e = numeric.rep;
    return a ? new r(e(t, i), e(t, a)) : new r(e(t, i));
  }, numeric.T.diag = function(t) {
    t instanceof numeric.T || (t = new numeric.T(t));
    var n = t.x, r = t.y, i = numeric.diag;
    return r ? new numeric.T(i(n), i(r)) : new numeric.T(i(n));
  }, numeric.T.eig = function() {
    if (this.y)
      throw new Error("eig: not implemented for complex matrices.");
    return numeric.eig(this.x);
  }, numeric.T.identity = function(t) {
    return new numeric.T(numeric.identity(t));
  }, numeric.T.prototype.getDiag = function() {
    var t = numeric, n = this.x, r = this.y;
    return r ? new t.T(t.getDiag(n), t.getDiag(r)) : new t.T(t.getDiag(n));
  }, numeric.house = function(t) {
    var n = numeric.clone(t), r = t[0] >= 0 ? 1 : -1, i = r * numeric.norm2(t);
    n[0] += i;
    var a = numeric.norm2(n);
    if (a === 0)
      throw new Error("eig: internal error");
    return numeric.div(n, a);
  }, numeric.toUpperHessenberg = function(t) {
    var n = numeric.dim(t);
    if (n.length !== 2 || n[0] !== n[1])
      throw new Error("numeric: toUpperHessenberg() only works on square matrices");
    var r = n[0], i, a, e, c, f, o = numeric.clone(t), h, u, M, v, m = numeric.identity(r), y;
    for (a = 0; a < r - 2; a++) {
      for (c = Array(r - a - 1), i = a + 1; i < r; i++)
        c[i - a - 1] = o[i][a];
      if (numeric.norm2(c) > 0) {
        for (f = numeric.house(c), h = numeric.getBlock(o, [a + 1, a], [r - 1, r - 1]), u = numeric.tensor(f, numeric.dot(f, h)), i = a + 1; i < r; i++)
          for (M = o[i], v = u[i - a - 1], e = a; e < r; e++) M[e] -= 2 * v[e - a];
        for (h = numeric.getBlock(o, [0, a + 1], [r - 1, r - 1]), u = numeric.tensor(numeric.dot(h, f), f), i = 0; i < r; i++)
          for (M = o[i], v = u[i], e = a + 1; e < r; e++) M[e] -= 2 * v[e - a - 1];
        for (h = Array(r - a - 1), i = a + 1; i < r; i++) h[i - a - 1] = m[i];
        for (u = numeric.tensor(f, numeric.dot(f, h)), i = a + 1; i < r; i++)
          for (y = m[i], v = u[i - a - 1], e = 0; e < r; e++) y[e] -= 2 * v[e];
      }
    }
    return { H: o, Q: m };
  }, numeric.epsilon = 2220446049250313e-31, numeric.QRFrancis = function(p, t) {
    typeof t > "u" && (t = 1e4), p = numeric.clone(p), numeric.clone(p);
    var n = numeric.dim(p), r = n[0], i, a, e, c, f, o, h, u, M, v = numeric.identity(r), m, y, D, _, L, F, x, O, R;
    if (r < 3)
      return { Q: v, B: [[0, r - 1]] };
    var I = numeric.epsilon;
    for (R = 0; R < t; R++) {
      for (x = 0; x < r - 1; x++)
        if (Math.abs(p[x + 1][x]) < I * (Math.abs(p[x][x]) + Math.abs(p[x + 1][x + 1]))) {
          var l = numeric.QRFrancis(numeric.getBlock(p, [0, 0], [x, x]), t), b = numeric.QRFrancis(numeric.getBlock(p, [x + 1, x + 1], [r - 1, r - 1]), t);
          for (D = Array(x + 1), F = 0; F <= x; F++)
            D[F] = v[F];
          for (_ = numeric.dot(l.Q, D), F = 0; F <= x; F++)
            v[F] = _[F];
          for (D = Array(r - x - 1), F = x + 1; F < r; F++)
            D[F - x - 1] = v[F];
          for (_ = numeric.dot(b.Q, D), F = x + 1; F < r; F++)
            v[F] = _[F - x - 1];
          return { Q: v, B: l.B.concat(numeric.add(b.B, x + 1)) };
        }
      if (e = p[r - 2][r - 2], c = p[r - 2][r - 1], f = p[r - 1][r - 2], o = p[r - 1][r - 1], u = e + o, h = e * o - c * f, M = numeric.getBlock(p, [0, 0], [2, 2]), u * u >= 4 * h) {
        var Z, G;
        Z = 0.5 * (u + Math.sqrt(u * u - 4 * h)), G = 0.5 * (u - Math.sqrt(u * u - 4 * h)), M = numeric.add(
          numeric.sub(
            numeric.dot(M, M),
            numeric.mul(M, Z + G)
          ),
          numeric.diag(numeric.rep([3], Z * G))
        );
      } else
        M = numeric.add(
          numeric.sub(
            numeric.dot(M, M),
            numeric.mul(M, u)
          ),
          numeric.diag(numeric.rep([3], h))
        );
      for (i = [M[0][0], M[1][0], M[2][0]], a = numeric.house(i), D = [p[0], p[1], p[2]], _ = numeric.tensor(a, numeric.dot(a, D)), F = 0; F < 3; F++)
        for (y = p[F], L = _[F], O = 0; O < r; O++) y[O] -= 2 * L[O];
      for (D = numeric.getBlock(p, [0, 0], [r - 1, 2]), _ = numeric.tensor(numeric.dot(D, a), a), F = 0; F < r; F++)
        for (y = p[F], L = _[F], O = 0; O < 3; O++) y[O] -= 2 * L[O];
      for (D = [v[0], v[1], v[2]], _ = numeric.tensor(a, numeric.dot(a, D)), F = 0; F < 3; F++)
        for (m = v[F], L = _[F], O = 0; O < r; O++) m[O] -= 2 * L[O];
      var J;
      for (x = 0; x < r - 2; x++) {
        for (O = x; O <= x + 1; O++)
          if (Math.abs(p[O + 1][O]) < I * (Math.abs(p[O][O]) + Math.abs(p[O + 1][O + 1]))) {
            var l = numeric.QRFrancis(numeric.getBlock(p, [0, 0], [O, O]), t), b = numeric.QRFrancis(numeric.getBlock(p, [O + 1, O + 1], [r - 1, r - 1]), t);
            for (D = Array(O + 1), F = 0; F <= O; F++)
              D[F] = v[F];
            for (_ = numeric.dot(l.Q, D), F = 0; F <= O; F++)
              v[F] = _[F];
            for (D = Array(r - O - 1), F = O + 1; F < r; F++)
              D[F - O - 1] = v[F];
            for (_ = numeric.dot(b.Q, D), F = O + 1; F < r; F++)
              v[F] = _[F - O - 1];
            return { Q: v, B: l.B.concat(numeric.add(b.B, O + 1)) };
          }
        for (J = Math.min(r - 1, x + 3), i = Array(J - x), F = x + 1; F <= J; F++)
          i[F - x - 1] = p[F][x];
        for (a = numeric.house(i), D = numeric.getBlock(p, [x + 1, x], [J, r - 1]), _ = numeric.tensor(a, numeric.dot(a, D)), F = x + 1; F <= J; F++)
          for (y = p[F], L = _[F - x - 1], O = x; O < r; O++) y[O] -= 2 * L[O - x];
        for (D = numeric.getBlock(p, [0, x + 1], [r - 1, J]), _ = numeric.tensor(numeric.dot(D, a), a), F = 0; F < r; F++)
          for (y = p[F], L = _[F], O = x + 1; O <= J; O++) y[O] -= 2 * L[O - x - 1];
        for (D = Array(J - x), F = x + 1; F <= J; F++) D[F - x - 1] = v[F];
        for (_ = numeric.tensor(a, numeric.dot(a, D)), F = x + 1; F <= J; F++)
          for (m = v[F], L = _[F - x - 1], O = 0; O < r; O++) m[O] -= 2 * L[O];
      }
    }
    throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");
  }, numeric.eig = function(t, n) {
    var r = numeric.toUpperHessenberg(t), i = numeric.QRFrancis(r.H, n), a = numeric.T, ee = t.length, e, c, f = i.B, o = numeric.dot(i.Q, numeric.dot(r.H, numeric.transpose(i.Q))), h = new a(numeric.dot(i.Q, r.Q)), u, M = f.length, v, m, y, D, _, L, F, x, O, R, I, l, b, Z, G = Math.sqrt;
    for (c = 0; c < M; c++)
      if (e = f[c][0], e !== f[c][1]) {
        if (v = e + 1, m = o[e][e], y = o[e][v], D = o[v][e], _ = o[v][v], y === 0 && D === 0) continue;
        L = -m - _, F = m * _ - y * D, x = L * L - 4 * F, x >= 0 ? (L < 0 ? O = -0.5 * (L - G(x)) : O = -0.5 * (L + G(x)), b = (m - O) * (m - O) + y * y, Z = D * D + (_ - O) * (_ - O), b > Z ? (b = G(b), I = (m - O) / b, l = y / b) : (Z = G(Z), I = D / Z, l = (_ - O) / Z), u = new a([[l, -I], [I, l]]), h.setRows(e, v, u.dot(h.getRows(e, v)))) : (O = -0.5 * L, R = 0.5 * G(-x), b = (m - O) * (m - O) + y * y, Z = D * D + (_ - O) * (_ - O), b > Z ? (b = G(b + R * R), I = (m - O) / b, l = y / b, O = 0, R /= b) : (Z = G(Z + R * R), I = D / Z, l = (_ - O) / Z, O = R / Z, R = 0), u = new a([[l, -I], [I, l]], [[O, R], [R, -O]]), h.setRows(e, v, u.dot(h.getRows(e, v))));
      }
    var J = h.dot(t).dot(h.transjugate()), ee = t.length, se = numeric.T.identity(ee);
    for (v = 0; v < ee; v++)
      if (v > 0)
        for (c = v - 1; c >= 0; c--) {
          var Ae = J.get([c, c]), Se = J.get([v, v]);
          if (numeric.neq(Ae.x, Se.x) || numeric.neq(Ae.y, Se.y))
            O = J.getRow(c).getBlock([c], [v - 1]), R = se.getRow(v).getBlock([c], [v - 1]), se.set([v, c], J.get([c, v]).neg().sub(O.dot(R)).div(Ae.sub(Se)));
          else {
            se.setRow(v, se.getRow(c));
            continue;
          }
        }
    for (v = 0; v < ee; v++)
      O = se.getRow(v), se.setRow(v, O.div(O.norm2()));
    return se = se.transpose(), se = h.transjugate().dot(se), { lambda: J.getDiag(), E: se };
  }, numeric.ccsSparse = function(t) {
    var n = t.length, c, r, i, a, e = [];
    for (i = n - 1; i !== -1; --i) {
      r = t[i];
      for (a in r) {
        for (a = parseInt(a); a >= e.length; ) e[e.length] = 0;
        r[a] !== 0 && e[a]++;
      }
    }
    var c = e.length, f = Array(c + 1);
    for (f[0] = 0, i = 0; i < c; ++i) f[i + 1] = f[i] + e[i];
    var o = Array(f[c]), h = Array(f[c]);
    for (i = n - 1; i !== -1; --i) {
      r = t[i];
      for (a in r)
        r[a] !== 0 && (e[a]--, o[f[a] + e[a]] = i, h[f[a] + e[a]] = r[a]);
    }
    return [f, o, h];
  }, numeric.ccsFull = function(t) {
    var n = t[0], r = t[1], i = t[2], a = numeric.ccsDim(t), e = a[0], c = a[1], f, o, h, u, M = numeric.rep([e, c], 0);
    for (f = 0; f < c; f++)
      for (h = n[f], u = n[f + 1], o = h; o < u; ++o)
        M[r[o]][f] = i[o];
    return M;
  }, numeric.ccsTSolve = function(t, n, r, i, a) {
    var e = t[0], c = t[1], f = t[2], o = e.length - 1, h = Math.max, u = 0;
    typeof i > "u" && (r = numeric.rep([o], 0)), typeof i > "u" && (i = numeric.linspace(0, r.length - 1)), typeof a > "u" && (a = []);
    function M(x) {
      var O;
      if (r[x] === 0) {
        for (r[x] = 1, O = e[x]; O < e[x + 1]; ++O) M(c[O]);
        a[u] = x, ++u;
      }
    }
    var v, m, y, D, _, L, F;
    for (v = i.length - 1; v !== -1; --v)
      M(i[v]);
    for (a.length = u, v = a.length - 1; v !== -1; --v)
      r[a[v]] = 0;
    for (v = i.length - 1; v !== -1; --v)
      m = i[v], r[m] = n[m];
    for (v = a.length - 1; v !== -1; --v) {
      for (m = a[v], y = e[m], D = h(e[m + 1], y), _ = y; _ !== D; ++_)
        if (c[_] === m) {
          r[m] /= f[_];
          break;
        }
      for (F = r[m], _ = y; _ !== D; ++_)
        L = c[_], L !== m && (r[L] -= F * f[_]);
    }
    return r;
  }, numeric.ccsDFS = function(t) {
    this.k = Array(t), this.k1 = Array(t), this.j = Array(t);
  }, numeric.ccsDFS.prototype.dfs = function(t, n, r, i, a, e) {
    var c = 0, f, o = a.length, h = this.k, u = this.k1, M = this.j, v, m;
    if (i[t] === 0)
      for (i[t] = 1, M[0] = t, h[0] = v = n[t], u[0] = m = n[t + 1]; ; )
        if (v >= m) {
          if (a[o] = M[c], c === 0) return;
          ++o, --c, v = h[c], m = u[c];
        } else
          f = e[r[v]], i[f] === 0 ? (i[f] = 1, h[c] = v, ++c, M[c] = f, v = n[f], u[c] = m = n[f + 1]) : ++v;
  }, numeric.ccsLPSolve = function(t, n, r, i, a, e, c) {
    var f = t[0], o = t[1], h = t[2];
    f.length - 1;
    var u = n[0], M = n[1], v = n[2], m, y, D, _, L, F, x, O, R;
    for (y = u[a], D = u[a + 1], i.length = 0, m = y; m < D; ++m)
      c.dfs(e[M[m]], f, o, r, i, e);
    for (m = i.length - 1; m !== -1; --m)
      r[i[m]] = 0;
    for (m = y; m !== D; ++m)
      _ = e[M[m]], r[_] = v[m];
    for (m = i.length - 1; m !== -1; --m) {
      for (_ = i[m], L = f[_], F = f[_ + 1], x = L; x < F; ++x)
        if (e[o[x]] === _) {
          r[_] /= h[x];
          break;
        }
      for (R = r[_], x = L; x < F; ++x)
        O = e[o[x]], O !== _ && (r[O] -= R * h[x]);
    }
    return r;
  }, numeric.ccsLUP1 = function(t, n) {
    var r = t[0].length - 1, i = [numeric.rep([r + 1], 0), [], []], a = [numeric.rep([r + 1], 0), [], []], e = i[0], c = i[1], f = i[2], o = a[0], h = a[1], u = a[2], M = numeric.rep([r], 0), v = numeric.rep([r], 0), m, y, D, _, L, F, x, O = numeric.ccsLPSolve, R = Math.abs, I = numeric.linspace(0, r - 1), l = numeric.linspace(0, r - 1), b = new numeric.ccsDFS(r);
    for (typeof n > "u" && (n = 1), m = 0; m < r; ++m) {
      for (O(i, t, M, v, m, l, b), _ = -1, L = -1, y = v.length - 1; y !== -1; --y)
        D = v[y], !(D <= m) && (F = R(M[D]), F > _ && (L = D, _ = F));
      for (R(M[m]) < n * _ && (y = I[m], _ = I[L], I[m] = _, l[_] = m, I[L] = y, l[y] = L, _ = M[m], M[m] = M[L], M[L] = _), _ = e[m], L = o[m], x = M[m], c[_] = I[m], f[_] = 1, ++_, y = v.length - 1; y !== -1; --y)
        D = v[y], F = M[D], v[y] = 0, M[D] = 0, D <= m ? (h[L] = D, u[L] = F, ++L) : (c[_] = I[D], f[_] = F / x, ++_);
      e[m + 1] = _, o[m + 1] = L;
    }
    for (y = c.length - 1; y !== -1; --y)
      c[y] = l[c[y]];
    return { L: i, U: a, P: I, Pinv: l };
  }, numeric.ccsDFS0 = function(t) {
    this.k = Array(t), this.k1 = Array(t), this.j = Array(t);
  }, numeric.ccsDFS0.prototype.dfs = function(t, n, r, i, a, e, c) {
    var f = 0, o, h = a.length, u = this.k, M = this.k1, v = this.j, m, y;
    if (i[t] === 0)
      for (i[t] = 1, v[0] = t, u[0] = m = n[e[t]], M[0] = y = n[e[t] + 1]; ; ) {
        if (isNaN(m)) throw new Error("Ow!");
        if (m >= y) {
          if (a[h] = e[v[f]], f === 0) return;
          ++h, --f, m = u[f], y = M[f];
        } else
          o = r[m], i[o] === 0 ? (i[o] = 1, u[f] = m, ++f, v[f] = o, o = e[o], m = n[o], M[f] = y = n[o + 1]) : ++m;
      }
  }, numeric.ccsLPSolve0 = function(t, n, r, i, a, e, c, f) {
    var o = t[0], h = t[1], u = t[2];
    o.length - 1;
    var M = n[0], v = n[1], m = n[2], y, D, _, L, F, x, O, R, I;
    for (D = M[a], _ = M[a + 1], i.length = 0, y = D; y < _; ++y)
      f.dfs(v[y], o, h, r, i, e, c);
    for (y = i.length - 1; y !== -1; --y)
      L = i[y], r[c[L]] = 0;
    for (y = D; y !== _; ++y)
      L = v[y], r[L] = m[y];
    for (y = i.length - 1; y !== -1; --y) {
      for (L = i[y], R = c[L], F = o[L], x = o[L + 1], O = F; O < x; ++O)
        if (h[O] === R) {
          r[R] /= u[O];
          break;
        }
      for (I = r[R], O = F; O < x; ++O) r[h[O]] -= I * u[O];
      r[R] = I;
    }
  }, numeric.ccsLUP0 = function(t, n) {
    var r = t[0].length - 1, i = [numeric.rep([r + 1], 0), [], []], a = [numeric.rep([r + 1], 0), [], []], e = i[0], c = i[1], f = i[2], o = a[0], h = a[1], u = a[2], M = numeric.rep([r], 0), v = numeric.rep([r], 0), m, y, D, _, L, F, x, O = numeric.ccsLPSolve0, R = Math.abs, I = numeric.linspace(0, r - 1), l = numeric.linspace(0, r - 1), b = new numeric.ccsDFS0(r);
    for (typeof n > "u" && (n = 1), m = 0; m < r; ++m) {
      for (O(i, t, M, v, m, l, I, b), _ = -1, L = -1, y = v.length - 1; y !== -1; --y)
        D = v[y], !(D <= m) && (F = R(M[I[D]]), F > _ && (L = D, _ = F));
      for (R(M[I[m]]) < n * _ && (y = I[m], _ = I[L], I[m] = _, l[_] = m, I[L] = y, l[y] = L), _ = e[m], L = o[m], x = M[I[m]], c[_] = I[m], f[_] = 1, ++_, y = v.length - 1; y !== -1; --y)
        D = v[y], F = M[I[D]], v[y] = 0, M[I[D]] = 0, D <= m ? (h[L] = D, u[L] = F, ++L) : (c[_] = I[D], f[_] = F / x, ++_);
      e[m + 1] = _, o[m + 1] = L;
    }
    for (y = c.length - 1; y !== -1; --y)
      c[y] = l[c[y]];
    return { L: i, U: a, P: I, Pinv: l };
  }, numeric.ccsLUP = numeric.ccsLUP0, numeric.ccsDim = function(t) {
    return [numeric.sup(t[1]) + 1, t[0].length - 1];
  }, numeric.ccsGetBlock = function(t, n, r) {
    var i = numeric.ccsDim(t), a = i[0], e = i[1];
    typeof n > "u" ? n = numeric.linspace(0, a - 1) : typeof n == "number" && (n = [n]), typeof r > "u" ? r = numeric.linspace(0, e - 1) : typeof r == "number" && (r = [r]);
    var c, f = n.length, o, h = r.length, u, M, v, m = numeric.rep([e], 0), y = [], D = [], _ = [m, y, D], L = t[0], F = t[1], x = t[2], O = numeric.rep([a], 0), R = 0, I = numeric.rep([a], 0);
    for (o = 0; o < h; ++o) {
      M = r[o];
      var l = L[M], b = L[M + 1];
      for (c = l; c < b; ++c)
        u = F[c], I[u] = 1, O[u] = x[c];
      for (c = 0; c < f; ++c)
        v = n[c], I[v] && (y[R] = c, D[R] = O[n[c]], ++R);
      for (c = l; c < b; ++c)
        u = F[c], I[u] = 0;
      m[o + 1] = R;
    }
    return _;
  }, numeric.ccsDot = function(t, n) {
    var r = t[0], i = t[1], a = t[2], e = n[0], c = n[1], f = n[2], o = numeric.ccsDim(t), h = numeric.ccsDim(n), u = o[0];
    o[1];
    var M = h[1], v = numeric.rep([u], 0), m = numeric.rep([u], 0), y = Array(u), D = numeric.rep([M], 0), _ = [], L = [], F = [D, _, L], x, O, R, I, l, b, Z, G, J, ee, se;
    for (R = 0; R !== M; ++R) {
      for (I = e[R], l = e[R + 1], J = 0, O = I; O < l; ++O)
        for (ee = c[O], se = f[O], b = r[ee], Z = r[ee + 1], x = b; x < Z; ++x)
          G = i[x], m[G] === 0 && (y[J] = G, m[G] = 1, J = J + 1), v[G] = v[G] + a[x] * se;
      for (I = D[R], l = I + J, D[R + 1] = l, O = J - 1; O !== -1; --O)
        se = I + O, x = y[O], _[se] = x, L[se] = v[x], m[x] = 0, v[x] = 0;
      D[R + 1] = D[R] + J;
    }
    return F;
  }, numeric.ccsLUPSolve = function(t, n) {
    var r = t.L, i = t.U;
    t.P;
    var a = n[0], e = !1;
    typeof a != "object" && (n = [[0, n.length], numeric.linspace(0, n.length - 1), n], a = n[0], e = !0);
    var c = n[1], f = n[2], o = r[0].length - 1, h = a.length - 1, u = numeric.rep([o], 0), M = Array(o), v = numeric.rep([o], 0), m = Array(o), y = numeric.rep([h + 1], 0), D = [], _ = [], L = numeric.ccsTSolve, F, x, O, R, I, l, b = 0;
    for (F = 0; F < h; ++F) {
      for (I = 0, O = a[F], R = a[F + 1], x = O; x < R; ++x)
        l = t.Pinv[c[x]], m[I] = l, v[l] = f[x], ++I;
      for (m.length = I, L(r, v, u, m, M), x = m.length - 1; x !== -1; --x) v[m[x]] = 0;
      if (L(i, u, v, M, m), e) return v;
      for (x = M.length - 1; x !== -1; --x) u[M[x]] = 0;
      for (x = m.length - 1; x !== -1; --x)
        l = m[x], D[b] = l, _[b] = v[l], v[l] = 0, ++b;
      y[F + 1] = b;
    }
    return [y, D, _];
  }, numeric.ccsbinop = function(t, n) {
    return typeof n > "u" && (n = ""), Function(
      "X",
      "Y",
      `var Xi = X[0], Xj = X[1], Xv = X[2];
var Yi = Y[0], Yj = Y[1], Yv = Y[2];
var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;
var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];
var x = numeric.rep([m],0),y = numeric.rep([m],0);
var xk,yk,zk;
var i,j,j0,j1,k,p=0;
` + n + `for(i=0;i<n;++i) {
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Xj[j];
    x[k] = 1;
    Zj[p] = k;
    ++p;
  }
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Yj[j];
    y[k] = Yv[j];
    if(x[k] === 0) {
      Zj[p] = k;
      ++p;
    }
  }
  Zi[i+1] = p;
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];
  j0 = Zi[i]; j1 = Zi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Zj[j];
    xk = x[k];
    yk = y[k];
` + t + `
    Zv[j] = zk;
  }
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;
}
return [Zi,Zj,Zv];`
    );
  }, function() {
    var k, A, B, C;
    for (k in numeric.ops2)
      isFinite(eval("1" + numeric.ops2[k] + "0")) ? A = "[Y[0],Y[1],numeric." + k + "(X,Y[2])]" : A = "NaN", isFinite(eval("0" + numeric.ops2[k] + "1")) ? B = "[X[0],X[1],numeric." + k + "(X[2],Y)]" : B = "NaN", isFinite(eval("1" + numeric.ops2[k] + "0")) && isFinite(eval("0" + numeric.ops2[k] + "1")) ? C = "numeric.ccs" + k + "MM(X,Y)" : C = "NaN", numeric["ccs" + k + "MM"] = numeric.ccsbinop("zk = xk " + numeric.ops2[k] + "yk;"), numeric["ccs" + k] = Function(
        "X",
        "Y",
        'if(typeof X === "number") return ' + A + `;
if(typeof Y === "number") return ` + B + `;
return ` + C + `;
`
      );
  }(), numeric.ccsScatter = function p(t) {
    var n = t[0], r = t[1], i = t[2], a = numeric.sup(r) + 1, e = n.length, c = numeric.rep([a], 0), f = Array(e), o = Array(e), h = numeric.rep([a], 0), u;
    for (u = 0; u < e; ++u) h[r[u]]++;
    for (u = 0; u < a; ++u) c[u + 1] = c[u] + h[u];
    var M = c.slice(0), v, m;
    for (u = 0; u < e; ++u)
      m = r[u], v = M[m], f[v] = n[u], o[v] = i[u], M[m] = M[m] + 1;
    return [c, f, o];
  }, numeric.ccsGather = function p(t) {
    var n = t[0], r = t[1], i = t[2], a = n.length - 1, e = r.length, c = Array(e), f = Array(e), o = Array(e), h, u, M, v, m;
    for (m = 0, h = 0; h < a; ++h)
      for (M = n[h], v = n[h + 1], u = M; u !== v; ++u)
        f[m] = h, c[m] = r[u], o[m] = i[u], ++m;
    return [c, f, o];
  }, numeric.sdim = function p(t, n, r) {
    if (typeof n > "u" && (n = []), typeof t != "object") return n;
    typeof r > "u" && (r = 0), r in n || (n[r] = 0), t.length > n[r] && (n[r] = t.length);
    var i;
    for (i in t)
      t.hasOwnProperty(i) && p(t[i], n, r + 1);
    return n;
  }, numeric.sclone = function p(t, n, r) {
    typeof n > "u" && (n = 0), typeof r > "u" && (r = numeric.sdim(t).length);
    var i, a = Array(t.length);
    if (n === r - 1) {
      for (i in t)
        t.hasOwnProperty(i) && (a[i] = t[i]);
      return a;
    }
    for (i in t)
      t.hasOwnProperty(i) && (a[i] = p(t[i], n + 1, r));
    return a;
  }, numeric.sdiag = function p(t) {
    var n = t.length, r, i = Array(n), a;
    for (r = n - 1; r >= 1; r -= 2)
      a = r - 1, i[r] = [], i[r][r] = t[r], i[a] = [], i[a][a] = t[a];
    return r === 0 && (i[0] = [], i[0][0] = t[r]), i;
  }, numeric.sidentity = function p(t) {
    return numeric.sdiag(numeric.rep([t], 1));
  }, numeric.stranspose = function p(t) {
    var n = [];
    t.length;
    var r, i, a;
    for (r in t)
      if (t.hasOwnProperty(r)) {
        a = t[r];
        for (i in a)
          a.hasOwnProperty(i) && (typeof n[i] != "object" && (n[i] = []), n[i][r] = a[i]);
      }
    return n;
  }, numeric.sLUP = function p(t, n) {
    throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");
  }, numeric.sdotMM = function p(t, n) {
    var r = t.length;
    n.length;
    var i = numeric.stranspose(n), a = i.length, e, c, f, o, h, u, M = Array(r), v;
    for (f = r - 1; f >= 0; f--) {
      for (v = [], e = t[f], h = a - 1; h >= 0; h--) {
        u = 0, c = i[h];
        for (o in e)
          e.hasOwnProperty(o) && o in c && (u += e[o] * c[o]);
        u && (v[h] = u);
      }
      M[f] = v;
    }
    return M;
  }, numeric.sdotMV = function p(t, n) {
    var r = t.length, i, a, e, c = Array(r), f;
    for (a = r - 1; a >= 0; a--) {
      i = t[a], f = 0;
      for (e in i)
        i.hasOwnProperty(e) && n[e] && (f += i[e] * n[e]);
      f && (c[a] = f);
    }
    return c;
  }, numeric.sdotVM = function p(t, n) {
    var r, i, a, e, c = [];
    for (r in t)
      if (t.hasOwnProperty(r)) {
        a = n[r], e = t[r];
        for (i in a)
          a.hasOwnProperty(i) && (c[i] || (c[i] = 0), c[i] += e * a[i]);
      }
    return c;
  }, numeric.sdotVV = function p(t, n) {
    var r, i = 0;
    for (r in t)
      t[r] && n[r] && (i += t[r] * n[r]);
    return i;
  }, numeric.sdot = function p(t, n) {
    var r = numeric.sdim(t).length, i = numeric.sdim(n).length, a = r * 1e3 + i;
    switch (a) {
      case 0:
        return t * n;
      case 1001:
        return numeric.sdotVV(t, n);
      case 2001:
        return numeric.sdotMV(t, n);
      case 1002:
        return numeric.sdotVM(t, n);
      case 2002:
        return numeric.sdotMM(t, n);
      default:
        throw new Error("numeric.sdot not implemented for tensors of order " + r + " and " + i);
    }
  }, numeric.sscatter = function p(t) {
    var n = t[0].length, r, i, a, e = t.length, c = [], f;
    for (i = n - 1; i >= 0; --i)
      if (t[e - 1][i]) {
        for (f = c, a = 0; a < e - 2; a++)
          r = t[a][i], f[r] || (f[r] = []), f = f[r];
        f[t[a][i]] = t[a + 1][i];
      }
    return c;
  }, numeric.sgather = function p(t, n, r) {
    typeof n > "u" && (n = []), typeof r > "u" && (r = []);
    var i, a, e;
    i = r.length;
    for (a in t)
      if (t.hasOwnProperty(a))
        if (r[i] = parseInt(a), e = t[a], typeof e == "number") {
          if (e) {
            if (n.length === 0)
              for (a = i + 1; a >= 0; --a) n[a] = [];
            for (a = i; a >= 0; --a) n[a].push(r[a]);
            n[i + 1].push(e);
          }
        } else p(e, n, r);
    return r.length > i && r.pop(), n;
  }, numeric.cLU = function p(t) {
    var n = t[0], r = t[1], i = t[2], b = n.length, a = 0, e, c, f, o, h, u;
    for (e = 0; e < b; e++) n[e] > a && (a = n[e]);
    a++;
    var M = Array(a), v = Array(a), m = numeric.rep([a], 1 / 0), y = numeric.rep([a], -1 / 0), F, x, D;
    for (f = 0; f < b; f++)
      e = n[f], c = r[f], c < m[e] && (m[e] = c), c > y[e] && (y[e] = c);
    for (e = 0; e < a - 1; e++)
      y[e] > y[e + 1] && (y[e + 1] = y[e]);
    for (e = a - 1; e >= 1; e--)
      m[e] < m[e - 1] && (m[e - 1] = m[e]);
    var _ = 0, L = 0;
    for (e = 0; e < a; e++)
      v[e] = numeric.rep([y[e] - m[e] + 1], 0), M[e] = numeric.rep([e - m[e]], 0), _ += e - m[e] + 1, L += y[e] - e + 1;
    for (f = 0; f < b; f++)
      e = n[f], v[e][r[f] - m[e]] = i[f];
    for (e = 0; e < a - 1; e++)
      for (o = e - m[e], F = v[e], c = e + 1; m[c] <= e && c < a; c++)
        if (h = e - m[c], u = y[e] - e, x = v[c], D = x[h] / F[o], D) {
          for (f = 1; f <= u; f++)
            x[f + h] -= D * F[f + o];
          M[c][e - m[c]] = D;
        }
    var F = [], x = [], O = [], R = [], I = [], l = [], b, Z, G;
    for (b = 0, Z = 0, e = 0; e < a; e++) {
      for (o = m[e], h = y[e], G = v[e], c = e; c <= h; c++)
        G[c - o] && (F[b] = e, x[b] = c, O[b] = G[c - o], b++);
      for (G = M[e], c = o; c < e; c++)
        G[c - o] && (R[Z] = e, I[Z] = c, l[Z] = G[c - o], Z++);
      R[Z] = e, I[Z] = e, l[Z] = 1, Z++;
    }
    return { U: [F, x, O], L: [R, I, l] };
  }, numeric.cLUsolve = function p(t, n) {
    var r = t.L, i = t.U, a = numeric.clone(n), e = r[0], c = r[1], f = r[2], o = i[0], h = i[1], u = i[2], M = o.length;
    e.length;
    var v = a.length, m, y;
    for (y = 0, m = 0; m < v; m++) {
      for (; c[y] < m; )
        a[m] -= f[y] * a[c[y]], y++;
      y++;
    }
    for (y = M - 1, m = v - 1; m >= 0; m--) {
      for (; h[y] > m; )
        a[m] -= u[y] * a[h[y]], y--;
      a[m] /= u[y], y--;
    }
    return a;
  }, numeric.cgrid = function p(t, n) {
    typeof t == "number" && (t = [t, t]);
    var r = numeric.rep(t, -1), i, a, e;
    if (typeof n != "function")
      switch (n) {
        case "L":
          n = function(c, f) {
            return c >= t[0] / 2 || f < t[1] / 2;
          };
          break;
        default:
          n = function(c, f) {
            return !0;
          };
          break;
      }
    for (e = 0, i = 1; i < t[0] - 1; i++) for (a = 1; a < t[1] - 1; a++)
      n(i, a) && (r[i][a] = e, e++);
    return r;
  }, numeric.cdelsq = function p(t) {
    var n = [[-1, 0], [0, -1], [0, 1], [1, 0]], r = numeric.dim(t), i = r[0], a = r[1], e, c, f, o, h, u = [], M = [], v = [];
    for (e = 1; e < i - 1; e++) for (c = 1; c < a - 1; c++)
      if (!(t[e][c] < 0)) {
        for (f = 0; f < 4; f++)
          o = e + n[f][0], h = c + n[f][1], !(t[o][h] < 0) && (u.push(t[e][c]), M.push(t[o][h]), v.push(-1));
        u.push(t[e][c]), M.push(t[e][c]), v.push(4);
      }
    return [u, M, v];
  }, numeric.cdotMV = function p(t, n) {
    var r, i = t[0], a = t[1], e = t[2], c, f = i.length, o;
    for (o = 0, c = 0; c < f; c++)
      i[c] > o && (o = i[c]);
    for (o++, r = numeric.rep([o], 0), c = 0; c < f; c++)
      r[i[c]] += e[c] * n[a[c]];
    return r;
  }, numeric.Spline = function p(t, n, r, i, a) {
    this.x = t, this.yl = n, this.yr = r, this.kl = i, this.kr = a;
  }, numeric.Spline.prototype._at = function p(f, n) {
    var r = this.x, i = this.yl, a = this.yr, e = this.kl, c = this.kr, f, o, h, u, M = numeric.add, v = numeric.sub, m = numeric.mul;
    o = v(m(e[n], r[n + 1] - r[n]), v(a[n + 1], i[n])), h = M(m(c[n + 1], r[n] - r[n + 1]), v(a[n + 1], i[n])), u = (f - r[n]) / (r[n + 1] - r[n]);
    var y = u * (1 - u);
    return M(M(M(m(1 - u, i[n]), m(u, a[n + 1])), m(o, y * (1 - u))), m(h, y * u));
  }, numeric.Spline.prototype.at = function p(t) {
    if (typeof t == "number") {
      var n = this.x, c = n.length, r, i, a, e = Math.floor;
      for (r = 0, i = c - 1; i - r > 1; )
        a = e((r + i) / 2), n[a] <= t ? r = a : i = a;
      return this._at(t, r);
    }
    var c = t.length, f, o = Array(c);
    for (f = c - 1; f !== -1; --f) o[f] = this.at(t[f]);
    return o;
  }, numeric.Spline.prototype.diff = function p() {
    var t = this.x, n = this.yl, r = this.yr, i = this.kl, a = this.kr, e = n.length, c, f, o, h = i, u = a, M = Array(e), v = Array(e), m = numeric.add, y = numeric.mul, D = numeric.div, _ = numeric.sub;
    for (c = e - 1; c !== -1; --c)
      f = t[c + 1] - t[c], o = _(r[c + 1], n[c]), M[c] = D(m(y(o, 6), y(i[c], -4 * f), y(a[c + 1], -2 * f)), f * f), v[c + 1] = D(m(y(o, -6), y(i[c], 2 * f), y(a[c + 1], 4 * f)), f * f);
    return new numeric.Spline(t, h, u, M, v);
  }, numeric.Spline.prototype.roots = function p() {
    function t(w) {
      return w * w;
    }
    var D = [], n = this.x, r = this.yl, i = this.yr, a = this.kl, e = this.kr;
    typeof r[0] == "number" && (r = [r], i = [i], a = [a], e = [e]);
    var c = r.length, f = n.length - 1, o, h, u, M, v, m, y, D = Array(c), _, L, F, x, O, R, I, l, b, Z, G, J, ee, se, Ae, Se, De = Math.sqrt;
    for (o = 0; o !== c; ++o) {
      for (M = r[o], v = i[o], m = a[o], y = e[o], _ = [], h = 0; h !== f; h++) {
        for (h > 0 && v[h] * M[h] < 0 && _.push(n[h]), b = n[h + 1] - n[h], n[h], x = M[h], O = v[h + 1], L = m[h] / b, F = y[h + 1] / b, l = t(L - F + 3 * (x - O)) + 12 * F * x, R = F + 3 * x + 2 * L - 3 * O, I = 3 * (F + L + 2 * (x - O)), l <= 0 ? (G = R / I, G > n[h] && G < n[h + 1] ? Z = [n[h], G, n[h + 1]] : Z = [n[h], n[h + 1]]) : (G = (R - De(l)) / I, J = (R + De(l)) / I, Z = [n[h]], G > n[h] && G < n[h + 1] && Z.push(G), J > n[h] && J < n[h + 1] && Z.push(J), Z.push(n[h + 1])), se = Z[0], G = this._at(se, h), u = 0; u < Z.length - 1; u++) {
          if (Ae = Z[u + 1], J = this._at(Ae, h), G === 0) {
            _.push(se), se = Ae, G = J;
            continue;
          }
          if (J === 0 || G * J > 0) {
            se = Ae, G = J;
            continue;
          }
          for (var N = 0; Se = (G * Ae - J * se) / (G - J), !(Se <= se || Se >= Ae); )
            if (ee = this._at(Se, h), ee * J > 0)
              Ae = Se, J = ee, N === -1 && (G *= 0.5), N = -1;
            else if (ee * G > 0)
              se = Se, G = ee, N === 1 && (J *= 0.5), N = 1;
            else break;
          _.push(Se), se = Z[u + 1], G = this._at(se, h);
        }
        J === 0 && _.push(Ae);
      }
      D[o] = _;
    }
    return typeof this.yl[0] == "number" ? D[0] : D;
  }, numeric.spline = function p(t, n, r, i) {
    var a = t.length, e = [], c = [], f = [], o, h = numeric.sub, u = numeric.mul, M = numeric.add;
    for (o = a - 2; o >= 0; o--)
      c[o] = t[o + 1] - t[o], f[o] = h(n[o + 1], n[o]);
    (typeof r == "string" || typeof i == "string") && (r = i = "periodic");
    var v = [[], [], []];
    switch (typeof r) {
      case "undefined":
        e[0] = u(3 / (c[0] * c[0]), f[0]), v[0].push(0, 0), v[1].push(0, 1), v[2].push(2 / c[0], 1 / c[0]);
        break;
      case "string":
        e[0] = M(u(3 / (c[a - 2] * c[a - 2]), f[a - 2]), u(3 / (c[0] * c[0]), f[0])), v[0].push(0, 0, 0), v[1].push(a - 2, 0, 1), v[2].push(1 / c[a - 2], 2 / c[a - 2] + 2 / c[0], 1 / c[0]);
        break;
      default:
        e[0] = r, v[0].push(0), v[1].push(0), v[2].push(1);
        break;
    }
    for (o = 1; o < a - 1; o++)
      e[o] = M(u(3 / (c[o - 1] * c[o - 1]), f[o - 1]), u(3 / (c[o] * c[o]), f[o])), v[0].push(o, o, o), v[1].push(o - 1, o, o + 1), v[2].push(1 / c[o - 1], 2 / c[o - 1] + 2 / c[o], 1 / c[o]);
    switch (typeof i) {
      case "undefined":
        e[a - 1] = u(3 / (c[a - 2] * c[a - 2]), f[a - 2]), v[0].push(a - 1, a - 1), v[1].push(a - 2, a - 1), v[2].push(1 / c[a - 2], 2 / c[a - 2]);
        break;
      case "string":
        v[1][v[1].length - 1] = 0;
        break;
      default:
        e[a - 1] = i, v[0].push(a - 1), v[1].push(a - 1), v[2].push(1);
        break;
    }
    typeof e[0] != "number" ? e = numeric.transpose(e) : e = [e];
    var m = Array(e.length);
    if (typeof r == "string")
      for (o = m.length - 1; o !== -1; --o)
        m[o] = numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(v)), e[o]), m[o][a - 1] = m[o][0];
    else
      for (o = m.length - 1; o !== -1; --o)
        m[o] = numeric.cLUsolve(numeric.cLU(v), e[o]);
    return typeof n[0] == "number" ? m = m[0] : m = numeric.transpose(m), new numeric.Spline(t, n, n, m, m);
  }, numeric.fftpow2 = function p(t, n) {
    var r = t.length;
    if (r !== 1) {
      var i = Math.cos, a = Math.sin, e, c, f = Array(r / 2), o = Array(r / 2), h = Array(r / 2), u = Array(r / 2);
      for (c = r / 2, e = r - 1; e !== -1; --e)
        --c, h[c] = t[e], u[c] = n[e], --e, f[c] = t[e], o[c] = n[e];
      p(f, o), p(h, u), c = r / 2;
      var M, v = -6.283185307179586 / r, m, y;
      for (e = r - 1; e !== -1; --e)
        --c, c === -1 && (c = r / 2 - 1), M = v * e, m = i(M), y = a(M), t[e] = f[c] + m * h[c] - y * u[c], n[e] = o[c] + m * u[c] + y * h[c];
    }
  }, numeric._ifftpow2 = function p(t, n) {
    var r = t.length;
    if (r !== 1) {
      var i = Math.cos, a = Math.sin, e, c, f = Array(r / 2), o = Array(r / 2), h = Array(r / 2), u = Array(r / 2);
      for (c = r / 2, e = r - 1; e !== -1; --e)
        --c, h[c] = t[e], u[c] = n[e], --e, f[c] = t[e], o[c] = n[e];
      p(f, o), p(h, u), c = r / 2;
      var M, v = 6.283185307179586 / r, m, y;
      for (e = r - 1; e !== -1; --e)
        --c, c === -1 && (c = r / 2 - 1), M = v * e, m = i(M), y = a(M), t[e] = f[c] + m * h[c] - y * u[c], n[e] = o[c] + m * u[c] + y * h[c];
    }
  }, numeric.ifftpow2 = function p(t, n) {
    numeric._ifftpow2(t, n), numeric.diveq(t, t.length), numeric.diveq(n, n.length);
  }, numeric.convpow2 = function p(t, n, r, i) {
    numeric.fftpow2(t, n), numeric.fftpow2(r, i);
    var a, e = t.length, c, f, o, h;
    for (a = e - 1; a !== -1; --a)
      c = t[a], o = n[a], f = r[a], h = i[a], t[a] = c * f - o * h, n[a] = c * h + o * f;
    numeric.ifftpow2(t, n);
  }, numeric.T.prototype.fft = function p() {
    var t = this.x, n = this.y, r = t.length, i = Math.log, a = i(2), e = Math.ceil(i(2 * r - 1) / a), c = Math.pow(2, e), f = numeric.rep([c], 0), o = numeric.rep([c], 0), h = Math.cos, u = Math.sin, M, v = -3.141592653589793 / r, m, y = numeric.rep([c], 0), D = numeric.rep([c], 0);
    for (M = 0; M < r; M++) y[M] = t[M];
    if (typeof n < "u") for (M = 0; M < r; M++) D[M] = n[M];
    for (f[0] = 1, M = 1; M <= c / 2; M++)
      m = v * M * M, f[M] = h(m), o[M] = u(m), f[c - M] = h(m), o[c - M] = u(m);
    var _ = new numeric.T(y, D), L = new numeric.T(f, o);
    return _ = _.mul(L), numeric.convpow2(_.x, _.y, numeric.clone(L.x), numeric.neg(L.y)), _ = _.mul(L), _.x.length = r, _.y.length = r, _;
  }, numeric.T.prototype.ifft = function p() {
    var t = this.x, n = this.y, r = t.length, i = Math.log, a = i(2), e = Math.ceil(i(2 * r - 1) / a), c = Math.pow(2, e), f = numeric.rep([c], 0), o = numeric.rep([c], 0), h = Math.cos, u = Math.sin, M, v = 3.141592653589793 / r, m, y = numeric.rep([c], 0), D = numeric.rep([c], 0);
    for (M = 0; M < r; M++) y[M] = t[M];
    if (typeof n < "u") for (M = 0; M < r; M++) D[M] = n[M];
    for (f[0] = 1, M = 1; M <= c / 2; M++)
      m = v * M * M, f[M] = h(m), o[M] = u(m), f[c - M] = h(m), o[c - M] = u(m);
    var _ = new numeric.T(y, D), L = new numeric.T(f, o);
    return _ = _.mul(L), numeric.convpow2(_.x, _.y, numeric.clone(L.x), numeric.neg(L.y)), _ = _.mul(L), _.x.length = r, _.y.length = r, _.div(r);
  }, numeric.gradient = function p(t, n) {
    var r = n.length, i = t(n);
    if (isNaN(i)) throw new Error("gradient: f(x) is a NaN!");
    var u = Math.max, a, e = numeric.clone(n), c, f, o = Array(r);
    numeric.div, numeric.sub;
    var h, u = Math.max, M = 1e-3, v = Math.abs, m = Math.min, y, D, _, L = 0, F, x, O;
    for (a = 0; a < r; a++)
      for (var R = u(1e-6 * i, 1e-8); ; ) {
        if (++L, L > 20)
          throw new Error("Numerical gradient fails");
        if (e[a] = n[a] + R, c = t(e), e[a] = n[a] - R, f = t(e), e[a] = n[a], isNaN(c) || isNaN(f)) {
          R /= 16;
          continue;
        }
        if (o[a] = (c - f) / (2 * R), y = n[a] - R, D = n[a], _ = n[a] + R, F = (c - i) / R, x = (i - f) / R, O = u(v(o[a]), v(i), v(c), v(f), v(y), v(D), v(_), 1e-8), h = m(u(v(F - o[a]), v(x - o[a]), v(F - x)) / O, R / O), h > M)
          R /= 16;
        else break;
      }
    return o;
  }, numeric.uncmin = function p(t, n, r, i, a, e, c) {
    var f = numeric.gradient;
    typeof c > "u" && (c = {}), typeof r > "u" && (r = 1e-8), typeof i > "u" && (i = function(te) {
      return f(t, te);
    }), typeof a > "u" && (a = 1e3), n = numeric.clone(n);
    var o = n.length, h = t(n), u, M;
    if (isNaN(h)) throw new Error("uncmin: f(x0) is a NaN!");
    var v = Math.max, m = numeric.norm2;
    r = v(r, numeric.epsilon);
    var y, D, _, L = c.Hinv || numeric.identity(o), F = numeric.dot;
    numeric.inv;
    var x = numeric.sub, O = numeric.add, R = numeric.tensor, I = numeric.div, l = numeric.mul, b = numeric.all, Z = numeric.isFinite, G = numeric.neg, J = 0, ee, se, Ae, Se, De, N, w, j = "";
    for (D = i(n); J < a; ) {
      if (typeof e == "function" && e(J, n, h, D, L)) {
        j = "Callback returned true";
        break;
      }
      if (!b(Z(D))) {
        j = "Gradient has Infinity or NaN";
        break;
      }
      if (y = G(F(L, D)), !b(Z(y))) {
        j = "Search direction has Infinity or NaN";
        break;
      }
      if (w = m(y), w < r) {
        j = "Newton step smaller than tol";
        break;
      }
      for (N = 1, M = F(D, y), se = n; J < a && !(N * w < r); ) {
        if (ee = l(y, N), se = O(n, ee), u = t(se), u - h >= 0.1 * N * M || isNaN(u)) {
          N *= 0.5, ++J;
          continue;
        }
        break;
      }
      if (N * w < r) {
        j = "Line search step size smaller than tol";
        break;
      }
      if (J === a) {
        j = "maxit reached during line search";
        break;
      }
      _ = i(se), Ae = x(_, D), De = F(Ae, ee), Se = F(L, Ae), L = x(
        O(
          L,
          l(
            (De + F(Ae, Se)) / (De * De),
            R(ee, ee)
          )
        ),
        I(O(R(Se, ee), R(ee, Se)), De)
      ), n = se, h = u, D = _, ++J;
    }
    return { solution: n, f: h, gradient: D, invHessian: L, iterations: J, message: j };
  }, numeric.Dopri = function p(t, n, r, i, a, e, c) {
    this.x = t, this.y = n, this.f = r, this.ymid = i, this.iterations = a, this.events = c, this.message = e;
  }, numeric.Dopri.prototype._at = function p(y, n) {
    function r(l) {
      return l * l;
    }
    var i = this, a = i.x, e = i.y, c = i.f, f = i.ymid;
    a.length;
    var o, h, u, M, v, m, y, D, _ = 0.5, L = numeric.add, F = numeric.mul, x = numeric.sub, O, R, I;
    return o = a[n], h = a[n + 1], M = e[n], v = e[n + 1], D = h - o, u = o + _ * D, m = f[n], O = x(c[n], F(M, 1 / (o - u) + 2 / (o - h))), R = x(c[n + 1], F(v, 1 / (h - u) + 2 / (h - o))), I = [
      r(y - h) * (y - u) / r(o - h) / (o - u),
      r(y - o) * r(y - h) / r(o - u) / r(h - u),
      r(y - o) * (y - u) / r(h - o) / (h - u),
      (y - o) * r(y - h) * (y - u) / r(o - h) / (o - u),
      (y - h) * r(y - o) * (y - u) / r(o - h) / (h - u)
    ], L(
      L(
        L(
          L(
            F(M, I[0]),
            F(m, I[1])
          ),
          F(v, I[2])
        ),
        F(O, I[3])
      ),
      F(R, I[4])
    );
  }, numeric.Dopri.prototype.at = function p(t) {
    var n, r, i, a = Math.floor;
    if (typeof t != "number") {
      var e = t.length, c = Array(e);
      for (n = e - 1; n !== -1; --n)
        c[n] = this.at(t[n]);
      return c;
    }
    var f = this.x;
    for (n = 0, r = f.length - 1; r - n > 1; )
      i = a(0.5 * (n + r)), f[i] <= t ? n = i : r = i;
    return this._at(t, n);
  }, numeric.dopri = function p(t, n, r, i, a, e, c) {
    typeof a > "u" && (a = 1e-6), typeof e > "u" && (e = 1e3);
    var f = [t], o = [r], h = [i(t, r)], u, M, v, m, y, D, _ = [], L = 1 / 5, F = [3 / 40, 9 / 40], x = [44 / 45, -56 / 15, 32 / 9], O = [19372 / 6561, -25360 / 2187, 64448 / 6561, -212 / 729], R = [9017 / 3168, -355 / 33, 46732 / 5247, 49 / 176, -5103 / 18656], I = [35 / 384, 0, 500 / 1113, 125 / 192, -2187 / 6784, 11 / 84], l = [
      0.5 * 6025192743 / 30085553152,
      0,
      0.5 * 51252292925 / 65400821598,
      0.5 * -2691868925 / 45128329728,
      0.5 * 187940372067 / 1594534317056,
      0.5 * -1776094331 / 19743644256,
      0.5 * 11237099 / 235043384
    ], b = [1 / 5, 3 / 10, 4 / 5, 8 / 9, 1, 1], Z = [-71 / 57600, 0, 71 / 16695, -71 / 1920, 17253 / 339200, -22 / 525, 1 / 40], G = 0, J, ee, se = (n - t) / 10, Ae = 0, Se = numeric.add, De = numeric.mul, N, w, j = Math.min, te = Math.abs, ie = numeric.norminf, ce = Math.pow, ge = numeric.any, S = numeric.lt, d = numeric.and;
    numeric.sub;
    var E, Q, z, X = new numeric.Dopri(f, o, h, _, -1, "");
    for (typeof c == "function" && (E = c(t, r)); t < n && Ae < e; ) {
      if (++Ae, t + se > n && (se = n - t), u = i(t + b[0] * se, Se(r, De(L * se, h[G]))), M = i(t + b[1] * se, Se(Se(r, De(F[0] * se, h[G])), De(F[1] * se, u))), v = i(t + b[2] * se, Se(Se(Se(r, De(x[0] * se, h[G])), De(x[1] * se, u)), De(x[2] * se, M))), m = i(t + b[3] * se, Se(Se(Se(Se(r, De(O[0] * se, h[G])), De(O[1] * se, u)), De(O[2] * se, M)), De(O[3] * se, v))), y = i(t + b[4] * se, Se(Se(Se(Se(Se(r, De(R[0] * se, h[G])), De(R[1] * se, u)), De(R[2] * se, M)), De(R[3] * se, v)), De(R[4] * se, m))), N = Se(Se(Se(Se(Se(r, De(h[G], se * I[0])), De(M, se * I[2])), De(v, se * I[3])), De(m, se * I[4])), De(y, se * I[5])), D = i(t + se, N), J = Se(Se(Se(Se(Se(De(h[G], se * Z[0]), De(M, se * Z[2])), De(v, se * Z[3])), De(m, se * Z[4])), De(y, se * Z[5])), De(D, se * Z[6])), typeof J == "number" ? w = te(J) : w = ie(J), w > a) {
        if (se = 0.2 * se * ce(a / w, 0.25), t + se === t) {
          X.msg = "Step size became too small";
          break;
        }
        continue;
      }
      if (_[G] = Se(
        Se(
          Se(
            Se(
              Se(
                Se(
                  r,
                  De(h[G], se * l[0])
                ),
                De(M, se * l[2])
              ),
              De(v, se * l[3])
            ),
            De(m, se * l[4])
          ),
          De(y, se * l[5])
        ),
        De(D, se * l[6])
      ), ++G, f[G] = t + se, o[G] = N, h[G] = D, typeof c == "function") {
        var $, he = t, de = t + 0.5 * se, q;
        if (Q = c(de, _[G - 1]), z = d(S(E, 0), S(0, Q)), ge(z) || (he = de, de = t + se, E = Q, Q = c(de, N), z = d(S(E, 0), S(0, Q))), ge(z)) {
          for (var K, ne, fe = 0, le = 1, s = 1; ; ) {
            if (typeof E == "number") q = (s * Q * he - le * E * de) / (s * Q - le * E);
            else
              for (q = de, ee = E.length - 1; ee !== -1; --ee)
                E[ee] < 0 && Q[ee] > 0 && (q = j(q, (s * Q[ee] * he - le * E[ee] * de) / (s * Q[ee] - le * E[ee])));
            if (q <= he || q >= de) break;
            $ = X._at(q, G - 1), ne = c(q, $), K = d(S(E, 0), S(0, ne)), ge(K) ? (de = q, Q = ne, z = K, s = 1, fe === -1 ? le *= 0.5 : le = 1, fe = -1) : (he = q, E = ne, le = 1, fe === 1 ? s *= 0.5 : s = 1, fe = 1);
          }
          return N = X._at(0.5 * (t + q), G - 1), X.f[G] = i(q, $), X.x[G] = q, X.y[G] = $, X.ymid[G - 1] = N, X.events = z, X.iterations = Ae, X;
        }
      }
      t += se, r = N, E = Q, se = j(0.8 * se * ce(a / w, 0.25), 4 * se);
    }
    return X.iterations = Ae, X;
  }, numeric.LU = function(p, t) {
    t = t || !1;
    var n = Math.abs, r, i, a, e, c, f, o, h, u, M = p.length, v = M - 1, m = new Array(M);
    for (t || (p = numeric.clone(p)), a = 0; a < M; ++a) {
      for (o = a, f = p[a], u = n(f[a]), i = a + 1; i < M; ++i)
        e = n(p[i][a]), u < e && (u = e, o = i);
      for (m[a] = o, o != a && (p[a] = p[o], p[o] = f, f = p[a]), c = f[a], r = a + 1; r < M; ++r)
        p[r][a] /= c;
      for (r = a + 1; r < M; ++r) {
        for (h = p[r], i = a + 1; i < v; ++i)
          h[i] -= h[a] * f[i], ++i, h[i] -= h[a] * f[i];
        i === v && (h[i] -= h[a] * f[i]);
      }
    }
    return {
      LU: p,
      P: m
    };
  }, numeric.LUsolve = function p(t, n) {
    var r, i, a = t.LU, e = a.length, c = numeric.clone(n), f = t.P, o, h, u;
    for (r = e - 1; r !== -1; --r) c[r] = n[r];
    for (r = 0; r < e; ++r)
      for (o = f[r], f[r] !== r && (u = c[r], c[r] = c[o], c[o] = u), h = a[r], i = 0; i < r; ++i)
        c[r] -= c[i] * h[i];
    for (r = e - 1; r >= 0; --r) {
      for (h = a[r], i = r + 1; i < e; ++i)
        c[r] -= c[i] * h[i];
      c[r] /= h[r];
    }
    return c;
  }, numeric.solve = function p(t, n, r) {
    return numeric.LUsolve(numeric.LU(t, r), n);
  }, numeric.echelonize = function p(t) {
    var n = numeric.dim(t), r = n[0], i = n[1], a = numeric.identity(r), e = Array(r), c, f, o, h, u, M, v, m, y = Math.abs, D = numeric.diveq;
    for (t = numeric.clone(t), c = 0; c < r; ++c) {
      for (o = 0, u = t[c], M = a[c], f = 1; f < i; ++f) y(u[o]) < y(u[f]) && (o = f);
      for (e[c] = o, D(M, u[o]), D(u, u[o]), f = 0; f < r; ++f) if (f !== c) {
        for (v = t[f], m = v[o], h = i - 1; h !== -1; --h) v[h] -= u[h] * m;
        for (v = a[f], h = r - 1; h !== -1; --h) v[h] -= M[h] * m;
      }
    }
    return { I: a, A: t, P: e };
  }, numeric.__solveLP = function p(t, n, r, i, a, e, c) {
    var f = numeric.sum;
    numeric.log;
    var o = numeric.mul, h = numeric.sub, u = numeric.dot, M = numeric.div, v = numeric.add, m = t.length, y = r.length, D, _ = !1, L = 0, F = 1;
    numeric.transpose(n), numeric.svd;
    var x = numeric.transpose;
    numeric.leq;
    var O = Math.sqrt, R = Math.abs;
    numeric.muleq, numeric.norminf, numeric.any;
    var I = Math.min, l = numeric.all, b = numeric.gt, Z = Array(m), G = Array(y);
    numeric.rep([y], 1);
    var J, ee = numeric.solve, se = h(r, u(n, e)), Ae, Se = u(t, t), De;
    for (Ae = L; Ae < a; ++Ae) {
      var N, w;
      for (N = y - 1; N !== -1; --N) G[N] = M(n[N], se[N]);
      var j = x(G);
      for (N = m - 1; N !== -1; --N) Z[N] = /*x[i]+*/
      f(j[N]);
      F = 0.25 * R(Se / u(t, Z));
      var te = 100 * O(Se / u(Z, Z));
      for ((!isFinite(F) || F > te) && (F = te), De = v(t, o(F, Z)), J = u(j, G), N = m - 1; N !== -1; --N) J[N][N] += 1;
      w = ee(J, M(De, F), !0);
      var ie = M(se, u(n, w)), ce = 1;
      for (N = y - 1; N !== -1; --N) ie[N] < 0 && (ce = I(ce, -0.999 * ie[N]));
      if (D = h(e, o(w, ce)), se = h(r, u(n, D)), !l(b(se, 0))) return { solution: e, message: "", iterations: Ae };
      if (e = D, F < i) return { solution: D, message: "", iterations: Ae };
      if (c) {
        var ge = u(t, De), S = u(n, De);
        for (_ = !0, N = y - 1; N !== -1; --N) if (ge * S[N] < 0) {
          _ = !1;
          break;
        }
      } else
        e[m - 1] >= 0 ? _ = !1 : _ = !0;
      if (_) return { solution: D, message: "Unbounded", iterations: Ae };
    }
    return { solution: e, message: "maximum iteration count exceeded", iterations: Ae };
  }, numeric._solveLP = function p(t, n, r, i, a) {
    var e = t.length, c = r.length, m;
    numeric.sum, numeric.log, numeric.mul;
    var f = numeric.sub, o = numeric.dot;
    numeric.div, numeric.add;
    var h = numeric.rep([e], 0).concat([1]), u = numeric.rep([c, 1], -1), M = numeric.blockMatrix([[n, u]]), v = r, m = numeric.rep([e], 0).concat(Math.max(0, numeric.sup(numeric.neg(r))) + 1), y = numeric.__solveLP(h, M, v, i, a, m, !1), D = numeric.clone(y.solution);
    D.length = e;
    var _ = numeric.inf(f(r, o(n, D)));
    if (_ < 0)
      return { solution: NaN, message: "Infeasible", iterations: y.iterations };
    var L = numeric.__solveLP(t, n, r, i, a - y.iterations, D, !0);
    return L.iterations += y.iterations, L;
  }, numeric.solveLP = function p(t, n, r, i, a, e, c) {
    if (typeof c > "u" && (c = 1e3), typeof e > "u" && (e = numeric.epsilon), typeof i > "u") return numeric._solveLP(t, n, r, e, c);
    var f = i.length, o = i[0].length, h = n.length, u = numeric.echelonize(i), M = numeric.rep([o], 0), v = u.P, m = [], y;
    for (y = v.length - 1; y !== -1; --y) M[v[y]] = 1;
    for (y = o - 1; y !== -1; --y) M[y] === 0 && m.push(y);
    var D = numeric.getRange, _ = numeric.linspace(0, f - 1), L = numeric.linspace(0, h - 1), F = D(i, _, m), x = D(n, L, v), O = D(n, L, m), R = numeric.dot, I = numeric.sub, l = R(x, u.I), b = I(O, R(l, F)), Z = I(r, R(l, a)), G = Array(v.length), J = Array(m.length);
    for (y = v.length - 1; y !== -1; --y) G[y] = t[v[y]];
    for (y = m.length - 1; y !== -1; --y) J[y] = t[m[y]];
    var ee = I(J, R(G, R(u.I, F))), se = numeric._solveLP(ee, b, Z, e, c), Ae = se.solution;
    if (Ae !== Ae) return se;
    var Se = R(u.I, I(a, R(F, Ae))), De = Array(t.length);
    for (y = v.length - 1; y !== -1; --y) De[v[y]] = Se[y];
    for (y = m.length - 1; y !== -1; --y) De[m[y]] = Ae[y];
    return { solution: De, message: se.message, iterations: se.iterations };
  }, numeric.MPStoLP = function p(t) {
    t instanceof String && t.split(`
`);
    var n = 0, r = ["Initial state", "NAME", "ROWS", "COLUMNS", "RHS", "BOUNDS", "ENDATA"], i = t.length, a, e, c, f = 0, o = {}, h = [], u = 0, M = {}, v = 0, m, y = [], D = [], _ = [];
    function L(I) {
      throw new Error("MPStoLP: " + I + `
Line ` + a + ": " + t[a] + `
Current state: ` + r[n] + `
`);
    }
    for (a = 0; a < i; ++a) {
      c = t[a];
      var F = c.match(/\S*/g), x = [];
      for (e = 0; e < F.length; ++e) F[e] !== "" && x.push(F[e]);
      if (x.length !== 0) {
        for (e = 0; e < r.length && c.substr(0, r[e].length) !== r[e]; ++e) ;
        if (e < r.length) {
          if (n = e, e === 1 && (m = x[1]), e === 6) return { name: m, c: y, A: numeric.transpose(D), b: _, rows: o, vars: M };
          continue;
        }
        switch (n) {
          case 0:
          case 1:
            L("Unexpected line");
          case 2:
            switch (x[0]) {
              case "N":
                f === 0 ? f = x[1] : L("Two or more N rows");
                break;
              case "L":
                o[x[1]] = u, h[u] = 1, _[u] = 0, ++u;
                break;
              case "G":
                o[x[1]] = u, h[u] = -1, _[u] = 0, ++u;
                break;
              case "E":
                o[x[1]] = u, h[u] = 0, _[u] = 0, ++u;
                break;
              default:
                L("Parse error " + numeric.prettyPrint(x));
            }
            break;
          case 3:
            M.hasOwnProperty(x[0]) || (M[x[0]] = v, y[v] = 0, D[v] = numeric.rep([u], 0), ++v);
            var O = M[x[0]];
            for (e = 1; e < x.length; e += 2) {
              if (x[e] === f) {
                y[O] = parseFloat(x[e + 1]);
                continue;
              }
              var R = o[x[e]];
              D[O][R] = (h[R] < 0 ? -1 : 1) * parseFloat(x[e + 1]);
            }
            break;
          case 4:
            for (e = 1; e < x.length; e += 2) _[o[x[e]]] = (h[o[x[e]]] < 0 ? -1 : 1) * parseFloat(x[e + 1]);
            break;
          case 5:
            break;
          case 6:
            L("Internal error");
        }
      }
    }
    L("Reached end of file without ENDATA");
  }, numeric.seedrandom = { pow: Math.pow, random: Math.random }, function(p, t, n, r, i, a, e) {
    t.seedrandom = function(M, v) {
      var m = [], y;
      return M = o(f(
        v ? [M, p] : arguments.length ? M : [(/* @__PURE__ */ new Date()).getTime(), p, window],
        3
      ), m), y = new c(m), o(y.S, p), t.random = function() {
        for (var _ = y.g(r), L = e, F = 0; _ < i; )
          _ = (_ + F) * n, L *= n, F = y.g(1);
        for (; _ >= a; )
          _ /= 2, L /= 2, F >>>= 1;
        return (_ + F) / L;
      }, M;
    };
    function c(u) {
      var M, v, m = this, y = u.length, D = 0, _ = m.i = m.j = m.m = 0;
      for (m.S = [], m.c = [], y || (u = [y++]); D < n; )
        m.S[D] = D++;
      for (D = 0; D < n; D++)
        M = m.S[D], _ = h(_ + M + u[D % y]), v = m.S[_], m.S[D] = v, m.S[_] = M;
      m.g = function(F) {
        var x = m.S, O = h(m.i + 1), R = x[O], I = h(m.j + R), l = x[I];
        x[O] = l, x[I] = R;
        for (var b = x[h(R + l)]; --F; )
          O = h(O + 1), R = x[O], I = h(I + R), l = x[I], x[O] = l, x[I] = R, b = b * n + x[h(R + l)];
        return m.i = O, m.j = I, b;
      }, m.g(n);
    }
    function f(u, M, v, m, y) {
      if (v = [], y = typeof u, M && y == "object") {
        for (m in u)
          if (m.indexOf("S") < 5)
            try {
              v.push(f(u[m], M - 1));
            } catch {
            }
      }
      return v.length ? v : u + (y != "string" ? "\0" : "");
    }
    function o(u, M, v, m) {
      for (u += "", v = 0, m = 0; m < u.length; m++)
        M[h(m)] = h((v ^= M[h(m)] * 19) + u.charCodeAt(m));
      u = "";
      for (m in M)
        u += String.fromCharCode(M[m]);
      return u;
    }
    function h(u) {
      return u & n - 1;
    }
    e = t.pow(n, r), i = t.pow(2, i), a = i * 2, o(t.random(), p);
  }(
    [],
    // pool: entropy pool starts empty
    numeric.seedrandom,
    // math: package containing random, pow, and seedrandom
    256,
    // width: each RC4 output is 0 <= x < 256
    6,
    // chunks: at least six RC4 outputs for each double
    52
    // significance: there are 52 significant digits in a double
  ), function(p) {
    function t(f) {
      if (typeof f != "object")
        return f;
      var o = [], h, u = f.length;
      for (h = 0; h < u; h++) o[h + 1] = t(f[h]);
      return o;
    }
    function n(f) {
      if (typeof f != "object")
        return f;
      var o = [], h, u = f.length;
      for (h = 1; h < u; h++) o[h - 1] = n(f[h]);
      return o;
    }
    function r(f, o, h) {
      var u, M, v, m, y;
      for (v = 1; v <= h; v = v + 1) {
        for (f[v][v] = 1 / f[v][v], y = -f[v][v], u = 1; u < v; u = u + 1)
          f[u][v] = y * f[u][v];
        if (m = v + 1, h < m)
          break;
        for (M = m; M <= h; M = M + 1)
          for (y = f[v][M], f[v][M] = 0, u = 1; u <= v; u = u + 1)
            f[u][M] = f[u][M] + y * f[u][v];
      }
    }
    function i(f, o, h, u) {
      var M, v, m, y;
      for (v = 1; v <= h; v = v + 1) {
        for (y = 0, M = 1; M < v; M = M + 1)
          y = y + f[M][v] * u[M];
        u[v] = (u[v] - y) / f[v][v];
      }
      for (m = 1; m <= h; m = m + 1)
        for (v = h + 1 - m, u[v] = u[v] / f[v][v], y = -u[v], M = 1; M < v; M = M + 1)
          u[M] = u[M] + y * f[M][v];
    }
    function a(f, o, h, u) {
      var M, v, m, y, D, _;
      for (v = 1; v <= h; v = v + 1) {
        if (u[1] = v, _ = 0, m = v - 1, m < 1) {
          if (_ = f[v][v] - _, _ <= 0)
            break;
          f[v][v] = Math.sqrt(_);
        } else {
          for (y = 1; y <= m; y = y + 1) {
            for (D = f[y][v], M = 1; M < y; M = M + 1)
              D = D - f[M][v] * f[M][y];
            D = D / f[y][y], f[y][v] = D, _ = _ + D * D;
          }
          if (_ = f[v][v] - _, _ <= 0)
            break;
          f[v][v] = Math.sqrt(_);
        }
        u[1] = 0;
      }
    }
    function e(f, o, h, u, M, v, m, y, D, _, L, F, x, O, R, I) {
      var l, b, Z, G, J, ee, se, Ae, Se, De, N, w, j, te, ie, ce, ge, S, d, E, Q, z, X, $, he, de, q;
      j = Math.min(u, _), Z = 2 * u + j * (j + 5) / 2 + 2 * _ + 1, $ = 1e-60;
      do
        $ = $ + $, he = 1 + 0.1 * $, de = 1 + 0.2 * $;
      while (he <= 1 || de <= 1);
      for (l = 1; l <= u; l = l + 1)
        R[l] = o[l];
      for (l = u + 1; l <= Z; l = l + 1)
        R[l] = 0;
      for (l = 1; l <= _; l = l + 1)
        F[l] = 0;
      if (J = [], I[1] === 0) {
        if (a(f, h, u, J), J[1] !== 0) {
          I[1] = 2;
          return;
        }
        i(f, h, u, o), r(f, h, u);
      } else {
        for (b = 1; b <= u; b = b + 1)
          for (M[b] = 0, l = 1; l <= b; l = l + 1)
            M[b] = M[b] + f[l][b] * o[l];
        for (b = 1; b <= u; b = b + 1)
          for (o[b] = 0, l = b; l <= u; l = l + 1)
            o[b] = o[b] + f[b][l] * M[l];
      }
      for (v[1] = 0, b = 1; b <= u; b = b + 1)
        for (M[b] = o[b], v[1] = v[1] + R[b] * M[b], R[b] = 0, l = b + 1; l <= u; l = l + 1)
          f[l][b] = 0;
      for (v[1] = -v[1] / 2, I[1] = 0, se = u, Ae = se + u, N = Ae + j, Se = N + j + 1, De = Se + j * (j + 1) / 2, te = De + _, l = 1; l <= _; l = l + 1) {
        for (ce = 0, b = 1; b <= u; b = b + 1)
          ce = ce + m[b][l] * m[b][l];
        R[te + l] = Math.sqrt(ce);
      }
      x = 0, O[1] = 0, O[2] = 0;
      function K() {
        for (O[1] = O[1] + 1, Z = De, l = 1; l <= _; l = l + 1) {
          for (Z = Z + 1, ce = -y[l], b = 1; b <= u; b = b + 1)
            ce = ce + m[b][l] * M[b];
          if (Math.abs(ce) < $ && (ce = 0), l > L)
            R[Z] = ce;
          else if (R[Z] = -Math.abs(ce), ce > 0) {
            for (b = 1; b <= u; b = b + 1)
              m[b][l] = -m[b][l];
            y[l] = -y[l];
          }
        }
        for (l = 1; l <= x; l = l + 1)
          R[De + F[l]] = 0;
        for (w = 0, ie = 0, l = 1; l <= _; l = l + 1)
          R[De + l] < ie * R[te + l] && (w = l, ie = R[De + l] / R[te + l]);
        return w === 0 ? 999 : 0;
      }
      function ne() {
        for (l = 1; l <= u; l = l + 1) {
          for (ce = 0, b = 1; b <= u; b = b + 1)
            ce = ce + f[b][l] * m[b][w];
          R[l] = ce;
        }
        for (G = se, l = 1; l <= u; l = l + 1)
          R[G + l] = 0;
        for (b = x + 1; b <= u; b = b + 1)
          for (l = 1; l <= u; l = l + 1)
            R[G + l] = R[G + l] + f[l][b] * R[b];
        for (z = !0, l = x; l >= 1; l = l - 1) {
          for (ce = R[l], Z = Se + l * (l + 3) / 2, G = Z - l, b = l + 1; b <= x; b = b + 1)
            ce = ce - R[Z] * R[Ae + b], Z = Z + b;
          if (ce = ce / R[G], R[Ae + l] = ce, F[l] < L || ce < 0)
            break;
          z = !1, ee = l;
        }
        if (!z)
          for (ge = R[N + ee] / R[Ae + ee], l = 1; l <= x && !(F[l] < L || R[Ae + l] < 0); l = l + 1)
            ie = R[N + l] / R[Ae + l], ie < ge && (ge = ie, ee = l);
        for (ce = 0, l = se + 1; l <= se + u; l = l + 1)
          ce = ce + R[l] * R[l];
        if (Math.abs(ce) <= $) {
          if (z)
            return I[1] = 1, 999;
          for (l = 1; l <= x; l = l + 1)
            R[N + l] = R[N + l] - ge * R[Ae + l];
          return R[N + x + 1] = R[N + x + 1] + ge, 700;
        } else {
          for (ce = 0, l = 1; l <= u; l = l + 1)
            ce = ce + R[se + l] * m[l][w];
          for (S = -R[De + w] / ce, X = !0, z || ge < S && (S = ge, X = !1), l = 1; l <= u; l = l + 1)
            M[l] = M[l] + S * R[se + l], Math.abs(M[l]) < $ && (M[l] = 0);
          for (v[1] = v[1] + S * ce * (S / 2 + R[N + x + 1]), l = 1; l <= x; l = l + 1)
            R[N + l] = R[N + l] - S * R[Ae + l];
          if (R[N + x + 1] = R[N + x + 1] + S, X) {
            for (x = x + 1, F[x] = w, Z = Se + (x - 1) * x / 2 + 1, l = 1; l <= x - 1; l = l + 1)
              R[Z] = R[l], Z = Z + 1;
            if (x === u)
              R[Z] = R[u];
            else {
              for (l = u; l >= x + 1 && !(R[l] === 0 || (d = Math.max(Math.abs(R[l - 1]), Math.abs(R[l])), E = Math.min(Math.abs(R[l - 1]), Math.abs(R[l])), R[l - 1] >= 0 ? ie = Math.abs(d * Math.sqrt(1 + E * E / (d * d))) : ie = -Math.abs(d * Math.sqrt(1 + E * E / (d * d))), d = R[l - 1] / ie, E = R[l] / ie, d === 1)); l = l - 1)
                if (d === 0)
                  for (R[l - 1] = E * ie, b = 1; b <= u; b = b + 1)
                    ie = f[b][l - 1], f[b][l - 1] = f[b][l], f[b][l] = ie;
                else
                  for (R[l - 1] = ie, Q = E / (1 + d), b = 1; b <= u; b = b + 1)
                    ie = d * f[b][l - 1] + E * f[b][l], f[b][l] = Q * (f[b][l - 1] + ie) - f[b][l], f[b][l - 1] = ie;
              R[Z] = R[x];
            }
          } else {
            for (ce = -y[w], b = 1; b <= u; b = b + 1)
              ce = ce + M[b] * m[b][w];
            if (w > L)
              R[De + w] = ce;
            else if (R[De + w] = -Math.abs(ce), ce > 0) {
              for (b = 1; b <= u; b = b + 1)
                m[b][w] = -m[b][w];
              y[w] = -y[w];
            }
            return 700;
          }
        }
        return 0;
      }
      function fe() {
        if (Z = Se + ee * (ee + 1) / 2 + 1, G = Z + ee, R[G] === 0 || (d = Math.max(Math.abs(R[G - 1]), Math.abs(R[G])), E = Math.min(Math.abs(R[G - 1]), Math.abs(R[G])), R[G - 1] >= 0 ? ie = Math.abs(d * Math.sqrt(1 + E * E / (d * d))) : ie = -Math.abs(d * Math.sqrt(1 + E * E / (d * d))), d = R[G - 1] / ie, E = R[G] / ie, d === 1))
          return 798;
        if (d === 0) {
          for (l = ee + 1; l <= x; l = l + 1)
            ie = R[G - 1], R[G - 1] = R[G], R[G] = ie, G = G + l;
          for (l = 1; l <= u; l = l + 1)
            ie = f[l][ee], f[l][ee] = f[l][ee + 1], f[l][ee + 1] = ie;
        } else {
          for (Q = E / (1 + d), l = ee + 1; l <= x; l = l + 1)
            ie = d * R[G - 1] + E * R[G], R[G] = Q * (R[G - 1] + ie) - R[G], R[G - 1] = ie, G = G + l;
          for (l = 1; l <= u; l = l + 1)
            ie = d * f[l][ee] + E * f[l][ee + 1], f[l][ee + 1] = Q * (f[l][ee] + ie) - f[l][ee + 1], f[l][ee] = ie;
        }
        return 0;
      }
      function le() {
        for (G = Z - ee, l = 1; l <= ee; l = l + 1)
          R[G] = R[Z], Z = Z + 1, G = G + 1;
        return R[N + ee] = R[N + ee + 1], F[ee] = F[ee + 1], ee = ee + 1, ee < x ? 797 : 0;
      }
      function s() {
        return R[N + x] = R[N + x + 1], R[N + x + 1] = 0, F[x] = 0, x = x - 1, O[2] = O[2] + 1, 0;
      }
      for (q = 0; ; ) {
        if (q = K(), q === 999)
          return;
        for (; q = ne(), q !== 0; ) {
          if (q === 999)
            return;
          if (q === 700)
            if (ee === x)
              s();
            else {
              for (; fe(), q = le(), q === 797; )
                ;
              s();
            }
        }
      }
    }
    function c(f, o, h, u, M, v) {
      f = t(f), o = t(o), h = t(h);
      var m, y, D, _, L, F = [], x = [], O = [], R = [], I = [], l;
      if (M = M || 0, v = v ? t(v) : [void 0, 0], u = u ? t(u) : [], y = f.length - 1, D = h[1].length - 1, !u)
        for (m = 1; m <= D; m = m + 1)
          u[m] = 0;
      for (m = 1; m <= D; m = m + 1)
        x[m] = 0;
      for (_ = 0, L = Math.min(y, D), m = 1; m <= y; m = m + 1)
        O[m] = 0;
      for (F[1] = 0, m = 1; m <= 2 * y + L * (L + 5) / 2 + 2 * D + 1; m = m + 1)
        R[m] = 0;
      for (m = 1; m <= 2; m = m + 1)
        I[m] = 0;
      return e(
        f,
        o,
        y,
        y,
        O,
        F,
        h,
        u,
        y,
        D,
        M,
        x,
        _,
        I,
        R,
        v
      ), l = "", v[1] === 1 && (l = "constraints are inconsistent, no solution!"), v[1] === 2 && (l = "matrix D in quadratic function is not positive definite!"), {
        solution: n(O),
        value: n(F),
        unconstrained_solution: n(o),
        iterations: n(I),
        iact: n(x),
        message: l
      };
    }
    p.solveQP = c;
  }(numeric), numeric.svd = function p(t) {
    var n, r = numeric.epsilon, i = 1e-64 / r, a = 50, e = 0, c = 0, f = 0, o = 0, h = 0, u = numeric.clone(t), M = u.length, v = u[0].length;
    if (M < v) throw "Need more rows than columns";
    var m = new Array(v), y = new Array(v);
    for (c = 0; c < v; c++) m[c] = y[c] = 0;
    var D = numeric.rep([v, v], 0);
    function _(J, ee) {
      return J = Math.abs(J), ee = Math.abs(ee), J > ee ? J * Math.sqrt(1 + ee * ee / J / J) : ee == 0 ? J : ee * Math.sqrt(1 + J * J / ee / ee);
    }
    var L = 0, F = 0, x = 0, O = 0, R = 0, I = 0, l = 0;
    for (c = 0; c < v; c++) {
      for (m[c] = F, l = 0, h = c + 1, f = c; f < M; f++)
        l += u[f][c] * u[f][c];
      if (l <= i)
        F = 0;
      else
        for (L = u[c][c], F = Math.sqrt(l), L >= 0 && (F = -F), x = L * F - l, u[c][c] = L - F, f = h; f < v; f++) {
          for (l = 0, o = c; o < M; o++)
            l += u[o][c] * u[o][f];
          for (L = l / x, o = c; o < M; o++)
            u[o][f] += L * u[o][c];
        }
      for (y[c] = F, l = 0, f = h; f < v; f++)
        l = l + u[c][f] * u[c][f];
      if (l <= i)
        F = 0;
      else {
        for (L = u[c][c + 1], F = Math.sqrt(l), L >= 0 && (F = -F), x = L * F - l, u[c][c + 1] = L - F, f = h; f < v; f++) m[f] = u[c][f] / x;
        for (f = h; f < M; f++) {
          for (l = 0, o = h; o < v; o++)
            l += u[f][o] * u[c][o];
          for (o = h; o < v; o++)
            u[f][o] += l * m[o];
        }
      }
      R = Math.abs(y[c]) + Math.abs(m[c]), R > O && (O = R);
    }
    for (c = v - 1; c != -1; c += -1) {
      if (F != 0) {
        for (x = F * u[c][c + 1], f = h; f < v; f++)
          D[f][c] = u[c][f] / x;
        for (f = h; f < v; f++) {
          for (l = 0, o = h; o < v; o++)
            l += u[c][o] * D[o][f];
          for (o = h; o < v; o++)
            D[o][f] += l * D[o][c];
        }
      }
      for (f = h; f < v; f++)
        D[c][f] = 0, D[f][c] = 0;
      D[c][c] = 1, F = m[c], h = c;
    }
    for (c = v - 1; c != -1; c += -1) {
      for (h = c + 1, F = y[c], f = h; f < v; f++)
        u[c][f] = 0;
      if (F != 0) {
        for (x = u[c][c] * F, f = h; f < v; f++) {
          for (l = 0, o = h; o < M; o++) l += u[o][c] * u[o][f];
          for (L = l / x, o = c; o < M; o++) u[o][f] += L * u[o][c];
        }
        for (f = c; f < M; f++) u[f][c] = u[f][c] / F;
      } else
        for (f = c; f < M; f++) u[f][c] = 0;
      u[c][c] += 1;
    }
    for (r = r * O, o = v - 1; o != -1; o += -1)
      for (var b = 0; b < a; b++) {
        var Z = !1;
        for (h = o; h != -1; h += -1) {
          if (Math.abs(m[h]) <= r) {
            Z = !0;
            break;
          }
          if (Math.abs(y[h - 1]) <= r)
            break;
        }
        if (!Z) {
          e = 0, l = 1;
          var G = h - 1;
          for (c = h; c < o + 1 && (L = l * m[c], m[c] = e * m[c], !(Math.abs(L) <= r)); c++)
            for (F = y[c], x = _(L, F), y[c] = x, e = F / x, l = -L / x, f = 0; f < M; f++)
              R = u[f][G], I = u[f][c], u[f][G] = R * e + I * l, u[f][c] = -R * l + I * e;
        }
        if (I = y[o], h == o) {
          if (I < 0)
            for (y[o] = -I, f = 0; f < v; f++)
              D[f][o] = -D[f][o];
          break;
        }
        if (b >= a - 1)
          throw "Error: no convergence.";
        for (O = y[h], R = y[o - 1], F = m[o - 1], x = m[o], L = ((R - I) * (R + I) + (F - x) * (F + x)) / (2 * x * R), F = _(L, 1), L < 0 ? L = ((O - I) * (O + I) + x * (R / (L - F) - x)) / O : L = ((O - I) * (O + I) + x * (R / (L + F) - x)) / O, e = 1, l = 1, c = h + 1; c < o + 1; c++) {
          for (F = m[c], R = y[c], x = l * F, F = e * F, I = _(L, x), m[c - 1] = I, e = L / I, l = x / I, L = O * e + F * l, F = -O * l + F * e, x = R * l, R = R * e, f = 0; f < v; f++)
            O = D[f][c - 1], I = D[f][c], D[f][c - 1] = O * e + I * l, D[f][c] = -O * l + I * e;
          for (I = _(L, x), y[c - 1] = I, e = L / I, l = x / I, L = e * F + l * R, O = -l * F + e * R, f = 0; f < M; f++)
            R = u[f][c - 1], I = u[f][c], u[f][c - 1] = R * e + I * l, u[f][c] = -R * l + I * e;
        }
        m[h] = 0, m[o] = L, y[o] = O;
      }
    for (c = 0; c < y.length; c++)
      y[c] < r && (y[c] = 0);
    for (c = 0; c < v; c++)
      for (f = c - 1; f >= 0; f--)
        if (y[f] < y[c]) {
          for (e = y[f], y[f] = y[c], y[c] = e, o = 0; o < u.length; o++)
            n = u[o][c], u[o][c] = u[o][f], u[o][f] = n;
          for (o = 0; o < D.length; o++)
            n = D[o][c], D[o][c] = D[o][f], D[o][f] = n;
          c = f;
        }
    return { U: u, S: y, V: D };
  };
})(numeric1_2_6);
var numeric$1 = numeric1_2_6, forwardSHT = function(p, t, n, r) {
  var i = t.length, a = (p + 1) * (p + 1), e, c = [,];
  a > i && console.log("The SHT degree is too high for the number of data points"), n == 0 && (t = convertCart2Sph(t));
  for (var f = 0; f < t.length; f++)
    c[f] = t[f][2];
  Y_N = computeRealSH(p, t), r == 0 ? e = numeric$1.mul(1 / i, Y_N) : e = pinv_direct(numeric$1.transpose(Y_N));
  var o = numeric$1.dotMV(e, c);
  return o;
}, convertCart2Sph = function(p, t) {
  for (var n, r, i, a = new Array(p.length), e = 0; e < p.length; e++)
    n = Math.atan2(p[e][1], p[e][0]), r = Math.atan2(p[e][2], Math.sqrt(p[e][0] * p[e][0] + p[e][1] * p[e][1])), t == 1 ? a[e] = [n, r] : (i = Math.sqrt(p[e][0] * p[e][0] + p[e][1] * p[e][1] + p[e][2] * p[e][2]), a[e] = [n, r, i]);
  return a;
}, computeRealSH = function(p, t) {
  for (var n = new Array(t.length), r = new Array(t.length), i = 0; i < t.length; i++)
    n[i] = t[i][0], r[i] = t[i][1];
  var a = new Array(2 * p + 1);
  n.length;
  for (var e = (p + 1) * (p + 1), c = 0, f = 0, o, h = numeric$1.sin(r), u = 0, M = new Array(e), v, m, y, D, i = 0; i < 2 * p + 1; i++) a[i] = factorial(i);
  for (var _ = 0; _ < p + 1; _++) {
    if (_ == 0) {
      var L = new Array(n.length);
      L.fill(1), M[_] = L, u = 1;
    } else {
      o = recurseLegendrePoly(_, h, c, f), v = Math.sqrt(2 * _ + 1);
      for (var F = 0; F < _ + 1; F++)
        F == 0 ? M[u + _] = numeric$1.mul(v, o[F]) : (m = v * Math.sqrt(2 * a[_ - F] / a[_ + F]), y = numeric$1.cos(numeric$1.mul(F, n)), D = numeric$1.sin(numeric$1.mul(F, n)), M[u + _ - F] = numeric$1.mul(m, numeric$1.mul(o[F], D)), M[u + _ + F] = numeric$1.mul(m, numeric$1.mul(o[F], y)));
      u = u + 2 * _ + 1;
    }
    f = c, c = o;
  }
  return M;
}, factorial = function(p) {
  return p === 0 ? 1 : p * factorial(p - 1);
}, recurseLegendrePoly = function(p, t, n, r) {
  var i = new Array(p + 1);
  switch (p) {
    case 1:
      var h = numeric$1.mul(t, t), a = t, e = numeric$1.sqrt(numeric$1.sub(1, h));
      i[0] = a, i[1] = e;
      break;
    case 2:
      var h = numeric$1.mul(t, t), c = numeric$1.mul(3, h);
      c = numeric$1.sub(c, 1), c = numeric$1.div(c, 2);
      var f = numeric$1.sub(1, h);
      f = numeric$1.sqrt(f), f = numeric$1.mul(3, f), f = numeric$1.mul(f, t);
      var o = numeric$1.sub(1, h);
      o = numeric$1.mul(3, o), i[0] = c, i[1] = f, i[2] = o;
      break;
    default:
      var h = numeric$1.mul(t, t), u = numeric$1.sub(1, h), M = 2 * p - 1, v = 1;
      if (M % 2 == 0)
        for (var m = 1; m < M / 2 + 1; m++) v = v * 2 * m;
      else
        for (var m = 1; m < (M + 1) / 2 + 1; m++) v = v * (2 * m - 1);
      i[p] = numeric$1.mul(v, numeric$1.pow(u, p / 2)), i[p - 1] = numeric$1.mul(2 * p - 1, numeric$1.mul(t, n[p - 1]));
      for (var y = 0; y < p - 1; y++) {
        var D = numeric$1.mul(2 * p - 1, numeric$1.mul(t, n[y])), _ = numeric$1.mul(p + y - 1, r[y]);
        i[y] = numeric$1.div(numeric$1.sub(D, _), p - y);
      }
  }
  return i;
}, pinv_direct = function(p) {
  var t = numeric$1.transpose(p);
  return numeric$1.dot(numeric$1.inv(numeric$1.dot(t, p)), t);
}, getSHrotMtx = function(p, t) {
  var n = (t + 1) * (t + 1), r = numeric$1.rep([n, n], 0);
  r[0][0] = 1;
  var i = numeric$1.rep([3, 3], 0);
  i[0][0] = p[1][1], i[0][1] = p[1][2], i[0][2] = p[1][0], i[1][0] = p[2][1], i[1][1] = p[2][2], i[1][2] = p[2][0], i[2][0] = p[0][1], i[2][1] = p[0][2], i[2][2] = p[0][0], r = numeric$1.setBlock(r, [1, 1], [3, 3], i);
  for (var a = i, e = 3, c = 2; c < t + 1; c++) {
    for (var f = numeric$1.rep([2 * c + 1, 2 * c + 1], 0), o = -c; o < c + 1; o++)
      for (var h = -c; h < c + 1; h++) {
        var u, M, v, m, y;
        o == 0 ? u = 1 : u = 0, Math.abs(h) == c ? M = 2 * c * (2 * c - 1) : M = c * c - h * h, v = Math.sqrt((c * c - o * o) / M), m = Math.sqrt((1 + u) * (c + Math.abs(o) - 1) * (c + Math.abs(o)) / M) * (1 - 2 * u) * 0.5, y = Math.sqrt((c - Math.abs(o) - 1) * (c - Math.abs(o)) / M) * (1 - u) * -0.5, v != 0 && (v = v * U(c, o, h, i, a)), m != 0 && (m = m * V(c, o, h, i, a)), y != 0 && (y = y * W(c, o, h, i, a)), f[o + c][h + c] = v + m + y;
      }
    r = numeric$1.setBlock(r, [e + 1, e + 1], [e + 2 * c + 1, e + 2 * c + 1], f), a = f, e = e + 2 * c + 1;
  }
  return r;
};
function U(p, t, n, r, i) {
  return P(0, p, t, n, r, i);
}
function V(p, t, n, r, i) {
  var a, e, c, f;
  return t == 0 ? (a = P(1, p, 1, n, r, i), e = P(-1, p, -1, n, r, i), c = a + e) : t > 0 ? (t == 1 ? f = 1 : f = 0, a = P(1, p, t - 1, n, r, i), e = P(-1, p, -t + 1, n, r, i), c = a * Math.sqrt(1 + f) - e * (1 - f)) : (t == -1 ? f = 1 : f = 0, a = P(1, p, t + 1, n, r, i), e = P(-1, p, -t - 1, n, r, i), c = a * (1 - f) + e * Math.sqrt(1 + f)), c;
}
function W(p, t, n, r, i) {
  var a, e, c;
  return t == 0 ? console.error("should not be called") : t > 0 ? (a = P(1, p, t + 1, n, r, i), e = P(-1, p, -t - 1, n, r, i), c = a + e) : (a = P(1, p, t - 1, n, r, i), e = P(-1, p, -t + 1, n, r, i), c = a - e), c;
}
function P(p, t, n, r, i, a) {
  var e, c, f, o;
  return e = i[p + 1][2], c = i[p + 1][0], f = i[p + 1][1], r == -t ? o = e * a[n + t - 1][0] + c * a[n + t - 1][2 * t - 2] : r == t ? o = e * a[n + t - 1][2 * t - 2] - c * a[n + t - 1][0] : o = f * a[n + t - 1][r + t - 1], o;
}
var yawPitchRoll2Rzyx = function(p, t, n) {
  var r, i, a;
  n == 0 ? r = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : r = [[1, 0, 0], [0, Math.cos(n), Math.sin(n)], [0, -Math.sin(n), Math.cos(n)]], t == 0 ? i = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : i = [[Math.cos(t), 0, -Math.sin(t)], [0, 1, 0], [Math.sin(t), 0, Math.cos(t)]], p == 0 ? a = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : a = [[Math.cos(p), Math.sin(p), 0], [-Math.sin(p), Math.cos(p), 0], [0, 0, 1]];
  var e = numeric$1.dotMMsmall(i, a);
  return e = numeric$1.dotMMsmall(r, e), e;
}, forwardSHT_1 = forwardSHT, convertCart2Sph_1 = convertCart2Sph, computeRealSH_1 = computeRealSH, factorial_1 = factorial, recurseLegendrePoly_1 = recurseLegendrePoly, getSHrotMtx_1 = getSHrotMtx, yawPitchRoll2Rzyx_1 = yawPitchRoll2Rzyx, jshlib = require("spherical-harmonic-transform"), convexhull = require("convex-hull");
const numeric = {
  // Element-wise multiplication: array * scalar or scalar * array
  mul: function(p, t) {
    return Array.isArray(p) && typeof t == "number" ? p.map((n) => n * t) : typeof p == "number" && Array.isArray(t) ? t.map((n) => p * n) : Array.isArray(p) && Array.isArray(t) ? p.map((n, r) => n * t[r]) : p * t;
  },
  // Element-wise division: array / scalar
  div: function(p, t) {
    return Array.isArray(p) ? p.map((n) => n / t) : p / t;
  },
  // Element-wise sine
  sin: function(p) {
    return p.map((t) => Math.sin(t));
  },
  // Element-wise cosine
  cos: function(p) {
    return p.map((t) => Math.cos(t));
  },
  // Element-wise power
  pow: function(p, t) {
    return p.map((n) => Math.pow(n, t));
  },
  // Sum of array elements
  sum: function(p) {
    return p.reduce((t, n) => t + n, 0);
  },
  // Vector dot product
  dotVV: function(p, t) {
    let n = 0;
    for (let r = 0; r < p.length; r++)
      n += p[r] * t[r];
    return n;
  },
  // Element-wise subtraction
  sub: function(p, t) {
    return Array.isArray(p) && Array.isArray(t) ? p.map((n, r) => n - t[r]) : p - t;
  },
  // Element-wise rounding
  round: function(p) {
    return Array.isArray(p) ? p.map((t) => Math.round(t)) : Math.round(p);
  },
  // Element-wise modulo
  mod: function(p, t) {
    return Array.isArray(p) ? p.map((n) => (n % t + t) % t) : (p % t + t) % t;
  },
  // Element-wise addition (supports multiple arguments)
  add: function(...p) {
    if (p.length === 0) return 0;
    let t = p[0];
    for (let n = 1; n < p.length; n++) {
      const r = p[n];
      Array.isArray(t) && Array.isArray(r) ? t = t.map((i, a) => i + r[a]) : Array.isArray(t) && typeof r == "number" ? t = t.map((i) => i + r) : typeof t == "number" && Array.isArray(r) ? t = r.map((i) => i + t) : t = t + r;
    }
    return t;
  },
  // Matrix transpose
  transpose: function(p) {
    const t = p.length, n = p[0].length, r = new Array(n);
    for (let i = 0; i < n; i++) {
      r[i] = new Array(t);
      for (let a = 0; a < t; a++)
        r[i][a] = p[a][i];
    }
    return r;
  },
  // Matrix-matrix multiplication (for small matrices)
  dotMMsmall: function(p, t) {
    const n = p.length, r = p[0].length, i = t[0].length, a = new Array(n);
    for (let e = 0; e < n; e++) {
      a[e] = new Array(i);
      for (let c = 0; c < i; c++) {
        let f = 0;
        for (let o = 0; o < r; o++)
          f += p[e][o] * t[o][c];
        a[e][c] = f;
      }
    }
    return a;
  },
  // Matrix inversion (for 3x3 matrices, used in VBAP)
  inv: function(p) {
    const t = p.length, n = new Array(t);
    for (let i = 0; i < t; i++) {
      n[i] = new Array(2 * t);
      for (let a = 0; a < t; a++)
        n[i][a] = p[i][a], n[i][a + t] = i === a ? 1 : 0;
    }
    for (let i = 0; i < t; i++) {
      let a = i;
      for (let c = i + 1; c < t; c++)
        Math.abs(n[c][i]) > Math.abs(n[a][i]) && (a = c);
      if ([n[i], n[a]] = [n[a], n[i]], Math.abs(n[i][i]) < 1e-10)
        throw new Error("Matrix is singular");
      const e = n[i][i];
      for (let c = 0; c < 2 * t; c++)
        n[i][c] /= e;
      for (let c = 0; c < t; c++)
        if (c !== i) {
          const f = n[c][i];
          for (let o = 0; o < 2 * t; o++)
            n[c][o] -= f * n[i][o];
        }
    }
    const r = new Array(t);
    for (let i = 0; i < t; i++) {
      r[i] = new Array(t);
      for (let a = 0; a < t; a++)
        r[i][a] = n[i][a + t];
    }
    return r;
  },
  // Identity matrix
  identity: function(p) {
    const t = new Array(p);
    for (let n = 0; n < p; n++) {
      t[n] = new Array(p);
      for (let r = 0; r < p; r++)
        t[n][r] = n === r ? 1 : 0;
    }
    return t;
  },
  // Diagonal matrix from vector
  diag: function(p) {
    const t = p.length, n = new Array(t);
    for (let r = 0; r < t; r++) {
      n[r] = new Array(t);
      for (let i = 0; i < t; i++)
        n[r][i] = r === i ? p[r] : 0;
    }
    return n;
  },
  // General dot product (matrix-matrix, matrix-vector, vector-vector)
  dot: function(p, t) {
    if (!Array.isArray(p[0]) && !Array.isArray(t[0]))
      return numeric.dotVV(p, t);
    if (Array.isArray(p[0]) && !Array.isArray(t[0])) {
      const e = p.length, c = p[0].length, f = new Array(e);
      for (let o = 0; o < e; o++) {
        let h = 0;
        for (let u = 0; u < c; u++)
          h += p[o][u] * t[u];
        f[o] = h;
      }
      return f;
    }
    const n = p.length, r = p[0].length, i = t[0].length, a = new Array(n);
    for (let e = 0; e < n; e++) {
      a[e] = new Array(i);
      for (let c = 0; c < i; c++) {
        let f = 0;
        for (let o = 0; o < r; o++)
          f += p[e][o] * t[o][c];
        a[e][c] = f;
      }
    }
    return a;
  }
};
function deg2rad(p) {
  var t = [], n = Math.PI / 180;
  for (let r = 0; r < p.length; r++)
    p[0].length == 3 ? t.push([
      p[r][0] * n,
      p[r][1] * n,
      p[r][2]
    ]) : p[0].length == 2 && t.push([
      p[r][0] * n,
      p[r][1] * n
    ]);
  return t;
}
function rad2deg(p) {
  var t = [], n = 180 / Math.PI;
  for (let r = 0; r < p.length; r++)
    p[0].length == 3 ? t.push([
      p[r][0] * n,
      p[r][1] * n,
      p[r][2]
    ]) : p[0].length == 2 && t.push([
      p[r][0] * n,
      p[r][1] * n
    ]);
  return t;
}
function getColumn(p, t) {
  return p.map(function(n) {
    return n[t];
  });
}
function sampleCircle(p) {
  for (var t = [], n = 360 / p, r = 0, i = 0; i < p; i++)
    t.push([r, 0, 1]), r += n;
  return t;
}
function getCircHarmonics(p, t) {
  var n = p, r = 2 * n + 1, i = t.length, a = new Array(r), e = new Array(i);
  t = numeric.mul(t, Math.PI / 180), e.fill(1 / Math.sqrt(2 * Math.PI)), a[0] = e;
  for (var c = 0; c < n; c++)
    a[2 * c + 1] = numeric.div(numeric.sin(numeric.mul(-(c + 1), t)), Math.sqrt(Math.PI)), a[2 * c + 2] = numeric.div(numeric.cos(numeric.mul(c + 1, t)), Math.sqrt(Math.PI));
  return a;
}
function getAmbisonicDecMtx(p, t) {
  var n = deg2rad(p), r = jshlib.convertSph2Cart(n), i = convexhull(r), a = i.length, e = n.length, c = new Array(a);
  for (let m = 0; m < a; m++) {
    let y = new Array(3);
    for (let L = 0; L < 3; L++)
      y[L] = r[i[m][L]];
    let D = numeric.inv(y), _ = [];
    for (let L = 0; L < 3; L++)
      for (let F = 0; F < 3; F++)
        _.push(D[F][L]);
    c[m] = _;
  }
  var f = getTdesign(2 * t), o = deg2rad(f), h = vbap3(o, i, c, e);
  h = numeric.transpose(h);
  var u = jshlib.computeRealSH(t, o);
  u = numeric.transpose(u);
  var M = o.length, v = numeric.dotMMsmall(h, u);
  return v = numeric.mul(1 / M, v), v;
}
var vbap3 = function(p, t, n, r) {
  var i = p.length, a = r, e = t.length;
  function c(h) {
    return Math.min.apply(null, h);
  }
  var f = new Array(i), o = jshlib.convertSph2Cart(p);
  for (let h = 0; h < i; h++) {
    let u = o[h], M = new Array(a);
    M.fill(0);
    for (let y = 0; y < e; y++) {
      let D = [], _ = [n[y][0], n[y][1], n[y][2]];
      if (D[0] = numeric.dotVV(_, u), _ = [n[y][3], n[y][4], n[y][5]], D[1] = numeric.dotVV(_, u), _ = [n[y][6], n[y][7], n[y][8]], D[2] = numeric.dotVV(_, u), c(D) > -1e-3) {
        let L = Math.sqrt(numeric.sum(numeric.pow(D, 2))), F = numeric.div(D, L);
        for (let x = 0; x < 3; x++)
          M[t[y][x]] = F[x];
        break;
      }
    }
    let v = Math.sqrt(numeric.sum(numeric.pow(M, 2))), m = numeric.div(M, v);
    f[h] = m;
  }
  return f;
};
function createNearestLookup(p, t) {
  var n = p.length, r = jshlib.convertSph2Cart(deg2rad(p)), i = Math.round(360 / t[0]) + 1, a = Math.round(180 / t[1]) + 1, e = new Array(i);
  e[0] = -180;
  for (let o = 1; o < i; o++)
    e[o] = e[o - 1] + t[0];
  var c = i * a, f = new Array(c);
  for (let o = 0; o < c; o++) {
    let h = [[o % i * t[0] - 180, Math.floor(o / i) * t[1] - 90]], u = jshlib.convertSph2Cart(deg2rad(h)), M = 1e3;
    for (let v = 0; v < n; v++) {
      let m = numeric.sum(numeric.pow(numeric.sub(u[0], r[v]), 2));
      m < M && (f[o] = v, M = m);
    }
  }
  return f;
}
function findNearest(p, t, n) {
  var r = p.length, i = [], a = [];
  for (let u = 0; u < r; u++)
    i.push(p[u][0] + 180), a.push(p[u][1] + 90);
  var e = Math.round(360 / n[0]) + 1, c = numeric.round(numeric.div(numeric.mod(i, 360), n[0])), f = numeric.round(numeric.div(a, n[1])), o = numeric.add(numeric.mul(f, e), c, 1), h = [];
  for (let u = 0; u < r; u++)
    h.push(t[o[u]]);
  return h;
}
function getTdesign(p) {
  if (p > 21)
    throw new Error("Designs of order greater than 21 are not implemented");
  if (p < 1)
    throw new Error("Order should be at least 1");
  var t = [
    [
      [0, 0, 1],
      [180, 0, 1]
    ],
    [
      [45, 35.26, 1],
      [-45, -35.26, 1],
      [135, -35.26, 1],
      [-135, 35.26, 1]
    ],
    [
      [0, 0, 1],
      [180, 0, 1],
      [90, 0, 1],
      [-90, 0, 1],
      [0, 90, 1],
      [0, -90, 1]
    ],
    [
      [0, -31.72, 1],
      [-58.28, 0, 1],
      [-90, 58.28, 1],
      [0, 31.72, 1],
      [-121.72, 0, 1],
      [90, -58.28, 1],
      [180, -31.72, 1],
      [121.72, 0, 1],
      [90, 58.28, 1],
      [180, 31.72, 1],
      [58.28, 0, 1],
      [-90, -58.28, 1]
    ],
    [
      [0, -31.72, 1],
      [-58.28, 0, 1],
      [-90, 58.28, 1],
      [0, 31.72, 1],
      [-121.72, 0, 1],
      [90, -58.28, 1],
      [180, -31.72, 1],
      [121.72, 0, 1],
      [90, 58.28, 1],
      [180, 31.72, 1],
      [58.28, 0, 1],
      [-90, -58.28, 1]
    ],
    [
      [26, 15.46, 1],
      [-26, -15.46, 1],
      [17.11, -24.99, 1],
      [-17.11, 24.99, 1],
      [154, -15.46, 1],
      [-154, 15.46, 1],
      [162.89, 24.99, 1],
      [-162.89, -24.99, 1],
      [72.89, 24.99, 1],
      [107.11, -24.99, 1],
      [116, 15.46, 1],
      [64, -15.46, 1],
      [-107.11, 24.99, 1],
      [-72.89, -24.99, 1],
      [-64, 15.46, 1],
      [-116, -15.46, 1],
      [32.25, 60.03, 1],
      [-147.75, 60.03, 1],
      [-57.75, 60.03, 1],
      [122.25, 60.03, 1],
      [-32.25, -60.03, 1],
      [147.75, -60.03, 1],
      [57.75, -60.03, 1],
      [-122.25, -60.03, 1]
    ],
    [
      [26, 15.46, 1],
      [-26, -15.46, 1],
      [17.11, -24.99, 1],
      [-17.11, 24.99, 1],
      [154, -15.46, 1],
      [-154, 15.46, 1],
      [162.89, 24.99, 1],
      [-162.89, -24.99, 1],
      [72.89, 24.99, 1],
      [107.11, -24.99, 1],
      [116, 15.46, 1],
      [64, -15.46, 1],
      [-107.11, 24.99, 1],
      [-72.89, -24.99, 1],
      [-64, 15.46, 1],
      [-116, -15.46, 1],
      [32.25, 60.03, 1],
      [-147.75, 60.03, 1],
      [-57.75, 60.03, 1],
      [122.25, 60.03, 1],
      [-32.25, -60.03, 1],
      [147.75, -60.03, 1],
      [57.75, -60.03, 1],
      [-122.25, -60.03, 1]
    ],
    [
      [-31.11, 53.65, 1],
      [110.82, 30.5, 1],
      [148.89, 53.65, 1],
      [32.21, -17.83, 1],
      [69.18, -30.5, 1],
      [-32.21, 17.83, 1],
      [-69.18, 30.5, 1],
      [-147.79, -17.83, 1],
      [-110.82, -30.5, 1],
      [147.79, 17.83, 1],
      [31.11, -53.65, 1],
      [-148.89, -53.65, 1],
      [-21.25, -47.78, 1],
      [-108.2, 38.78, 1],
      [158.75, -47.78, 1],
      [139.77, -14.09, 1],
      [-71.8, -38.78, 1],
      [-139.77, 14.09, 1],
      [71.8, 38.78, 1],
      [-40.23, -14.09, 1],
      [108.2, -38.78, 1],
      [40.23, 14.09, 1],
      [21.25, 47.78, 1],
      [-158.75, 47.78, 1],
      [106.65, -2.55, 1],
      [-2.66, -16.63, 1],
      [-73.35, -2.55, 1],
      [-98.84, 73.16, 1],
      [-177.34, 16.63, 1],
      [98.84, -73.16, 1],
      [177.34, -16.63, 1],
      [81.16, 73.16, 1],
      [2.66, 16.63, 1],
      [-81.16, -73.16, 1],
      [-106.65, 2.55, 1],
      [73.35, 2.55, 1]
    ],
    [
      [20.75, -3.55, 1],
      [-20.75, 3.55, 1],
      [-3.8, -20.7, 1],
      [3.8, 20.7, 1],
      [159.25, 3.55, 1],
      [-159.25, -3.55, 1],
      [-176.2, 20.7, 1],
      [176.2, -20.7, 1],
      [93.8, 20.7, 1],
      [86.2, -20.7, 1],
      [110.75, -3.55, 1],
      [69.25, 3.55, 1],
      [-86.2, 20.7, 1],
      [-93.8, -20.7, 1],
      [-69.25, -3.55, 1],
      [-110.75, 3.55, 1],
      [-9.94, 68.97, 1],
      [170.06, 68.97, 1],
      [-99.94, 68.97, 1],
      [80.06, 68.97, 1],
      [9.94, -68.97, 1],
      [-170.06, -68.97, 1],
      [99.94, -68.97, 1],
      [-80.06, -68.97, 1],
      [42.15, 17.57, 1],
      [-42.15, -17.57, 1],
      [23.12, -39.77, 1],
      [-23.12, 39.77, 1],
      [137.85, -17.57, 1],
      [-137.85, 17.57, 1],
      [156.88, 39.77, 1],
      [-156.88, -39.77, 1],
      [66.88, 39.77, 1],
      [113.12, -39.77, 1],
      [132.15, 17.57, 1],
      [47.85, -17.57, 1],
      [-113.12, 39.77, 1],
      [-66.88, -39.77, 1],
      [-47.85, 17.57, 1],
      [-132.15, -17.57, 1],
      [25.26, 44.98, 1],
      [-154.74, 44.98, 1],
      [-64.74, 44.98, 1],
      [115.26, 44.98, 1],
      [-25.26, -44.98, 1],
      [154.74, -44.98, 1],
      [64.74, -44.98, 1],
      [-115.26, -44.98, 1]
    ],
    [
      [144.09, -21.45, 1],
      [-33.81, -48.92, 1],
      [-35.91, -21.45, 1],
      [-115.87, 33.09, 1],
      [-146.19, 48.92, 1],
      [115.87, -33.09, 1],
      [146.19, -48.92, 1],
      [64.13, 33.09, 1],
      [33.81, 48.92, 1],
      [-64.13, -33.09, 1],
      [-144.09, 21.45, 1],
      [35.91, 21.45, 1],
      [-45.53, 1.95, 1],
      [177.26, 44.44, 1],
      [134.47, 1.95, 1],
      [87.21, -45.49, 1],
      [2.74, -44.44, 1],
      [-87.21, 45.49, 1],
      [-2.74, 44.44, 1],
      [-92.79, -45.49, 1],
      [-177.26, -44.44, 1],
      [92.79, 45.49, 1],
      [45.53, -1.95, 1],
      [-134.47, -1.95, 1],
      [15.59, -73.34, 1],
      [-85.4, 16.04, 1],
      [-164.41, -73.34, 1],
      [163.92, 4.42, 1],
      [-94.6, -16.04, 1],
      [-163.92, -4.42, 1],
      [94.6, 16.04, 1],
      [-16.08, 4.42, 1],
      [85.4, -16.04, 1],
      [16.08, -4.42, 1],
      [-15.59, 73.34, 1],
      [164.41, 73.34, 1],
      [-60.02, 25.27, 1],
      [151.41, 26.86, 1],
      [119.98, 25.27, 1],
      [46.63, -51.57, 1],
      [28.59, -26.86, 1],
      [-46.63, 51.57, 1],
      [-28.59, 26.86, 1],
      [-133.37, -51.57, 1],
      [-151.41, -26.86, 1],
      [133.37, 51.57, 1],
      [60.02, -25.27, 1],
      [-119.98, -25.27, 1],
      [-109.94, 6.91, 1],
      [172.65, -19.79, 1],
      [70.06, 6.91, 1],
      [-70.44, -68.94, 1],
      [7.35, 19.79, 1],
      [70.44, 68.94, 1],
      [-7.35, -19.79, 1],
      [109.56, -68.94, 1],
      [-172.65, 19.79, 1],
      [-109.56, 68.94, 1],
      [109.94, -6.91, 1],
      [-70.06, -6.91, 1]
    ],
    [
      [132.93, 7.69, 1],
      [-83.93, -23.73, 1],
      [8.47, 23.51, 1],
      [-113.34, 70.42, 1],
      [-103.27, -9.9, 1],
      [-33.24, -70.75, 1],
      [21.86, -26.46, 1],
      [-156.54, 47.78, 1],
      [-64.26, -7.72, 1],
      [165.78, 44.53, 1],
      [-25.2, 26.39, 1],
      [-97, -44.66, 1],
      [27.85, 9.77, 1],
      [153.21, -47.71, 1],
      [-155.06, 7.45, 1],
      [-11.84, -23.59, 1],
      [80.54, 23.72, 1],
      [-42.06, 70.44, 1],
      [-31.22, -9.84, 1],
      [38.84, -70.5, 1],
      [93.76, -26.29, 1],
      [-84.76, 47.61, 1],
      [7.76, -7.52, 1],
      [-122.28, 44.29, 1],
      [46.8, 26.64, 1],
      [-24.77, -44.57, 1],
      [99.89, 9.91, 1],
      [-134.78, -47.96, 1],
      [-83.09, 7.3, 1],
      [60.13, -23.34, 1],
      [152.64, 23.64, 1],
      [29.76, 70.68, 1],
      [40.78, -9.58, 1],
      [110.18, -70.39, 1],
      [165.65, -26.43, 1],
      [-12.99, 47.75, 1],
      [79.74, -7.31, 1],
      [-50.52, 44.26, 1],
      [118.92, 26.71, 1],
      [47.22, -44.31, 1],
      [171.93, 9.76, 1],
      [-62.51, -48.04, 1],
      [-11.12, 7.44, 1],
      [132.02, -23.33, 1],
      [-135.36, 23.39, 1],
      [102.37, 70.82, 1],
      [112.74, -9.49, 1],
      [-178.3, -70.58, 1],
      [-122.32, -26.67, 1],
      [59.08, 48, 1],
      [151.7, -7.38, 1],
      [21.38, 44.5, 1],
      [-169.01, 26.5, 1],
      [118.98, -44.25, 1],
      [-116.09, 9.52, 1],
      [9.65, -47.83, 1],
      [60.89, 7.68, 1],
      [-156.02, -23.57, 1],
      [-63.46, 23.31, 1],
      [174.93, 70.66, 1],
      [-175.29, -9.68, 1],
      [-105.95, -70.8, 1],
      [-50.19, -26.7, 1],
      [131.36, 48.01, 1],
      [-136.3, -7.64, 1],
      [93.56, 44.67, 1],
      [-97.08, 26.3, 1],
      [-169.16, -44.46, 1],
      [-44.13, 9.52, 1],
      [81.48, -47.62, 1]
    ],
    [
      [-154.47, 7.9, 1],
      [162.15, -63.36, 1],
      [25.53, 7.9, 1],
      [-81.26, -25.27, 1],
      [17.85, 63.36, 1],
      [81.26, 25.27, 1],
      [-17.85, -63.36, 1],
      [98.74, -25.27, 1],
      [-162.15, 63.36, 1],
      [-98.74, 25.27, 1],
      [154.47, -7.9, 1],
      [-25.53, -7.9, 1],
      [1.3, -10.47, 1],
      [-83.01, 79.45, 1],
      [-178.7, -10.47, 1],
      [100.48, 1.28, 1],
      [-96.99, -79.45, 1],
      [-100.48, -1.28, 1],
      [96.99, 79.45, 1],
      [-79.52, 1.28, 1],
      [83.01, -79.45, 1],
      [79.52, -1.28, 1],
      [-1.3, 10.47, 1],
      [178.7, 10.47, 1],
      [157.24, 13.15, 1],
      [31.14, -63.89, 1],
      [-22.76, 13.15, 1],
      [-75.78, 22.13, 1],
      [148.86, 63.89, 1],
      [75.78, -22.13, 1],
      [-148.86, -63.89, 1],
      [104.22, 22.13, 1],
      [-31.14, 63.89, 1],
      [-104.22, -22.13, 1],
      [-157.24, -13.15, 1],
      [22.76, -13.15, 1],
      [110.44, -60.62, 1],
      [-62.18, -9.87, 1],
      [-69.56, -60.62, 1],
      [-168.88, 27.37, 1],
      [-117.82, 9.87, 1],
      [168.88, -27.37, 1],
      [117.82, -9.87, 1],
      [11.12, 27.37, 1],
      [62.18, 9.87, 1],
      [-11.12, -27.37, 1],
      [-110.44, 60.62, 1],
      [69.56, 60.62, 1],
      [-125.93, -47.4, 1],
      [-126.67, -23.4, 1],
      [54.07, -47.4, 1],
      [-151.65, -33.24, 1],
      [-53.33, 23.4, 1],
      [151.65, 33.24, 1],
      [53.33, -23.4, 1],
      [28.35, -33.24, 1],
      [126.67, 23.4, 1],
      [-28.35, 33.24, 1],
      [125.93, 47.4, 1],
      [-54.07, 47.4, 1],
      [61.41, 37.54, 1],
      [41.19, 22.3, 1],
      [-118.59, 37.54, 1],
      [31.92, 44.13, 1],
      [138.81, -22.3, 1],
      [-31.92, -44.13, 1],
      [-138.81, 22.3, 1],
      [-148.08, 44.13, 1],
      [-41.19, -22.3, 1],
      [148.08, -44.13, 1],
      [-61.41, -37.54, 1],
      [118.59, -37.54, 1],
      [132.92, 4.73, 1],
      [6.45, -42.74, 1],
      [-47.08, 4.73, 1],
      [-83.07, 46.87, 1],
      [173.55, 42.74, 1],
      [83.07, -46.87, 1],
      [-173.55, -42.74, 1],
      [96.93, 46.87, 1],
      [-6.45, 42.74, 1],
      [-96.93, -46.87, 1],
      [-132.92, -4.73, 1],
      [47.08, -4.73, 1]
    ],
    [
      [-40.36, 68.7, 1],
      [61.12, 65.68, 1],
      [141.73, 70.75, 1],
      [-131.25, 72.32, 1],
      [-154.88, -12.62, 1],
      [-66.2, -9.78, 1],
      [26.36, -11.97, 1],
      [114.95, -12.58, 1],
      [37.02, 51.13, 1],
      [129.77, 51.95, 1],
      [-140.63, 50.15, 1],
      [-56.5, 47.88, 1],
      [-65.05, 12.58, 1],
      [25.12, 12.62, 1],
      [113.8, 9.78, 1],
      [-153.64, 11.97, 1],
      [-134.51, -9.73, 1],
      [-46.23, -8.37, 1],
      [47.91, -9.73, 1],
      [141.51, -8.73, 1],
      [-17.84, -44.1, 1],
      [69.37, -43.27, 1],
      [151.22, -42.67, 1],
      [-106.78, -40.18, 1],
      [-50.23, -51.95, 1],
      [39.37, -50.15, 1],
      [123.5, -47.88, 1],
      [-142.98, -51.13, 1],
      [-179.19, -60.75, 1],
      [-84.57, -54.07, 1],
      [5.39, -58.05, 1],
      [89.5, -60.75, 1],
      [-145.98, 31.02, 1],
      [-54.39, 26.43, 1],
      [28.92, 32.51, 1],
      [125.34, 30.94, 1],
      [168.71, -7.06, 1],
      [-112.49, -10.38, 1],
      [-21.96, -9.6, 1],
      [73.11, -8.31, 1],
      [95.68, 0.04, 1],
      [-170.71, 2.32, 1],
      [-84.32, -0.04, 1],
      [9.29, -2.32, 1],
      [9.19, -34.33, 1],
      [98.21, -37.31, 1],
      [-179.2, -40.48, 1],
      [-77.81, -31.6, 1],
      [-177.08, -21.74, 1],
      [-93.77, -18.83, 1],
      [-2.72, -19.8, 1],
      [90.51, -20.91, 1],
      [-106.89, 8.31, 1],
      [-11.29, 7.06, 1],
      [67.51, 10.38, 1],
      [158.04, 9.6, 1],
      [-118.88, -65.68, 1],
      [-38.27, -70.75, 1],
      [48.75, -72.32, 1],
      [139.64, -68.7, 1],
      [-54.66, -30.94, 1],
      [34.02, -31.02, 1],
      [125.61, -26.43, 1],
      [-151.08, -32.51, 1],
      [-170.81, 34.33, 1],
      [-81.79, 37.31, 1],
      [0.8, 40.48, 1],
      [102.19, 31.6, 1],
      [-28.78, 42.67, 1],
      [73.22, 40.18, 1],
      [162.16, 44.1, 1],
      [-110.63, 43.27, 1],
      [-89.49, 20.91, 1],
      [2.92, 21.74, 1],
      [86.23, 18.83, 1],
      [177.28, 19.8, 1],
      [133.77, 8.37, 1],
      [-132.09, 9.73, 1],
      [-38.49, 8.73, 1],
      [45.49, 9.73, 1],
      [-25.6, 24.04, 1],
      [55.12, 30.23, 1],
      [149.3, 28.05, 1],
      [-118.71, 26.06, 1],
      [0.81, 60.75, 1],
      [95.43, 54.07, 1],
      [-174.61, 58.05, 1],
      [-90.5, 60.75, 1],
      [-124.88, -30.23, 1],
      [-30.7, -28.05, 1],
      [61.29, -26.06, 1],
      [154.4, -24.04, 1],
      [-132.92, -85.6, 1],
      [47.08, 85.6, 1]
    ],
    [
      [-129.19, 8.11, 1],
      [169.58, -38.73, 1],
      [50.81, 8.12, 1],
      [-77.27, -50.11, 1],
      [10.42, 38.73, 1],
      [77.3, 50.12, 1],
      [-10.41, -38.72, 1],
      [102.71, -50.11, 1],
      [-169.57, 38.72, 1],
      [-102.71, 50.11, 1],
      [129.19, -8.11, 1],
      [-50.8, -8.11, 1],
      [-4.59, -56.01, 1],
      [-93.1, 33.85, 1],
      [175.39, -56.03, 1],
      [146.11, -2.57, 1],
      [-86.89, -33.86, 1],
      [-146.1, 2.56, 1],
      [86.91, 33.86, 1],
      [-33.89, -2.57, 1],
      [93.1, -33.85, 1],
      [33.9, 2.58, 1],
      [4.6, 56.03, 1],
      [-175.38, 56.01, 1],
      [106.57, 26.1, 1],
      [27.07, -14.82, 1],
      [-73.44, 26.09, 1],
      [-30.2, 59.41, 1],
      [152.94, 14.83, 1],
      [30.2, -59.4, 1],
      [-152.93, -14.84, 1],
      [149.82, 59.41, 1],
      [-27.06, 14.83, 1],
      [-149.8, -59.42, 1],
      [-106.55, -26.1, 1],
      [73.44, -26.09, 1],
      [-171.42, 77.45, 1],
      [91.9, -12.4, 1],
      [8.54, 77.46, 1],
      [-12.4, -1.85, 1],
      [88.11, 12.41, 1],
      [12.41, 1.86, 1],
      [-88.1, -12.41, 1],
      [167.6, -1.86, 1],
      [-91.89, 12.4, 1],
      [-167.59, 1.84, 1],
      [171.43, -77.46, 1],
      [-8.52, -77.45, 1],
      [-122.73, -10.44, 1],
      [-167.65, -32.13, 1],
      [57.27, -10.43, 1],
      [-108.8, -55.83, 1],
      [-12.35, 32.13, 1],
      [108.83, 55.83, 1],
      [12.36, -32.12, 1],
      [71.19, -55.82, 1],
      [167.66, 32.12, 1],
      [-71.19, 55.82, 1],
      [122.74, 10.44, 1],
      [-57.27, 10.44, 1],
      [-135.84, -23.05, 1],
      [-148.58, -41.32, 1],
      [44.16, -23.04, 1],
      [-120.66, -39.88, 1],
      [-31.41, 41.31, 1],
      [120.68, 39.87, 1],
      [31.42, -41.3, 1],
      [59.33, -39.86, 1],
      [148.6, 41.31, 1],
      [-59.33, 39.87, 1],
      [135.85, 23.05, 1],
      [-44.16, 23.05, 1],
      [-161.55, 20.62, 1],
      [130.04, -62.6, 1],
      [18.45, 20.64, 1],
      [-68.35, -17.23, 1],
      [49.96, 62.61, 1],
      [68.36, 17.23, 1],
      [-49.93, -62.6, 1],
      [111.65, -17.22, 1],
      [-130.05, 62.59, 1],
      [-111.64, 17.22, 1],
      [161.56, -20.63, 1],
      [-18.44, -20.62, 1],
      [-105.23, -3.38, 1],
      [-176.5, -15.21, 1],
      [74.77, -3.37, 1],
      [-102.64, -74.41, 1],
      [-3.5, 15.21, 1],
      [102.69, 74.41, 1],
      [3.51, -15.2, 1],
      [77.33, -74.4, 1],
      [176.51, 15.2, 1],
      [-77.36, 74.4, 1],
      [105.24, 3.38, 1],
      [-74.76, 3.37, 1],
      [-142.39, 25.42, 1],
      [142.08, -45.69, 1],
      [37.61, 25.43, 1],
      [-59.02, -33.44, 1],
      [37.92, 45.69, 1],
      [59.04, 33.45, 1],
      [-37.91, -45.68, 1],
      [120.97, -33.44, 1],
      [-142.07, 45.68, 1],
      [-120.96, 33.44, 1],
      [142.4, -25.43, 1],
      [-37.6, -25.42, 1]
    ],
    [
      [-30.6, 6.94, 1],
      [166.56, 58.69, 1],
      [149.4, 6.96, 1],
      [81.95, -30.36, 1],
      [13.48, -58.69, 1],
      [-81.93, 30.36, 1],
      [-13.46, 58.68, 1],
      [-98.06, -30.37, 1],
      [-166.54, -58.68, 1],
      [98.07, 30.37, 1],
      [30.62, -6.95, 1],
      [-149.38, -6.95, 1],
      [106.69, -22.68, 1],
      [-23.57, -15.36, 1],
      [-73.31, -22.69, 1],
      [-145.5, 62.1, 1],
      [-156.41, 15.36, 1],
      [145.53, -62.1, 1],
      [156.43, -15.35, 1],
      [34.47, 62.11, 1],
      [23.58, 15.36, 1],
      [-34.46, -62.11, 1],
      [-106.67, 22.68, 1],
      [73.33, 22.69, 1],
      [166.82, 1.39, 1],
      [6.09, -76.74, 1],
      [-13.19, 1.38, 1],
      [-88.57, 13.18, 1],
      [173.99, 76.74, 1],
      [88.59, -13.18, 1],
      [-173.97, -76.73, 1],
      [91.43, 13.2, 1],
      [-6.07, 76.73, 1],
      [-91.42, -13.2, 1],
      [-166.8, -1.38, 1],
      [13.2, -1.39, 1],
      [-74.67, 48.11, 1],
      [130.86, 10.16, 1],
      [105.32, 48.13, 1],
      [13.34, -40.08, 1],
      [49.16, -10.15, 1],
      [-13.32, 40.07, 1],
      [-49.14, 10.15, 1],
      [-166.67, -40.08, 1],
      [-130.84, -10.16, 1],
      [166.69, 40.08, 1],
      [74.7, -48.11, 1],
      [-105.31, -48.13, 1],
      [-126.99, 26.55, 1],
      [147.96, -32.57, 1],
      [53, 26.56, 1],
      [-50.28, -45.59, 1],
      [32.05, 32.58, 1],
      [50.3, 45.59, 1],
      [-32.03, -32.58, 1],
      [129.71, -45.58, 1],
      [-147.94, 32.57, 1],
      [-129.69, 45.58, 1],
      [127.02, -26.55, 1],
      [-52.98, -26.56, 1],
      [-171.93, 30.37, 1],
      [103.47, -58.68, 1],
      [8.07, 30.36, 1],
      [-59.38, -6.96, 1],
      [76.54, 58.69, 1],
      [59.4, 6.95, 1],
      [-76.53, -58.69, 1],
      [120.62, -6.94, 1],
      [-103.44, 58.68, 1],
      [-120.6, 6.95, 1],
      [171.94, -30.36, 1],
      [-8.05, -30.37, 1],
      [40.86, 10.16, 1],
      [15.32, 48.12, 1],
      [-139.14, 10.16, 1],
      [76.68, 40.09, 1],
      [164.69, -48.12, 1],
      [-76.67, -40.09, 1],
      [-164.67, 48.12, 1],
      [-103.31, 40.07, 1],
      [-15.3, -48.13, 1],
      [103.34, -40.07, 1],
      [-40.84, -10.16, 1],
      [139.16, -10.15, 1],
      [103.2, -1.38, 1],
      [-1.41, -13.19, 1],
      [-76.8, -1.39, 1],
      [-96.02, 76.73, 1],
      [-178.57, 13.19, 1],
      [96.07, -76.73, 1],
      [178.58, -13.19, 1],
      [83.94, 76.74, 1],
      [1.43, 13.19, 1],
      [-83.95, -76.74, 1],
      [-103.18, 1.38, 1],
      [76.81, 1.39, 1],
      [37.02, -26.56, 1],
      [-39.7, 45.58, 1],
      [-142.99, -26.56, 1],
      [122.05, 32.58, 1],
      [-140.29, -45.59, 1],
      [-122.04, -32.58, 1],
      [140.31, 45.59, 1],
      [-57.95, 32.57, 1],
      [39.72, -45.58, 1],
      [57.97, -32.57, 1],
      [-37, 26.55, 1],
      [143, 26.56, 1],
      [163.33, 22.69, 1],
      [55.55, -62.1, 1],
      [-16.67, 22.68, 1],
      [-66.41, 15.35, 1],
      [124.49, 62.11, 1],
      [66.43, -15.35, 1],
      [-124.48, -62.11, 1],
      [113.58, 15.36, 1],
      [-55.52, 62.1, 1],
      [-113.57, -15.36, 1],
      [-163.31, -22.68, 1],
      [16.69, -22.69, 1]
    ],
    [
      [-10.57, -17.35, 1],
      [-120.42, 69.76, 1],
      [169.43, -17.35, 1],
      [107.63, -10.08, 1],
      [-59.57, -69.78, 1],
      [-107.63, 10.08, 1],
      [59.57, 69.78, 1],
      [-72.37, -10.09, 1],
      [120.42, -69.76, 1],
      [72.37, 10.09, 1],
      [10.57, 17.35, 1],
      [-169.43, 17.35, 1],
      [-30.77, 68.25, 1],
      [101.53, 18.57, 1],
      [149.25, 68.26, 1],
      [18.92, -10.92, 1],
      [78.47, -18.56, 1],
      [-18.92, 10.92, 1],
      [-78.47, 18.56, 1],
      [-161.09, -10.92, 1],
      [-101.53, -18.56, 1],
      [161.09, 10.92, 1],
      [30.78, -68.26, 1],
      [-149.26, -68.26, 1],
      [56.46, 41.26, 1],
      [46.46, 24.54, 1],
      [-123.53, 41.26, 1],
      [32.19, 38.8, 1],
      [133.53, -24.53, 1],
      [-32.19, -38.8, 1],
      [-133.53, 24.53, 1],
      [-147.8, 38.8, 1],
      [-46.46, -24.54, 1],
      [147.8, -38.8, 1],
      [-56.46, -41.27, 1],
      [123.53, -41.26, 1],
      [84.74, 27.31, 1],
      [27.41, 4.68, 1],
      [-95.26, 27.3, 1],
      [10.06, 62.23, 1],
      [152.59, -4.67, 1],
      [-10.06, -62.23, 1],
      [-152.59, 4.67, 1],
      [-169.92, 62.23, 1],
      [-27.4, -4.68, 1],
      [169.92, -62.22, 1],
      [-84.74, -27.31, 1],
      [95.26, -27.3, 1],
      [136.27, -0.73, 1],
      [-1.05, -46.27, 1],
      [-43.73, -0.74, 1],
      [-91.01, 43.72, 1],
      [-178.94, 46.27, 1],
      [91.01, -43.72, 1],
      [178.94, -46.27, 1],
      [88.99, 43.73, 1],
      [1.05, 46.27, 1],
      [-88.99, -43.73, 1],
      [-136.27, 0.73, 1],
      [43.73, 0.73, 1],
      [55.23, 10.82, 1],
      [13.09, 34.07, 1],
      [-124.77, 10.81, 1],
      [71.48, 53.8, 1],
      [166.91, -34.06, 1],
      [-71.48, -53.8, 1],
      [-166.9, 34.06, 1],
      [-108.52, 53.79, 1],
      [-13.09, -34.06, 1],
      [108.52, -53.79, 1],
      [-55.23, -10.82, 1],
      [124.77, -10.81, 1],
      [-105.49, -68.13, 1],
      [-111.15, -5.71, 1],
      [74.52, -68.12, 1],
      [-173.89, -21.04, 1],
      [-68.85, 5.7, 1],
      [173.89, 21.04, 1],
      [68.85, -5.7, 1],
      [6.12, -21.04, 1],
      [111.15, 5.71, 1],
      [-6.12, 21.04, 1],
      [105.49, 68.13, 1],
      [-74.52, 68.12, 1],
      [35.28, -15.18, 1],
      [-25.17, 51.98, 1],
      [-144.72, -15.19, 1],
      [108.39, 33.88, 1],
      [-154.84, -51.99, 1],
      [-108.39, -33.88, 1],
      [154.84, 51.99, 1],
      [-71.61, 33.87, 1],
      [25.17, -51.98, 1],
      [71.61, -33.87, 1],
      [-35.28, 15.18, 1],
      [144.72, 15.19, 1],
      [-125.28, -28.56, 1],
      [-146.32, -30.49, 1],
      [54.72, -28.55, 1],
      [-133.29, -45.82, 1],
      [-33.69, 30.48, 1],
      [133.3, 45.82, 1],
      [33.68, -30.48, 1],
      [46.71, -45.81, 1],
      [146.32, 30.49, 1],
      [-46.71, 45.81, 1],
      [125.28, 28.56, 1],
      [-54.72, 28.54, 1],
      [-144.4, 54.71, 1],
      [112.38, -28.01, 1],
      [35.58, 54.72, 1],
      [-29.92, -19.65, 1],
      [67.62, 28.02, 1],
      [29.92, 19.65, 1],
      [-67.62, -28.02, 1],
      [150.08, -19.64, 1],
      [-112.38, 28.01, 1],
      [-150.08, 19.64, 1],
      [144.4, -54.71, 1],
      [-35.58, -54.72, 1],
      [68.53, -52.85, 1],
      [-54.82, 12.76, 1],
      [-111.46, -52.87, 1],
      [164.51, 34.19, 1],
      [-125.18, -12.77, 1],
      [-164.51, -34.19, 1],
      [125.18, 12.77, 1],
      [-15.5, 34.19, 1],
      [54.82, -12.76, 1],
      [15.49, -34.19, 1],
      [-68.53, 52.85, 1],
      [111.47, 52.86, 1],
      [91.48, -7.37, 1],
      [-7.38, -1.47, 1],
      [-88.52, -7.38, 1],
      [-168.69, 82.47, 1],
      [-172.62, 1.47, 1],
      [168.69, -82.47, 1],
      [172.62, -1.46, 1],
      [11.22, 82.48, 1],
      [7.38, 1.47, 1],
      [-11.21, -82.48, 1],
      [-91.48, 7.37, 1],
      [88.52, 7.38, 1]
    ],
    [
      [-110.97, -81.34, 1],
      [-98.09, -3.09, 1],
      [69.03, -81.34, 1],
      [-176.88, -8.08, 1],
      [-81.91, 3.09, 1],
      [176.88, 8.08, 1],
      [81.91, -3.09, 1],
      [3.12, -8.08, 1],
      [98.09, 3.09, 1],
      [-3.12, 8.08, 1],
      [110.97, 81.34, 1],
      [-69.03, 81.34, 1],
      [145.76, 30.52, 1],
      [46.33, -45.41, 1],
      [-34.24, 30.52, 1],
      [-54.51, 28.99, 1],
      [133.67, 45.41, 1],
      [54.51, -28.99, 1],
      [-133.67, -45.41, 1],
      [125.49, 28.99, 1],
      [-46.33, 45.41, 1],
      [-125.49, -28.99, 1],
      [-145.76, -30.52, 1],
      [34.24, -30.52, 1],
      [159.58, 41.4, 1],
      [68.4, -44.67, 1],
      [-20.42, 41.4, 1],
      [-46.75, 15.18, 1],
      [111.6, 44.67, 1],
      [46.75, -15.18, 1],
      [-111.6, -44.67, 1],
      [133.25, 15.18, 1],
      [-68.4, 44.67, 1],
      [-133.25, -15.18, 1],
      [-159.58, -41.4, 1],
      [20.42, -41.4, 1],
      [85.43, -37.93, 1],
      [-38.02, 3.6, 1],
      [-94.57, -37.93, 1],
      [174.17, 51.83, 1],
      [-141.98, -3.6, 1],
      [-174.17, -51.83, 1],
      [141.98, 3.6, 1],
      [-5.83, 51.83, 1],
      [38.02, -3.6, 1],
      [5.83, -51.83, 1],
      [-85.43, 37.93, 1],
      [94.57, 37.93, 1],
      [21.18, 27.17, 1],
      [54.86, 56.05, 1],
      [-158.82, 27.17, 1],
      [61.17, 18.75, 1],
      [125.14, -56.05, 1],
      [-61.17, -18.75, 1],
      [-125.14, 56.05, 1],
      [-118.83, 18.75, 1],
      [-54.86, -56.05, 1],
      [118.83, -18.75, 1],
      [-21.18, -27.17, 1],
      [158.82, -27.17, 1],
      [104.66, -9.56, 1],
      [-9.88, -14.45, 1],
      [-75.34, -9.56, 1],
      [-123.65, 72.56, 1],
      [-170.12, 14.45, 1],
      [123.65, -72.56, 1],
      [170.12, -14.45, 1],
      [56.35, 72.56, 1],
      [9.88, 14.45, 1],
      [-56.35, -72.56, 1],
      [-104.66, 9.56, 1],
      [75.34, 9.56, 1],
      [25.94, -16.83, 1],
      [-34.66, 59.4, 1],
      [-154.06, -16.83, 1],
      [108.59, 24.75, 1],
      [-145.34, -59.41, 1],
      [-108.59, -24.75, 1],
      [145.34, 59.41, 1],
      [-71.41, 24.75, 1],
      [34.66, -59.41, 1],
      [71.41, -24.75, 1],
      [-25.94, 16.83, 1],
      [154.06, 16.83, 1],
      [-100.89, 26.49, 1],
      [153.1, -9.74, 1],
      [79.11, 26.49, 1],
      [-20.77, -61.51, 1],
      [26.9, 9.74, 1],
      [20.77, 61.51, 1],
      [-26.9, -9.74, 1],
      [159.23, -61.51, 1],
      [-153.1, 9.74, 1],
      [-159.23, 61.51, 1],
      [100.89, -26.49, 1],
      [-79.11, -26.49, 1],
      [44.31, 12.28, 1],
      [17.3, 44.36, 1],
      [-135.69, 12.28, 1],
      [73.08, 43.05, 1],
      [162.7, -44.36, 1],
      [-73.08, -43.05, 1],
      [-162.7, 44.36, 1],
      [-106.92, 43.05, 1],
      [-17.3, -44.36, 1],
      [106.92, -43.05, 1],
      [-44.31, -12.28, 1],
      [135.69, -12.28, 1],
      [-169.08, -24.53, 1],
      [-112.54, -63.29, 1],
      [10.92, -24.53, 1],
      [-114.93, -9.92, 1],
      [-67.46, 63.28, 1],
      [114.93, 9.92, 1],
      [67.46, -63.29, 1],
      [65.07, -9.92, 1],
      [112.54, 63.29, 1],
      [-65.07, 9.92, 1],
      [169.08, 24.53, 1],
      [-10.92, 24.53, 1],
      [93.2, -57.39, 1],
      [-57.43, -1.73, 1],
      [-86.8, -57.39, 1],
      [-177.95, 32.55, 1],
      [-122.57, 1.73, 1],
      [177.95, -32.55, 1],
      [122.57, -1.73, 1],
      [2.05, 32.55, 1],
      [57.43, 1.73, 1],
      [-2.05, -32.55, 1],
      [-93.2, 57.39, 1],
      [86.8, 57.39, 1],
      [-17.59, 3.04, 1],
      [170.04, 72.16, 1],
      [162.41, 3.04, 1],
      [86.81, -17.56, 1],
      [9.96, -72.16, 1],
      [-86.81, 17.56, 1],
      [-9.96, 72.16, 1],
      [-93.19, -17.56, 1],
      [-170.04, -72.16, 1],
      [93.19, 17.56, 1],
      [17.59, -3.04, 1],
      [-162.41, -3.04, 1],
      [39.38, 44.26, 1],
      [56.93, 33.61, 1],
      [-140.62, 44.26, 1],
      [38.42, 27.03, 1],
      [123.07, -33.61, 1],
      [-38.42, -27.03, 1],
      [-123.07, 33.61, 1],
      [-141.58, 27.03, 1],
      [-56.93, -33.61, 1],
      [141.58, -27.03, 1],
      [-39.38, -44.26, 1],
      [140.62, -44.26, 1]
    ],
    [
      [165.52, 26.52, 1],
      [63.39, -60.04, 1],
      [-14.48, 26.52, 1],
      [-62.74, 12.93, 1],
      [116.61, 60.04, 1],
      [62.74, -12.93, 1],
      [-116.61, -60.04, 1],
      [117.26, 12.93, 1],
      [-63.39, 60.04, 1],
      [-117.26, -12.93, 1],
      [-165.52, -26.52, 1],
      [14.48, -26.52, 1],
      [-150.22, -21.62, 1],
      [-141.41, -53.79, 1],
      [29.78, -21.62, 1],
      [-114.55, -27.5, 1],
      [-38.59, 53.79, 1],
      [114.55, 27.5, 1],
      [38.59, -53.79, 1],
      [65.45, -27.5, 1],
      [141.41, 53.79, 1],
      [-65.45, 27.5, 1],
      [150.22, 21.62, 1],
      [-29.78, 21.62, 1],
      [-163.47, 81.91, 1],
      [92.31, -7.75, 1],
      [16.53, 81.91, 1],
      [-7.76, -2.29, 1],
      [87.69, 7.75, 1],
      [7.76, 2.29, 1],
      [-87.69, -7.75, 1],
      [172.24, -2.29, 1],
      [-92.31, 7.75, 1],
      [-172.24, 2.29, 1],
      [163.47, -81.91, 1],
      [-16.53, -81.91, 1],
      [-79.91, -73.49, 1],
      [-106.27, 2.85, 1],
      [100.09, -73.49, 1],
      [177.03, -16.24, 1],
      [-73.73, -2.85, 1],
      [-177.03, 16.24, 1],
      [73.73, 2.85, 1],
      [-2.97, -16.24, 1],
      [106.27, -2.85, 1],
      [2.97, 16.24, 1],
      [79.91, 73.49, 1],
      [-100.09, 73.49, 1],
      [-43.19, 73.63, 1],
      [101.37, 11.86, 1],
      [136.81, 73.63, 1],
      [12.09, -11.12, 1],
      [78.63, -11.86, 1],
      [-12.09, 11.12, 1],
      [-78.63, 11.86, 1],
      [-167.91, -11.12, 1],
      [-101.37, -11.86, 1],
      [167.91, 11.12, 1],
      [43.19, -73.63, 1],
      [-136.81, -73.63, 1],
      [109.86, -34.83, 1],
      [-36.5, -16.19, 1],
      [-70.14, -34.83, 1],
      [-153.97, 50.53, 1],
      [-143.5, 16.19, 1],
      [153.97, -50.53, 1],
      [143.5, -16.19, 1],
      [26.03, 50.53, 1],
      [36.5, 16.19, 1],
      [-26.03, -50.53, 1],
      [-109.86, 34.83, 1],
      [70.14, 34.83, 1],
      [-23.31, -6.54, 1],
      [-163.84, 65.83, 1],
      [156.69, -6.54, 1],
      [97.12, -23.15, 1],
      [-16.16, -65.83, 1],
      [-97.12, 23.15, 1],
      [16.16, 65.83, 1],
      [-82.88, -23.15, 1],
      [163.84, -65.83, 1],
      [82.88, 23.15, 1],
      [23.31, 6.54, 1],
      [-156.69, 6.54, 1],
      [-0.87, -31.92, 1],
      [-91.4, 58.07, 1],
      [179.13, -31.92, 1],
      [121.93, -0.74, 1],
      [-88.6, -58.07, 1],
      [-121.93, 0.74, 1],
      [88.6, 58.07, 1],
      [-58.07, -0.74, 1],
      [91.4, -58.07, 1],
      [58.07, 0.74, 1],
      [0.87, 31.92, 1],
      [-179.13, 31.92, 1],
      [163.12, 43.35, 1],
      [72.9, -44.1, 1],
      [-16.88, 43.35, 1],
      [-45.39, 12.19, 1],
      [107.1, 44.1, 1],
      [45.39, -12.19, 1],
      [-107.1, -44.1, 1],
      [134.61, 12.19, 1],
      [-72.9, 44.1, 1],
      [-134.61, -12.19, 1],
      [-163.12, -43.35, 1],
      [16.88, -43.35, 1],
      [-114.23, 50.37, 1],
      [127.06, -15.17, 1],
      [65.77, 50.37, 1],
      [-18.77, -35.57, 1],
      [52.94, 15.17, 1],
      [18.77, 35.57, 1],
      [-52.94, -15.17, 1],
      [161.23, -35.57, 1],
      [-127.06, 15.17, 1],
      [-161.23, 35.57, 1],
      [114.23, -50.37, 1],
      [-65.77, -50.37, 1],
      [54.17, 30.16, 1],
      [35.63, 30.41, 1],
      [-125.83, 30.16, 1],
      [45.21, 44.51, 1],
      [144.37, -30.41, 1],
      [-45.21, -44.51, 1],
      [-144.37, 30.41, 1],
      [-134.79, 44.51, 1],
      [-35.63, -30.41, 1],
      [134.79, -44.51, 1],
      [-54.17, -30.16, 1],
      [125.83, -30.16, 1],
      [126.2, 41.73, 1],
      [47.86, -26.15, 1],
      [-53.8, 41.73, 1],
      [-33.51, 37.03, 1],
      [132.14, 26.15, 1],
      [33.51, -37.03, 1],
      [-132.14, -26.15, 1],
      [146.49, 37.03, 1],
      [-47.86, 26.15, 1],
      [-146.49, -37.03, 1],
      [-126.2, -41.73, 1],
      [53.8, -41.73, 1],
      [-161.75, 20.38, 1],
      [130.12, -62.91, 1],
      [18.25, 20.38, 1],
      [-68.63, -17.07, 1],
      [49.88, 62.91, 1],
      [68.63, 17.07, 1],
      [-49.88, -62.91, 1],
      [111.37, -17.07, 1],
      [-130.12, 62.91, 1],
      [-111.37, 17.07, 1],
      [161.75, -20.38, 1],
      [-18.25, -20.38, 1],
      [2.71, 48.49, 1],
      [87.6, 41.45, 1],
      [-177.29, 48.49, 1],
      [41.48, 1.8, 1],
      [92.4, -41.45, 1],
      [-41.48, -1.8, 1],
      [-92.4, 41.45, 1],
      [-138.52, 1.8, 1],
      [-87.6, -41.45, 1],
      [138.52, -1.8, 1],
      [-2.71, -48.49, 1],
      [177.29, -48.49, 1],
      [-98.15, -27.54, 1],
      [-152.22, -7.22, 1],
      [81.85, -27.54, 1],
      [-164.79, -61.37, 1],
      [-27.78, 7.22, 1],
      [164.79, 61.37, 1],
      [27.78, -7.22, 1],
      [15.21, -61.37, 1],
      [152.22, 7.22, 1],
      [-15.21, 61.37, 1],
      [98.15, 27.54, 1],
      [-81.85, 27.54, 1]
    ],
    [
      [-40.48, 43.36, 1],
      [124.51, 33.58, 1],
      [139.52, 43.36, 1],
      [38.85, -28.17, 1],
      [55.49, -33.58, 1],
      [-38.85, 28.17, 1],
      [-55.49, 33.58, 1],
      [-141.15, -28.17, 1],
      [-124.51, -33.58, 1],
      [141.15, 28.17, 1],
      [40.48, -43.36, 1],
      [-139.52, -43.36, 1],
      [56.01, 17.18, 1],
      [20.46, 32.29, 1],
      [-123.99, 17.18, 1],
      [61.05, 52.38, 1],
      [159.54, -32.29, 1],
      [-61.05, -52.38, 1],
      [-159.54, 32.29, 1],
      [-118.95, 52.38, 1],
      [-20.46, -32.29, 1],
      [118.95, -52.38, 1],
      [-56.01, -17.18, 1],
      [123.99, -17.18, 1],
      [-179.51, -8.95, 1],
      [-93.08, -81.04, 1],
      [0.49, -8.95, 1],
      [-98.95, -0.48, 1],
      [-86.92, 81.04, 1],
      [98.95, 0.48, 1],
      [86.92, -81.04, 1],
      [81.05, -0.48, 1],
      [93.08, 81.04, 1],
      [-81.05, 0.48, 1],
      [179.51, 8.95, 1],
      [-0.49, 8.95, 1],
      [12.04, -13.56, 1],
      [-49.15, 71.95, 1],
      [-167.96, -13.56, 1],
      [103.85, 11.7, 1],
      [-130.85, -71.95, 1],
      [-103.85, -11.7, 1],
      [130.85, 71.95, 1],
      [-76.15, 11.7, 1],
      [49.15, -71.95, 1],
      [76.15, -11.7, 1],
      [-12.04, 13.56, 1],
      [167.96, 13.56, 1],
      [-13.62, -58.2, 1],
      [-98.3, 30.8, 1],
      [166.38, -58.2, 1],
      [148.93, -7.13, 1],
      [-81.7, -30.8, 1],
      [-148.93, 7.13, 1],
      [81.7, 30.8, 1],
      [-31.07, -7.13, 1],
      [98.3, -30.8, 1],
      [31.07, 7.13, 1],
      [13.62, 58.2, 1],
      [-166.38, 58.2, 1],
      [65.26, -20.55, 1],
      [-22.43, 23.07, 1],
      [-114.74, -20.55, 1],
      [131.85, 58.26, 1],
      [-157.57, -23.07, 1],
      [-131.85, -58.26, 1],
      [157.57, 23.07, 1],
      [-48.15, 58.26, 1],
      [22.43, -23.07, 1],
      [48.15, -58.26, 1],
      [-65.26, 20.55, 1],
      [114.74, 20.55, 1],
      [-135.39, 26.5, 1],
      [144.63, -39.58, 1],
      [44.61, 26.5, 1],
      [-55, -38.94, 1],
      [35.37, 39.58, 1],
      [55, 38.94, 1],
      [-35.37, -39.58, 1],
      [125, -38.94, 1],
      [-144.63, 39.58, 1],
      [-125, 38.94, 1],
      [135.39, -26.5, 1],
      [-44.61, -26.5, 1],
      [114.95, -4.75, 1],
      [-5.23, -24.86, 1],
      [-65.05, -4.75, 1],
      [-101.14, 64.63, 1],
      [-174.77, 24.86, 1],
      [101.14, -64.63, 1],
      [174.77, -24.86, 1],
      [78.86, 64.63, 1],
      [5.23, 24.86, 1],
      [-78.86, -64.63, 1],
      [-114.95, 4.75, 1],
      [65.05, 4.75, 1],
      [35.85, 52.64, 1],
      [65.91, 29.46, 1],
      [-144.15, 52.64, 1],
      [31.75, 20.82, 1],
      [114.09, -29.46, 1],
      [-31.75, -20.82, 1],
      [-114.09, 29.46, 1],
      [-148.25, 20.82, 1],
      [-65.91, -29.46, 1],
      [148.25, -20.82, 1],
      [-35.85, -52.64, 1],
      [144.15, -52.64, 1],
      [86.45, 11.52, 1],
      [11.54, 3.48, 1],
      [-93.55, 11.52, 1],
      [16.9, 77.95, 1],
      [168.46, -3.48, 1],
      [-16.9, -77.95, 1],
      [-168.46, 3.48, 1],
      [-163.1, 77.95, 1],
      [-11.54, -3.48, 1],
      [163.1, -77.95, 1],
      [-86.45, -11.52, 1],
      [93.55, -11.52, 1],
      [135.24, 4.02, 1],
      [5.69, -45.1, 1],
      [-44.76, 4.02, 1],
      [-84.35, 44.62, 1],
      [174.31, 45.1, 1],
      [84.35, -44.62, 1],
      [-174.31, -45.1, 1],
      [95.65, 44.62, 1],
      [-5.69, 45.1, 1],
      [-95.65, -44.62, 1],
      [-135.24, -4.02, 1],
      [44.76, -4.02, 1],
      [-129.84, -18.16, 1],
      [-156.86, -37.5, 1],
      [50.16, -18.16, 1],
      [-117.12, -46.85, 1],
      [-23.14, 37.5, 1],
      [117.12, 46.85, 1],
      [23.14, -37.5, 1],
      [62.88, -46.85, 1],
      [156.86, 37.5, 1],
      [-62.88, 46.85, 1],
      [129.84, 18.16, 1],
      [-50.16, 18.16, 1],
      [-74.1, 32.87, 1],
      [146.1, 13.3, 1],
      [105.9, 32.87, 1],
      [22.97, -53.88, 1],
      [33.9, -13.3, 1],
      [-22.97, 53.88, 1],
      [-33.9, 13.3, 1],
      [-157.03, -53.88, 1],
      [-146.1, -13.3, 1],
      [157.03, 53.88, 1],
      [74.1, -32.87, 1],
      [-105.9, -32.87, 1],
      [-119.92, -5.64, 1],
      [-173.5, -29.76, 1],
      [60.08, -5.64, 1],
      [-101.2, -59.6, 1],
      [-6.5, 29.76, 1],
      [101.2, 59.6, 1],
      [6.5, -29.76, 1],
      [78.8, -59.6, 1],
      [173.5, 29.76, 1],
      [-78.8, 59.6, 1],
      [119.92, 5.64, 1],
      [-60.08, 5.64, 1],
      [73.14, 16.13, 1],
      [16.82, 16.18, 1],
      [-106.86, 16.13, 1],
      [45.09, 66.83, 1],
      [163.18, -16.18, 1],
      [-45.09, -66.83, 1],
      [-163.18, 16.18, 1],
      [-134.91, 66.83, 1],
      [-16.82, -16.18, 1],
      [134.91, -66.83, 1],
      [-73.14, -16.13, 1],
      [106.86, -16.13, 1],
      [-11.7, -43.38, 1],
      [-102.11, 45.38, 1],
      [168.3, -43.38, 1],
      [133.98, -8.47, 1],
      [-77.89, -45.38, 1],
      [-133.98, 8.47, 1],
      [77.89, 45.38, 1],
      [-46.02, -8.47, 1],
      [102.11, -45.38, 1],
      [46.02, 8.47, 1],
      [11.7, 43.38, 1],
      [-168.3, 43.38, 1],
      [-24.11, 3.73, 1],
      [170.94, 65.63, 1],
      [155.89, 3.73, 1],
      [85.92, -24.05, 1],
      [9.06, -65.63, 1],
      [-85.92, 24.05, 1],
      [-9.06, 65.63, 1],
      [-94.08, -24.05, 1],
      [-170.94, -65.63, 1],
      [94.08, 24.05, 1],
      [24.11, -3.73, 1],
      [-155.89, -3.73, 1]
    ],
    [
      [104.6, -3.68, 1],
      [-3.81, -14.57, 1],
      [-75.4, -3.68, 1],
      [-104.32, 74.95, 1],
      [-176.19, 14.57, 1],
      [104.32, -74.95, 1],
      [176.19, -14.57, 1],
      [75.68, 74.95, 1],
      [3.81, 14.57, 1],
      [-75.68, -74.95, 1],
      [-104.6, 3.68, 1],
      [75.4, 3.68, 1],
      [153.77, -30.33, 1],
      [-52.93, -50.74, 1],
      [-26.23, -30.33, 1],
      [-123.11, 22.43, 1],
      [-127.07, 50.74, 1],
      [123.11, -22.43, 1],
      [127.07, -50.74, 1],
      [56.89, 22.43, 1],
      [52.93, 50.74, 1],
      [-56.89, -22.43, 1],
      [-153.77, 30.33, 1],
      [26.23, 30.33, 1],
      [35.99, -39.77, 1],
      [-54.77, 38.45, 1],
      [-144.01, -39.77, 1],
      [135.81, 26.85, 1],
      [-125.23, -38.45, 1],
      [-135.81, -26.85, 1],
      [125.23, 38.45, 1],
      [-44.19, 26.85, 1],
      [54.77, -38.45, 1],
      [44.19, -26.85, 1],
      [-35.99, 39.77, 1],
      [144.01, 39.77, 1],
      [71.82, -25.43, 1],
      [-26.58, 16.37, 1],
      [-108.18, -25.43, 1],
      [146.72, 59.1, 1],
      [-153.42, -16.37, 1],
      [-146.72, -59.1, 1],
      [153.42, 16.37, 1],
      [-33.28, 59.1, 1],
      [26.58, -16.37, 1],
      [33.28, -59.1, 1],
      [-71.82, 25.43, 1],
      [108.18, 25.43, 1],
      [-136.55, 26.52, 1],
      [144.03, -40.51, 1],
      [43.45, 26.52, 1],
      [-55.5, -37.97, 1],
      [35.97, 40.51, 1],
      [55.5, 37.97, 1],
      [-35.97, -40.51, 1],
      [124.5, -37.97, 1],
      [-144.03, 40.51, 1],
      [-124.5, 37.97, 1],
      [136.55, -26.52, 1],
      [-43.45, -26.52, 1],
      [-6.52, -1.08, 1],
      [-170.58, 83.4, 1],
      [173.48, -1.08, 1],
      [91.09, -6.52, 1],
      [-9.42, -83.4, 1],
      [-91.09, 6.52, 1],
      [9.42, 83.4, 1],
      [-88.91, -6.52, 1],
      [170.58, -83.4, 1],
      [88.91, 6.52, 1],
      [6.52, 1.08, 1],
      [-173.48, 1.08, 1],
      [-71.13, 40.38, 1],
      [138.05, 14.26, 1],
      [108.87, 40.38, 1],
      [20.82, -46.12, 1],
      [41.95, -14.26, 1],
      [-20.82, 46.12, 1],
      [-41.95, 14.26, 1],
      [-159.18, -46.12, 1],
      [-138.05, -14.26, 1],
      [159.18, 46.12, 1],
      [71.13, -40.38, 1],
      [-108.87, -40.38, 1],
      [-153.97, -27.97, 1],
      [-129.57, -52.52, 1],
      [26.03, -27.97, 1],
      [-120.59, -22.81, 1],
      [-50.43, 52.52, 1],
      [120.59, 22.81, 1],
      [50.43, -52.52, 1],
      [59.41, -22.81, 1],
      [129.57, 52.52, 1],
      [-59.41, 22.81, 1],
      [153.97, 27.97, 1],
      [-26.03, 27.97, 1],
      [-80.23, 13.48, 1],
      [166.33, 9.49, 1],
      [99.77, 13.48, 1],
      [35.29, -73.41, 1],
      [13.67, -9.49, 1],
      [-35.29, 73.41, 1],
      [-13.67, 9.49, 1],
      [-144.71, -73.41, 1],
      [-166.33, -9.49, 1],
      [144.71, 73.41, 1],
      [80.23, -13.48, 1],
      [-99.77, -13.48, 1],
      [55.43, -9, 1],
      [-10.89, 34.09, 1],
      [-124.57, -9, 1],
      [105.6, 54.41, 1],
      [-169.11, -34.09, 1],
      [-105.6, -54.41, 1],
      [169.11, 34.09, 1],
      [-74.4, 54.41, 1],
      [10.89, -34.09, 1],
      [74.4, -54.41, 1],
      [-55.43, 9, 1],
      [124.57, 9, 1],
      [68.32, -7.14, 1],
      [-7.68, 21.51, 1],
      [-111.68, -7.14, 1],
      [108.74, 67.22, 1],
      [-172.32, -21.51, 1],
      [-108.74, -67.22, 1],
      [172.32, 21.51, 1],
      [-71.26, 67.22, 1],
      [7.68, -21.51, 1],
      [71.26, -67.22, 1],
      [-68.32, 7.14, 1],
      [111.68, 7.14, 1],
      [-174.97, 36.12, 1],
      [96.85, -53.58, 1],
      [5.03, 36.12, 1],
      [-53.77, -4.06, 1],
      [83.15, 53.58, 1],
      [53.77, 4.06, 1],
      [-83.15, -53.58, 1],
      [126.23, -4.06, 1],
      [-96.85, 53.58, 1],
      [-126.23, 4.06, 1],
      [174.97, -36.12, 1],
      [-5.03, -36.12, 1],
      [-149.91, 16.26, 1],
      [149.81, -56.16, 1],
      [30.09, 16.26, 1],
      [-71.37, -28.77, 1],
      [30.19, 56.16, 1],
      [71.37, 28.77, 1],
      [-30.19, -56.16, 1],
      [108.63, -28.77, 1],
      [-149.81, 56.16, 1],
      [-108.63, 28.77, 1],
      [149.91, -16.26, 1],
      [-30.09, -16.26, 1],
      [2.52, -51.45, 1],
      [-87.99, 38.5, 1],
      [-177.48, -51.45, 1],
      [141.48, 1.57, 1],
      [-92.01, -38.5, 1],
      [-141.48, -1.57, 1],
      [92.01, 38.5, 1],
      [-38.52, 1.57, 1],
      [87.99, -38.5, 1],
      [38.52, -1.57, 1],
      [-2.52, 51.45, 1],
      [177.48, 51.45, 1],
      [161.12, -9.98, 1],
      [-28.54, -68.73, 1],
      [-18.88, -9.98, 1],
      [-100.54, 18.59, 1],
      [-151.46, 68.73, 1],
      [100.54, -18.59, 1],
      [151.46, -68.73, 1],
      [79.46, 18.59, 1],
      [28.54, 68.73, 1],
      [-79.46, -18.59, 1],
      [-161.12, 9.98, 1],
      [18.88, 9.98, 1],
      [12.84, 24.97, 1],
      [64.49, 62.11, 1],
      [-167.16, 24.97, 1],
      [64.47, 11.62, 1],
      [115.51, -62.11, 1],
      [-64.47, -11.62, 1],
      [-115.51, 62.11, 1],
      [-115.53, 11.62, 1],
      [-64.49, -62.11, 1],
      [115.53, -11.62, 1],
      [-12.84, -24.97, 1],
      [167.16, -24.97, 1],
      [74.13, 41.65, 1],
      [42.76, 11.79, 1],
      [-105.87, 41.65, 1],
      [17.09, 45.95, 1],
      [137.24, -11.79, 1],
      [-17.09, -45.95, 1],
      [-137.24, 11.79, 1],
      [-162.91, 45.95, 1],
      [-42.76, -11.79, 1],
      [162.91, -45.95, 1],
      [-74.13, -41.65, 1],
      [105.87, -41.65, 1],
      [154.04, 1.27, 1],
      [2.9, -64.01, 1],
      [-25.96, 1.27, 1],
      [-88.59, 25.96, 1],
      [177.1, 64.01, 1],
      [88.59, -25.96, 1],
      [-177.1, -64.01, 1],
      [91.41, 25.96, 1],
      [-2.9, 64.01, 1],
      [-91.41, -25.96, 1],
      [-154.04, -1.27, 1],
      [25.96, -1.27, 1]
    ],
    [
      [24.8, -10.46, 1],
      [-23.76, 63.21, 1],
      [-155.2, -10.46, 1],
      [101.5, 24.36, 1],
      [-156.24, -63.21, 1],
      [-101.5, -24.36, 1],
      [156.24, 63.21, 1],
      [-78.5, 24.36, 1],
      [23.76, -63.21, 1],
      [78.5, -24.36, 1],
      [-24.8, 10.46, 1],
      [155.2, 10.46, 1],
      [-134.64, 65.44, 1],
      [108.01, -16.98, 1],
      [45.36, 65.44, 1],
      [-17.8, -17.2, 1],
      [71.99, 16.98, 1],
      [17.8, 17.2, 1],
      [-71.99, -16.98, 1],
      [162.2, -17.2, 1],
      [-108.01, 16.98, 1],
      [-162.2, 17.2, 1],
      [134.64, -65.44, 1],
      [-45.36, -65.44, 1],
      [177.6, 54.85, 1],
      [88.31, -35.12, 1],
      [-2.4, 54.85, 1],
      [-35.13, 1.38, 1],
      [91.69, 35.12, 1],
      [35.13, -1.38, 1],
      [-91.69, -35.12, 1],
      [144.87, 1.38, 1],
      [-88.31, 35.12, 1],
      [-144.87, -1.38, 1],
      [-177.6, -54.85, 1],
      [2.4, -54.85, 1],
      [157.93, 82.01, 1],
      [86.98, -7.4, 1],
      [-22.07, 82.01, 1],
      [-7.41, 2.99, 1],
      [93.02, 7.4, 1],
      [7.41, -2.99, 1],
      [-93.02, -7.4, 1],
      [172.59, 2.99, 1],
      [-86.98, 7.4, 1],
      [-172.59, -2.99, 1],
      [-157.93, -82.01, 1],
      [22.07, -82.01, 1],
      [42.48, -13.21, 1],
      [-19.17, 45.89, 1],
      [-137.52, -13.21, 1],
      [107.66, 41.11, 1],
      [-160.83, -45.89, 1],
      [-107.66, -41.11, 1],
      [160.83, 45.89, 1],
      [-72.34, 41.11, 1],
      [19.17, -45.89, 1],
      [72.34, -41.11, 1],
      [-42.48, 13.21, 1],
      [137.52, 13.21, 1],
      [28.48, 10.9, 1],
      [21.99, 59.68, 1],
      [-151.52, 10.9, 1],
      [77.65, 27.92, 1],
      [158.01, -59.68, 1],
      [-77.65, -27.92, 1],
      [-158.01, 59.68, 1],
      [-102.35, 27.92, 1],
      [-21.99, -59.68, 1],
      [102.35, -27.92, 1],
      [-28.48, -10.9, 1],
      [151.52, -10.9, 1],
      [-33.79, 21.61, 1],
      [144.53, 50.59, 1],
      [146.21, 21.61, 1],
      [64.51, -31.14, 1],
      [35.47, -50.59, 1],
      [-64.51, 31.14, 1],
      [-35.47, 50.59, 1],
      [-115.49, -31.14, 1],
      [-144.53, -50.59, 1],
      [115.49, 31.14, 1],
      [33.79, -21.61, 1],
      [-146.21, -21.61, 1],
      [-175.53, -31.74, 1],
      [-97.19, -57.98, 1],
      [4.47, -31.74, 1],
      [-121.82, -3.8, 1],
      [-82.81, 57.98, 1],
      [121.82, 3.8, 1],
      [82.81, -57.98, 1],
      [58.18, -3.8, 1],
      [97.19, 57.98, 1],
      [-58.18, 3.8, 1],
      [175.53, 31.74, 1],
      [-4.47, 31.74, 1],
      [89.4, 19.43, 1],
      [19.43, 0.56, 1],
      [-90.6, 19.43, 1],
      [1.69, 70.56, 1],
      [160.57, -0.56, 1],
      [-1.69, -70.56, 1],
      [-160.57, 0.56, 1],
      [-178.31, 70.56, 1],
      [-19.43, -0.56, 1],
      [178.31, -70.56, 1],
      [-89.4, -19.43, 1],
      [90.6, -19.43, 1],
      [-27.28, -27.88, 1],
      [-130.91, 51.78, 1],
      [152.72, -27.88, 1],
      [120.76, -23.9, 1],
      [-49.09, -51.78, 1],
      [-120.76, 23.9, 1],
      [49.09, 51.78, 1],
      [-59.24, -23.9, 1],
      [130.91, -51.78, 1],
      [59.24, 23.9, 1],
      [27.28, 27.88, 1],
      [-152.72, 27.88, 1],
      [139.9, -15.44, 1],
      [-23.21, -47.5, 1],
      [-40.1, -15.44, 1],
      [-109.85, 38.38, 1],
      [-156.79, 47.5, 1],
      [109.85, -38.38, 1],
      [156.79, -47.5, 1],
      [70.15, 38.38, 1],
      [23.21, 47.5, 1],
      [-70.15, -38.38, 1],
      [-139.9, 15.44, 1],
      [40.1, 15.44, 1],
      [-2.17, -43.33, 1],
      [-92.29, 46.62, 1],
      [177.83, -43.33, 1],
      [133.35, -1.58, 1],
      [-87.71, -46.62, 1],
      [-133.35, 1.58, 1],
      [87.71, 46.62, 1],
      [-46.65, -1.58, 1],
      [92.29, -46.62, 1],
      [46.65, 1.58, 1],
      [2.17, 43.33, 1],
      [-177.83, 43.33, 1],
      [41.12, 27.96, 1],
      [38.91, 41.71, 1],
      [-138.88, 27.96, 1],
      [54.83, 35.51, 1],
      [141.09, -41.71, 1],
      [-54.83, -35.51, 1],
      [-141.09, 41.71, 1],
      [-125.17, 35.51, 1],
      [-38.91, -41.71, 1],
      [125.17, -35.51, 1],
      [-41.12, -27.96, 1],
      [138.88, -27.96, 1],
      [-126.67, 13.75, 1],
      [163.04, -35.46, 1],
      [53.33, 13.75, 1],
      [-67.73, -51.18, 1],
      [16.96, 35.46, 1],
      [67.73, 51.18, 1],
      [-16.96, -35.46, 1],
      [112.27, -51.18, 1],
      [-163.04, 35.46, 1],
      [-112.27, 51.18, 1],
      [126.67, -13.75, 1],
      [-53.33, -13.75, 1],
      [6.02, -15.42, 1],
      [-69.18, 73.47, 1],
      [-173.98, -15.42, 1],
      [105.51, 5.8, 1],
      [-110.82, -73.47, 1],
      [-105.51, -5.8, 1],
      [110.82, 73.47, 1],
      [-74.49, 5.8, 1],
      [69.18, -73.47, 1],
      [74.49, -5.8, 1],
      [-6.02, 15.42, 1],
      [173.98, 15.42, 1],
      [160.08, 33.45, 1],
      [62.71, -51.67, 1],
      [-19.92, 33.45, 1],
      [-54.9, 16.52, 1],
      [117.29, 51.67, 1],
      [54.9, -16.52, 1],
      [-117.29, -51.67, 1],
      [125.1, 16.52, 1],
      [-62.71, 51.67, 1],
      [-125.1, -16.52, 1],
      [-160.08, -33.45, 1],
      [19.92, -33.45, 1],
      [80.34, 6.51, 1],
      [6.61, 9.59, 1],
      [-99.66, 6.51, 1],
      [55.76, 78.37, 1],
      [173.39, -9.59, 1],
      [-55.76, -78.37, 1],
      [-173.39, 9.59, 1],
      [-124.24, 78.37, 1],
      [-6.61, -9.59, 1],
      [124.24, -78.37, 1],
      [-80.34, -6.51, 1],
      [99.66, -6.51, 1],
      [6.25, 24.64, 1],
      [76.64, 64.63, 1],
      [-173.75, 24.64, 1],
      [65.23, 5.68, 1],
      [103.36, -64.63, 1],
      [-65.23, -5.68, 1],
      [-103.36, 64.63, 1],
      [-114.77, 5.68, 1],
      [-76.64, -64.63, 1],
      [114.77, -5.68, 1],
      [-6.25, -24.64, 1],
      [173.75, -24.64, 1],
      [51.41, -63.45, 1],
      [-68.67, 16.19, 1],
      [-128.59, -63.45, 1],
      [162.69, 20.45, 1],
      [-111.33, -16.19, 1],
      [-162.69, -20.45, 1],
      [111.33, 16.19, 1],
      [-17.31, 20.45, 1],
      [68.67, -16.19, 1],
      [17.31, -20.45, 1],
      [-51.41, 63.45, 1],
      [128.59, 63.45, 1],
      [-50.6, 28.85, 1],
      [144.51, 33.77, 1],
      [129.4, 28.85, 1],
      [49.04, -42.6, 1],
      [35.49, -33.77, 1],
      [-49.04, 42.6, 1],
      [-35.49, 33.77, 1],
      [-130.96, -42.6, 1],
      [-144.51, -33.77, 1],
      [130.96, 42.6, 1],
      [50.6, -28.85, 1],
      [-129.4, -28.85, 1]
    ]
  ], n = t[p - 1];
  return n;
}
module.exports.getAmbisonicDecMtx = getAmbisonicDecMtx;
module.exports.getTdesign = getTdesign;
module.exports.deg2rad = deg2rad;
module.exports.rad2deg = rad2deg;
module.exports.createNearestLookup = createNearestLookup;
module.exports.findNearest = findNearest;
const _utils = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createNearestLookup,
  deg2rad,
  findNearest,
  getAmbisonicDecMtx,
  getCircHarmonics,
  getColumn,
  getTdesign,
  numeric,
  rad2deg,
  sampleCircle
}, Symbol.toStringTag, { value: "Module" }));
function computeEncodingCoefficients(p, t, n) {
  const r = getAmbisonicChannelCount(n), i = degreesToRadians(p), a = degreesToRadians(t), e = computeRealSH_1(n, [[i, a]]), c = new Float32Array(r);
  for (let f = 0; f < r; f++)
    c[f] = e[f][0];
  return c;
}
function computeEncodingCoefficients2D(p, t) {
  const n = getAmbisonicChannelCount2D(t), r = getCircHarmonics(t, [p]), i = new Float32Array(n);
  for (let a = 0; a < n; a++)
    i[a] = r[a][0];
  return i;
}
function encodeBuffer(p, t, n, r) {
  const i = getAmbisonicChannelCount(r), a = p.length, e = computeEncodingCoefficients(t, n, r), c = new Array(i);
  for (let f = 0; f < i; f++) {
    c[f] = new Float32Array(a);
    const o = e[f];
    for (let h = 0; h < a; h++)
      c[f][h] = p[h] * o;
  }
  return c;
}
function encodeBuffer2D(p, t, n) {
  const r = getAmbisonicChannelCount2D(n), i = p.length, a = computeEncodingCoefficients2D(t, n), e = new Array(r);
  for (let c = 0; c < r; c++) {
    e[c] = new Float32Array(i);
    const f = a[c];
    for (let o = 0; o < i; o++)
      e[c][o] = p[o] * f;
  }
  return e;
}
function encodeBufferFromDirection(p, t, n, r, i, a = "ambisonics") {
  let e = t, c = n, f = r;
  a === "threejs" && (e = r, c = -t, f = n);
  const [[o, h]] = convertCart2Sph_1([[e, c, f]], 1), u = o * 180 / Math.PI, M = h * 180 / Math.PI;
  return encodeBuffer(p, u, M, i);
}
function encodeBuffer2DFromDirection(p, t, n, r, i, a = "ambisonics") {
  let e = t, c = n;
  a === "threejs" && (e = r, c = -t);
  const f = Math.atan2(c, e) * 180 / Math.PI;
  return encodeBuffer2D(p, f, i);
}
function encodeAndSumBuffers(p, t) {
  if (p.length === 0) {
    const a = getAmbisonicChannelCount(t);
    return Array.from({ length: a }, () => new Float32Array(0));
  }
  const n = Math.max(...p.map((a) => a.samples.length)), r = getAmbisonicChannelCount(t), i = Array.from(
    { length: r },
    () => new Float32Array(n)
  );
  for (const a of p) {
    const e = encodeBuffer(a.samples, a.azim, a.elev, t);
    for (let c = 0; c < r; c++)
      for (let f = 0; f < a.samples.length; f++)
        i[c][f] += e[c][f];
  }
  return i;
}
class monoEncoder {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.azim = 0, this.elev = 0, this.gains = new Array(this.nCh), this.gainNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gainNodes[r] = this.ctx.createGain(), this.gainNodes[r].channelCountMode = "explicit", this.gainNodes[r].channelCount = 1;
    this.updateGains();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.gainNodes[r]), this.gainNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateGains() {
    const t = computeRealSH_1(this.order, [
      [degreesToRadians(this.azim), degreesToRadians(this.elev)]
    ]);
    for (let n = 0; n < this.nCh; n++)
      this.gains[n] = t[n][0], this.gainNodes[n].gain.value = this.gains[n];
  }
  /**
   * Set the encoding direction from a Cartesian direction vector.
   * The vector does not need to be normalized.
   *
   * Note: A zero-length vector (0, 0, 0) results in undefined behavior
   * from the underlying spherical harmonic library.
   *
   * @param x - X component of direction vector
   * @param y - Y component of direction vector
   * @param z - Z component of direction vector
   * @param coords - Coordinate system convention (default: 'ambisonics')
   *   - 'ambisonics': +X forward, +Y left, +Z up
   *   - 'threejs': +Z forward, +Y up, +X right
   */
  setDirection(t, n, r, i = "ambisonics") {
    let a = t, e = n, c = r;
    i === "threejs" && (a = r, e = -t, c = n);
    const [[f, o]] = convertCart2Sph_1([[a, e, c]], 1);
    this.azim = radiansToDegrees(f), this.elev = radiansToDegrees(o), this.updateGains();
  }
  /**
   * Get the current encoding direction as a Cartesian unit vector.
   *
   * @param coords - Coordinate system convention (default: 'ambisonics')
   * @returns Direction as [x, y, z] unit vector
   */
  getDirection(t = "ambisonics") {
    const n = degreesToRadians(this.azim), r = degreesToRadians(this.elev), i = Math.cos(r), a = i * Math.cos(n), e = i * Math.sin(n), c = Math.sin(r);
    return t === "threejs" ? [-e, c, a] : [a, e, c];
  }
}
class monoEncoder2D {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.azim = 0, this.elev = 0, this.gainNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gainNodes[r] = this.ctx.createGain(), this.gainNodes[r].channelCountMode = "explicit", this.gainNodes[r].channelCount = 1;
    this.updateGains();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.gainNodes[r]), this.gainNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateGains() {
    const t = getCircHarmonics(this.order, [this.azim]);
    for (let n = 0; n < this.nCh; n++)
      this.gainNodes[n].gain.value = t[n][0];
  }
  /**
   * Set the encoding direction from a Cartesian direction vector.
   * Only the horizontal plane (x, y) components are used; z is ignored.
   * The vector does not need to be normalized.
   *
   * Note: A zero-length vector (0, 0, 0) or a purely vertical vector (0, 0, z)
   * results in azimuth 0 (front direction).
   *
   * @param x - X component of direction vector
   * @param y - Y component of direction vector
   * @param z - Z component (ignored for 2D encoding)
   * @param coords - Coordinate system convention (default: 'ambisonics')
   *   - 'ambisonics': +X forward, +Y left, +Z up
   *   - 'threejs': +Z forward, +Y up, +X right
   */
  setDirection(t, n, r, i = "ambisonics") {
    let a = t, e = n;
    i === "threejs" && (a = r, e = -t), this.azim = radiansToDegrees(Math.atan2(e, a)), this.elev = 0, this.updateGains();
  }
  /**
   * Get the current encoding direction as a Cartesian unit vector.
   * The z component will always be 0 for 2D encoding.
   *
   * @param coords - Coordinate system convention (default: 'ambisonics')
   * @returns Direction as [x, y, z] unit vector (z always 0)
   */
  getDirection(t = "ambisonics") {
    const n = degreesToRadians(this.azim), r = Math.cos(n), i = Math.sin(n);
    return t === "threejs" ? [-i, 0, r] : [r, i, 0];
  }
}
class orderLimiter {
  // Implement AmbisonicProcessor interface
  get order() {
    return this.orderOut;
  }
  get nCh() {
    return this.nChOut;
  }
  constructor(t, n, r) {
    this.ctx = t, this.orderIn = n, this.orderOut = r < n ? r : n, this.nChIn = getAmbisonicChannelCount(this.orderIn), this.nChOut = getAmbisonicChannelCount(this.orderOut), this.in = this.ctx.createChannelSplitter(this.nChIn), this.out = this.ctx.createChannelMerger(this.nChOut);
    for (let i = 0; i < this.nChOut; i++)
      this.in.connect(this.out, i, i);
  }
  updateOrder(t) {
    if (!(t > this.orderIn)) {
      this.orderOut = t, this.nChOut = getAmbisonicChannelCount(this.orderOut), this.out.disconnect(), this.out = this.ctx.createChannelMerger(this.nChOut);
      for (let n = 0; n < this.nChOut; n++)
        this.in.connect(this.out, n, n);
    }
  }
}
class orderLimiter2D {
  // Implement AmbisonicProcessor interface
  get order() {
    return this.orderOut;
  }
  get nCh() {
    return this.nChOut;
  }
  constructor(t, n, r) {
    this.ctx = t, this.orderIn = n, this.orderOut = r < n ? r : n, this.nChIn = getAmbisonicChannelCount2D(this.orderIn), this.nChOut = getAmbisonicChannelCount2D(this.orderOut), this.in = this.ctx.createChannelSplitter(this.nChIn), this.out = this.ctx.createChannelMerger(this.nChOut);
    for (let i = 0; i < this.nChOut; i++)
      this.in.connect(this.out, i, i);
  }
  updateOrder(t) {
    if (!(t > this.orderIn)) {
      this.orderOut = t, this.nChOut = getAmbisonicChannelCount2D(this.orderOut), this.out.disconnect(), this.out = this.ctx.createChannelMerger(this.nChOut);
      for (let n = 0; n < this.nChOut; n++)
        this.in.connect(this.out, n, n);
    }
  }
}
class orderWeight {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(this.order), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh), this.orderGains = new Array(this.order + 1), this.orderGains.fill(1);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  updateOrderGains() {
    for (let t = 0; t < this.nCh; t++) {
      const n = Math.floor(Math.sqrt(t));
      this.gains[t].gain.value = this.orderGains[n];
    }
  }
  computeMaxRECoeffs() {
    const t = this.order;
    this.orderGains[0] = 1;
    let n = 0, r = 0;
    for (let i = 1; i <= t; i++) {
      const a = recurseLegendrePoly_1(
        i,
        [Math.cos(2.406809 / (t + 1.51))],
        n,
        r
      );
      this.orderGains[i] = a[0][0], r = n, n = a;
    }
  }
}
class sceneRotator {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.yaw = 0, this.pitch = 0, this.roll = 0, this.rotMtx = numeric.identity(this.nCh), this.rotMtxNodes = new Array(this.order), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh);
    for (let i = 1; i <= this.order; i++) {
      const a = new Array(2 * i + 1);
      for (let e = 0; e < 2 * i + 1; e++) {
        a[e] = new Array(2 * i + 1);
        for (let c = 0; c < 2 * i + 1; c++)
          a[e][c] = this.ctx.createGain(), a[e][c].gain.value = e === c ? 1 : 0;
      }
      this.rotMtxNodes[i - 1] = a;
    }
    this.in.connect(this.out, 0, 0);
    let r = 1;
    for (let i = 1; i <= this.order; i++) {
      for (let a = 0; a < 2 * i + 1; a++)
        for (let e = 0; e < 2 * i + 1; e++)
          this.in.connect(this.rotMtxNodes[i - 1][a][e], r + e, 0), this.rotMtxNodes[i - 1][a][e].connect(this.out, 0, r + a);
      r = r + 2 * i + 1;
    }
  }
  updateRotMtx() {
    const t = degreesToRadians(this.yaw), n = degreesToRadians(this.pitch), r = degreesToRadians(this.roll);
    this.rotMtx = getSHrotMtx_1(
      yawPitchRoll2Rzyx_1(t, n, r),
      this.order
    );
    let i = 1;
    for (let a = 1; a < this.order + 1; a++) {
      for (let e = 0; e < 2 * a + 1; e++)
        for (let c = 0; c < 2 * a + 1; c++)
          this.rotMtxNodes[a - 1][e][c].gain.value = this.rotMtx[i + e][i + c];
      i = i + 2 * a + 1;
    }
  }
}
class sceneRotator2D {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.yaw = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.rotMtxNodes = new Array(2 * this.order), this.in.connect(this.out, 0, 0);
    for (let r = 0; r < 2 * this.order; r = r + 2) {
      const i = [
        this.ctx.createGain(),
        this.ctx.createGain()
      ], a = [
        this.ctx.createGain(),
        this.ctx.createGain()
      ];
      this.rotMtxNodes[r] = i, this.rotMtxNodes[r + 1] = a, this.in.connect(this.rotMtxNodes[r][0], r + 1, 0), this.rotMtxNodes[r][0].connect(this.out, 0, r + 1), this.in.connect(this.rotMtxNodes[r][1], r + 2, 0), this.rotMtxNodes[r][1].connect(this.out, 0, r + 1), this.in.connect(this.rotMtxNodes[r + 1][0], r + 1, 0), this.rotMtxNodes[r + 1][0].connect(this.out, 0, r + 2), this.in.connect(this.rotMtxNodes[r + 1][1], r + 2, 0), this.rotMtxNodes[r + 1][1].connect(this.out, 0, r + 2);
    }
    this.updateRotMtx();
  }
  updateRotMtx() {
    const t = degreesToRadians(this.yaw);
    let n = 1;
    for (let r = 0; r < 2 * this.order; r = r + 2)
      this.rotMtxNodes[r][0].gain.value = Math.cos(n * t), this.rotMtxNodes[r][1].gain.value = Math.sin(n * t), this.rotMtxNodes[r + 1][0].gain.value = -Math.sin(n * t), this.rotMtxNodes[r + 1][1].gain.value = Math.cos(n * t), n++;
  }
}
class sceneMirror {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.mirrorPlane = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1, this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  reset() {
    for (let t = 0; t < this.nCh; t++)
      this.gains[t].gain.value = 1;
  }
  mirror(t) {
    switch (t) {
      case 0:
        this.mirrorPlane = 0, this.reset();
        break;
      case 1:
        this.reset(), this.mirrorPlane = 1;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            (r < 0 && r % 2 === 0 || r > 0 && r % 2 === 1) && (this.gains[i].gain.value = -1);
          }
        break;
      case 2:
        this.reset(), this.mirrorPlane = 2;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            r < 0 && (this.gains[i].gain.value = -1);
          }
        break;
      case 3:
        this.reset(), this.mirrorPlane = 3;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            (r + n) % 2 === 1 && (this.gains[i].gain.value = -1);
          }
        break;
      default:
        console.log(
          "The mirroring planes can be either 1 (yz), 2 (xz), 3 (xy), or 0 (no mirroring). Value set to 0."
        ), this.mirrorPlane = 0, this.reset();
    }
  }
}
class sceneMirror2D {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.mirrorPlane = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1, this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  reset() {
    for (let t = 0; t < this.nCh; t++)
      this.gains[t].gain.value = 1;
  }
  mirror(t) {
    switch (t) {
      case 0:
        this.mirrorPlane = 0, this.reset();
        break;
      case 1:
        this.reset(), this.mirrorPlane = 1;
        for (let n = 2; n < this.nCh; n++)
          this.gains[n].gain.value = -1, n % 2 !== 0 && (n = n + 2);
        break;
      case 2:
        this.reset(), this.mirrorPlane = 2;
        for (let n = 0; n < this.nCh; n++)
          n % 2 !== 0 && (this.gains[n].gain.value = -1);
        break;
      case 3:
        console.log("up-down mirroring in 2D mode not possible");
        break;
      default:
        console.log(
          "The mirroring planes can be either 1 (yz), 2 (xz) or 0 (no mirroring). Value set to 0."
        ), this.mirrorPlane = 0, this.reset();
    }
  }
}
class binDecoder {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.decFilters = new Array(this.nCh), this.decFilterNodes = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(2), this.out.channelCountMode = "explicit", this.out.channelCount = 1, this.gainMid = this.ctx.createGain(), this.gainSide = this.ctx.createGain(), this.invertSide = this.ctx.createGain(), this.gainMid.gain.value = 1, this.gainSide.gain.value = 1, this.invertSide.gain.value = -1;
    for (let r = 0; r < this.nCh; r++)
      this.decFilterNodes[r] = this.ctx.createConvolver(), this.decFilterNodes[r].normalize = !1;
    this.resetFilters();
    for (let r = 0; r < this.nCh; r++) {
      this.in.connect(this.decFilterNodes[r], r, 0);
      const i = Math.floor(Math.sqrt(r));
      r - i * i - i >= 0 ? this.decFilterNodes[r].connect(this.gainMid) : this.decFilterNodes[r].connect(this.gainSide);
    }
    this.gainMid.connect(this.out, 0, 0), this.gainSide.connect(this.out, 0, 0), this.gainMid.connect(this.out, 0, 1), this.gainSide.connect(this.invertSide, 0, 0), this.invertSide.connect(this.out, 0, 1), this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.decFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.decFilters[n].getChannelData(0).set(t.getChannelData(n)), this.decFilterNodes[n].buffer = this.decFilters[n];
  }
  resetFilters() {
    const t = new Array(this.nCh);
    t.fill(0), t[0] = 0.5, t[1] = 0.5 / Math.sqrt(3);
    for (let n = 0; n < this.nCh; n++) {
      this.decFilters[n] = this.ctx.createBuffer(1, 64, this.ctx.sampleRate);
      for (let r = 0; r < 64; r++)
        this.decFilters[n].getChannelData(0)[r] = 0;
      this.decFilters[n].getChannelData(0)[0] = t[n], this.decFilterNodes[n].buffer = this.decFilters[n];
    }
  }
}
class binDecoder2D {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.decFilters = new Array(this.nCh), this.decFilterNodes = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(2), this.out.channelCountMode = "explicit", this.out.channelCount = 1, this.gainMid = this.ctx.createGain(), this.gainSide = this.ctx.createGain(), this.invertSide = this.ctx.createGain(), this.gainMid.gain.value = 1, this.gainSide.gain.value = 1, this.invertSide.gain.value = -1;
    for (let r = 0; r < this.nCh; r++)
      this.decFilterNodes[r] = this.ctx.createConvolver(), this.decFilterNodes[r].normalize = !1;
    this.resetFilters();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.decFilterNodes[r], r, 0), r % 2 === 0 ? this.decFilterNodes[r].connect(this.gainMid) : this.decFilterNodes[r].connect(this.gainSide);
    this.gainMid.connect(this.out, 0, 0), this.gainSide.connect(this.out, 0, 0), this.gainMid.connect(this.out, 0, 1), this.gainSide.connect(this.invertSide, 0, 0), this.invertSide.connect(this.out, 0, 1), this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.decFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.decFilters[n].getChannelData(0).set(t.getChannelData(n)), this.decFilterNodes[n].buffer = this.decFilters[n];
  }
  resetFilters() {
    const t = new Array(this.nCh);
    t.fill(0), t[0] = 0.5, t[1] = 0.5 / Math.sqrt(3);
    for (let n = 0; n < this.nCh; n++) {
      this.decFilters[n] = this.ctx.createBuffer(1, 64, this.ctx.sampleRate);
      for (let r = 0; r < 64; r++)
        this.decFilters[n].getChannelData(0)[r] = 0;
      this.decFilters[n].getChannelData(0)[0] = t[n], this.decFilterNodes[n].buffer = this.decFilters[n];
    }
  }
}
class decoder {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.nSpk = 0, this._decodingMatrix = [], this._spkSphPosArray = [], this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(1), this._spkSphPosArray = this._getDefaultSpkConfig(this.order), this._updateDecodeMtx(this._spkSphPosArray);
  }
  // spkSphPosArray in spherical coordinates: [ [azim1, elev1, dist1], ... [azimN, elevN, distN] ]
  set speakerPos(t) {
    t === void 0 && (t = this._getDefaultSpkConfig(this.order)), this._spkSphPosArray = t, this.out.disconnect(), this._updateDecodeMtx(t);
  }
  get speakerPos() {
    return this._spkSphPosArray;
  }
  // internal method to calculate Ambisonic decoding matrix and define new ambisonic gain nodes and values
  _updateDecodeMtx(t) {
    this.nSpk = t.length, this.out = this.ctx.createChannelMerger(this.nSpk), this._decodingMatrix = getAmbisonicDecMtx(t, this.order), this.mtxGain = new Array(this.nCh);
    for (let n = 0; n < this.nCh; n++) {
      this.mtxGain[n] = new Array(this.nSpk);
      for (let r = 0; r < this.nSpk; r++) {
        const i = this.ctx.createGain();
        i.gain.value = this._decodingMatrix[r][n], this.in.connect(i, n, 0), i.connect(this.out, 0, r), this.mtxGain[n][r] = i;
      }
    }
  }
  // get default speaker configuration for orders 1, 2, 3
  _getDefaultSpkConfig(t) {
    let n = [];
    switch (t) {
      case 1:
        n = [
          [0, 0, 1],
          [90, 0, 1],
          [180, 0, 1],
          [270, 0, 1],
          [0, 90, 1],
          [0, -90, 1]
        ];
        break;
      case 2:
        n = [
          [180, -31.7161, 0.5878],
          [180, 31.7161, 0.5878],
          [-121.7161, 0, 0.5878],
          [121.7161, 0, 0.5878],
          [-90, -58.2839, 0.5878],
          [-90, 58.2839, 0.5878],
          [90, -58.2839, 0.5878],
          [90, 58.2839, 0.5878],
          [-58.2839, 0, 0.5878],
          [58.2839, 0, 0.5878],
          [0, -31.7161, 0.5878],
          [0, 31.7161, 0.5878]
        ];
        break;
      case 3:
        n = [
          [-159.0931, 0, 0.5352],
          [159.0931, 0, 0.5352],
          [-135, -35.2644, 0.5352],
          [-135, 35.2644, 0.5352],
          [135, -35.2644, 0.5352],
          [135, 35.2644, 0.5352],
          [180, -69.0931, 0.5352],
          [180, 69.0931, 0.5352],
          [-90, -20.9069, 0.5352],
          [-90, 20.9069, 0.5352],
          [90, -20.9069, 0.5352],
          [90, 20.9069, 0.5352],
          [0, -69.0931, 0.5352],
          [0, 69.0931, 0.5352],
          [-45, -35.2644, 0.5352],
          [-45, 35.2644, 0.5352],
          [45, -35.2644, 0.5352],
          [45, 35.2644, 0.5352],
          [-20.9069, 0, 0.5352],
          [20.9069, 0, 0.5352]
        ];
        break;
      default:
        console.error("unsupported default order:", t);
    }
    return n;
  }
}
class convolver {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.encFilters = new Array(this.nCh), this.encFilterNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.encFilterNodes[r] = this.ctx.createConvolver(), this.encFilterNodes[r].normalize = !1;
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.encFilterNodes[r]), this.encFilterNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.encFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.encFilters[n].getChannelData(0).set(t.getChannelData(n)), this.encFilterNodes[n].buffer = this.encFilters[n];
  }
}
class virtualMic {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.azim = 0, this.elev = 0, this.vmicGains = new Array(this.nCh), this.vmicGainNodes = new Array(this.nCh), this.vmicCoeffs = new Array(this.order + 1), this.vmicPattern = "hypercardioid", this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createGain();
    for (let r = 0; r < this.nCh; r++)
      this.vmicGainNodes[r] = this.ctx.createGain();
    this.SHxyz = new Array(this.nCh), this.SHxyz.fill(0), this.updatePattern(), this.updateOrientation();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.vmicGainNodes[r], r, 0), this.vmicGainNodes[r].connect(this.out);
    this.initialized = !0;
  }
  updatePattern() {
    switch (this.vmicPattern) {
      case "cardioid":
        this.vmicCoeffs = this.computeCardioidCoeffs(this.order);
        break;
      case "supercardioid":
        this.vmicCoeffs = this.computeSupercardCoeffs(this.order);
        break;
      case "hypercardioid":
        this.vmicCoeffs = this.computeHypercardCoeffs(this.order);
        break;
      case "max_rE":
        this.vmicCoeffs = this.computeMaxRECoeffs(this.order);
        break;
      default:
        this.vmicPattern = "hypercardioid", this.vmicCoeffs = this.computeHypercardCoeffs(this.order);
    }
    this.updateGains();
  }
  updateOrientation() {
    const t = degreesToRadians(this.azim), n = degreesToRadians(this.elev), r = computeRealSH_1(this.order, [[t, n]]);
    for (let i = 0; i < this.nCh; i++)
      this.SHxyz[i] = r[i][0];
    this.updateGains();
  }
  updateGains() {
    for (let t = 0; t <= this.order; t++)
      for (let n = -t; n <= t; n++) {
        const r = t * t + t + n;
        this.vmicGains[r] = this.vmicCoeffs[t] * this.SHxyz[r];
      }
    for (let t = 0; t < this.nCh; t++)
      this.vmicGainNodes[t].gain.value = this.vmicGains[t];
  }
  computeCardioidCoeffs(t) {
    const n = new Array(t + 1);
    for (let r = 0; r <= t; r++)
      n[r] = factorial_1(t) * factorial_1(t) / (factorial_1(t + r + 1) * factorial_1(t - r));
    return n;
  }
  computeHypercardCoeffs(t) {
    const n = new Array(t + 1), r = (t + 1) * (t + 1);
    for (let i = 0; i <= t; i++)
      n[i] = 1 / r;
    return n;
  }
  computeSupercardCoeffs(t) {
    switch (t) {
      case 1:
        return [0.366, 0.2113];
      case 2:
        return [0.2362, 0.1562, 0.059];
      case 3:
        return [0.1768, 0.1281, 0.0633, 0.0175];
      case 4:
        return [0.1414, 0.1087, 0.0623, 0.0247, 54e-4];
      default:
        return console.error("Orders should be in the range of 1-4 at the moment."), [];
    }
  }
  computeMaxRECoeffs(t) {
    const n = new Array(t + 1);
    n[0] = 1;
    let r = 0, i = 0;
    for (let e = 1; e < t + 1; e++) {
      const c = recurseLegendrePoly_1(
        e,
        [Math.cos(2.406809 / (t + 1.51))],
        r,
        i
      );
      n[e] = c[0][0], i = r, r = c;
    }
    let a = 0;
    for (let e = 0; e <= t; e++)
      a += n[e] * (2 * e + 1);
    for (let e = 0; e <= t; e++)
      n[e] = n[e] / a;
    return n;
  }
}
if (commonjsGlobal.AnalyserNode && !commonjsGlobal.AnalyserNode.prototype.getFloatTimeDomainData) {
  var uint8 = new Uint8Array(2048);
  commonjsGlobal.AnalyserNode.prototype.getFloatTimeDomainData = function(p) {
    this.getByteTimeDomainData(uint8);
    for (var t = 0, n = p.length; t < n; t++)
      p[t] = (uint8[t] - 128) * 78125e-7;
  };
}
class rmsAnalyser {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.analysers = new Array(this.nCh), this.analBuffers = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.analysers[r] = this.ctx.createAnalyser(), this.analysers[r].fftSize = this.fftSize, this.analysers[r].smoothingTimeConstant = 0, this.analBuffers[r] = new Float32Array(this.fftSize), this.in.connect(this.analysers[r], r, 0), this.analysers[r].connect(this.out, 0, r);
  }
  updateBuffers() {
    for (let t = 0; t < this.nCh; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeRMS() {
    const t = new Array(this.nCh);
    t.fill(0);
    for (let n = 0; n < this.nCh; n++) {
      for (let r = 0; r < this.fftSize; r++)
        t[n] = t[n] + this.analBuffers[n][r] * this.analBuffers[n][r];
      t[n] = Math.sqrt(t[n] / this.fftSize);
    }
    return t;
  }
}
class powermapAnalyser {
  constructor(t, n, r) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.fftSize = 2048, this.analysers = new Array(this.nCh), this.analBuffers = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh);
    for (let a = 0; a < this.nCh; a++)
      this.analysers[a] = this.ctx.createAnalyser(), this.analysers[a].fftSize = this.fftSize, this.analysers[a].smoothingTimeConstant = 0, this.analBuffers[a] = new Float32Array(this.fftSize);
    for (let a = 0; a < this.nCh; a++)
      this.in.connect(this.out, a, a), this.in.connect(this.analysers[a], a, 0);
    const i = getTdesign(4 * n);
    this.td_dirs_rad = deg2rad(i), this.SHmtx = computeRealSH_1(this.order, this.td_dirs_rad), this.mode = r;
  }
  updateBuffers() {
    for (let t = 0; t < this.nCh; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computePowermap() {
    const t = this.td_dirs_rad.length, n = numeric.dot(
      numeric.transpose(this.SHmtx),
      this.analBuffers
    ), r = new Array(t);
    for (let i = 0; i < t; i++) {
      let a = 0;
      for (let e = 0; e < this.fftSize; e++)
        a = a + n[i][e] * n[i][e];
      a = a / this.fftSize, r[i] = [
        this.td_dirs_rad[i][0],
        this.td_dirs_rad[i][1],
        a
      ];
    }
    return this.mode === 0 ? r : forwardSHT_1(
      2 * this.order,
      r,
      1,
      0
    );
  }
}
class intensityAnalyser {
  constructor(t) {
    this.ctx = t, this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(3);
    for (let n = 0; n < 3; n++)
      this.gains[n] = this.ctx.createGain(), this.gains[n].gain.value = 1 / Math.sqrt(3);
    this.analysers = new Array(4), this.analBuffers = new Array(4);
    for (let n = 0; n < 4; n++)
      this.analysers[n] = this.ctx.createAnalyser(), this.analysers[n].fftSize = this.fftSize, this.analysers[n].smoothingTimeConstant = 0, this.analBuffers[n] = new Float32Array(this.fftSize);
    this.in.connect(this.out, 0, 0), this.in.connect(this.analysers[0], 0, 0), this.in.connect(this.gains[1], 1, 0), this.in.connect(this.gains[2], 2, 0), this.in.connect(this.gains[0], 3, 0);
    for (let n = 0; n < 3; n++)
      this.gains[n].connect(this.analysers[n + 1], 0, 0), this.gains[n].connect(this.out, 0, n + 1);
  }
  updateBuffers() {
    for (let t = 0; t < 4; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeIntensity() {
    let t = 0, n = 0, r = 0, i = 0, a = 0, e = 0, c = 0;
    for (let m = 0; m < this.fftSize; m++)
      t = t + this.analBuffers[0][m] * this.analBuffers[1][m], n = n + this.analBuffers[0][m] * this.analBuffers[2][m], r = r + this.analBuffers[0][m] * this.analBuffers[3][m], i = i + this.analBuffers[0][m] * this.analBuffers[0][m], a = a + this.analBuffers[1][m] * this.analBuffers[1][m], e = e + this.analBuffers[2][m] * this.analBuffers[2][m], c = c + this.analBuffers[3][m] * this.analBuffers[3][m];
    const f = [t, n, r], o = Math.sqrt(f[0] * f[0] + f[1] * f[1] + f[2] * f[2]), h = (i + a + e + c) / 2, u = 1 - o / (h + 1e-7), M = radiansToDegrees(Math.atan2(n, t)), v = radiansToDegrees(
      Math.atan2(f[2], Math.sqrt(f[0] * f[0] + f[1] * f[1]))
    );
    return [M, v, u, h];
  }
}
class intensityAnalyser2D {
  constructor(t) {
    this.ctx = t, this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(3), this.out = this.ctx.createChannelMerger(3), this.gains = new Array(2);
    for (let n = 0; n < 2; n++)
      this.gains[n] = this.ctx.createGain(), this.gains[n].gain.value = 1 / Math.sqrt(3);
    this.analysers = new Array(3), this.analBuffers = new Array(3);
    for (let n = 0; n < 3; n++)
      this.analysers[n] = this.ctx.createAnalyser(), this.analysers[n].fftSize = this.fftSize, this.analysers[n].smoothingTimeConstant = 0, this.analBuffers[n] = new Float32Array(this.fftSize);
    this.in.connect(this.out, 0, 0), this.in.connect(this.analysers[0], 0, 0), this.in.connect(this.gains[1], 1, 0), this.in.connect(this.gains[0], 2, 0);
    for (let n = 0; n < 2; n++)
      this.gains[n].connect(this.analysers[n + 1], 0, 0), this.gains[n].connect(this.out, 0, n + 1);
  }
  updateBuffers() {
    for (let t = 0; t < 3; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeIntensity() {
    let t = 0, n = 0, r = 0, i = 0, a = 0;
    for (let M = 0; M < this.fftSize; M++)
      t = t + this.analBuffers[0][M] * this.analBuffers[1][M], n = n + this.analBuffers[0][M] * this.analBuffers[2][M], r = r + this.analBuffers[0][M] * this.analBuffers[0][M], i = i + this.analBuffers[1][M] * this.analBuffers[1][M], a = a + this.analBuffers[2][M] * this.analBuffers[2][M];
    const e = [t, n], c = Math.sqrt(e[0] * e[0] + e[1] * e[1]), f = (r + i + a) / 2, o = 1 - c / (f + 1e-7);
    return [-radiansToDegrees(Math.atan2(n, t)), 0, o, f];
  }
}
function pad(p, t) {
  return ("000000000" + p).substr(-2);
}
class HOAloader {
  constructor(t, n, r, i) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.nChGroups = Math.ceil(this.nCh / 8), this.buffers = new Array(), this.loadCount = 0, this.loaded = !1, this.onLoad = i, this.urls = new Array(this.nChGroups), this.concatBuffer = null;
    const a = r.slice(r.length - 3, r.length);
    this.fileExt = a;
    for (let e = 0; e < this.nChGroups; e++)
      e === this.nChGroups - 1 ? this.urls[e] = r.slice(0, r.length - 4) + "_" + pad(e * 8 + 1) + "-" + pad(this.nCh) + "ch." + a : this.urls[e] = r.slice(0, r.length - 4) + "_" + pad(e * 8 + 1) + "-" + pad(e * 8 + 8) + "ch." + a;
  }
  loadBuffers(t, n) {
    const r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "arraybuffer";
    const i = this;
    r.onload = function() {
      i.context.decodeAudioData(
        r.response,
        function(a) {
          if (!a) {
            alert("error decoding file data: " + t);
            return;
          }
          i.buffers[n] = a, i.loadCount++, i.loadCount === i.nChGroups && (i.loaded = !0, i.concatBuffers(), console.log("HOAloader: all buffers loaded and concatenated"), i.onLoad(i.concatBuffer));
        },
        function(a) {
          alert(
            "Browser cannot decode audio data:  " + t + `

Error: ` + a + `

(If you re using Safari and get a null error, this is most likely due to Apple's shady plan going on to stop the .ogg format from easing web developer's life :)`
          );
        }
      );
    }, r.onerror = function() {
      alert("HOAloader: XHR error");
    }, r.send();
  }
  load() {
    for (let t = 0; t < this.nChGroups; ++t) this.loadBuffers(this.urls[t], t);
  }
  concatBuffers() {
    if (!this.loaded) return;
    const t = this.nCh, n = this.nChGroups;
    let r = this.buffers[0].length;
    this.buffers.forEach((e) => {
      r = Math.max(r, e.length);
    });
    const i = this.buffers[0].sampleRate;
    let a = [1, 2, 3, 4, 5, 6, 7, 8];
    this.fileExt.toLowerCase() === "ogg" && (console.log(
      "Loading of 8chan OGG files [Chrome/Firefox]: remap channels to correct order!"
    ), a = [1, 3, 2, 7, 8, 5, 6, 4]), this.concatBuffer = this.context.createBuffer(t, r, i);
    for (let e = 0; e < n; e++)
      for (let c = 0; c < this.buffers[e].numberOfChannels; c++)
        this.concatBuffer.getChannelData(e * 8 + c).set(this.buffers[e].getChannelData(a[c] - 1));
  }
}
class HRIRloader_local {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.onLoad = r, this.vls_dirs_deg = getTdesign(2 * this.order), this.nVLS = this.vls_dirs_deg.length, this.nearestLookupRes = [5, 5], this.fs = 0, this.nSamples = 0, this.hrir_dirs_deg = [], this.hrirs = [], this.nearestLookup = [], this.nearest_dirs_deg = [], this.vls_hrirs = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    const n = this, r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "json", r.onload = function() {
      n.parseHrirFromJSON(r.response), n.nearestLookup = createNearestLookup(
        n.hrir_dirs_deg,
        n.nearestLookupRes
      );
      const i = findNearest(
        n.vls_dirs_deg,
        n.nearestLookup,
        n.nearestLookupRes
      );
      n.nearest_dirs_deg = n.getClosestDirs(i, n.hrir_dirs_deg), n.vls_hrirs = n.getClosestHrirFilters(i, n.hrirs), n.computeDecFilters();
    }, r.send();
  }
  parseHrirFromJSON(t) {
    const n = this;
    this.fs = t.leaves[6].data[0], this.nSamples = t.leaves[8].data[0][1].length, this.hrir_dirs_deg = [], t.leaves[4].data.forEach(function(r) {
      n.hrir_dirs_deg.push([r[0], r[1]]);
    }), this.hrirs = [], t.leaves[8].data.forEach(function(r) {
      const i = new Float64Array(r[0]), a = new Float64Array(r[1]);
      n.hrirs.push([i, a]);
    });
  }
  getClosestDirs(t, n) {
    const r = t.length, i = [];
    for (let a = 0; a < r; a++)
      i.push(n[t[a]]);
    return i;
  }
  getClosestHrirFilters(t, n) {
    const r = t.length, i = [];
    for (let a = 0; a < r; a++)
      i.push(n[t[a]]);
    return i;
  }
  computeDecFilters() {
    this.decodingMatrix = getAmbisonicDecMtx(
      this.nearest_dirs_deg,
      this.order
    ), this.hoaBuffer = this.getHoaFilterFromHrirFilter(
      this.nCh,
      this.nSamples,
      this.fs,
      this.vls_hrirs,
      this.decodingMatrix
    ), this.onLoad(this.hoaBuffer);
  }
  getHoaFilterFromHrirFilter(t, n, r, i, a) {
    n > i[0][0].length && (n = i[0][0].length);
    const e = this.context.createBuffer(t, n, r);
    for (let c = 0; c < t; c++) {
      const f = new Float32Array(n);
      for (let o = 0; o < i.length; o++)
        for (let h = 0; h < n; h++)
          f[h] += a[o][c] * i[o][0][h];
      e.getChannelData(c).set(f);
    }
    return e;
  }
}
class HRIRloader2D_local {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.onLoad = r, this.vls_dirs_deg = sampleCircle(2 * this.order + 2), this.nVLS = this.vls_dirs_deg.length, this.nearestLookupRes = [5, 5], this.fs = 0, this.nSamples = 0, this.hrir_dirs_deg = [], this.hrirs = [], this.nearestLookup = [], this.vls_hrirs = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    const n = this, r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "json", r.onload = function() {
      n.parseHrirFromJSON(r.response), n.nearestLookup = createNearestLookup(
        n.hrir_dirs_deg,
        n.nearestLookupRes
      );
      const i = findNearest(
        n.vls_dirs_deg,
        n.nearestLookup,
        n.nearestLookupRes
      );
      n.getClosestDirs(i, n.hrir_dirs_deg), n.vls_hrirs = n.getClosestHrirFilters(i, n.hrirs), n.computeDecFilters();
    }, r.send();
  }
  parseHrirFromJSON(t) {
    const n = this;
    this.fs = t.leaves[6].data[0], this.nSamples = t.leaves[8].data[0][1].length, this.hrir_dirs_deg = [], t.leaves[4].data.forEach(function(r) {
      n.hrir_dirs_deg.push([r[0], r[1]]);
    }), this.hrirs = [], t.leaves[8].data.forEach(function(r) {
      const i = new Float64Array(r[0]), a = new Float64Array(r[1]);
      n.hrirs.push([i, a]);
    });
  }
  getClosestDirs(t, n) {
    const r = t.length, i = [];
    for (let a = 0; a < r; a++)
      i.push(n[t[a]]);
    return i;
  }
  getClosestHrirFilters(t, n) {
    const r = t.length, i = [];
    for (let a = 0; a < r; a++)
      i.push(n[t[a]]);
    return i;
  }
  computeDecFilters() {
    const t = [];
    t.push(1);
    for (let r = 1; r < this.order + 1; r++)
      t.push(Math.cos(r * Math.PI / (2 * this.order + 2))), t.push(Math.cos(r * Math.PI / (2 * this.order + 2)));
    const n = numeric.diag(t);
    this.decodingMatrix = numeric.transpose(
      getCircHarmonics(
        this.order,
        getColumn(this.vls_dirs_deg, 0)
      )
    ), this.decodingMatrix = numeric.dot(
      this.decodingMatrix,
      n
    ), this.decodingMatrix = numeric.mul(
      2 * Math.PI / this.vls_dirs_deg.length,
      this.decodingMatrix
    ), this.hoaBuffer = this.getHoaFilterFromHrirFilter(
      this.nCh,
      this.nSamples,
      this.fs,
      this.vls_hrirs,
      this.decodingMatrix
    ), this.onLoad(this.hoaBuffer);
  }
  getHoaFilterFromHrirFilter(t, n, r, i, a) {
    n > i[0][0].length && (n = i[0][0].length);
    const e = this.context.createBuffer(t, n, r);
    for (let c = 0; c < t; c++) {
      const f = new Float32Array(n);
      for (let o = 0; o < i.length; o++)
        for (let h = 0; h < n; h++)
          f[h] += a[o][c] * i[o][0][h];
      e.getChannelData(c).set(f);
    }
    return e;
  }
}
function commonjsRequire(p) {
  throw new Error('Could not dynamically require "' + p + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var serveSofaHrir = { exports: {} };
(function(p, t) {
  (function(n) {
    p.exports = n();
  })(function() {
    return function n(r, i, a) {
      function e(o, h) {
        if (!i[o]) {
          if (!r[o]) {
            var u = typeof commonjsRequire == "function" && commonjsRequire;
            if (!h && u) return u(o, !0);
            if (c) return c(o, !0);
            var M = new Error("Cannot find module '" + o + "'");
            throw M.code = "MODULE_NOT_FOUND", M;
          }
          var v = i[o] = { exports: {} };
          r[o][0].call(v.exports, function(m) {
            var y = r[o][1][m];
            return e(y || m);
          }, v, v.exports, n, r, i, a);
        }
        return i[o].exports;
      }
      for (var c = typeof commonjsRequire == "function" && commonjsRequire, f = 0; f < a.length; f++) e(a[f]);
      return e;
    }({ 1: [function(n, r, i) {
      r.exports = { default: n("core-js/library/fn/object/define-property"), __esModule: !0 };
    }, { "core-js/library/fn/object/define-property": 4 }], 2: [function(n, r, i) {
      i.default = function(a, e) {
        if (!(a instanceof e))
          throw new TypeError("Cannot call a class as a function");
      }, i.__esModule = !0;
    }, {}], 3: [function(n, r, i) {
      var a = n("babel-runtime/core-js/object/define-property").default;
      i.default = /* @__PURE__ */ function() {
        function e(c, f) {
          for (var o = 0; o < f.length; o++) {
            var h = f[o];
            h.enumerable = h.enumerable || !1, h.configurable = !0, "value" in h && (h.writable = !0), a(c, h.key, h);
          }
        }
        return function(c, f, o) {
          return f && e(c.prototype, f), o && e(c, o), c;
        };
      }(), i.__esModule = !0;
    }, { "babel-runtime/core-js/object/define-property": 1 }], 4: [function(n, r, i) {
      var a = n("../../modules/$");
      r.exports = function(c, f, o) {
        return a.setDesc(c, f, o);
      };
    }, { "../../modules/$": 5 }], 5: [function(n, r, i) {
      var a = Object;
      r.exports = {
        create: a.create,
        getProto: a.getPrototypeOf,
        isEnum: {}.propertyIsEnumerable,
        getDesc: a.getOwnPropertyDescriptor,
        setDesc: a.defineProperty,
        setDescs: a.defineProperties,
        getKeys: a.keys,
        getNames: a.getOwnPropertyNames,
        getSymbols: a.getOwnPropertySymbols,
        each: [].forEach
      };
    }, {}], 6: [function(n, r, i) {
      var a = n("babel-runtime/helpers/create-class").default, e = n("babel-runtime/helpers/class-call-check").default;
      Object.defineProperty(i, "__esModule", {
        value: !0
      });
      var c = function() {
        function f(o, h) {
          e(this, f), this.delayTime = 0, this.posRead = 0, this.posWrite = 0, this.fracXi1 = 0, this.fracYi1 = 0, this.intDelay = 0, this.fracDelay = 0, this.a1 = void 0, this.sampleRate = o, this.maxDelayTime = h || 1, this.bufferSize = this.maxDelayTime * this.sampleRate, this.bufferSize % 1 !== 0 && (this.bufferSize = parseInt(this.bufferSize) + 1), this.buffer = new Float32Array(this.bufferSize);
        }
        return a(f, [{
          key: "setDelay",
          value: function(h) {
            if (h < this.maxDelayTime) {
              this.delayTime = h;
              var u = h * this.sampleRate;
              this.intDelay = parseInt(u), this.fracDelay = u - this.intDelay, this.resample(), this.fracDelay !== 0 && this.updateThiranCoefficient();
            } else
              throw new Error("delayTime > maxDelayTime");
          }
          /**
           * Update delay value
           * @public
           */
        }, {
          key: "getDelay",
          value: function() {
            return this.delayTime;
          }
          /**
           * Process method, where the output is calculated.
           * @param inputBuffer Input Array
           * @public
           */
        }, {
          key: "process",
          value: function(h) {
            for (var u = new Float32Array(h.length), M = 0; M < h.length; M = M + 1)
              this.buffer[this.posWrite] = h[M], u[M] = this.buffer[this.posRead], this.updatePointers();
            return this.fracDelay === 0 || (u = new Float32Array(this.fractionalThiranProcess(u))), u;
          }
          /**
           * Update the value of posRead and posWrite pointers inside the circular buffer
           * @private
           */
        }, {
          key: "updatePointers",
          value: function() {
            this.posWrite === this.buffer.length - 1 ? this.posWrite = 0 : this.posWrite = this.posWrite + 1, this.posRead === this.buffer.length - 1 ? this.posRead = 0 : this.posRead = this.posRead + 1;
          }
          /**
           * Update Thiran coefficient (1st order Thiran)
           * @private
           */
        }, {
          key: "updateThiranCoefficient",
          value: function() {
            this.a1 = (1 - this.fracDelay) / (1 + this.fracDelay);
          }
          /**
           * Update the pointer posRead value when the delay value is changed
           * @private
           */
        }, {
          key: "resample",
          value: function() {
            if (this.posWrite - this.intDelay < 0) {
              var h = this.intDelay - this.posWrite;
              this.posRead = this.buffer.length - h;
            } else
              this.posRead = this.posWrite - this.intDelay;
          }
          /**
           * Fractional process method.
           * @private
           * @param inputBuffer Input Array
           */
        }, {
          key: "fractionalThiranProcess",
          value: function(h) {
            for (var u = new Float32Array(h.length), M, v, m = this.fracXi1, y = this.fracYi1, D = 0; D < h.length; D = D + 1)
              M = h[D], v = this.a1 * M + m - this.a1 * y, m = M, y = v, u[D] = v;
            return this.fracXi1 = m, this.fracYi1 = y, u;
          }
        }]), f;
      }();
      i.default = c, r.exports = i.default;
    }, { "babel-runtime/helpers/class-call-check": 2, "babel-runtime/helpers/create-class": 3 }], 7: [function(n, r, i) {
      r.exports = n("./dist/fractional-delay");
    }, { "./dist/fractional-delay": 6 }], 8: [function(n, r, i) {
      (function(e, c) {
        if (typeof i == "object" && typeof r == "object")
          r.exports = c();
        else {
          var f = c();
          for (var o in f) (typeof i == "object" ? i : e)[o] = f[o];
        }
      })(this, function() {
        return (
          /******/
          function(a) {
            var e = {};
            function c(f) {
              if (e[f])
                return e[f].exports;
              var o = e[f] = {
                /******/
                i: f,
                /******/
                l: !1,
                /******/
                exports: {}
                /******/
              };
              return a[f].call(o.exports, o, o.exports, c), o.l = !0, o.exports;
            }
            return c.m = a, c.c = e, c.d = function(f, o, h) {
              c.o(f, o) || Object.defineProperty(f, o, {
                /******/
                configurable: !1,
                /******/
                enumerable: !0,
                /******/
                get: h
                /******/
              });
            }, c.n = function(f) {
              var o = f && f.__esModule ? (
                /******/
                function() {
                  return f.default;
                }
              ) : (
                /******/
                function() {
                  return f;
                }
              );
              return c.d(o, "a", o), o;
            }, c.o = function(f, o) {
              return Object.prototype.hasOwnProperty.call(f, o);
            }, c.p = "", c(c.s = 4);
          }([
            /* 0 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.setMatrixArrayType = o, e.toRadian = u, e.equals = M;
              var f = e.EPSILON = 1e-6;
              e.ARRAY_TYPE = typeof Float32Array < "u" ? Float32Array : Array, e.RANDOM = Math.random;
              function o(v) {
                e.ARRAY_TYPE = v;
              }
              var h = Math.PI / 180;
              function u(v) {
                return v * h;
              }
              function M(v, m) {
                return Math.abs(v - m) <= f * Math.max(1, Math.abs(v), Math.abs(m));
              }
            },
            /* 1 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.fromMat4 = M, e.clone = v, e.copy = m, e.fromValues = y, e.set = D, e.identity = _, e.transpose = L, e.invert = F, e.adjoint = x, e.determinant = O, e.multiply = R, e.translate = I, e.rotate = l, e.scale = b, e.fromTranslation = Z, e.fromRotation = G, e.fromScaling = J, e.fromMat2d = ee, e.fromQuat = se, e.normalFromMat4 = Ae, e.projection = Se, e.str = De, e.frob = N, e.add = w, e.subtract = j, e.multiplyScalar = te, e.multiplyScalarAndAdd = ie, e.exactEquals = ce, e.equals = ge;
              var f = c(0), o = h(f);
              function h(S) {
                if (S && S.__esModule)
                  return S;
                var d = {};
                if (S != null)
                  for (var E in S)
                    Object.prototype.hasOwnProperty.call(S, E) && (d[E] = S[E]);
                return d.default = S, d;
              }
              function u() {
                var S = new o.ARRAY_TYPE(9);
                return S[0] = 1, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = 1, S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function M(S, d) {
                return S[0] = d[0], S[1] = d[1], S[2] = d[2], S[3] = d[4], S[4] = d[5], S[5] = d[6], S[6] = d[8], S[7] = d[9], S[8] = d[10], S;
              }
              function v(S) {
                var d = new o.ARRAY_TYPE(9);
                return d[0] = S[0], d[1] = S[1], d[2] = S[2], d[3] = S[3], d[4] = S[4], d[5] = S[5], d[6] = S[6], d[7] = S[7], d[8] = S[8], d;
              }
              function m(S, d) {
                return S[0] = d[0], S[1] = d[1], S[2] = d[2], S[3] = d[3], S[4] = d[4], S[5] = d[5], S[6] = d[6], S[7] = d[7], S[8] = d[8], S;
              }
              function y(S, d, E, Q, z, X, $, he, de) {
                var q = new o.ARRAY_TYPE(9);
                return q[0] = S, q[1] = d, q[2] = E, q[3] = Q, q[4] = z, q[5] = X, q[6] = $, q[7] = he, q[8] = de, q;
              }
              function D(S, d, E, Q, z, X, $, he, de, q) {
                return S[0] = d, S[1] = E, S[2] = Q, S[3] = z, S[4] = X, S[5] = $, S[6] = he, S[7] = de, S[8] = q, S;
              }
              function _(S) {
                return S[0] = 1, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = 1, S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function L(S, d) {
                if (S === d) {
                  var E = d[1], Q = d[2], z = d[5];
                  S[1] = d[3], S[2] = d[6], S[3] = E, S[5] = d[7], S[6] = Q, S[7] = z;
                } else
                  S[0] = d[0], S[1] = d[3], S[2] = d[6], S[3] = d[1], S[4] = d[4], S[5] = d[7], S[6] = d[2], S[7] = d[5], S[8] = d[8];
                return S;
              }
              function F(S, d) {
                var E = d[0], Q = d[1], z = d[2], X = d[3], $ = d[4], he = d[5], de = d[6], q = d[7], K = d[8], ne = K * $ - he * q, fe = -K * X + he * de, le = q * X - $ * de, s = E * ne + Q * fe + z * le;
                return s ? (s = 1 / s, S[0] = ne * s, S[1] = (-K * Q + z * q) * s, S[2] = (he * Q - z * $) * s, S[3] = fe * s, S[4] = (K * E - z * de) * s, S[5] = (-he * E + z * X) * s, S[6] = le * s, S[7] = (-q * E + Q * de) * s, S[8] = ($ * E - Q * X) * s, S) : null;
              }
              function x(S, d) {
                var E = d[0], Q = d[1], z = d[2], X = d[3], $ = d[4], he = d[5], de = d[6], q = d[7], K = d[8];
                return S[0] = $ * K - he * q, S[1] = z * q - Q * K, S[2] = Q * he - z * $, S[3] = he * de - X * K, S[4] = E * K - z * de, S[5] = z * X - E * he, S[6] = X * q - $ * de, S[7] = Q * de - E * q, S[8] = E * $ - Q * X, S;
              }
              function O(S) {
                var d = S[0], E = S[1], Q = S[2], z = S[3], X = S[4], $ = S[5], he = S[6], de = S[7], q = S[8];
                return d * (q * X - $ * de) + E * (-q * z + $ * he) + Q * (de * z - X * he);
              }
              function R(S, d, E) {
                var Q = d[0], z = d[1], X = d[2], $ = d[3], he = d[4], de = d[5], q = d[6], K = d[7], ne = d[8], fe = E[0], le = E[1], s = E[2], g = E[3], Y = E[4], H = E[5], re = E[6], ae = E[7], oe = E[8];
                return S[0] = fe * Q + le * $ + s * q, S[1] = fe * z + le * he + s * K, S[2] = fe * X + le * de + s * ne, S[3] = g * Q + Y * $ + H * q, S[4] = g * z + Y * he + H * K, S[5] = g * X + Y * de + H * ne, S[6] = re * Q + ae * $ + oe * q, S[7] = re * z + ae * he + oe * K, S[8] = re * X + ae * de + oe * ne, S;
              }
              function I(S, d, E) {
                var Q = d[0], z = d[1], X = d[2], $ = d[3], he = d[4], de = d[5], q = d[6], K = d[7], ne = d[8], fe = E[0], le = E[1];
                return S[0] = Q, S[1] = z, S[2] = X, S[3] = $, S[4] = he, S[5] = de, S[6] = fe * Q + le * $ + q, S[7] = fe * z + le * he + K, S[8] = fe * X + le * de + ne, S;
              }
              function l(S, d, E) {
                var Q = d[0], z = d[1], X = d[2], $ = d[3], he = d[4], de = d[5], q = d[6], K = d[7], ne = d[8], fe = Math.sin(E), le = Math.cos(E);
                return S[0] = le * Q + fe * $, S[1] = le * z + fe * he, S[2] = le * X + fe * de, S[3] = le * $ - fe * Q, S[4] = le * he - fe * z, S[5] = le * de - fe * X, S[6] = q, S[7] = K, S[8] = ne, S;
              }
              function b(S, d, E) {
                var Q = E[0], z = E[1];
                return S[0] = Q * d[0], S[1] = Q * d[1], S[2] = Q * d[2], S[3] = z * d[3], S[4] = z * d[4], S[5] = z * d[5], S[6] = d[6], S[7] = d[7], S[8] = d[8], S;
              }
              function Z(S, d) {
                return S[0] = 1, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = 1, S[5] = 0, S[6] = d[0], S[7] = d[1], S[8] = 1, S;
              }
              function G(S, d) {
                var E = Math.sin(d), Q = Math.cos(d);
                return S[0] = Q, S[1] = E, S[2] = 0, S[3] = -E, S[4] = Q, S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function J(S, d) {
                return S[0] = d[0], S[1] = 0, S[2] = 0, S[3] = 0, S[4] = d[1], S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function ee(S, d) {
                return S[0] = d[0], S[1] = d[1], S[2] = 0, S[3] = d[2], S[4] = d[3], S[5] = 0, S[6] = d[4], S[7] = d[5], S[8] = 1, S;
              }
              function se(S, d) {
                var E = d[0], Q = d[1], z = d[2], X = d[3], $ = E + E, he = Q + Q, de = z + z, q = E * $, K = Q * $, ne = Q * he, fe = z * $, le = z * he, s = z * de, g = X * $, Y = X * he, H = X * de;
                return S[0] = 1 - ne - s, S[3] = K - H, S[6] = fe + Y, S[1] = K + H, S[4] = 1 - q - s, S[7] = le - g, S[2] = fe - Y, S[5] = le + g, S[8] = 1 - q - ne, S;
              }
              function Ae(S, d) {
                var E = d[0], Q = d[1], z = d[2], X = d[3], $ = d[4], he = d[5], de = d[6], q = d[7], K = d[8], ne = d[9], fe = d[10], le = d[11], s = d[12], g = d[13], Y = d[14], H = d[15], re = E * he - Q * $, ae = E * de - z * $, oe = E * q - X * $, ue = Q * de - z * he, ve = Q * q - X * he, me = z * q - X * de, pe = K * g - ne * s, Ce = K * Y - fe * s, Me = K * H - le * s, we = ne * Y - fe * g, xe = ne * H - le * g, _e = fe * H - le * Y, ye = re * _e - ae * xe + oe * we + ue * Me - ve * Ce + me * pe;
                return ye ? (ye = 1 / ye, S[0] = (he * _e - de * xe + q * we) * ye, S[1] = (de * Me - $ * _e - q * Ce) * ye, S[2] = ($ * xe - he * Me + q * pe) * ye, S[3] = (z * xe - Q * _e - X * we) * ye, S[4] = (E * _e - z * Me + X * Ce) * ye, S[5] = (Q * Me - E * xe - X * pe) * ye, S[6] = (g * me - Y * ve + H * ue) * ye, S[7] = (Y * oe - s * me - H * ae) * ye, S[8] = (s * ve - g * oe + H * re) * ye, S) : null;
              }
              function Se(S, d, E) {
                return S[0] = 2 / d, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = -2 / E, S[5] = 0, S[6] = -1, S[7] = 1, S[8] = 1, S;
              }
              function De(S) {
                return "mat3(" + S[0] + ", " + S[1] + ", " + S[2] + ", " + S[3] + ", " + S[4] + ", " + S[5] + ", " + S[6] + ", " + S[7] + ", " + S[8] + ")";
              }
              function N(S) {
                return Math.sqrt(Math.pow(S[0], 2) + Math.pow(S[1], 2) + Math.pow(S[2], 2) + Math.pow(S[3], 2) + Math.pow(S[4], 2) + Math.pow(S[5], 2) + Math.pow(S[6], 2) + Math.pow(S[7], 2) + Math.pow(S[8], 2));
              }
              function w(S, d, E) {
                return S[0] = d[0] + E[0], S[1] = d[1] + E[1], S[2] = d[2] + E[2], S[3] = d[3] + E[3], S[4] = d[4] + E[4], S[5] = d[5] + E[5], S[6] = d[6] + E[6], S[7] = d[7] + E[7], S[8] = d[8] + E[8], S;
              }
              function j(S, d, E) {
                return S[0] = d[0] - E[0], S[1] = d[1] - E[1], S[2] = d[2] - E[2], S[3] = d[3] - E[3], S[4] = d[4] - E[4], S[5] = d[5] - E[5], S[6] = d[6] - E[6], S[7] = d[7] - E[7], S[8] = d[8] - E[8], S;
              }
              function te(S, d, E) {
                return S[0] = d[0] * E, S[1] = d[1] * E, S[2] = d[2] * E, S[3] = d[3] * E, S[4] = d[4] * E, S[5] = d[5] * E, S[6] = d[6] * E, S[7] = d[7] * E, S[8] = d[8] * E, S;
              }
              function ie(S, d, E, Q) {
                return S[0] = d[0] + E[0] * Q, S[1] = d[1] + E[1] * Q, S[2] = d[2] + E[2] * Q, S[3] = d[3] + E[3] * Q, S[4] = d[4] + E[4] * Q, S[5] = d[5] + E[5] * Q, S[6] = d[6] + E[6] * Q, S[7] = d[7] + E[7] * Q, S[8] = d[8] + E[8] * Q, S;
              }
              function ce(S, d) {
                return S[0] === d[0] && S[1] === d[1] && S[2] === d[2] && S[3] === d[3] && S[4] === d[4] && S[5] === d[5] && S[6] === d[6] && S[7] === d[7] && S[8] === d[8];
              }
              function ge(S, d) {
                var E = S[0], Q = S[1], z = S[2], X = S[3], $ = S[4], he = S[5], de = S[6], q = S[7], K = S[8], ne = d[0], fe = d[1], le = d[2], s = d[3], g = d[4], Y = d[5], H = d[6], re = d[7], ae = d[8];
                return Math.abs(E - ne) <= o.EPSILON * Math.max(1, Math.abs(E), Math.abs(ne)) && Math.abs(Q - fe) <= o.EPSILON * Math.max(1, Math.abs(Q), Math.abs(fe)) && Math.abs(z - le) <= o.EPSILON * Math.max(1, Math.abs(z), Math.abs(le)) && Math.abs(X - s) <= o.EPSILON * Math.max(1, Math.abs(X), Math.abs(s)) && Math.abs($ - g) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(g)) && Math.abs(he - Y) <= o.EPSILON * Math.max(1, Math.abs(he), Math.abs(Y)) && Math.abs(de - H) <= o.EPSILON * Math.max(1, Math.abs(de), Math.abs(H)) && Math.abs(q - re) <= o.EPSILON * Math.max(1, Math.abs(q), Math.abs(re)) && Math.abs(K - ae) <= o.EPSILON * Math.max(1, Math.abs(K), Math.abs(ae));
              }
              e.mul = R, e.sub = j;
            },
            /* 2 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = u, e.clone = M, e.length = v, e.fromValues = m, e.copy = y, e.set = D, e.add = _, e.subtract = L, e.multiply = F, e.divide = x, e.ceil = O, e.floor = R, e.min = I, e.max = l, e.round = b, e.scale = Z, e.scaleAndAdd = G, e.distance = J, e.squaredDistance = ee, e.squaredLength = se, e.negate = Ae, e.inverse = Se, e.normalize = De, e.dot = N, e.cross = w, e.lerp = j, e.hermite = te, e.bezier = ie, e.random = ce, e.transformMat4 = ge, e.transformMat3 = S, e.transformQuat = d, e.rotateX = E, e.rotateY = Q, e.rotateZ = z, e.angle = X, e.str = $, e.exactEquals = he, e.equals = de;
              var f = c(0), o = h(f);
              function h(q) {
                if (q && q.__esModule)
                  return q;
                var K = {};
                if (q != null)
                  for (var ne in q)
                    Object.prototype.hasOwnProperty.call(q, ne) && (K[ne] = q[ne]);
                return K.default = q, K;
              }
              function u() {
                var q = new o.ARRAY_TYPE(3);
                return q[0] = 0, q[1] = 0, q[2] = 0, q;
              }
              function M(q) {
                var K = new o.ARRAY_TYPE(3);
                return K[0] = q[0], K[1] = q[1], K[2] = q[2], K;
              }
              function v(q) {
                var K = q[0], ne = q[1], fe = q[2];
                return Math.sqrt(K * K + ne * ne + fe * fe);
              }
              function m(q, K, ne) {
                var fe = new o.ARRAY_TYPE(3);
                return fe[0] = q, fe[1] = K, fe[2] = ne, fe;
              }
              function y(q, K) {
                return q[0] = K[0], q[1] = K[1], q[2] = K[2], q;
              }
              function D(q, K, ne, fe) {
                return q[0] = K, q[1] = ne, q[2] = fe, q;
              }
              function _(q, K, ne) {
                return q[0] = K[0] + ne[0], q[1] = K[1] + ne[1], q[2] = K[2] + ne[2], q;
              }
              function L(q, K, ne) {
                return q[0] = K[0] - ne[0], q[1] = K[1] - ne[1], q[2] = K[2] - ne[2], q;
              }
              function F(q, K, ne) {
                return q[0] = K[0] * ne[0], q[1] = K[1] * ne[1], q[2] = K[2] * ne[2], q;
              }
              function x(q, K, ne) {
                return q[0] = K[0] / ne[0], q[1] = K[1] / ne[1], q[2] = K[2] / ne[2], q;
              }
              function O(q, K) {
                return q[0] = Math.ceil(K[0]), q[1] = Math.ceil(K[1]), q[2] = Math.ceil(K[2]), q;
              }
              function R(q, K) {
                return q[0] = Math.floor(K[0]), q[1] = Math.floor(K[1]), q[2] = Math.floor(K[2]), q;
              }
              function I(q, K, ne) {
                return q[0] = Math.min(K[0], ne[0]), q[1] = Math.min(K[1], ne[1]), q[2] = Math.min(K[2], ne[2]), q;
              }
              function l(q, K, ne) {
                return q[0] = Math.max(K[0], ne[0]), q[1] = Math.max(K[1], ne[1]), q[2] = Math.max(K[2], ne[2]), q;
              }
              function b(q, K) {
                return q[0] = Math.round(K[0]), q[1] = Math.round(K[1]), q[2] = Math.round(K[2]), q;
              }
              function Z(q, K, ne) {
                return q[0] = K[0] * ne, q[1] = K[1] * ne, q[2] = K[2] * ne, q;
              }
              function G(q, K, ne, fe) {
                return q[0] = K[0] + ne[0] * fe, q[1] = K[1] + ne[1] * fe, q[2] = K[2] + ne[2] * fe, q;
              }
              function J(q, K) {
                var ne = K[0] - q[0], fe = K[1] - q[1], le = K[2] - q[2];
                return Math.sqrt(ne * ne + fe * fe + le * le);
              }
              function ee(q, K) {
                var ne = K[0] - q[0], fe = K[1] - q[1], le = K[2] - q[2];
                return ne * ne + fe * fe + le * le;
              }
              function se(q) {
                var K = q[0], ne = q[1], fe = q[2];
                return K * K + ne * ne + fe * fe;
              }
              function Ae(q, K) {
                return q[0] = -K[0], q[1] = -K[1], q[2] = -K[2], q;
              }
              function Se(q, K) {
                return q[0] = 1 / K[0], q[1] = 1 / K[1], q[2] = 1 / K[2], q;
              }
              function De(q, K) {
                var ne = K[0], fe = K[1], le = K[2], s = ne * ne + fe * fe + le * le;
                return s > 0 && (s = 1 / Math.sqrt(s), q[0] = K[0] * s, q[1] = K[1] * s, q[2] = K[2] * s), q;
              }
              function N(q, K) {
                return q[0] * K[0] + q[1] * K[1] + q[2] * K[2];
              }
              function w(q, K, ne) {
                var fe = K[0], le = K[1], s = K[2], g = ne[0], Y = ne[1], H = ne[2];
                return q[0] = le * H - s * Y, q[1] = s * g - fe * H, q[2] = fe * Y - le * g, q;
              }
              function j(q, K, ne, fe) {
                var le = K[0], s = K[1], g = K[2];
                return q[0] = le + fe * (ne[0] - le), q[1] = s + fe * (ne[1] - s), q[2] = g + fe * (ne[2] - g), q;
              }
              function te(q, K, ne, fe, le, s) {
                var g = s * s, Y = g * (2 * s - 3) + 1, H = g * (s - 2) + s, re = g * (s - 1), ae = g * (3 - 2 * s);
                return q[0] = K[0] * Y + ne[0] * H + fe[0] * re + le[0] * ae, q[1] = K[1] * Y + ne[1] * H + fe[1] * re + le[1] * ae, q[2] = K[2] * Y + ne[2] * H + fe[2] * re + le[2] * ae, q;
              }
              function ie(q, K, ne, fe, le, s) {
                var g = 1 - s, Y = g * g, H = s * s, re = Y * g, ae = 3 * s * Y, oe = 3 * H * g, ue = H * s;
                return q[0] = K[0] * re + ne[0] * ae + fe[0] * oe + le[0] * ue, q[1] = K[1] * re + ne[1] * ae + fe[1] * oe + le[1] * ue, q[2] = K[2] * re + ne[2] * ae + fe[2] * oe + le[2] * ue, q;
              }
              function ce(q, K) {
                K = K || 1;
                var ne = o.RANDOM() * 2 * Math.PI, fe = o.RANDOM() * 2 - 1, le = Math.sqrt(1 - fe * fe) * K;
                return q[0] = Math.cos(ne) * le, q[1] = Math.sin(ne) * le, q[2] = fe * K, q;
              }
              function ge(q, K, ne) {
                var fe = K[0], le = K[1], s = K[2], g = ne[3] * fe + ne[7] * le + ne[11] * s + ne[15];
                return g = g || 1, q[0] = (ne[0] * fe + ne[4] * le + ne[8] * s + ne[12]) / g, q[1] = (ne[1] * fe + ne[5] * le + ne[9] * s + ne[13]) / g, q[2] = (ne[2] * fe + ne[6] * le + ne[10] * s + ne[14]) / g, q;
              }
              function S(q, K, ne) {
                var fe = K[0], le = K[1], s = K[2];
                return q[0] = fe * ne[0] + le * ne[3] + s * ne[6], q[1] = fe * ne[1] + le * ne[4] + s * ne[7], q[2] = fe * ne[2] + le * ne[5] + s * ne[8], q;
              }
              function d(q, K, ne) {
                var fe = K[0], le = K[1], s = K[2], g = ne[0], Y = ne[1], H = ne[2], re = ne[3], ae = re * fe + Y * s - H * le, oe = re * le + H * fe - g * s, ue = re * s + g * le - Y * fe, ve = -g * fe - Y * le - H * s;
                return q[0] = ae * re + ve * -g + oe * -H - ue * -Y, q[1] = oe * re + ve * -Y + ue * -g - ae * -H, q[2] = ue * re + ve * -H + ae * -Y - oe * -g, q;
              }
              function E(q, K, ne, fe) {
                var le = [], s = [];
                return le[0] = K[0] - ne[0], le[1] = K[1] - ne[1], le[2] = K[2] - ne[2], s[0] = le[0], s[1] = le[1] * Math.cos(fe) - le[2] * Math.sin(fe), s[2] = le[1] * Math.sin(fe) + le[2] * Math.cos(fe), q[0] = s[0] + ne[0], q[1] = s[1] + ne[1], q[2] = s[2] + ne[2], q;
              }
              function Q(q, K, ne, fe) {
                var le = [], s = [];
                return le[0] = K[0] - ne[0], le[1] = K[1] - ne[1], le[2] = K[2] - ne[2], s[0] = le[2] * Math.sin(fe) + le[0] * Math.cos(fe), s[1] = le[1], s[2] = le[2] * Math.cos(fe) - le[0] * Math.sin(fe), q[0] = s[0] + ne[0], q[1] = s[1] + ne[1], q[2] = s[2] + ne[2], q;
              }
              function z(q, K, ne, fe) {
                var le = [], s = [];
                return le[0] = K[0] - ne[0], le[1] = K[1] - ne[1], le[2] = K[2] - ne[2], s[0] = le[0] * Math.cos(fe) - le[1] * Math.sin(fe), s[1] = le[0] * Math.sin(fe) + le[1] * Math.cos(fe), s[2] = le[2], q[0] = s[0] + ne[0], q[1] = s[1] + ne[1], q[2] = s[2] + ne[2], q;
              }
              function X(q, K) {
                var ne = m(q[0], q[1], q[2]), fe = m(K[0], K[1], K[2]);
                De(ne, ne), De(fe, fe);
                var le = N(ne, fe);
                return le > 1 ? 0 : le < -1 ? Math.PI : Math.acos(le);
              }
              function $(q) {
                return "vec3(" + q[0] + ", " + q[1] + ", " + q[2] + ")";
              }
              function he(q, K) {
                return q[0] === K[0] && q[1] === K[1] && q[2] === K[2];
              }
              function de(q, K) {
                var ne = q[0], fe = q[1], le = q[2], s = K[0], g = K[1], Y = K[2];
                return Math.abs(ne - s) <= o.EPSILON * Math.max(1, Math.abs(ne), Math.abs(s)) && Math.abs(fe - g) <= o.EPSILON * Math.max(1, Math.abs(fe), Math.abs(g)) && Math.abs(le - Y) <= o.EPSILON * Math.max(1, Math.abs(le), Math.abs(Y));
              }
              e.sub = L, e.mul = F, e.div = x, e.dist = J, e.sqrDist = ee, e.len = v, e.sqrLen = se, e.forEach = function() {
                var q = u();
                return function(K, ne, fe, le, s, g) {
                  var Y = void 0, H = void 0;
                  for (ne || (ne = 3), fe || (fe = 0), le ? H = Math.min(le * ne + fe, K.length) : H = K.length, Y = fe; Y < H; Y += ne)
                    q[0] = K[Y], q[1] = K[Y + 1], q[2] = K[Y + 2], s(q, q, g), K[Y] = q[0], K[Y + 1] = q[1], K[Y + 2] = q[2];
                  return K;
                };
              }();
            },
            /* 3 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = u, e.clone = M, e.fromValues = v, e.copy = m, e.set = y, e.add = D, e.subtract = _, e.multiply = L, e.divide = F, e.ceil = x, e.floor = O, e.min = R, e.max = I, e.round = l, e.scale = b, e.scaleAndAdd = Z, e.distance = G, e.squaredDistance = J, e.length = ee, e.squaredLength = se, e.negate = Ae, e.inverse = Se, e.normalize = De, e.dot = N, e.lerp = w, e.random = j, e.transformMat4 = te, e.transformQuat = ie, e.str = ce, e.exactEquals = ge, e.equals = S;
              var f = c(0), o = h(f);
              function h(d) {
                if (d && d.__esModule)
                  return d;
                var E = {};
                if (d != null)
                  for (var Q in d)
                    Object.prototype.hasOwnProperty.call(d, Q) && (E[Q] = d[Q]);
                return E.default = d, E;
              }
              function u() {
                var d = new o.ARRAY_TYPE(4);
                return d[0] = 0, d[1] = 0, d[2] = 0, d[3] = 0, d;
              }
              function M(d) {
                var E = new o.ARRAY_TYPE(4);
                return E[0] = d[0], E[1] = d[1], E[2] = d[2], E[3] = d[3], E;
              }
              function v(d, E, Q, z) {
                var X = new o.ARRAY_TYPE(4);
                return X[0] = d, X[1] = E, X[2] = Q, X[3] = z, X;
              }
              function m(d, E) {
                return d[0] = E[0], d[1] = E[1], d[2] = E[2], d[3] = E[3], d;
              }
              function y(d, E, Q, z, X) {
                return d[0] = E, d[1] = Q, d[2] = z, d[3] = X, d;
              }
              function D(d, E, Q) {
                return d[0] = E[0] + Q[0], d[1] = E[1] + Q[1], d[2] = E[2] + Q[2], d[3] = E[3] + Q[3], d;
              }
              function _(d, E, Q) {
                return d[0] = E[0] - Q[0], d[1] = E[1] - Q[1], d[2] = E[2] - Q[2], d[3] = E[3] - Q[3], d;
              }
              function L(d, E, Q) {
                return d[0] = E[0] * Q[0], d[1] = E[1] * Q[1], d[2] = E[2] * Q[2], d[3] = E[3] * Q[3], d;
              }
              function F(d, E, Q) {
                return d[0] = E[0] / Q[0], d[1] = E[1] / Q[1], d[2] = E[2] / Q[2], d[3] = E[3] / Q[3], d;
              }
              function x(d, E) {
                return d[0] = Math.ceil(E[0]), d[1] = Math.ceil(E[1]), d[2] = Math.ceil(E[2]), d[3] = Math.ceil(E[3]), d;
              }
              function O(d, E) {
                return d[0] = Math.floor(E[0]), d[1] = Math.floor(E[1]), d[2] = Math.floor(E[2]), d[3] = Math.floor(E[3]), d;
              }
              function R(d, E, Q) {
                return d[0] = Math.min(E[0], Q[0]), d[1] = Math.min(E[1], Q[1]), d[2] = Math.min(E[2], Q[2]), d[3] = Math.min(E[3], Q[3]), d;
              }
              function I(d, E, Q) {
                return d[0] = Math.max(E[0], Q[0]), d[1] = Math.max(E[1], Q[1]), d[2] = Math.max(E[2], Q[2]), d[3] = Math.max(E[3], Q[3]), d;
              }
              function l(d, E) {
                return d[0] = Math.round(E[0]), d[1] = Math.round(E[1]), d[2] = Math.round(E[2]), d[3] = Math.round(E[3]), d;
              }
              function b(d, E, Q) {
                return d[0] = E[0] * Q, d[1] = E[1] * Q, d[2] = E[2] * Q, d[3] = E[3] * Q, d;
              }
              function Z(d, E, Q, z) {
                return d[0] = E[0] + Q[0] * z, d[1] = E[1] + Q[1] * z, d[2] = E[2] + Q[2] * z, d[3] = E[3] + Q[3] * z, d;
              }
              function G(d, E) {
                var Q = E[0] - d[0], z = E[1] - d[1], X = E[2] - d[2], $ = E[3] - d[3];
                return Math.sqrt(Q * Q + z * z + X * X + $ * $);
              }
              function J(d, E) {
                var Q = E[0] - d[0], z = E[1] - d[1], X = E[2] - d[2], $ = E[3] - d[3];
                return Q * Q + z * z + X * X + $ * $;
              }
              function ee(d) {
                var E = d[0], Q = d[1], z = d[2], X = d[3];
                return Math.sqrt(E * E + Q * Q + z * z + X * X);
              }
              function se(d) {
                var E = d[0], Q = d[1], z = d[2], X = d[3];
                return E * E + Q * Q + z * z + X * X;
              }
              function Ae(d, E) {
                return d[0] = -E[0], d[1] = -E[1], d[2] = -E[2], d[3] = -E[3], d;
              }
              function Se(d, E) {
                return d[0] = 1 / E[0], d[1] = 1 / E[1], d[2] = 1 / E[2], d[3] = 1 / E[3], d;
              }
              function De(d, E) {
                var Q = E[0], z = E[1], X = E[2], $ = E[3], he = Q * Q + z * z + X * X + $ * $;
                return he > 0 && (he = 1 / Math.sqrt(he), d[0] = Q * he, d[1] = z * he, d[2] = X * he, d[3] = $ * he), d;
              }
              function N(d, E) {
                return d[0] * E[0] + d[1] * E[1] + d[2] * E[2] + d[3] * E[3];
              }
              function w(d, E, Q, z) {
                var X = E[0], $ = E[1], he = E[2], de = E[3];
                return d[0] = X + z * (Q[0] - X), d[1] = $ + z * (Q[1] - $), d[2] = he + z * (Q[2] - he), d[3] = de + z * (Q[3] - de), d;
              }
              function j(d, E) {
                return E = E || 1, d[0] = o.RANDOM(), d[1] = o.RANDOM(), d[2] = o.RANDOM(), d[3] = o.RANDOM(), De(d, d), b(d, d, E), d;
              }
              function te(d, E, Q) {
                var z = E[0], X = E[1], $ = E[2], he = E[3];
                return d[0] = Q[0] * z + Q[4] * X + Q[8] * $ + Q[12] * he, d[1] = Q[1] * z + Q[5] * X + Q[9] * $ + Q[13] * he, d[2] = Q[2] * z + Q[6] * X + Q[10] * $ + Q[14] * he, d[3] = Q[3] * z + Q[7] * X + Q[11] * $ + Q[15] * he, d;
              }
              function ie(d, E, Q) {
                var z = E[0], X = E[1], $ = E[2], he = Q[0], de = Q[1], q = Q[2], K = Q[3], ne = K * z + de * $ - q * X, fe = K * X + q * z - he * $, le = K * $ + he * X - de * z, s = -he * z - de * X - q * $;
                return d[0] = ne * K + s * -he + fe * -q - le * -de, d[1] = fe * K + s * -de + le * -he - ne * -q, d[2] = le * K + s * -q + ne * -de - fe * -he, d[3] = E[3], d;
              }
              function ce(d) {
                return "vec4(" + d[0] + ", " + d[1] + ", " + d[2] + ", " + d[3] + ")";
              }
              function ge(d, E) {
                return d[0] === E[0] && d[1] === E[1] && d[2] === E[2] && d[3] === E[3];
              }
              function S(d, E) {
                var Q = d[0], z = d[1], X = d[2], $ = d[3], he = E[0], de = E[1], q = E[2], K = E[3];
                return Math.abs(Q - he) <= o.EPSILON * Math.max(1, Math.abs(Q), Math.abs(he)) && Math.abs(z - de) <= o.EPSILON * Math.max(1, Math.abs(z), Math.abs(de)) && Math.abs(X - q) <= o.EPSILON * Math.max(1, Math.abs(X), Math.abs(q)) && Math.abs($ - K) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(K));
              }
              e.sub = _, e.mul = L, e.div = F, e.dist = G, e.sqrDist = J, e.len = ee, e.sqrLen = se, e.forEach = function() {
                var d = u();
                return function(E, Q, z, X, $, he) {
                  var de = void 0, q = void 0;
                  for (Q || (Q = 4), z || (z = 0), X ? q = Math.min(X * Q + z, E.length) : q = E.length, de = z; de < q; de += Q)
                    d[0] = E[de], d[1] = E[de + 1], d[2] = E[de + 2], d[3] = E[de + 3], $(d, d, he), E[de] = d[0], E[de + 1] = d[1], E[de + 2] = d[2], E[de + 3] = d[3];
                  return E;
                };
              }();
            },
            /* 4 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.vec4 = e.vec3 = e.vec2 = e.quat = e.mat4 = e.mat3 = e.mat2d = e.mat2 = e.glMatrix = void 0;
              var f = c(0), o = Z(f), h = c(5), u = Z(h), M = c(6), v = Z(M), m = c(1), y = Z(m), D = c(7), _ = Z(D), L = c(8), F = Z(L), x = c(9), O = Z(x), R = c(2), I = Z(R), l = c(3), b = Z(l);
              function Z(G) {
                if (G && G.__esModule)
                  return G;
                var J = {};
                if (G != null)
                  for (var ee in G)
                    Object.prototype.hasOwnProperty.call(G, ee) && (J[ee] = G[ee]);
                return J.default = G, J;
              }
              e.glMatrix = o, e.mat2 = u, e.mat2d = v, e.mat3 = y, e.mat4 = _, e.quat = F, e.vec2 = O, e.vec3 = I, e.vec4 = b;
            },
            /* 5 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.clone = M, e.copy = v, e.identity = m, e.fromValues = y, e.set = D, e.transpose = _, e.invert = L, e.adjoint = F, e.determinant = x, e.multiply = O, e.rotate = R, e.scale = I, e.fromRotation = l, e.fromScaling = b, e.str = Z, e.frob = G, e.LDU = J, e.add = ee, e.subtract = se, e.exactEquals = Ae, e.equals = Se, e.multiplyScalar = De, e.multiplyScalarAndAdd = N;
              var f = c(0), o = h(f);
              function h(w) {
                if (w && w.__esModule)
                  return w;
                var j = {};
                if (w != null)
                  for (var te in w)
                    Object.prototype.hasOwnProperty.call(w, te) && (j[te] = w[te]);
                return j.default = w, j;
              }
              function u() {
                var w = new o.ARRAY_TYPE(4);
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function M(w) {
                var j = new o.ARRAY_TYPE(4);
                return j[0] = w[0], j[1] = w[1], j[2] = w[2], j[3] = w[3], j;
              }
              function v(w, j) {
                return w[0] = j[0], w[1] = j[1], w[2] = j[2], w[3] = j[3], w;
              }
              function m(w) {
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function y(w, j, te, ie) {
                var ce = new o.ARRAY_TYPE(4);
                return ce[0] = w, ce[1] = j, ce[2] = te, ce[3] = ie, ce;
              }
              function D(w, j, te, ie, ce) {
                return w[0] = j, w[1] = te, w[2] = ie, w[3] = ce, w;
              }
              function _(w, j) {
                if (w === j) {
                  var te = j[1];
                  w[1] = j[2], w[2] = te;
                } else
                  w[0] = j[0], w[1] = j[2], w[2] = j[1], w[3] = j[3];
                return w;
              }
              function L(w, j) {
                var te = j[0], ie = j[1], ce = j[2], ge = j[3], S = te * ge - ce * ie;
                return S ? (S = 1 / S, w[0] = ge * S, w[1] = -ie * S, w[2] = -ce * S, w[3] = te * S, w) : null;
              }
              function F(w, j) {
                var te = j[0];
                return w[0] = j[3], w[1] = -j[1], w[2] = -j[2], w[3] = te, w;
              }
              function x(w) {
                return w[0] * w[3] - w[2] * w[1];
              }
              function O(w, j, te) {
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = te[0], E = te[1], Q = te[2], z = te[3];
                return w[0] = ie * d + ge * E, w[1] = ce * d + S * E, w[2] = ie * Q + ge * z, w[3] = ce * Q + S * z, w;
              }
              function R(w, j, te) {
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E + ge * d, w[1] = ce * E + S * d, w[2] = ie * -d + ge * E, w[3] = ce * -d + S * E, w;
              }
              function I(w, j, te) {
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = te[0], E = te[1];
                return w[0] = ie * d, w[1] = ce * d, w[2] = ge * E, w[3] = S * E, w;
              }
              function l(w, j) {
                var te = Math.sin(j), ie = Math.cos(j);
                return w[0] = ie, w[1] = te, w[2] = -te, w[3] = ie, w;
              }
              function b(w, j) {
                return w[0] = j[0], w[1] = 0, w[2] = 0, w[3] = j[1], w;
              }
              function Z(w) {
                return "mat2(" + w[0] + ", " + w[1] + ", " + w[2] + ", " + w[3] + ")";
              }
              function G(w) {
                return Math.sqrt(Math.pow(w[0], 2) + Math.pow(w[1], 2) + Math.pow(w[2], 2) + Math.pow(w[3], 2));
              }
              function J(w, j, te, ie) {
                return w[2] = ie[2] / ie[0], te[0] = ie[0], te[1] = ie[1], te[3] = ie[3] - w[2] * te[1], [w, j, te];
              }
              function ee(w, j, te) {
                return w[0] = j[0] + te[0], w[1] = j[1] + te[1], w[2] = j[2] + te[2], w[3] = j[3] + te[3], w;
              }
              function se(w, j, te) {
                return w[0] = j[0] - te[0], w[1] = j[1] - te[1], w[2] = j[2] - te[2], w[3] = j[3] - te[3], w;
              }
              function Ae(w, j) {
                return w[0] === j[0] && w[1] === j[1] && w[2] === j[2] && w[3] === j[3];
              }
              function Se(w, j) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = j[0], d = j[1], E = j[2], Q = j[3];
                return Math.abs(te - S) <= o.EPSILON * Math.max(1, Math.abs(te), Math.abs(S)) && Math.abs(ie - d) <= o.EPSILON * Math.max(1, Math.abs(ie), Math.abs(d)) && Math.abs(ce - E) <= o.EPSILON * Math.max(1, Math.abs(ce), Math.abs(E)) && Math.abs(ge - Q) <= o.EPSILON * Math.max(1, Math.abs(ge), Math.abs(Q));
              }
              function De(w, j, te) {
                return w[0] = j[0] * te, w[1] = j[1] * te, w[2] = j[2] * te, w[3] = j[3] * te, w;
              }
              function N(w, j, te, ie) {
                return w[0] = j[0] + te[0] * ie, w[1] = j[1] + te[1] * ie, w[2] = j[2] + te[2] * ie, w[3] = j[3] + te[3] * ie, w;
              }
              e.mul = O, e.sub = se;
            },
            /* 6 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.clone = M, e.copy = v, e.identity = m, e.fromValues = y, e.set = D, e.invert = _, e.determinant = L, e.multiply = F, e.rotate = x, e.scale = O, e.translate = R, e.fromRotation = I, e.fromScaling = l, e.fromTranslation = b, e.str = Z, e.frob = G, e.add = J, e.subtract = ee, e.multiplyScalar = se, e.multiplyScalarAndAdd = Ae, e.exactEquals = Se, e.equals = De;
              var f = c(0), o = h(f);
              function h(N) {
                if (N && N.__esModule)
                  return N;
                var w = {};
                if (N != null)
                  for (var j in N)
                    Object.prototype.hasOwnProperty.call(N, j) && (w[j] = N[j]);
                return w.default = N, w;
              }
              function u() {
                var N = new o.ARRAY_TYPE(6);
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = 0, N[5] = 0, N;
              }
              function M(N) {
                var w = new o.ARRAY_TYPE(6);
                return w[0] = N[0], w[1] = N[1], w[2] = N[2], w[3] = N[3], w[4] = N[4], w[5] = N[5], w;
              }
              function v(N, w) {
                return N[0] = w[0], N[1] = w[1], N[2] = w[2], N[3] = w[3], N[4] = w[4], N[5] = w[5], N;
              }
              function m(N) {
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = 0, N[5] = 0, N;
              }
              function y(N, w, j, te, ie, ce) {
                var ge = new o.ARRAY_TYPE(6);
                return ge[0] = N, ge[1] = w, ge[2] = j, ge[3] = te, ge[4] = ie, ge[5] = ce, ge;
              }
              function D(N, w, j, te, ie, ce, ge) {
                return N[0] = w, N[1] = j, N[2] = te, N[3] = ie, N[4] = ce, N[5] = ge, N;
              }
              function _(N, w) {
                var j = w[0], te = w[1], ie = w[2], ce = w[3], ge = w[4], S = w[5], d = j * ce - te * ie;
                return d ? (d = 1 / d, N[0] = ce * d, N[1] = -te * d, N[2] = -ie * d, N[3] = j * d, N[4] = (ie * S - ce * ge) * d, N[5] = (te * ge - j * S) * d, N) : null;
              }
              function L(N) {
                return N[0] * N[3] - N[1] * N[2];
              }
              function F(N, w, j) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = j[0], Q = j[1], z = j[2], X = j[3], $ = j[4], he = j[5];
                return N[0] = te * E + ce * Q, N[1] = ie * E + ge * Q, N[2] = te * z + ce * X, N[3] = ie * z + ge * X, N[4] = te * $ + ce * he + S, N[5] = ie * $ + ge * he + d, N;
              }
              function x(N, w, j) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = Math.sin(j), Q = Math.cos(j);
                return N[0] = te * Q + ce * E, N[1] = ie * Q + ge * E, N[2] = te * -E + ce * Q, N[3] = ie * -E + ge * Q, N[4] = S, N[5] = d, N;
              }
              function O(N, w, j) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = j[0], Q = j[1];
                return N[0] = te * E, N[1] = ie * E, N[2] = ce * Q, N[3] = ge * Q, N[4] = S, N[5] = d, N;
              }
              function R(N, w, j) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = j[0], Q = j[1];
                return N[0] = te, N[1] = ie, N[2] = ce, N[3] = ge, N[4] = te * E + ce * Q + S, N[5] = ie * E + ge * Q + d, N;
              }
              function I(N, w) {
                var j = Math.sin(w), te = Math.cos(w);
                return N[0] = te, N[1] = j, N[2] = -j, N[3] = te, N[4] = 0, N[5] = 0, N;
              }
              function l(N, w) {
                return N[0] = w[0], N[1] = 0, N[2] = 0, N[3] = w[1], N[4] = 0, N[5] = 0, N;
              }
              function b(N, w) {
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = w[0], N[5] = w[1], N;
              }
              function Z(N) {
                return "mat2d(" + N[0] + ", " + N[1] + ", " + N[2] + ", " + N[3] + ", " + N[4] + ", " + N[5] + ")";
              }
              function G(N) {
                return Math.sqrt(Math.pow(N[0], 2) + Math.pow(N[1], 2) + Math.pow(N[2], 2) + Math.pow(N[3], 2) + Math.pow(N[4], 2) + Math.pow(N[5], 2) + 1);
              }
              function J(N, w, j) {
                return N[0] = w[0] + j[0], N[1] = w[1] + j[1], N[2] = w[2] + j[2], N[3] = w[3] + j[3], N[4] = w[4] + j[4], N[5] = w[5] + j[5], N;
              }
              function ee(N, w, j) {
                return N[0] = w[0] - j[0], N[1] = w[1] - j[1], N[2] = w[2] - j[2], N[3] = w[3] - j[3], N[4] = w[4] - j[4], N[5] = w[5] - j[5], N;
              }
              function se(N, w, j) {
                return N[0] = w[0] * j, N[1] = w[1] * j, N[2] = w[2] * j, N[3] = w[3] * j, N[4] = w[4] * j, N[5] = w[5] * j, N;
              }
              function Ae(N, w, j, te) {
                return N[0] = w[0] + j[0] * te, N[1] = w[1] + j[1] * te, N[2] = w[2] + j[2] * te, N[3] = w[3] + j[3] * te, N[4] = w[4] + j[4] * te, N[5] = w[5] + j[5] * te, N;
              }
              function Se(N, w) {
                return N[0] === w[0] && N[1] === w[1] && N[2] === w[2] && N[3] === w[3] && N[4] === w[4] && N[5] === w[5];
              }
              function De(N, w) {
                var j = N[0], te = N[1], ie = N[2], ce = N[3], ge = N[4], S = N[5], d = w[0], E = w[1], Q = w[2], z = w[3], X = w[4], $ = w[5];
                return Math.abs(j - d) <= o.EPSILON * Math.max(1, Math.abs(j), Math.abs(d)) && Math.abs(te - E) <= o.EPSILON * Math.max(1, Math.abs(te), Math.abs(E)) && Math.abs(ie - Q) <= o.EPSILON * Math.max(1, Math.abs(ie), Math.abs(Q)) && Math.abs(ce - z) <= o.EPSILON * Math.max(1, Math.abs(ce), Math.abs(z)) && Math.abs(ge - X) <= o.EPSILON * Math.max(1, Math.abs(ge), Math.abs(X)) && Math.abs(S - $) <= o.EPSILON * Math.max(1, Math.abs(S), Math.abs($));
              }
              e.mul = F, e.sub = ee;
            },
            /* 7 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.clone = M, e.copy = v, e.fromValues = m, e.set = y, e.identity = D, e.transpose = _, e.invert = L, e.adjoint = F, e.determinant = x, e.multiply = O, e.translate = R, e.scale = I, e.rotate = l, e.rotateX = b, e.rotateY = Z, e.rotateZ = G, e.fromTranslation = J, e.fromScaling = ee, e.fromRotation = se, e.fromXRotation = Ae, e.fromYRotation = Se, e.fromZRotation = De, e.fromRotationTranslation = N, e.getTranslation = w, e.getScaling = j, e.getRotation = te, e.fromRotationTranslationScale = ie, e.fromRotationTranslationScaleOrigin = ce, e.fromQuat = ge, e.frustum = S, e.perspective = d, e.perspectiveFromFieldOfView = E, e.ortho = Q, e.lookAt = z, e.targetTo = X, e.str = $, e.frob = he, e.add = de, e.subtract = q, e.multiplyScalar = K, e.multiplyScalarAndAdd = ne, e.exactEquals = fe, e.equals = le;
              var f = c(0), o = h(f);
              function h(s) {
                if (s && s.__esModule)
                  return s;
                var g = {};
                if (s != null)
                  for (var Y in s)
                    Object.prototype.hasOwnProperty.call(s, Y) && (g[Y] = s[Y]);
                return g.default = s, g;
              }
              function u() {
                var s = new o.ARRAY_TYPE(16);
                return s[0] = 1, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = 1, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 1, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function M(s) {
                var g = new o.ARRAY_TYPE(16);
                return g[0] = s[0], g[1] = s[1], g[2] = s[2], g[3] = s[3], g[4] = s[4], g[5] = s[5], g[6] = s[6], g[7] = s[7], g[8] = s[8], g[9] = s[9], g[10] = s[10], g[11] = s[11], g[12] = s[12], g[13] = s[13], g[14] = s[14], g[15] = s[15], g;
              }
              function v(s, g) {
                return s[0] = g[0], s[1] = g[1], s[2] = g[2], s[3] = g[3], s[4] = g[4], s[5] = g[5], s[6] = g[6], s[7] = g[7], s[8] = g[8], s[9] = g[9], s[10] = g[10], s[11] = g[11], s[12] = g[12], s[13] = g[13], s[14] = g[14], s[15] = g[15], s;
              }
              function m(s, g, Y, H, re, ae, oe, ue, ve, me, pe, Ce, Me, we, xe, _e) {
                var ye = new o.ARRAY_TYPE(16);
                return ye[0] = s, ye[1] = g, ye[2] = Y, ye[3] = H, ye[4] = re, ye[5] = ae, ye[6] = oe, ye[7] = ue, ye[8] = ve, ye[9] = me, ye[10] = pe, ye[11] = Ce, ye[12] = Me, ye[13] = we, ye[14] = xe, ye[15] = _e, ye;
              }
              function y(s, g, Y, H, re, ae, oe, ue, ve, me, pe, Ce, Me, we, xe, _e, ye) {
                return s[0] = g, s[1] = Y, s[2] = H, s[3] = re, s[4] = ae, s[5] = oe, s[6] = ue, s[7] = ve, s[8] = me, s[9] = pe, s[10] = Ce, s[11] = Me, s[12] = we, s[13] = xe, s[14] = _e, s[15] = ye, s;
              }
              function D(s) {
                return s[0] = 1, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = 1, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 1, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function _(s, g) {
                if (s === g) {
                  var Y = g[1], H = g[2], re = g[3], ae = g[6], oe = g[7], ue = g[11];
                  s[1] = g[4], s[2] = g[8], s[3] = g[12], s[4] = Y, s[6] = g[9], s[7] = g[13], s[8] = H, s[9] = ae, s[11] = g[14], s[12] = re, s[13] = oe, s[14] = ue;
                } else
                  s[0] = g[0], s[1] = g[4], s[2] = g[8], s[3] = g[12], s[4] = g[1], s[5] = g[5], s[6] = g[9], s[7] = g[13], s[8] = g[2], s[9] = g[6], s[10] = g[10], s[11] = g[14], s[12] = g[3], s[13] = g[7], s[14] = g[11], s[15] = g[15];
                return s;
              }
              function L(s, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[3], oe = g[4], ue = g[5], ve = g[6], me = g[7], pe = g[8], Ce = g[9], Me = g[10], we = g[11], xe = g[12], _e = g[13], ye = g[14], be = g[15], Fe = Y * ue - H * oe, Be = Y * ve - re * oe, Ee = Y * me - ae * oe, Te = H * ve - re * ue, Pe = H * me - ae * ue, ke = re * me - ae * ve, qe = pe * _e - Ce * xe, Le = pe * ye - Me * xe, je = pe * be - we * xe, ze = Ce * ye - Me * _e, Oe = Ce * be - we * _e, Ne = Me * be - we * ye, Re = Fe * Ne - Be * Oe + Ee * ze + Te * je - Pe * Le + ke * qe;
                return Re ? (Re = 1 / Re, s[0] = (ue * Ne - ve * Oe + me * ze) * Re, s[1] = (re * Oe - H * Ne - ae * ze) * Re, s[2] = (_e * ke - ye * Pe + be * Te) * Re, s[3] = (Me * Pe - Ce * ke - we * Te) * Re, s[4] = (ve * je - oe * Ne - me * Le) * Re, s[5] = (Y * Ne - re * je + ae * Le) * Re, s[6] = (ye * Ee - xe * ke - be * Be) * Re, s[7] = (pe * ke - Me * Ee + we * Be) * Re, s[8] = (oe * Oe - ue * je + me * qe) * Re, s[9] = (H * je - Y * Oe - ae * qe) * Re, s[10] = (xe * Pe - _e * Ee + be * Fe) * Re, s[11] = (Ce * Ee - pe * Pe - we * Fe) * Re, s[12] = (ue * Le - oe * ze - ve * qe) * Re, s[13] = (Y * ze - H * Le + re * qe) * Re, s[14] = (_e * Be - xe * Te - ye * Fe) * Re, s[15] = (pe * Te - Ce * Be + Me * Fe) * Re, s) : null;
              }
              function F(s, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[3], oe = g[4], ue = g[5], ve = g[6], me = g[7], pe = g[8], Ce = g[9], Me = g[10], we = g[11], xe = g[12], _e = g[13], ye = g[14], be = g[15];
                return s[0] = ue * (Me * be - we * ye) - Ce * (ve * be - me * ye) + _e * (ve * we - me * Me), s[1] = -(H * (Me * be - we * ye) - Ce * (re * be - ae * ye) + _e * (re * we - ae * Me)), s[2] = H * (ve * be - me * ye) - ue * (re * be - ae * ye) + _e * (re * me - ae * ve), s[3] = -(H * (ve * we - me * Me) - ue * (re * we - ae * Me) + Ce * (re * me - ae * ve)), s[4] = -(oe * (Me * be - we * ye) - pe * (ve * be - me * ye) + xe * (ve * we - me * Me)), s[5] = Y * (Me * be - we * ye) - pe * (re * be - ae * ye) + xe * (re * we - ae * Me), s[6] = -(Y * (ve * be - me * ye) - oe * (re * be - ae * ye) + xe * (re * me - ae * ve)), s[7] = Y * (ve * we - me * Me) - oe * (re * we - ae * Me) + pe * (re * me - ae * ve), s[8] = oe * (Ce * be - we * _e) - pe * (ue * be - me * _e) + xe * (ue * we - me * Ce), s[9] = -(Y * (Ce * be - we * _e) - pe * (H * be - ae * _e) + xe * (H * we - ae * Ce)), s[10] = Y * (ue * be - me * _e) - oe * (H * be - ae * _e) + xe * (H * me - ae * ue), s[11] = -(Y * (ue * we - me * Ce) - oe * (H * we - ae * Ce) + pe * (H * me - ae * ue)), s[12] = -(oe * (Ce * ye - Me * _e) - pe * (ue * ye - ve * _e) + xe * (ue * Me - ve * Ce)), s[13] = Y * (Ce * ye - Me * _e) - pe * (H * ye - re * _e) + xe * (H * Me - re * Ce), s[14] = -(Y * (ue * ye - ve * _e) - oe * (H * ye - re * _e) + xe * (H * ve - re * ue)), s[15] = Y * (ue * Me - ve * Ce) - oe * (H * Me - re * Ce) + pe * (H * ve - re * ue), s;
              }
              function x(s) {
                var g = s[0], Y = s[1], H = s[2], re = s[3], ae = s[4], oe = s[5], ue = s[6], ve = s[7], me = s[8], pe = s[9], Ce = s[10], Me = s[11], we = s[12], xe = s[13], _e = s[14], ye = s[15], be = g * oe - Y * ae, Fe = g * ue - H * ae, Be = g * ve - re * ae, Ee = Y * ue - H * oe, Te = Y * ve - re * oe, Pe = H * ve - re * ue, ke = me * xe - pe * we, qe = me * _e - Ce * we, Le = me * ye - Me * we, je = pe * _e - Ce * xe, ze = pe * ye - Me * xe, Oe = Ce * ye - Me * _e;
                return be * Oe - Fe * ze + Be * je + Ee * Le - Te * qe + Pe * ke;
              }
              function O(s, g, Y) {
                var H = g[0], re = g[1], ae = g[2], oe = g[3], ue = g[4], ve = g[5], me = g[6], pe = g[7], Ce = g[8], Me = g[9], we = g[10], xe = g[11], _e = g[12], ye = g[13], be = g[14], Fe = g[15], Be = Y[0], Ee = Y[1], Te = Y[2], Pe = Y[3];
                return s[0] = Be * H + Ee * ue + Te * Ce + Pe * _e, s[1] = Be * re + Ee * ve + Te * Me + Pe * ye, s[2] = Be * ae + Ee * me + Te * we + Pe * be, s[3] = Be * oe + Ee * pe + Te * xe + Pe * Fe, Be = Y[4], Ee = Y[5], Te = Y[6], Pe = Y[7], s[4] = Be * H + Ee * ue + Te * Ce + Pe * _e, s[5] = Be * re + Ee * ve + Te * Me + Pe * ye, s[6] = Be * ae + Ee * me + Te * we + Pe * be, s[7] = Be * oe + Ee * pe + Te * xe + Pe * Fe, Be = Y[8], Ee = Y[9], Te = Y[10], Pe = Y[11], s[8] = Be * H + Ee * ue + Te * Ce + Pe * _e, s[9] = Be * re + Ee * ve + Te * Me + Pe * ye, s[10] = Be * ae + Ee * me + Te * we + Pe * be, s[11] = Be * oe + Ee * pe + Te * xe + Pe * Fe, Be = Y[12], Ee = Y[13], Te = Y[14], Pe = Y[15], s[12] = Be * H + Ee * ue + Te * Ce + Pe * _e, s[13] = Be * re + Ee * ve + Te * Me + Pe * ye, s[14] = Be * ae + Ee * me + Te * we + Pe * be, s[15] = Be * oe + Ee * pe + Te * xe + Pe * Fe, s;
              }
              function R(s, g, Y) {
                var H = Y[0], re = Y[1], ae = Y[2], oe = void 0, ue = void 0, ve = void 0, me = void 0, pe = void 0, Ce = void 0, Me = void 0, we = void 0, xe = void 0, _e = void 0, ye = void 0, be = void 0;
                return g === s ? (s[12] = g[0] * H + g[4] * re + g[8] * ae + g[12], s[13] = g[1] * H + g[5] * re + g[9] * ae + g[13], s[14] = g[2] * H + g[6] * re + g[10] * ae + g[14], s[15] = g[3] * H + g[7] * re + g[11] * ae + g[15]) : (oe = g[0], ue = g[1], ve = g[2], me = g[3], pe = g[4], Ce = g[5], Me = g[6], we = g[7], xe = g[8], _e = g[9], ye = g[10], be = g[11], s[0] = oe, s[1] = ue, s[2] = ve, s[3] = me, s[4] = pe, s[5] = Ce, s[6] = Me, s[7] = we, s[8] = xe, s[9] = _e, s[10] = ye, s[11] = be, s[12] = oe * H + pe * re + xe * ae + g[12], s[13] = ue * H + Ce * re + _e * ae + g[13], s[14] = ve * H + Me * re + ye * ae + g[14], s[15] = me * H + we * re + be * ae + g[15]), s;
              }
              function I(s, g, Y) {
                var H = Y[0], re = Y[1], ae = Y[2];
                return s[0] = g[0] * H, s[1] = g[1] * H, s[2] = g[2] * H, s[3] = g[3] * H, s[4] = g[4] * re, s[5] = g[5] * re, s[6] = g[6] * re, s[7] = g[7] * re, s[8] = g[8] * ae, s[9] = g[9] * ae, s[10] = g[10] * ae, s[11] = g[11] * ae, s[12] = g[12], s[13] = g[13], s[14] = g[14], s[15] = g[15], s;
              }
              function l(s, g, Y, H) {
                var re = H[0], ae = H[1], oe = H[2], ue = Math.sqrt(re * re + ae * ae + oe * oe), ve = void 0, me = void 0, pe = void 0, Ce = void 0, Me = void 0, we = void 0, xe = void 0, _e = void 0, ye = void 0, be = void 0, Fe = void 0, Be = void 0, Ee = void 0, Te = void 0, Pe = void 0, ke = void 0, qe = void 0, Le = void 0, je = void 0, ze = void 0, Oe = void 0, Ne = void 0, Re = void 0, Ie = void 0;
                return Math.abs(ue) < o.EPSILON ? null : (ue = 1 / ue, re *= ue, ae *= ue, oe *= ue, ve = Math.sin(Y), me = Math.cos(Y), pe = 1 - me, Ce = g[0], Me = g[1], we = g[2], xe = g[3], _e = g[4], ye = g[5], be = g[6], Fe = g[7], Be = g[8], Ee = g[9], Te = g[10], Pe = g[11], ke = re * re * pe + me, qe = ae * re * pe + oe * ve, Le = oe * re * pe - ae * ve, je = re * ae * pe - oe * ve, ze = ae * ae * pe + me, Oe = oe * ae * pe + re * ve, Ne = re * oe * pe + ae * ve, Re = ae * oe * pe - re * ve, Ie = oe * oe * pe + me, s[0] = Ce * ke + _e * qe + Be * Le, s[1] = Me * ke + ye * qe + Ee * Le, s[2] = we * ke + be * qe + Te * Le, s[3] = xe * ke + Fe * qe + Pe * Le, s[4] = Ce * je + _e * ze + Be * Oe, s[5] = Me * je + ye * ze + Ee * Oe, s[6] = we * je + be * ze + Te * Oe, s[7] = xe * je + Fe * ze + Pe * Oe, s[8] = Ce * Ne + _e * Re + Be * Ie, s[9] = Me * Ne + ye * Re + Ee * Ie, s[10] = we * Ne + be * Re + Te * Ie, s[11] = xe * Ne + Fe * Re + Pe * Ie, g !== s && (s[12] = g[12], s[13] = g[13], s[14] = g[14], s[15] = g[15]), s);
              }
              function b(s, g, Y) {
                var H = Math.sin(Y), re = Math.cos(Y), ae = g[4], oe = g[5], ue = g[6], ve = g[7], me = g[8], pe = g[9], Ce = g[10], Me = g[11];
                return g !== s && (s[0] = g[0], s[1] = g[1], s[2] = g[2], s[3] = g[3], s[12] = g[12], s[13] = g[13], s[14] = g[14], s[15] = g[15]), s[4] = ae * re + me * H, s[5] = oe * re + pe * H, s[6] = ue * re + Ce * H, s[7] = ve * re + Me * H, s[8] = me * re - ae * H, s[9] = pe * re - oe * H, s[10] = Ce * re - ue * H, s[11] = Me * re - ve * H, s;
              }
              function Z(s, g, Y) {
                var H = Math.sin(Y), re = Math.cos(Y), ae = g[0], oe = g[1], ue = g[2], ve = g[3], me = g[8], pe = g[9], Ce = g[10], Me = g[11];
                return g !== s && (s[4] = g[4], s[5] = g[5], s[6] = g[6], s[7] = g[7], s[12] = g[12], s[13] = g[13], s[14] = g[14], s[15] = g[15]), s[0] = ae * re - me * H, s[1] = oe * re - pe * H, s[2] = ue * re - Ce * H, s[3] = ve * re - Me * H, s[8] = ae * H + me * re, s[9] = oe * H + pe * re, s[10] = ue * H + Ce * re, s[11] = ve * H + Me * re, s;
              }
              function G(s, g, Y) {
                var H = Math.sin(Y), re = Math.cos(Y), ae = g[0], oe = g[1], ue = g[2], ve = g[3], me = g[4], pe = g[5], Ce = g[6], Me = g[7];
                return g !== s && (s[8] = g[8], s[9] = g[9], s[10] = g[10], s[11] = g[11], s[12] = g[12], s[13] = g[13], s[14] = g[14], s[15] = g[15]), s[0] = ae * re + me * H, s[1] = oe * re + pe * H, s[2] = ue * re + Ce * H, s[3] = ve * re + Me * H, s[4] = me * re - ae * H, s[5] = pe * re - oe * H, s[6] = Ce * re - ue * H, s[7] = Me * re - ve * H, s;
              }
              function J(s, g) {
                return s[0] = 1, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = 1, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 1, s[11] = 0, s[12] = g[0], s[13] = g[1], s[14] = g[2], s[15] = 1, s;
              }
              function ee(s, g) {
                return s[0] = g[0], s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = g[1], s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = g[2], s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function se(s, g, Y) {
                var H = Y[0], re = Y[1], ae = Y[2], oe = Math.sqrt(H * H + re * re + ae * ae), ue = void 0, ve = void 0, me = void 0;
                return Math.abs(oe) < o.EPSILON ? null : (oe = 1 / oe, H *= oe, re *= oe, ae *= oe, ue = Math.sin(g), ve = Math.cos(g), me = 1 - ve, s[0] = H * H * me + ve, s[1] = re * H * me + ae * ue, s[2] = ae * H * me - re * ue, s[3] = 0, s[4] = H * re * me - ae * ue, s[5] = re * re * me + ve, s[6] = ae * re * me + H * ue, s[7] = 0, s[8] = H * ae * me + re * ue, s[9] = re * ae * me - H * ue, s[10] = ae * ae * me + ve, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s);
              }
              function Ae(s, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return s[0] = 1, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = H, s[6] = Y, s[7] = 0, s[8] = 0, s[9] = -Y, s[10] = H, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function Se(s, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return s[0] = H, s[1] = 0, s[2] = -Y, s[3] = 0, s[4] = 0, s[5] = 1, s[6] = 0, s[7] = 0, s[8] = Y, s[9] = 0, s[10] = H, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function De(s, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return s[0] = H, s[1] = Y, s[2] = 0, s[3] = 0, s[4] = -Y, s[5] = H, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 1, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function N(s, g, Y) {
                var H = g[0], re = g[1], ae = g[2], oe = g[3], ue = H + H, ve = re + re, me = ae + ae, pe = H * ue, Ce = H * ve, Me = H * me, we = re * ve, xe = re * me, _e = ae * me, ye = oe * ue, be = oe * ve, Fe = oe * me;
                return s[0] = 1 - (we + _e), s[1] = Ce + Fe, s[2] = Me - be, s[3] = 0, s[4] = Ce - Fe, s[5] = 1 - (pe + _e), s[6] = xe + ye, s[7] = 0, s[8] = Me + be, s[9] = xe - ye, s[10] = 1 - (pe + we), s[11] = 0, s[12] = Y[0], s[13] = Y[1], s[14] = Y[2], s[15] = 1, s;
              }
              function w(s, g) {
                return s[0] = g[12], s[1] = g[13], s[2] = g[14], s;
              }
              function j(s, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[4], oe = g[5], ue = g[6], ve = g[8], me = g[9], pe = g[10];
                return s[0] = Math.sqrt(Y * Y + H * H + re * re), s[1] = Math.sqrt(ae * ae + oe * oe + ue * ue), s[2] = Math.sqrt(ve * ve + me * me + pe * pe), s;
              }
              function te(s, g) {
                var Y = g[0] + g[5] + g[10], H = 0;
                return Y > 0 ? (H = Math.sqrt(Y + 1) * 2, s[3] = 0.25 * H, s[0] = (g[6] - g[9]) / H, s[1] = (g[8] - g[2]) / H, s[2] = (g[1] - g[4]) / H) : g[0] > g[5] & g[0] > g[10] ? (H = Math.sqrt(1 + g[0] - g[5] - g[10]) * 2, s[3] = (g[6] - g[9]) / H, s[0] = 0.25 * H, s[1] = (g[1] + g[4]) / H, s[2] = (g[8] + g[2]) / H) : g[5] > g[10] ? (H = Math.sqrt(1 + g[5] - g[0] - g[10]) * 2, s[3] = (g[8] - g[2]) / H, s[0] = (g[1] + g[4]) / H, s[1] = 0.25 * H, s[2] = (g[6] + g[9]) / H) : (H = Math.sqrt(1 + g[10] - g[0] - g[5]) * 2, s[3] = (g[1] - g[4]) / H, s[0] = (g[8] + g[2]) / H, s[1] = (g[6] + g[9]) / H, s[2] = 0.25 * H), s;
              }
              function ie(s, g, Y, H) {
                var re = g[0], ae = g[1], oe = g[2], ue = g[3], ve = re + re, me = ae + ae, pe = oe + oe, Ce = re * ve, Me = re * me, we = re * pe, xe = ae * me, _e = ae * pe, ye = oe * pe, be = ue * ve, Fe = ue * me, Be = ue * pe, Ee = H[0], Te = H[1], Pe = H[2];
                return s[0] = (1 - (xe + ye)) * Ee, s[1] = (Me + Be) * Ee, s[2] = (we - Fe) * Ee, s[3] = 0, s[4] = (Me - Be) * Te, s[5] = (1 - (Ce + ye)) * Te, s[6] = (_e + be) * Te, s[7] = 0, s[8] = (we + Fe) * Pe, s[9] = (_e - be) * Pe, s[10] = (1 - (Ce + xe)) * Pe, s[11] = 0, s[12] = Y[0], s[13] = Y[1], s[14] = Y[2], s[15] = 1, s;
              }
              function ce(s, g, Y, H, re) {
                var ae = g[0], oe = g[1], ue = g[2], ve = g[3], me = ae + ae, pe = oe + oe, Ce = ue + ue, Me = ae * me, we = ae * pe, xe = ae * Ce, _e = oe * pe, ye = oe * Ce, be = ue * Ce, Fe = ve * me, Be = ve * pe, Ee = ve * Ce, Te = H[0], Pe = H[1], ke = H[2], qe = re[0], Le = re[1], je = re[2];
                return s[0] = (1 - (_e + be)) * Te, s[1] = (we + Ee) * Te, s[2] = (xe - Be) * Te, s[3] = 0, s[4] = (we - Ee) * Pe, s[5] = (1 - (Me + be)) * Pe, s[6] = (ye + Fe) * Pe, s[7] = 0, s[8] = (xe + Be) * ke, s[9] = (ye - Fe) * ke, s[10] = (1 - (Me + _e)) * ke, s[11] = 0, s[12] = Y[0] + qe - (s[0] * qe + s[4] * Le + s[8] * je), s[13] = Y[1] + Le - (s[1] * qe + s[5] * Le + s[9] * je), s[14] = Y[2] + je - (s[2] * qe + s[6] * Le + s[10] * je), s[15] = 1, s;
              }
              function ge(s, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[3], oe = Y + Y, ue = H + H, ve = re + re, me = Y * oe, pe = H * oe, Ce = H * ue, Me = re * oe, we = re * ue, xe = re * ve, _e = ae * oe, ye = ae * ue, be = ae * ve;
                return s[0] = 1 - Ce - xe, s[1] = pe + be, s[2] = Me - ye, s[3] = 0, s[4] = pe - be, s[5] = 1 - me - xe, s[6] = we + _e, s[7] = 0, s[8] = Me + ye, s[9] = we - _e, s[10] = 1 - me - Ce, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, s;
              }
              function S(s, g, Y, H, re, ae, oe) {
                var ue = 1 / (Y - g), ve = 1 / (re - H), me = 1 / (ae - oe);
                return s[0] = ae * 2 * ue, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = ae * 2 * ve, s[6] = 0, s[7] = 0, s[8] = (Y + g) * ue, s[9] = (re + H) * ve, s[10] = (oe + ae) * me, s[11] = -1, s[12] = 0, s[13] = 0, s[14] = oe * ae * 2 * me, s[15] = 0, s;
              }
              function d(s, g, Y, H, re) {
                var ae = 1 / Math.tan(g / 2), oe = 1 / (H - re);
                return s[0] = ae / Y, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = ae, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = (re + H) * oe, s[11] = -1, s[12] = 0, s[13] = 0, s[14] = 2 * re * H * oe, s[15] = 0, s;
              }
              function E(s, g, Y, H) {
                var re = Math.tan(g.upDegrees * Math.PI / 180), ae = Math.tan(g.downDegrees * Math.PI / 180), oe = Math.tan(g.leftDegrees * Math.PI / 180), ue = Math.tan(g.rightDegrees * Math.PI / 180), ve = 2 / (oe + ue), me = 2 / (re + ae);
                return s[0] = ve, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = me, s[6] = 0, s[7] = 0, s[8] = -((oe - ue) * ve * 0.5), s[9] = (re - ae) * me * 0.5, s[10] = H / (Y - H), s[11] = -1, s[12] = 0, s[13] = 0, s[14] = H * Y / (Y - H), s[15] = 0, s;
              }
              function Q(s, g, Y, H, re, ae, oe) {
                var ue = 1 / (g - Y), ve = 1 / (H - re), me = 1 / (ae - oe);
                return s[0] = -2 * ue, s[1] = 0, s[2] = 0, s[3] = 0, s[4] = 0, s[5] = -2 * ve, s[6] = 0, s[7] = 0, s[8] = 0, s[9] = 0, s[10] = 2 * me, s[11] = 0, s[12] = (g + Y) * ue, s[13] = (re + H) * ve, s[14] = (oe + ae) * me, s[15] = 1, s;
              }
              function z(s, g, Y, H) {
                var re = void 0, ae = void 0, oe = void 0, ue = void 0, ve = void 0, me = void 0, pe = void 0, Ce = void 0, Me = void 0, we = void 0, xe = g[0], _e = g[1], ye = g[2], be = H[0], Fe = H[1], Be = H[2], Ee = Y[0], Te = Y[1], Pe = Y[2];
                return Math.abs(xe - Ee) < o.EPSILON && Math.abs(_e - Te) < o.EPSILON && Math.abs(ye - Pe) < o.EPSILON ? mat4.identity(s) : (pe = xe - Ee, Ce = _e - Te, Me = ye - Pe, we = 1 / Math.sqrt(pe * pe + Ce * Ce + Me * Me), pe *= we, Ce *= we, Me *= we, re = Fe * Me - Be * Ce, ae = Be * pe - be * Me, oe = be * Ce - Fe * pe, we = Math.sqrt(re * re + ae * ae + oe * oe), we ? (we = 1 / we, re *= we, ae *= we, oe *= we) : (re = 0, ae = 0, oe = 0), ue = Ce * oe - Me * ae, ve = Me * re - pe * oe, me = pe * ae - Ce * re, we = Math.sqrt(ue * ue + ve * ve + me * me), we ? (we = 1 / we, ue *= we, ve *= we, me *= we) : (ue = 0, ve = 0, me = 0), s[0] = re, s[1] = ue, s[2] = pe, s[3] = 0, s[4] = ae, s[5] = ve, s[6] = Ce, s[7] = 0, s[8] = oe, s[9] = me, s[10] = Me, s[11] = 0, s[12] = -(re * xe + ae * _e + oe * ye), s[13] = -(ue * xe + ve * _e + me * ye), s[14] = -(pe * xe + Ce * _e + Me * ye), s[15] = 1, s);
              }
              function X(s, g, Y, H) {
                var re = g[0], ae = g[1], oe = g[2], ue = H[0], ve = H[1], me = H[2], pe = re - Y[0], Ce = ae - Y[1], Me = oe - Y[2], we = pe * pe + Ce * Ce + Me * Me;
                we > 0 && (we = 1 / Math.sqrt(we), pe *= we, Ce *= we, Me *= we);
                var xe = ve * Me - me * Ce, _e = me * pe - ue * Me, ye = ue * Ce - ve * pe;
                return s[0] = xe, s[1] = _e, s[2] = ye, s[3] = 0, s[4] = Ce * ye - Me * _e, s[5] = Me * xe - pe * ye, s[6] = pe * _e - Ce * xe, s[7] = 0, s[8] = pe, s[9] = Ce, s[10] = Me, s[11] = 0, s[12] = re, s[13] = ae, s[14] = oe, s[15] = 1, s;
              }
              function $(s) {
                return "mat4(" + s[0] + ", " + s[1] + ", " + s[2] + ", " + s[3] + ", " + s[4] + ", " + s[5] + ", " + s[6] + ", " + s[7] + ", " + s[8] + ", " + s[9] + ", " + s[10] + ", " + s[11] + ", " + s[12] + ", " + s[13] + ", " + s[14] + ", " + s[15] + ")";
              }
              function he(s) {
                return Math.sqrt(Math.pow(s[0], 2) + Math.pow(s[1], 2) + Math.pow(s[2], 2) + Math.pow(s[3], 2) + Math.pow(s[4], 2) + Math.pow(s[5], 2) + Math.pow(s[6], 2) + Math.pow(s[7], 2) + Math.pow(s[8], 2) + Math.pow(s[9], 2) + Math.pow(s[10], 2) + Math.pow(s[11], 2) + Math.pow(s[12], 2) + Math.pow(s[13], 2) + Math.pow(s[14], 2) + Math.pow(s[15], 2));
              }
              function de(s, g, Y) {
                return s[0] = g[0] + Y[0], s[1] = g[1] + Y[1], s[2] = g[2] + Y[2], s[3] = g[3] + Y[3], s[4] = g[4] + Y[4], s[5] = g[5] + Y[5], s[6] = g[6] + Y[6], s[7] = g[7] + Y[7], s[8] = g[8] + Y[8], s[9] = g[9] + Y[9], s[10] = g[10] + Y[10], s[11] = g[11] + Y[11], s[12] = g[12] + Y[12], s[13] = g[13] + Y[13], s[14] = g[14] + Y[14], s[15] = g[15] + Y[15], s;
              }
              function q(s, g, Y) {
                return s[0] = g[0] - Y[0], s[1] = g[1] - Y[1], s[2] = g[2] - Y[2], s[3] = g[3] - Y[3], s[4] = g[4] - Y[4], s[5] = g[5] - Y[5], s[6] = g[6] - Y[6], s[7] = g[7] - Y[7], s[8] = g[8] - Y[8], s[9] = g[9] - Y[9], s[10] = g[10] - Y[10], s[11] = g[11] - Y[11], s[12] = g[12] - Y[12], s[13] = g[13] - Y[13], s[14] = g[14] - Y[14], s[15] = g[15] - Y[15], s;
              }
              function K(s, g, Y) {
                return s[0] = g[0] * Y, s[1] = g[1] * Y, s[2] = g[2] * Y, s[3] = g[3] * Y, s[4] = g[4] * Y, s[5] = g[5] * Y, s[6] = g[6] * Y, s[7] = g[7] * Y, s[8] = g[8] * Y, s[9] = g[9] * Y, s[10] = g[10] * Y, s[11] = g[11] * Y, s[12] = g[12] * Y, s[13] = g[13] * Y, s[14] = g[14] * Y, s[15] = g[15] * Y, s;
              }
              function ne(s, g, Y, H) {
                return s[0] = g[0] + Y[0] * H, s[1] = g[1] + Y[1] * H, s[2] = g[2] + Y[2] * H, s[3] = g[3] + Y[3] * H, s[4] = g[4] + Y[4] * H, s[5] = g[5] + Y[5] * H, s[6] = g[6] + Y[6] * H, s[7] = g[7] + Y[7] * H, s[8] = g[8] + Y[8] * H, s[9] = g[9] + Y[9] * H, s[10] = g[10] + Y[10] * H, s[11] = g[11] + Y[11] * H, s[12] = g[12] + Y[12] * H, s[13] = g[13] + Y[13] * H, s[14] = g[14] + Y[14] * H, s[15] = g[15] + Y[15] * H, s;
              }
              function fe(s, g) {
                return s[0] === g[0] && s[1] === g[1] && s[2] === g[2] && s[3] === g[3] && s[4] === g[4] && s[5] === g[5] && s[6] === g[6] && s[7] === g[7] && s[8] === g[8] && s[9] === g[9] && s[10] === g[10] && s[11] === g[11] && s[12] === g[12] && s[13] === g[13] && s[14] === g[14] && s[15] === g[15];
              }
              function le(s, g) {
                var Y = s[0], H = s[1], re = s[2], ae = s[3], oe = s[4], ue = s[5], ve = s[6], me = s[7], pe = s[8], Ce = s[9], Me = s[10], we = s[11], xe = s[12], _e = s[13], ye = s[14], be = s[15], Fe = g[0], Be = g[1], Ee = g[2], Te = g[3], Pe = g[4], ke = g[5], qe = g[6], Le = g[7], je = g[8], ze = g[9], Oe = g[10], Ne = g[11], Re = g[12], Ie = g[13], Ve = g[14], Ge = g[15];
                return Math.abs(Y - Fe) <= o.EPSILON * Math.max(1, Math.abs(Y), Math.abs(Fe)) && Math.abs(H - Be) <= o.EPSILON * Math.max(1, Math.abs(H), Math.abs(Be)) && Math.abs(re - Ee) <= o.EPSILON * Math.max(1, Math.abs(re), Math.abs(Ee)) && Math.abs(ae - Te) <= o.EPSILON * Math.max(1, Math.abs(ae), Math.abs(Te)) && Math.abs(oe - Pe) <= o.EPSILON * Math.max(1, Math.abs(oe), Math.abs(Pe)) && Math.abs(ue - ke) <= o.EPSILON * Math.max(1, Math.abs(ue), Math.abs(ke)) && Math.abs(ve - qe) <= o.EPSILON * Math.max(1, Math.abs(ve), Math.abs(qe)) && Math.abs(me - Le) <= o.EPSILON * Math.max(1, Math.abs(me), Math.abs(Le)) && Math.abs(pe - je) <= o.EPSILON * Math.max(1, Math.abs(pe), Math.abs(je)) && Math.abs(Ce - ze) <= o.EPSILON * Math.max(1, Math.abs(Ce), Math.abs(ze)) && Math.abs(Me - Oe) <= o.EPSILON * Math.max(1, Math.abs(Me), Math.abs(Oe)) && Math.abs(we - Ne) <= o.EPSILON * Math.max(1, Math.abs(we), Math.abs(Ne)) && Math.abs(xe - Re) <= o.EPSILON * Math.max(1, Math.abs(xe), Math.abs(Re)) && Math.abs(_e - Ie) <= o.EPSILON * Math.max(1, Math.abs(_e), Math.abs(Ie)) && Math.abs(ye - Ve) <= o.EPSILON * Math.max(1, Math.abs(ye), Math.abs(Ve)) && Math.abs(be - Ge) <= o.EPSILON * Math.max(1, Math.abs(be), Math.abs(Ge));
              }
              e.mul = O, e.sub = q;
            },
            /* 8 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.setAxes = e.sqlerp = e.rotationTo = e.equals = e.exactEquals = e.normalize = e.sqrLen = e.squaredLength = e.len = e.length = e.lerp = e.dot = e.scale = e.mul = e.add = e.set = e.copy = e.fromValues = e.clone = void 0, e.create = _, e.identity = L, e.setAxisAngle = F, e.getAxisAngle = x, e.multiply = O, e.rotateX = R, e.rotateY = I, e.rotateZ = l, e.calculateW = b, e.slerp = Z, e.invert = G, e.conjugate = J, e.fromMat3 = ee, e.fromEuler = se, e.str = Ae;
              var f = c(0), o = D(f), h = c(1), u = D(h), M = c(2), v = D(M), m = c(3), y = D(m);
              function D(w) {
                if (w && w.__esModule)
                  return w;
                var j = {};
                if (w != null)
                  for (var te in w)
                    Object.prototype.hasOwnProperty.call(w, te) && (j[te] = w[te]);
                return j.default = w, j;
              }
              function _() {
                var w = new o.ARRAY_TYPE(4);
                return w[0] = 0, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function L(w) {
                return w[0] = 0, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function F(w, j, te) {
                te = te * 0.5;
                var ie = Math.sin(te);
                return w[0] = ie * j[0], w[1] = ie * j[1], w[2] = ie * j[2], w[3] = Math.cos(te), w;
              }
              function x(w, j) {
                var te = Math.acos(j[3]) * 2, ie = Math.sin(te / 2);
                return ie != 0 ? (w[0] = j[0] / ie, w[1] = j[1] / ie, w[2] = j[2] / ie) : (w[0] = 1, w[1] = 0, w[2] = 0), te;
              }
              function O(w, j, te) {
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = te[0], E = te[1], Q = te[2], z = te[3];
                return w[0] = ie * z + S * d + ce * Q - ge * E, w[1] = ce * z + S * E + ge * d - ie * Q, w[2] = ge * z + S * Q + ie * E - ce * d, w[3] = S * z - ie * d - ce * E - ge * Q, w;
              }
              function R(w, j, te) {
                te *= 0.5;
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E + S * d, w[1] = ce * E + ge * d, w[2] = ge * E - ce * d, w[3] = S * E - ie * d, w;
              }
              function I(w, j, te) {
                te *= 0.5;
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E - ge * d, w[1] = ce * E + S * d, w[2] = ge * E + ie * d, w[3] = S * E - ce * d, w;
              }
              function l(w, j, te) {
                te *= 0.5;
                var ie = j[0], ce = j[1], ge = j[2], S = j[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E + ce * d, w[1] = ce * E - ie * d, w[2] = ge * E + S * d, w[3] = S * E - ge * d, w;
              }
              function b(w, j) {
                var te = j[0], ie = j[1], ce = j[2];
                return w[0] = te, w[1] = ie, w[2] = ce, w[3] = Math.sqrt(Math.abs(1 - te * te - ie * ie - ce * ce)), w;
              }
              function Z(w, j, te, ie) {
                var ce = j[0], ge = j[1], S = j[2], d = j[3], E = te[0], Q = te[1], z = te[2], X = te[3], $ = void 0, he = void 0, de = void 0, q = void 0, K = void 0;
                return he = ce * E + ge * Q + S * z + d * X, he < 0 && (he = -he, E = -E, Q = -Q, z = -z, X = -X), 1 - he > 1e-6 ? ($ = Math.acos(he), de = Math.sin($), q = Math.sin((1 - ie) * $) / de, K = Math.sin(ie * $) / de) : (q = 1 - ie, K = ie), w[0] = q * ce + K * E, w[1] = q * ge + K * Q, w[2] = q * S + K * z, w[3] = q * d + K * X, w;
              }
              function G(w, j) {
                var te = j[0], ie = j[1], ce = j[2], ge = j[3], S = te * te + ie * ie + ce * ce + ge * ge, d = S ? 1 / S : 0;
                return w[0] = -te * d, w[1] = -ie * d, w[2] = -ce * d, w[3] = ge * d, w;
              }
              function J(w, j) {
                return w[0] = -j[0], w[1] = -j[1], w[2] = -j[2], w[3] = j[3], w;
              }
              function ee(w, j) {
                var te = j[0] + j[4] + j[8], ie = void 0;
                if (te > 0)
                  ie = Math.sqrt(te + 1), w[3] = 0.5 * ie, ie = 0.5 / ie, w[0] = (j[5] - j[7]) * ie, w[1] = (j[6] - j[2]) * ie, w[2] = (j[1] - j[3]) * ie;
                else {
                  var ce = 0;
                  j[4] > j[0] && (ce = 1), j[8] > j[ce * 3 + ce] && (ce = 2);
                  var ge = (ce + 1) % 3, S = (ce + 2) % 3;
                  ie = Math.sqrt(j[ce * 3 + ce] - j[ge * 3 + ge] - j[S * 3 + S] + 1), w[ce] = 0.5 * ie, ie = 0.5 / ie, w[3] = (j[ge * 3 + S] - j[S * 3 + ge]) * ie, w[ge] = (j[ge * 3 + ce] + j[ce * 3 + ge]) * ie, w[S] = (j[S * 3 + ce] + j[ce * 3 + S]) * ie;
                }
                return w;
              }
              function se(w, j, te, ie) {
                var ce = 0.5 * Math.PI / 180;
                j *= ce, te *= ce, ie *= ce;
                var ge = Math.sin(j), S = Math.cos(j), d = Math.sin(te), E = Math.cos(te), Q = Math.sin(ie), z = Math.cos(ie);
                return w[0] = ge * E * z - S * d * Q, w[1] = S * d * z + ge * E * Q, w[2] = S * E * Q - ge * d * z, w[3] = S * E * z + ge * d * Q, w;
              }
              function Ae(w) {
                return "quat(" + w[0] + ", " + w[1] + ", " + w[2] + ", " + w[3] + ")";
              }
              e.clone = y.clone, e.fromValues = y.fromValues, e.copy = y.copy, e.set = y.set, e.add = y.add, e.mul = O, e.scale = y.scale, e.dot = y.dot, e.lerp = y.lerp;
              var Se = e.length = y.length;
              e.len = Se;
              var De = e.squaredLength = y.squaredLength;
              e.sqrLen = De;
              var N = e.normalize = y.normalize;
              e.exactEquals = y.exactEquals, e.equals = y.equals, e.rotationTo = function() {
                var w = v.create(), j = v.fromValues(1, 0, 0), te = v.fromValues(0, 1, 0);
                return function(ie, ce, ge) {
                  var S = v.dot(ce, ge);
                  return S < -0.999999 ? (v.cross(w, j, ce), v.len(w) < 1e-6 && v.cross(w, te, ce), v.normalize(w, w), F(ie, w, Math.PI), ie) : S > 0.999999 ? (ie[0] = 0, ie[1] = 0, ie[2] = 0, ie[3] = 1, ie) : (v.cross(w, ce, ge), ie[0] = w[0], ie[1] = w[1], ie[2] = w[2], ie[3] = 1 + S, N(ie, ie));
                };
              }(), e.sqlerp = function() {
                var w = _(), j = _();
                return function(te, ie, ce, ge, S, d) {
                  return Z(w, ie, S, d), Z(j, ce, ge, d), Z(te, w, j, 2 * d * (1 - d)), te;
                };
              }(), e.setAxes = function() {
                var w = u.create();
                return function(j, te, ie, ce) {
                  return w[0] = ie[0], w[3] = ie[1], w[6] = ie[2], w[1] = ce[0], w[4] = ce[1], w[7] = ce[2], w[2] = -te[0], w[5] = -te[1], w[8] = -te[2], N(j, ee(j, w));
                };
              }();
            },
            /* 9 */
            /***/
            function(a, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.sqrDist = e.dist = e.div = e.mul = e.sub = e.len = void 0, e.create = u, e.clone = M, e.fromValues = v, e.copy = m, e.set = y, e.add = D, e.subtract = _, e.multiply = L, e.divide = F, e.ceil = x, e.floor = O, e.min = R, e.max = I, e.round = l, e.scale = b, e.scaleAndAdd = Z, e.distance = G, e.squaredDistance = J, e.length = ee, e.squaredLength = se, e.negate = Ae, e.inverse = Se, e.normalize = De, e.dot = N, e.cross = w, e.lerp = j, e.random = te, e.transformMat2 = ie, e.transformMat2d = ce, e.transformMat3 = ge, e.transformMat4 = S, e.str = d, e.exactEquals = E, e.equals = Q;
              var f = c(0), o = h(f);
              function h(z) {
                if (z && z.__esModule)
                  return z;
                var X = {};
                if (z != null)
                  for (var $ in z)
                    Object.prototype.hasOwnProperty.call(z, $) && (X[$] = z[$]);
                return X.default = z, X;
              }
              function u() {
                var z = new o.ARRAY_TYPE(2);
                return z[0] = 0, z[1] = 0, z;
              }
              function M(z) {
                var X = new o.ARRAY_TYPE(2);
                return X[0] = z[0], X[1] = z[1], X;
              }
              function v(z, X) {
                var $ = new o.ARRAY_TYPE(2);
                return $[0] = z, $[1] = X, $;
              }
              function m(z, X) {
                return z[0] = X[0], z[1] = X[1], z;
              }
              function y(z, X, $) {
                return z[0] = X, z[1] = $, z;
              }
              function D(z, X, $) {
                return z[0] = X[0] + $[0], z[1] = X[1] + $[1], z;
              }
              function _(z, X, $) {
                return z[0] = X[0] - $[0], z[1] = X[1] - $[1], z;
              }
              function L(z, X, $) {
                return z[0] = X[0] * $[0], z[1] = X[1] * $[1], z;
              }
              function F(z, X, $) {
                return z[0] = X[0] / $[0], z[1] = X[1] / $[1], z;
              }
              function x(z, X) {
                return z[0] = Math.ceil(X[0]), z[1] = Math.ceil(X[1]), z;
              }
              function O(z, X) {
                return z[0] = Math.floor(X[0]), z[1] = Math.floor(X[1]), z;
              }
              function R(z, X, $) {
                return z[0] = Math.min(X[0], $[0]), z[1] = Math.min(X[1], $[1]), z;
              }
              function I(z, X, $) {
                return z[0] = Math.max(X[0], $[0]), z[1] = Math.max(X[1], $[1]), z;
              }
              function l(z, X) {
                return z[0] = Math.round(X[0]), z[1] = Math.round(X[1]), z;
              }
              function b(z, X, $) {
                return z[0] = X[0] * $, z[1] = X[1] * $, z;
              }
              function Z(z, X, $, he) {
                return z[0] = X[0] + $[0] * he, z[1] = X[1] + $[1] * he, z;
              }
              function G(z, X) {
                var $ = X[0] - z[0], he = X[1] - z[1];
                return Math.sqrt($ * $ + he * he);
              }
              function J(z, X) {
                var $ = X[0] - z[0], he = X[1] - z[1];
                return $ * $ + he * he;
              }
              function ee(z) {
                var X = z[0], $ = z[1];
                return Math.sqrt(X * X + $ * $);
              }
              function se(z) {
                var X = z[0], $ = z[1];
                return X * X + $ * $;
              }
              function Ae(z, X) {
                return z[0] = -X[0], z[1] = -X[1], z;
              }
              function Se(z, X) {
                return z[0] = 1 / X[0], z[1] = 1 / X[1], z;
              }
              function De(z, X) {
                var $ = X[0], he = X[1], de = $ * $ + he * he;
                return de > 0 && (de = 1 / Math.sqrt(de), z[0] = X[0] * de, z[1] = X[1] * de), z;
              }
              function N(z, X) {
                return z[0] * X[0] + z[1] * X[1];
              }
              function w(z, X, $) {
                var he = X[0] * $[1] - X[1] * $[0];
                return z[0] = z[1] = 0, z[2] = he, z;
              }
              function j(z, X, $, he) {
                var de = X[0], q = X[1];
                return z[0] = de + he * ($[0] - de), z[1] = q + he * ($[1] - q), z;
              }
              function te(z, X) {
                X = X || 1;
                var $ = o.RANDOM() * 2 * Math.PI;
                return z[0] = Math.cos($) * X, z[1] = Math.sin($) * X, z;
              }
              function ie(z, X, $) {
                var he = X[0], de = X[1];
                return z[0] = $[0] * he + $[2] * de, z[1] = $[1] * he + $[3] * de, z;
              }
              function ce(z, X, $) {
                var he = X[0], de = X[1];
                return z[0] = $[0] * he + $[2] * de + $[4], z[1] = $[1] * he + $[3] * de + $[5], z;
              }
              function ge(z, X, $) {
                var he = X[0], de = X[1];
                return z[0] = $[0] * he + $[3] * de + $[6], z[1] = $[1] * he + $[4] * de + $[7], z;
              }
              function S(z, X, $) {
                var he = X[0], de = X[1];
                return z[0] = $[0] * he + $[4] * de + $[12], z[1] = $[1] * he + $[5] * de + $[13], z;
              }
              function d(z) {
                return "vec2(" + z[0] + ", " + z[1] + ")";
              }
              function E(z, X) {
                return z[0] === X[0] && z[1] === X[1];
              }
              function Q(z, X) {
                var $ = z[0], he = z[1], de = X[0], q = X[1];
                return Math.abs($ - de) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(de)) && Math.abs(he - q) <= o.EPSILON * Math.max(1, Math.abs(he), Math.abs(q));
              }
              e.len = ee, e.sub = _, e.mul = L, e.div = F, e.dist = G, e.sqrDist = J, e.sqrLen = se, e.forEach = function() {
                var z = u();
                return function(X, $, he, de, q, K) {
                  var ne = void 0, fe = void 0;
                  for ($ || ($ = 2), he || (he = 0), de ? fe = Math.min(de * $ + he, X.length) : fe = X.length, ne = he; ne < fe; ne += $)
                    z[0] = X[ne], z[1] = X[ne + 1], q(z, z, K), X[ne] = z[0], X[ne + 1] = z[1];
                  return X;
                };
              }();
            }
            /******/
          ])
        );
      });
    }, {}], 9: [function(n, r, i) {
      /**
       * AUTHOR OF INITIAL JS LIBRARY
       * k-d Tree JavaScript - V 1.0
       *
       * https://github.com/ubilabs/kd-tree-javascript
       *
       * @author Mircea Pricop <pricop@ubilabs.net>, 2012
       * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
       * @author Ubilabs http://ubilabs.net, 2012
       * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
       */
      function a(f, o, h) {
        this.obj = f, this.left = null, this.right = null, this.parent = h, this.dimension = o;
      }
      function e(f, o, h) {
        var u = this;
        function M(v, m, y) {
          var D = m % h.length, _, L;
          return v.length === 0 ? null : v.length === 1 ? new a(v[0], D, y) : (v.sort(function(F, x) {
            return F[h[D]] - x[h[D]];
          }), _ = Math.floor(v.length / 2), L = new a(v[_], D, y), L.left = M(v.slice(0, _), m + 1, L), L.right = M(v.slice(_ + 1), m + 1, L), L);
        }
        this.root = M(f, 0, null), this.insert = function(v) {
          function m(L, F) {
            if (L === null)
              return F;
            var x = h[L.dimension];
            return v[x] < L.obj[x] ? m(L.left, L) : m(L.right, L);
          }
          var y = m(this.root, null), D, _;
          if (y === null) {
            this.root = new a(v, 0, null);
            return;
          }
          D = new a(v, (y.dimension + 1) % h.length, y), _ = h[y.dimension], v[_] < y.obj[_] ? y.left = D : y.right = D;
        }, this.remove = function(v) {
          var m;
          function y(_) {
            if (_ === null)
              return null;
            if (_.obj === v)
              return _;
            var L = h[_.dimension];
            return v[L] < _.obj[L] ? y(_.left) : y(_.right);
          }
          function D(_) {
            var L, F, x;
            function O(I, l) {
              var b, Z, G, J, ee;
              return I === null ? null : (b = h[l], I.dimension === l ? I.right !== null ? O(I.right, l) : I : (Z = I.obj[b], G = O(I.left, l), J = O(I.right, l), ee = I, G !== null && G.obj[b] > Z && (ee = G), J !== null && J.obj[b] > ee.obj[b] && (ee = J), ee));
            }
            function R(I, l) {
              var b, Z, G, J, ee;
              return I === null ? null : (b = h[l], I.dimension === l ? I.left !== null ? R(I.left, l) : I : (Z = I.obj[b], G = R(I.left, l), J = R(I.right, l), ee = I, G !== null && G.obj[b] < Z && (ee = G), J !== null && J.obj[b] < ee.obj[b] && (ee = J), ee));
            }
            if (_.left === null && _.right === null) {
              if (_.parent === null) {
                u.root = null;
                return;
              }
              x = h[_.parent.dimension], _.obj[x] < _.parent.obj[x] ? _.parent.left = null : _.parent.right = null;
              return;
            }
            _.left !== null ? L = O(_.left, _.dimension) : L = R(_.right, _.dimension), F = L.obj, D(L), _.obj = F;
          }
          m = y(u.root), m !== null && D(m);
        }, this.nearest = function(v, m, y) {
          var D, _, L;
          L = new c(
            function(x) {
              return -x[1];
            }
          );
          function F(x) {
            if (!u.root)
              return [];
            var O, R = h[x.dimension], I = o(v, x.obj), l = {}, b, Z, G;
            function J(ee, se) {
              L.push([ee, se]), L.size() > m && L.pop();
            }
            for (G = 0; G < h.length; G += 1)
              G === x.dimension ? l[h[G]] = v[h[G]] : l[h[G]] = x.obj[h[G]];
            if (b = o(l, x.obj), x.right === null && x.left === null) {
              (L.size() < m || I < L.peek()[1]) && J(x, I);
              return;
            }
            x.right === null ? O = x.left : x.left === null ? O = x.right : v[R] < x.obj[R] ? O = x.left : O = x.right, F(O), (L.size() < m || I < L.peek()[1]) && J(x, I), (L.size() < m || Math.abs(b) < L.peek()[1]) && (O === x.left ? Z = x.right : Z = x.left, Z !== null && F(Z));
          }
          if (y)
            for (D = 0; D < m; D += 1)
              L.push([null, y]);
          for (F(u.root), _ = [], D = 0; D < m && D < L.content.length; D += 1)
            L.content[D][0] && _.push([L.content[D][0].obj, L.content[D][1]]);
          return _;
        }, this.balanceFactor = function() {
          function v(y) {
            return y === null ? 0 : Math.max(v(y.left), v(y.right)) + 1;
          }
          function m(y) {
            return y === null ? 0 : m(y.left) + m(y.right) + 1;
          }
          return v(u.root) / (Math.log(m(u.root)) / Math.log(2));
        };
      }
      function c(f) {
        this.content = [], this.scoreFunction = f;
      }
      c.prototype = {
        push: function(f) {
          this.content.push(f), this.bubbleUp(this.content.length - 1);
        },
        pop: function() {
          var f = this.content[0], o = this.content.pop();
          return this.content.length > 0 && (this.content[0] = o, this.sinkDown(0)), f;
        },
        peek: function() {
          return this.content[0];
        },
        remove: function(f) {
          for (var o = this.content.length, h = 0; h < o; h++)
            if (this.content[h] == f) {
              var u = this.content.pop();
              h != o - 1 && (this.content[h] = u, this.scoreFunction(u) < this.scoreFunction(f) ? this.bubbleUp(h) : this.sinkDown(h));
              return;
            }
          throw new Error("Node not found.");
        },
        size: function() {
          return this.content.length;
        },
        bubbleUp: function(f) {
          for (var o = this.content[f]; f > 0; ) {
            var h = Math.floor((f + 1) / 2) - 1, u = this.content[h];
            if (this.scoreFunction(o) < this.scoreFunction(u))
              this.content[h] = o, this.content[f] = u, f = h;
            else
              break;
          }
        },
        sinkDown: function(f) {
          for (var o = this.content.length, h = this.content[f], u = this.scoreFunction(h); ; ) {
            var M = (f + 1) * 2, v = M - 1, m = null;
            if (v < o) {
              var y = this.content[v], D = this.scoreFunction(y);
              D < u && (m = v);
            }
            if (M < o) {
              var _ = this.content[M], L = this.scoreFunction(_);
              L < (m == null ? u : D) && (m = M);
            }
            if (m != null)
              this.content[f] = this.content[m], this.content[m] = h, f = m;
            else
              break;
          }
        }
      }, r.exports = {
        createKdTree: function(f, o, h) {
          return new e(f, o, h);
        }
      };
    }, {}], 10: [function(n, r, i) {
      r.exports = {
        name: "serve-sofa-hrir",
        exports: "serveSofaHrir",
        version: "0.4.2",
        description: "Utility to fetch and shape sofa formated HRIR from server",
        main: "./dist/",
        standalone: "serveSofaHrir",
        scripts: {
          lint: "eslint ./src/ ./test/ && jscs --verbose ./src/ ./test/",
          "lint-examples": "eslint -c examples/.eslintrc ./examples/*.html",
          compile: "rm -rf ./dist && babel ./src/ --out-dir ./dist/",
          browserify: "browserify ./src/index.js -t [ babelify ] --standalone serveSofaHrir > serveSofaHrir.js",
          bundle: "npm run lint && npm run test && npm run doc && npm run compile && npm run browserify",
          doc: "esdoc -c esdoc.json",
          test: "browserify test/*/*.js -t [ babelify ] --exclude 'test/*/*_listen.js*' --exclude 'test/*/*_issues.js' | tape-run",
          "test-browser": "browserify test/*/*.js -t [ babelify ] --exclude 'test/*/*_listen.js*' --exclude 'test/*/*_issues.js' | testling -u",
          "test-listen": "browserify test/*/*_listen.js -t [ babelify ] | tape-run",
          "test-issues": "browserify test/*/*_issues.js -t [ babelify ] | tape-run",
          watch: "watch 'npm run browserify && echo $( date ): browserified' ./src/"
        },
        authors: [
          "Jean-Philippe.Lambert@ircam.fr",
          "Arnau Juli <arnau.julia@gmail.com>",
          "Samuel.Goldszmidt@ircam.fr",
          "David.Poirier-Quinot@ircam.fr"
        ],
        license: "BSD-3-Clause",
        dependencies: {
          "fractional-delay": "git://github.com/Ircam-RnD/fractional-delay#gh-pages",
          "gl-matrix": "^2.4.0",
          "kd.tree": "akshaylive/node-kdt#39bc780704a324393bca68a17cf7bc71be8544c6"
        },
        repository: {
          type: "git",
          url: "https://github.com/Ircam-RnD/serveSofaHrir"
        },
        engines: {
          node: "0.12 || 4",
          npm: ">=1.0.0 <3.0.0"
        },
        devDependencies: {
          "babel-cli": "^6.5.1",
          "babel-eslint": "^4.1.8",
          "babel-preset-es2015": "^6.5.0",
          babelify: "^7.2.0",
          "blue-tape": "^0.1.11",
          browserify: "^12.0.2",
          esdoc: "^0.4.6",
          eslint: "^1.10.3",
          "eslint-config-airbnb": "^1.0.2",
          "eslint-plugin-html": "^1.4.0",
          jscs: "2.11.0",
          "jscs-jsdoc": "^1.3.1",
          tape: "^4.4.0",
          "tape-run": "^2.1.2",
          testling: "^1.7.1",
          watch: "^0.17.1"
        }
      };
    }, {}], 11: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.resampleFloat32Array = f;
      var a = n("fractional-delay"), e = c(a);
      function c(o) {
        return o && o.__esModule ? o : { default: o };
      }
      function f() {
        var o = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, h = new Promise(function(u, M) {
          var v = o.inputSamples, m = o.inputSampleRate, y = typeof o.inputDelay < "u" ? o.inputDelay : 0, D = typeof o.outputSampleRate < "u" ? o.outputSampleRate : m;
          if (m === D && y === 0)
            u(new Float32Array(v));
          else
            try {
              var _ = Math.ceil(v.length * D / m), L = new window.OfflineAudioContext(1, _, D), F = L.createBuffer(1, v.length, m), x = 1, O = new e.default(m, x);
              O.setDelay(y / m), F.getChannelData(0).set(O.process(v));
              var R = L.createBufferSource();
              R.buffer = F, R.connect(L.destination), R.start(), L.oncomplete = function(I) {
                var l = I.renderedBuffer.getChannelData(0);
                u(l);
              }, L.startRendering();
            } catch (I) {
              M(new Error("Unable to re-sample Float32Array. " + I.message));
            }
        });
        return h;
      }
      /**
       * @fileOverview Audio utilities
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      i.default = {
        resampleFloat32Array: f
      };
    }, { "fractional-delay": 7 }], 12: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.tree = void 0, i.distanceSquared = f, i.distance = o;
      var a = n("kd.tree"), e = c(a);
      function c(h) {
        return h && h.__esModule ? h : { default: h };
      }
      i.tree = e.default;
      /**
       * @fileOverview Helpers for k-d tree.
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function f(h, u) {
        var M = u.x - h.x, v = u.y - h.y, m = u.z - h.z;
        return M * M + v * v + m * m;
      }
      function o(h, u) {
        return Math.sqrt(this.distanceSquared(h, u));
      }
      i.default = {
        distance: o,
        distanceSquared: f,
        tree: e.default
      };
    }, { "kd.tree": 9 }], 13: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.sofaCartesianToGl = f, i.glToSofaCartesian = o, i.sofaCartesianToSofaSpherical = h, i.sofaSphericalToSofaCartesian = u, i.sofaSphericalToGl = M, i.glToSofaSpherical = v, i.sofaToSofaCartesian = m, i.spat4CartesianToGl = y, i.glToSpat4Cartesian = D, i.spat4CartesianToSpat4Spherical = _, i.spat4SphericalToSpat4Cartesian = L, i.spat4SphericalToGl = F, i.glToSpat4Spherical = x, i.systemType = O, i.systemToGl = R, i.glToSystem = I;
      var a = n("./degree"), e = c(a);
      function c(l) {
        return l && l.__esModule ? l : { default: l };
      }
      function f(l, b) {
        var Z = b[0], G = b[1], J = b[2];
        return l[0] = 0 - G, l[1] = J, l[2] = 0 - Z, l;
      }
      /**
       * @fileOverview Coordinate systems conversions. openGL, SOFA, and Spat4 (Ircam).
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function o(l, b) {
        var Z = b[0], G = b[1], J = b[2];
        return l[0] = 0 - J, l[1] = 0 - Z, l[2] = G, l;
      }
      function h(l, b) {
        var Z = b[0], G = b[1], J = b[2], ee = Z * Z + G * G;
        return l[0] = (e.default.atan2(G, Z) + 360) % 360, l[1] = e.default.atan2(J, Math.sqrt(ee)), l[2] = Math.sqrt(ee + J * J), l;
      }
      function u(l, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return l[0] = J * ee * e.default.cos(Z), l[1] = J * ee * e.default.sin(Z), l[2] = J * e.default.sin(G), l;
      }
      function M(l, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return l[0] = 0 - J * ee * e.default.sin(Z), l[1] = J * e.default.sin(G), l[2] = 0 - J * ee * e.default.cos(Z), l;
      }
      function v(l, b) {
        var Z = 0 - b[2], G = 0 - b[0], J = b[1], ee = Z * Z + G * G;
        return l[0] = (e.default.atan2(G, Z) + 360) % 360, l[1] = e.default.atan2(J, Math.sqrt(ee)), l[2] = Math.sqrt(ee + J * J), l;
      }
      function m(l, b, Z) {
        switch (Z) {
          case "sofaCartesian":
            l[0] = b[0], l[1] = b[1], l[2] = b[2];
            break;
          case "sofaSpherical":
            u(l, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return l;
      }
      function y(l, b) {
        var Z = b[0], G = b[1], J = b[2];
        return l[0] = Z, l[1] = J, l[2] = 0 - G, l;
      }
      function D(l, b) {
        var Z = b[0], G = b[1], J = b[2];
        return l[0] = Z, l[1] = 0 - J, l[2] = G, l;
      }
      function _(l, b) {
        var Z = b[0], G = b[1], J = b[2], ee = Z * Z + G * G;
        return l[0] = e.default.atan2(Z, G), l[1] = e.default.atan2(J, Math.sqrt(ee)), l[2] = Math.sqrt(ee + J * J), l;
      }
      function L(l, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return l[0] = J * ee * e.default.sin(Z), l[1] = J * ee * e.default.cos(Z), l[2] = J * e.default.sin(G), l;
      }
      function F(l, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return l[0] = J * ee * e.default.sin(Z), l[1] = J * e.default.sin(G), l[2] = 0 - J * ee * e.default.cos(Z), l;
      }
      function x(l, b) {
        var Z = b[0], G = 0 - b[2], J = b[1], ee = Z * Z + G * G;
        return l[0] = e.default.atan2(Z, G), l[1] = e.default.atan2(J, Math.sqrt(ee)), l[2] = Math.sqrt(ee + J * J), l;
      }
      function O(l) {
        var b = void 0;
        if (l === "sofaCartesian" || l === "spat4Cartesian" || l === "gl")
          b = "cartesian";
        else if (l === "sofaSpherical" || l === "spat4Spherical")
          b = "spherical";
        else
          throw new Error("Unknown coordinate system type " + l);
        return b;
      }
      function R(l, b, Z) {
        switch (Z) {
          case "gl":
            l[0] = b[0], l[1] = b[1], l[2] = b[2];
            break;
          case "sofaCartesian":
            f(l, b);
            break;
          case "sofaSpherical":
            M(l, b);
            break;
          case "spat4Cartesian":
            y(l, b);
            break;
          case "spat4Spherical":
            F(l, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return l;
      }
      function I(l, b, Z) {
        switch (Z) {
          case "gl":
            l[0] = b[0], l[1] = b[1], l[2] = b[2];
            break;
          case "sofaCartesian":
            o(l, b);
            break;
          case "sofaSpherical":
            v(l, b);
            break;
          case "spat4Cartesian":
            D(l, b);
            break;
          case "spat4Spherical":
            x(l, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return l;
      }
      i.default = {
        glToSofaCartesian: o,
        glToSofaSpherical: v,
        glToSpat4Cartesian: D,
        glToSpat4Spherical: x,
        glToSystem: I,
        sofaCartesianToGl: f,
        sofaCartesianToSofaSpherical: h,
        sofaSphericalToGl: M,
        sofaSphericalToSofaCartesian: u,
        sofaToSofaCartesian: m,
        spat4CartesianToGl: y,
        spat4CartesianToSpat4Spherical: _,
        spat4SphericalToGl: F,
        spat4SphericalToSpat4Cartesian: L,
        systemToGl: R,
        systemType: O
      };
    }, { "./degree": 14 }], 14: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.toRadian = c, i.fromRadian = f, i.cos = o, i.sin = h, i.atan2 = u;
      /**
       * @fileOverview Convert to and from degree
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var a = i.toRadianFactor = Math.PI / 180, e = i.fromRadianFactor = 1 / a;
      function c(M) {
        return M * a;
      }
      function f(M) {
        return M * e;
      }
      function o(M) {
        return Math.cos(M * a);
      }
      function h(M) {
        return Math.sin(M * a);
      }
      function u(M, v) {
        return Math.atan2(M, v) * e;
      }
      i.default = {
        atan2: u,
        cos: o,
        fromRadian: f,
        fromRadianFactor: e,
        sin: h,
        toRadian: c,
        toRadianFactor: a
      };
    }, {}], 15: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.ServerDataBase = i.HrtfSet = void 0;
      var a = n("./sofa/HrtfSet"), e = o(a), c = n("./sofa/ServerDataBase"), f = o(c);
      function o(h) {
        return h && h.__esModule ? h : { default: h };
      }
      i.HrtfSet = e.default, i.ServerDataBase = f.default, i.default = {
        HrtfSet: e.default,
        ServerDataBase: f.default
      };
    }, { "./sofa/HrtfSet": 17, "./sofa/ServerDataBase": 18 }], 16: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.version = i.name = i.license = i.description = void 0;
      var a = n("../package.json"), e = c(a);
      function c(M) {
        return M && M.__esModule ? M : { default: M };
      }
      var f = e.default.description;
      /**
       * @fileOverview Information on the library, from the `package.json` file.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      i.description = f;
      var o = e.default.license;
      i.license = o;
      var h = e.default.name;
      i.name = h;
      var u = e.default.version;
      i.version = u, i.default = {
        description: f,
        license: o,
        name: h,
        version: u
      };
    }, { "../package.json": 10 }], 17: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.HrtfSet = void 0;
      var a = /* @__PURE__ */ function() {
        function R(I, l) {
          for (var b = 0; b < l.length; b++) {
            var Z = l[b];
            Z.enumerable = Z.enumerable || !1, Z.configurable = !0, "value" in Z && (Z.writable = !0), Object.defineProperty(I, Z.key, Z);
          }
        }
        return function(I, l, b) {
          return l && R(I.prototype, l), b && R(I, b), I;
        };
      }();
      /**
       * @fileOverview Container for HRTF set: load a set from an URL and get
       * filters from corresponding positions.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var e = n("gl-matrix"), c = L(e), f = n("../info"), o = _(f), h = n("./parseDataSet"), u = n("./parseSofa"), M = n("../geometry/coordinates"), v = _(M), m = n("../geometry/KdTree"), y = _(m), D = n("../audio/utilities");
      function _(R) {
        return R && R.__esModule ? R : { default: R };
      }
      function L(R) {
        if (R && R.__esModule)
          return R;
        var I = {};
        if (R != null)
          for (var l in R)
            Object.prototype.hasOwnProperty.call(R, l) && (I[l] = R[l]);
        return I.default = R, I;
      }
      function F(R) {
        if (Array.isArray(R)) {
          for (var I = 0, l = Array(R.length); I < R.length; I++)
            l[I] = R[I];
          return l;
        } else
          return Array.from(R);
      }
      function x(R, I) {
        if (!(R instanceof I))
          throw new TypeError("Cannot call a class as a function");
      }
      var O = i.HrtfSet = function() {
        function R() {
          var I = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          x(this, R), this._audioContext = I.audioContext, this._ready = !1, this.coordinateSystem = I.coordinateSystem, this.filterCoordinateSystem = I.filterCoordinateSystem, this.filterPositions = I.filterPositions, this.filterAfterLoad = I.filterAfterLoad;
        }
        return a(R, [{
          key: "applyFilterPositions",
          // ------------- public methods
          /**
           * Apply filter positions to an existing set of HRTF. (After a successful
           * load.)
           *
           * This is destructive.
           *
           * @see {@link HrtfSet#load}
           */
          value: function() {
            var l = this, b = this._filterPositions.map(function(Z) {
              return l._kdt.nearest({ x: Z[0], y: Z[1], z: Z[2] }, 1).pop()[0];
            });
            b = [].concat(F(new Set(b))), this._kdt = y.default.tree.createKdTree(b, y.default.distanceSquared, ["x", "y", "z"]);
          }
          /**
           * Load an URL and generate the corresponding set of IR buffers.
           *
           * @param {String} sourceUrl
           * @returns {Promise.<this|Error>} resolve when the URL sucessfully
           * loaded.
           */
        }, {
          key: "load",
          value: function(l) {
            var b = this, Z = l.split(".").pop(), G = Z === "sofa" ? l + ".json" : l, J = void 0, ee = typeof this._filterPositions < "u" && !this.filterAfterLoad && Z === "sofa";
            return ee ? J = Promise.all([this._loadMetaAndPositions(l), this._loadDataSet(l)]).then(function(se) {
              var Ae = se[0], Se = se[1];
              return b._loadSofaPartial(l, Ae, Se).then(function() {
                return b._ready = !0, b;
              });
            }).catch(function() {
              return b._loadSofaFull(G).then(function() {
                return b.applyFilterPositions(), b._ready = !0, b;
              });
            }) : J = this._loadSofaFull(G).then(function() {
              return typeof b._filterPositions < "u" && b.filterAfterLoad && b.applyFilterPositions(), b._ready = !0, b;
            }), J;
          }
          /**
           * Export the current HRTF set as a JSON string.
           *
           * When set, `this.filterPositions` reduce the actual number of filter, and
           * thus the exported set. The coordinate system of the export is
           * `this.filterCoordinateSystem`.
           *
           * @see {@link HrtfSet#filterCoordinateSystem}
           * @see {@link HrtfSet#filterPositions}
           *
           * @returns {String} as a SOFA JSON file.
           * @throws {Error} when this.filterCoordinateSystem is unknown.
           */
        }, {
          key: "export",
          value: function() {
            var l = this, b = void 0, Z = v.default.systemType(this.filterCoordinateSystem);
            switch (Z) {
              case "cartesian":
                b = this._sofaSourcePosition.map(function(J) {
                  return v.default.glToSofaCartesian([], J);
                });
                break;
              case "spherical":
                b = this._sofaSourcePosition.map(function(J) {
                  return v.default.glToSofaSpherical([], J);
                });
                break;
              default:
                throw new Error("Bad source position type " + Z + " for export.");
            }
            var G = this._sofaSourcePosition.map(function(J) {
              for (var ee = l._kdt.nearest({ x: J[0], y: J[1], z: J[2] }, 1).pop()[0].fir, se = [], Ae = 0; Ae < ee.numberOfChannels; ++Ae)
                se.push([].concat(F(ee.getChannelData(Ae))));
              return se;
            });
            return (0, u.stringifySofa)({
              name: this._sofaName,
              metaData: this._sofaMetaData,
              ListenerPosition: [0, 0, 0],
              ListenerPositionType: "cartesian",
              ListenerUp: [0, 0, 1],
              ListenerUpType: "cartesian",
              ListenerView: [1, 0, 0],
              ListenerViewType: "cartesian",
              SourcePositionType: Z,
              SourcePosition: b,
              DataSamplingRate: this._audioContext.sampleRate,
              DataDelay: this._sofaDelay,
              DataIR: G,
              RoomVolume: this._sofaRoomVolume
            });
          }
          /**
           * @typedef {Object} HrtfSet.nearestType
           * @property {Number} distance from the request
           * @property {AudioBuffer} fir 2-channels impulse response
           * @property {Number} index original index in the SOFA set
           * @property {Coordinates} position using coordinateSystem coordinates
           * system.
           */
          /**
           * Get the nearest point in the HRTF set, after a successful load.
           *
           * @see {@link HrtfSet#load}
           *
           * @param {Coordinates} positionRequest
           * @returns {HrtfSet.nearestType}
           */
        }, {
          key: "nearest",
          value: function(l) {
            var b = v.default.systemToGl([], l, this.coordinateSystem), Z = this._kdt.nearest({
              x: b[0],
              y: b[1],
              z: b[2]
            }, 1).pop(), G = Z[0];
            return v.default.glToSystem(b, [G.x, G.y, G.z], this.coordinateSystem), {
              distance: Z[1],
              fir: G.fir,
              index: G.index,
              position: b
            };
          }
          /**
           * Get the FIR AudioBuffer that corresponds to the closest position in
           * the set.
           * @param {Coordinates} positionRequest
           * @returns {AudioBuffer}
           */
        }, {
          key: "nearestFir",
          value: function(l) {
            return this.nearest(l).fir;
          }
          // ----------- private methods
          /**
           * Creates a kd-tree out of the specified indices, positions, and FIR.
           *
           * @private
           *
           * @param {Array} indicesPositionsFirs
           * @returns {this}
           */
        }, {
          key: "_createKdTree",
          value: function(l) {
            var b = this, Z = l.map(function(G) {
              var J = G[2], ee = b._audioContext.createBuffer(J.length, J[0].length, b._audioContext.sampleRate);
              return J.forEach(function(se, Ae) {
                ee.getChannelData(Ae).set(se);
              }), {
                index: G[0],
                x: G[1][0],
                y: G[1][1],
                z: G[1][2],
                fir: ee
              };
            });
            return this._sofaSourcePosition = Z.map(function(G) {
              return [G.x, G.y, G.z];
            }), this._kdt = y.default.tree.createKdTree(Z, y.default.distanceSquared, ["x", "y", "z"]), this;
          }
          /**
           * Asynchronously create Float32Arrays, with possible re-sampling.
           *
           * @private
           *
           * @param {Array.<Number>} indices
           * @param {Array.<Coordinates>} positions
           * @param {Array.<Float32Array>} firs
           * @returns {Promise.<Array|Error>}
           * @throws {Error} assertion that the channel count is 2
           */
        }, {
          key: "_generateIndicesPositionsFirs",
          value: function(l, b, Z, G) {
            var J = this, ee = Z.map(function(se, Ae) {
              var Se = se.length;
              if (Se !== 2)
                throw new Error("Bad number of channels" + (" for IR index " + l[Ae]) + (" (" + Se + " instead of 2)"));
              if (G[0].length !== 2)
                throw new Error("Bad delay format" + (" for IR index " + l[Ae]) + (" (first element in Data.Delay is " + G[0]) + " instead of [[delayL, delayR]] )");
              var De = typeof G[Ae] < "u" ? G[Ae] : G[0], N = se.map(function(w, j) {
                if (De[j] < 0)
                  throw new Error("Negative delay detected (not handled at the moment):" + (" delay index " + l[Ae]) + (" channel " + j));
                return (0, D.resampleFloat32Array)({
                  inputSamples: w,
                  inputDelay: De[j],
                  inputSampleRate: J._sofaSampleRate,
                  outputSampleRate: J._audioContext.sampleRate
                });
              });
              return Promise.all(N).then(function(w) {
                return [l[Ae], b[Ae], w];
              }).catch(function(w) {
                throw new Error("Unable to re-sample impulse response " + Ae + ". " + w.message);
              });
            });
            return Promise.all(ee);
          }
          /**
           * Try to load a data set from a SOFA URL.
           *
           * @private
           *
           * @param {String} sourceUrl
           * @returns {Promise.<Object|Error>}
           */
        }, {
          key: "_loadDataSet",
          value: function(l) {
            var b = new Promise(function(Z, G) {
              var J = l + ".dds", ee = new window.XMLHttpRequest();
              ee.open("GET", J), ee.onerror = function() {
                G(new Error("Unable to GET " + J + ", status " + ee.status + " " + ("" + ee.responseText)));
              }, ee.onload = function() {
                if (ee.status < 200 || ee.status >= 300) {
                  ee.onerror();
                  return;
                }
                try {
                  var se = (0, h.parseDataSet)(ee.response);
                  Z(se);
                } catch (Ae) {
                  G(new Error("Unable to parse " + J + ". " + Ae.message));
                }
              }, ee.send();
            });
            return b;
          }
          /**
           * Try to load meta-data and positions from a SOFA URL, to get the
           * indices closest to the filter positions.
           *
           * @private
           *
           * @param {String} sourceUrl
           * @returns {Promise.<Array.<Number>|Error>}
           */
        }, {
          key: "_loadMetaAndPositions",
          value: function(l) {
            var b = this, Z = new Promise(function(G, J) {
              var ee = l + ".json?ListenerPosition,ListenerUp,ListenerView,SourcePosition,Data.Delay,Data.SamplingRate,EmitterPosition,ReceiverPosition,RoomVolume", se = new window.XMLHttpRequest();
              se.open("GET", ee), se.onerror = function() {
                J(new Error("Unable to GET " + ee + ", status " + se.status + " " + ("" + se.responseText)));
              }, se.onload = function() {
                if (se.status < 200 || se.status >= 300) {
                  se.onerror();
                  return;
                }
                try {
                  var Ae = (0, u.parseSofa)(se.response);
                  b._setMetaData(Ae, l);
                  var Se = b._sourcePositionsToGl(Ae), De = Se.map(function(j, te) {
                    return {
                      x: j[0],
                      y: j[1],
                      z: j[2],
                      index: te
                    };
                  }), N = y.default.tree.createKdTree(De, y.default.distanceSquared, ["x", "y", "z"]), w = b._filterPositions.map(function(j) {
                    return N.nearest({ x: j[0], y: j[1], z: j[2] }, 1).pop()[0].index;
                  });
                  w = [].concat(F(new Set(w))), b._sofaUrl = l, G(w);
                } catch (j) {
                  J(new Error("Unable to parse " + ee + ". " + j.message));
                }
              }, se.send();
            });
            return Z;
          }
          /**
           * Try to load full SOFA URL.
           *
           * @private
           *
           * @param {String} url
           * @returns {Promise.<this|Error>}
           */
        }, {
          key: "_loadSofaFull",
          value: function(l) {
            var b = this, Z = new Promise(function(G, J) {
              var ee = new window.XMLHttpRequest();
              ee.open("GET", l), ee.onerror = function() {
                J(new Error("Unable to GET " + l + ", status " + ee.status + " " + ("" + ee.responseText)));
              }, ee.onload = function() {
                if (ee.status < 200 || ee.status >= 300) {
                  ee.onerror();
                  return;
                }
                try {
                  var se = (0, u.parseSofa)(ee.response);
                  b._setMetaData(se, l);
                  var Ae = b._sourcePositionsToGl(se);
                  b._generateIndicesPositionsFirs(
                    Ae.map(function(Se, De) {
                      return De;
                    }),
                    // full
                    Ae,
                    se["Data.IR"].data,
                    se["Data.Delay"].data
                  ).then(function(Se) {
                    b._createKdTree(Se), b._sofaUrl = l, G(b);
                  });
                } catch (Se) {
                  J(new Error("Unable to parse " + l + ". " + Se.message));
                }
              }, ee.send();
            });
            return Z;
          }
          /**
           * Try to load partial data from a SOFA URL.
           *
           * @private
           *
           * @param {Array.<String>} sourceUrl
           * @param {Array.<Number>} indices
           * @param {Object} dataSet
           * @returns {Promise.<this|Error>}
           */
        }, {
          key: "_loadSofaPartial",
          value: function(l, b, Z) {
            var G = this, J = b.map(function(ee) {
              var se = new Promise(function(Ae, Se) {
                var De = l + ".json?" + ("SourcePosition[" + ee + "][0:1:" + (Z.SourcePosition.C - 1) + "],") + ("Data.IR[" + ee + "][0:1:" + (Z["Data.IR"].R - 1) + "]") + ("[0:1:" + (Z["Data.IR"].N - 1) + "]"), N = new window.XMLHttpRequest();
                N.open("GET", De), N.onerror = function() {
                  Se(new Error("Unable to GET " + De + ", status " + N.status + " " + ("" + N.responseText)));
                }, N.onload = function() {
                  (N.status < 200 || N.status >= 300) && N.onerror();
                  try {
                    var w = (0, u.parseSofa)(N.response), j = G._sourcePositionsToGl(w);
                    G._generateIndicesPositionsFirs([ee], j, w["Data.IR"].data, w["Data.Delay"].data).then(function(te) {
                      Ae(te[0]);
                    });
                  } catch (te) {
                    Se(new Error("Unable to parse " + De + ". " + te.message));
                  }
                }, N.send();
              });
              return se;
            });
            return Promise.all(J).then(function(ee) {
              return G._createKdTree(ee), G;
            });
          }
          /**
           * Set meta-data, and assert for supported HRTF type.
           *
           * @private
           *
           * @param {Object} data
           * @param {String} sourceUrl
           * @throws {Error} assertion for FIR data.
           */
        }, {
          key: "_setMetaData",
          value: function(l, b) {
            if (typeof l.metaData.DataType < "u" && l.metaData.DataType !== "FIR")
              throw new Error("According to meta-data, SOFA data type is not FIR");
            var Z = (/* @__PURE__ */ new Date()).toISOString();
            this._sofaName = typeof l.name < "u" ? "" + l.name : "HRTF.sofa", this._sofaMetaData = typeof l.metaData < "u" ? l.metaData : {}, typeof b < "u" && (this._sofaMetaData.OriginalUrl = b), this._sofaMetaData.Converter = "Ircam " + o.default.name + " " + o.default.version + " javascript API ", this._sofaMetaData.DateConverted = Z, this._sofaSampleRate = typeof l["Data.SamplingRate"] < "u" ? l["Data.SamplingRate"].data[0] : 48e3, this._sofaSampleRate !== this._audioContext.sampleRate && (this._sofaMetaData.OriginalSampleRate = this._sofaSampleRate), this._sofaDelay = typeof l["Data.Delay"] < "u" ? l["Data.Delay"].data : [0, 0], this._sofaRoomVolume = typeof l.RoomVolume < "u" ? l.RoomVolume.data[0] : void 0;
            var G = v.default.sofaToSofaCartesian([], l.ListenerPosition.data[0], (0, u.conformSofaCoordinateSystem)(l.ListenerPosition.Type || "cartesian")), J = v.default.sofaToSofaCartesian([], l.ListenerView.data[0], (0, u.conformSofaCoordinateSystem)(l.ListenerView.Type || "cartesian")), ee = v.default.sofaToSofaCartesian([], l.ListenerUp.data[0], (0, u.conformSofaCoordinateSystem)(l.ListenerUp.Type || "cartesian"));
            this._sofaToGl = c.mat4.lookAt([], G, J, ee);
          }
          /**
           * Convert to GL coordinates, in-place.
           *
           * @private
           *
           * @param {Object} data
           * @returns {Array.<Coordinates>}
           * @throws {Error}
           */
        }, {
          key: "_sourcePositionsToGl",
          value: function(l) {
            var b = this, Z = l.SourcePosition.data, G = typeof l.SourcePosition.Type < "u" ? l.SourcePosition.Type : "spherical";
            switch (G) {
              case "cartesian":
                Z.forEach(function(J) {
                  c.vec3.transformMat4(J, J, b._sofaToGl);
                });
                break;
              case "spherical":
                Z.forEach(function(J) {
                  v.default.sofaSphericalToSofaCartesian(J, J), c.vec3.transformMat4(J, J, b._sofaToGl);
                });
                break;
              default:
                throw new Error("Bad source position type");
            }
            return Z;
          }
        }, {
          key: "coordinateSystem",
          set: function(l) {
            this._coordinateSystem = typeof l < "u" ? l : "gl";
          },
          get: function() {
            return this._coordinateSystem;
          }
          /**
           * Set coordinate system for filter positions.
           *
           * @param {CoordinateSystem} [system] undefined to use coordinateSystem
           */
        }, {
          key: "filterCoordinateSystem",
          set: function(l) {
            this._filterCoordinateSystem = typeof l < "u" ? l : this.coordinateSystem;
          },
          get: function() {
            return this._filterCoordinateSystem;
          }
          /**
           * Set filter positions.
           *
           * @param {Array.<Coordinates>} [positions] undefined for no filtering.
           */
        }, {
          key: "filterPositions",
          set: function(l) {
            if (typeof l > "u")
              this._filterPositions = void 0;
            else
              switch (this.filterCoordinateSystem) {
                case "gl":
                  this._filterPositions = l.map(function(b) {
                    return b.slice(0);
                  });
                  break;
                case "sofaCartesian":
                  this._filterPositions = l.map(function(b) {
                    return v.default.sofaCartesianToGl([], b);
                  });
                  break;
                case "sofaSpherical":
                  this._filterPositions = l.map(function(b) {
                    return v.default.sofaSphericalToGl([], b);
                  });
                  break;
                default:
                  throw new Error("Bad filter coordinate system");
              }
          },
          get: function() {
            var l = void 0;
            if (typeof this._filterPositions < "u")
              switch (this.filterCoordinateSystem) {
                case "gl":
                  l = this._filterPositions.map(function(b) {
                    return b.slice(0);
                  });
                  break;
                case "sofaCartesian":
                  l = this._filterPositions.map(function(b) {
                    return v.default.glToSofaCartesian([], b);
                  });
                  break;
                case "sofaSpherical":
                  l = this._filterPositions.map(function(b) {
                    return v.default.glToSofaSpherical([], b);
                  });
                  break;
                default:
                  throw new Error("Bad filter coordinate system");
              }
            return l;
          }
          /**
           * Set post-filtering flag. When false, try to load a partial set of
           * HRTF.
           *
           * @param {Boolean} [post=false]
           */
        }, {
          key: "filterAfterLoad",
          set: function(l) {
            this._filterAfterLoad = typeof l < "u" ? l : !1;
          },
          get: function() {
            return this._filterAfterLoad;
          }
          /**
           * Test whether an HRTF set is actually loaded.
           *
           * @see {@link HrtfSet#load}
           *
           * @returns {Boolean} false before any successful load, true after.
           *
           */
        }, {
          key: "isReady",
          get: function() {
            return this._ready;
          }
          /**
           * Get the original name of the HRTF set.
           *
           * @returns {String} that is undefined before a successfully load.
           */
        }, {
          key: "sofaName",
          get: function() {
            return this._sofaName;
          }
          /**
           * Get the URL used to actually load the HRTF set.
           *
           * @returns {String} that is undefined before a successfully load.
           */
        }, {
          key: "sofaUrl",
          get: function() {
            return this._sofaUrl;
          }
          /**
           * Get the original sample-rate from the SOFA URL already loaded.
           *
           * @returns {Number} that is undefined before a successfully load.
           */
        }, {
          key: "sofaSampleRate",
          get: function() {
            return this._sofaSampleRate;
          }
          /**
           * Get the meta-data from the SOFA URL already loaded.
           *
           * @returns {Object} that is undefined before a successfully load.
           */
        }, {
          key: "sofaMetaData",
          get: function() {
            return this._sofaMetaData;
          }
        }]), R;
      }();
      i.default = O;
    }, { "../audio/utilities": 11, "../geometry/KdTree": 12, "../geometry/coordinates": 13, "../info": 16, "./parseDataSet": 19, "./parseSofa": 20, "gl-matrix": 8 }], 18: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.ServerDataBase = void 0;
      var a = /* @__PURE__ */ function() {
        function M(v, m) {
          for (var y = 0; y < m.length; y++) {
            var D = m[y];
            D.enumerable = D.enumerable || !1, D.configurable = !0, "value" in D && (D.writable = !0), Object.defineProperty(v, D.key, D);
          }
        }
        return function(v, m, y) {
          return m && M(v.prototype, m), y && M(v, y), v;
        };
      }();
      /**
       * @fileOverview Access a remote catalogue from a SOFA server, and get URLs
       * with filtering.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var e = n("./parseXml"), c = o(e), f = n("./parseDataSet");
      function o(M) {
        return M && M.__esModule ? M : { default: M };
      }
      function h(M, v) {
        if (!(M instanceof v))
          throw new TypeError("Cannot call a class as a function");
      }
      var u = i.ServerDataBase = function() {
        function M() {
          var v = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          if (h(this, M), this._server = v.serverUrl, typeof this._server > "u") {
            var m = window.location.protocol === "https:" ? "https:" : "http:";
            this._server = m + "//bili2.ircam.fr";
          }
          this._catalogue = {}, this._urls = [];
        }
        return a(M, [{
          key: "loadCatalogue",
          value: function() {
            var m = this, y = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this._server + "/catalog.xml", D = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this._catalogue, _ = new Promise(function(L, F) {
              var x = new window.XMLHttpRequest();
              x.open("GET", y), x.onerror = function() {
                F(new Error("Unable to GET " + y + ", status " + x.status + " " + ("" + x.responseText)));
              }, x.onload = function() {
                if (x.status < 200 || x.status >= 300) {
                  x.onerror();
                  return;
                }
                var O = (0, c.default)(x.response), R = O.querySelector("dataset"), I = O.querySelectorAll("dataset > catalogRef");
                if (I.length === 0) {
                  D.urls = [];
                  for (var l = O.querySelectorAll("dataset > dataset"), b = 0; b < l.length; ++b) {
                    var Z = m._server + R.getAttribute("name") + "/" + l[b].getAttribute("name");
                    m._urls.push(Z), D.urls.push(Z);
                  }
                  L(y);
                } else {
                  for (var G = [], J = 0; J < I.length; ++J) {
                    var ee = I[J].getAttribute("name"), se = m._server + R.getAttribute("name") + "/" + I[J].getAttribute("xlink:href");
                    D[ee] = {}, G.push(m.loadCatalogue(se, D[ee]));
                  }
                  Promise.all(G).then(function() {
                    m._urls.sort(), L(y);
                  }).catch(function(Ae) {
                    F(Ae);
                  });
                }
              }, x.send();
            });
            return _;
          }
          /**
           * Get URLs, possibly filtered.
           *
           * Any filter can be partial, and is case-insensitive. The result must
           * match every supplied filter. Undefined filters are not applied. For
           * any filter, `|` is the or operator.
           *
           * @param {Object} [options] optional filters
           * @param {String} [options.convention] 'HRIR' or 'SOS'
           * @param {String} [options.dataBase] 'LISTEN', 'BILI', etc.
           * @param {String} [options.equalisation] 'RAW','COMPENSATED'
           * @param {String} [options.sampleRate] in Hertz
           * @param {String} [options.sosOrder] '12order' or '24order'
           * @param {String} [options.freePattern] any pattern matched
           * globally. Use separators (spaces, tabs, etc.) to combine multiple
           * patterns: '44100 listen' will restrict on URLs matching '44100' and
           * 'listen'; '44100|48000 bili|listen' matches ('44100' or '48000') and
           * ('bili' or 'listen').
           * @returns {Array.<String>} URLs that match every filter.
           */
        }, {
          key: "getUrls",
          value: function() {
            var m = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, y = [m.convention, m.dataBase, m.equalisation, m.sampleRate, m.sosOrder], D = typeof m.freePattern == "number" ? m.freePattern.toString() : m.freePattern, _ = y.reduce(function(O, R) {
              return O + "/" + (typeof R < "u" ? "[^/]*(?:" + R + ")[^/]*" : "[^/]*");
            }, ""), L = new RegExp(_, "i"), F = this._urls.filter(function(O) {
              return L.test(O);
            });
            if (typeof D < "u") {
              var x = D.split(/\s+/);
              x.forEach(function(O) {
                L = new RegExp(O, "i"), F = F.filter(function(R) {
                  return L.test(R);
                });
              });
            }
            return F;
          }
          /**
           * Get the data-set definitions of a given URL.
           *
           * @param {String} sourceUrl is the complete SOFA URL, with the
           * server, like
           * 'http://bili2.ircam.fr/SimpleFreeFieldHRIR/BILI/COMPENSATED/44100/IRC_1100_C_HRIR.sofa'
           *
           * @returns {Promise.<Object|String>} The promise will resolve after
           * successfully loading, with definitions as * `{definition: {key: values}}`
           * objects; the promise will reject is the transfer fails, with an error.
           */
        }, {
          key: "getDataSetDefinitions",
          value: function(m) {
            var y = new Promise(function(D, _) {
              var L = m + ".dds", F = new window.XMLHttpRequest();
              F.open("GET", L), F.onerror = function() {
                _(new Error("Unable to GET " + L + ", status " + F.status + " " + ("" + F.responseText)));
              }, F.onload = function() {
                if (F.status < 200 || F.status >= 300) {
                  F.onerror();
                  return;
                }
                D((0, f.parseDataSet)(F.response));
              }, F.send();
            });
            return y;
          }
          /**
           * Get all source positions of a given URL.
           *
           * @param {String} sourceUrl is the complete SOFA URL, with the
           * server, like
           * 'http://bili2.ircam.fr/SimpleFreeFieldHRIR/BILI/COMPENSATED/44100/IRC_1100_C_HRIR.sofa'
           *
           * @returns {Promise.<Array<Array.<Number>>|Error>} The promise will resolve
           * after successfully loading, with an array of positions (which are
           * arrays of 3 numbers); the promise will reject is the transfer fails,
           * with an error.
           */
        }, {
          key: "getSourcePositions",
          value: function(m) {
            var y = new Promise(function(D, _) {
              var L = m + ".json?SourcePosition", F = new window.XMLHttpRequest();
              F.open("GET", L), F.onerror = function() {
                _(new Error("Unable to GET " + L + ", status " + F.status + " " + ("" + F.responseText)));
              }, F.onload = function() {
                if (F.status < 200 || F.status >= 300) {
                  F.onerror();
                  return;
                }
                try {
                  var x = JSON.parse(F.response);
                  if (x.leaves[0].name !== "SourcePosition")
                    throw new Error("SourcePosition not found");
                  D(x.leaves[0].data);
                } catch (O) {
                  _(new Error("Unable to parse response from " + L + ". " + O.message));
                }
              }, F.send();
            });
            return y;
          }
        }]), M;
      }();
      i.default = u;
    }, { "./parseDataSet": 19, "./parseXml": 21 }], 19: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i._parseDimension = v, i._parseDefinition = m, i.parseDataSet = y;
      /**
       * @fileOverview Parser for DDS files
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var a = "\\[\\s*(\\w+)\\s*=\\s*(\\d+)\\s*\\]", e = new RegExp(a, "g"), c = new RegExp(a), f = "\\s*(\\w+)\\s*([\\w.]+)\\s*((?:\\[[^\\]]+\\]\\s*)+);\\s*", o = new RegExp(f, "g"), h = new RegExp(f), u = "\\s*Dataset\\s*\\{\\s*((?:[^;]+;\\s*)*)\\s*\\}\\s*[\\w.]+\\s*;\\s*", M = new RegExp(u);
      function v(D) {
        var _ = [], L = D.match(e);
        return L !== null && L.forEach(function(F) {
          var x = c.exec(F);
          x !== null && x.length > 2 && _.push([x[1], Number(x[2])]);
        }), _;
      }
      function m(D) {
        var _ = [], L = D.match(o);
        return L !== null && L.forEach(function(F) {
          var x = h.exec(F);
          if (x !== null && x.length > 3) {
            var O = [];
            O[0] = x[2], O[1] = {}, O[1].type = x[1], v(x[3]).forEach(function(R) {
              O[1][R[0]] = R[1];
            }), _.push(O);
          }
        }), _;
      }
      function y(D) {
        var _ = {}, L = M.exec(D);
        return L !== null && L.length > 1 && m(L[1]).forEach(function(F) {
          _[F[0]] = F[1];
        }), _;
      }
      i.default = y;
    }, {}], 20: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.parseSofa = a, i.stringifySofa = e, i.conformSofaCoordinateSystem = c;
      /**
       * @fileOverview Parser functions for SOFA files
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function a(f) {
        try {
          var o = JSON.parse(f), h = {};
          if (h.name = o.name, typeof o.attributes < "u") {
            h.metaData = {};
            var u = o.attributes.find(function(v) {
              return v.name === "NC_GLOBAL";
            });
            typeof u < "u" && u.attributes.forEach(function(v) {
              h.metaData[v.name] = v.value[0];
            });
          }
          if (typeof o.leaves < "u") {
            var M = o.leaves;
            M.forEach(function(v) {
              h[v.name] = {}, v.attributes.forEach(function(m) {
                h[v.name][m.name] = m.value[0];
              }), h[v.name].shape = v.shape, h[v.name].data = v.data;
            });
          }
          return h;
        } catch (v) {
          throw new Error("Unable to parse SOFA string. " + v.message);
        }
      }
      function e(f) {
        var o = {};
        if (typeof f.name < "u" && (o.name = f.name), typeof f.metaData < "u") {
          o.attributes = [];
          var h = {
            name: "NC_GLOBAL",
            attributes: []
          };
          for (var u in f.metaData)
            f.metaData.hasOwnProperty(u) && h.attributes.push({
              name: u,
              value: [f.metaData[u]]
            });
          o.attributes.push(h);
        }
        var M = "Float64", v = void 0;
        if (o.leaves = [], [["ListenerPosition", "ListenerPositionType"], ["ListenerUp", "ListenerUpType"], ["ListenerView", "ListenerViewType"]].forEach(function(m) {
          var y = m[0], D = f[y], _ = f[m[1]];
          if (typeof D < "u") {
            switch (_) {
              case "cartesian":
                v = [{ name: "Type", value: ["cartesian"] }, { name: "Units", value: ["metre, metre, metre"] }];
                break;
              case "spherical":
                v = [{ name: "Type", value: ["spherical"] }, { name: "Units", value: ["degree, degree, metre"] }];
                break;
              default:
                throw new Error("Unknown coordinate system type " + (_ + " for " + D));
            }
            o.leaves.push({
              name: y,
              type: M,
              attributes: v,
              shape: [1, 3],
              data: [D]
            });
          }
        }), typeof f.SourcePosition < "u") {
          switch (f.SourcePositionType) {
            case "cartesian":
              v = [{ name: "Type", value: ["cartesian"] }, { name: "Units", value: ["metre, metre, metre"] }];
              break;
            case "spherical":
              v = [{ name: "Type", value: ["spherical"] }, { name: "Units", value: ["degree, degree, metre"] }];
              break;
            default:
              throw new Error("Unknown coordinate system type " + ("" + f.SourcePositionType));
          }
          o.leaves.push({
            name: "SourcePosition",
            type: M,
            attributes: v,
            shape: [f.SourcePosition.length, f.SourcePosition[0].length],
            data: f.SourcePosition
          });
        }
        if (typeof f.DataSamplingRate < "u")
          o.leaves.push({
            name: "Data.SamplingRate",
            type: M,
            attributes: [{ name: "Unit", value: "hertz" }],
            shape: [1],
            data: [f.DataSamplingRate]
          });
        else
          throw new Error("No data sampling-rate");
        if (typeof f.DataDelay < "u" && o.leaves.push({
          name: "Data.Delay",
          type: M,
          attributes: [],
          shape: [1, f.DataDelay.length],
          data: f.DataDelay
        }), typeof f.DataIR < "u")
          o.leaves.push({
            name: "Data.IR",
            type: M,
            attributes: [],
            shape: [f.DataIR.length, f.DataIR[0].length, f.DataIR[0][0].length],
            data: f.DataIR
          });
        else
          throw new Error("No data IR");
        return typeof f.RoomVolume < "u" && o.leaves.push({
          name: "RoomVolume",
          type: M,
          attributes: [{ name: "Units", value: ["cubic metre"] }],
          shape: [1],
          data: [f.RoomVolume]
        }), o.nodes = [], JSON.stringify(o);
      }
      function c(f) {
        var o = void 0;
        switch (f) {
          case "cartesian":
            o = "sofaCartesian";
            break;
          case "spherical":
            o = "sofaSpherical";
            break;
          default:
            throw new Error("Bad SOFA type " + f);
        }
        return o;
      }
      i.default = {
        parseSofa: a,
        conformSofaCoordinateSystem: c
      };
    }, {}], 21: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      });
      /**
       * @fileOverview Simple XML parser, as a DOM parser.
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var a = i.parseXml = void 0;
      if (typeof window.DOMParser < "u")
        i.parseXml = a = function(c) {
          return new window.DOMParser().parseFromString(c, "text/xml");
        };
      else if (typeof window.ActiveXObject < "u" && new window.ActiveXObject("Microsoft.XMLDOM"))
        i.parseXml = a = function(c) {
          var f = new window.ActiveXObject("Microsoft.XMLDOM");
          return f.async = "false", f.loadXML(c), f;
        };
      else
        throw new Error("No XML parser found");
      i.default = a;
    }, {}] }, {}, [15])(15);
  });
})(serveSofaHrir);
var serveSofaHrirExports = serveSofaHrir.exports;
class HRIRloader_ircam {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.onLoad = r, this.hrtfSet = new serveSofaHrirExports.HrtfSet({
      audioContext: this.context,
      coordinateSystem: "sofaSpherical"
    }), this.wishedSpeakerPos = getTdesign(2 * this.order), this.hrirBuffer = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    this.hrtfSet.load(t).then(() => {
      const n = [];
      this.hrirBuffer = [];
      for (let i = 0; i < this.wishedSpeakerPos.length; i++)
        n.push(this.hrtfSet.nearest(this.wishedSpeakerPos[i]).position), this.hrirBuffer.push(this.hrtfSet.nearest(this.wishedSpeakerPos[i]).fir);
      let r = 0;
      for (let i = 0; i < this.wishedSpeakerPos.length; i++)
        this.wishedSpeakerPos[i][0] < 0 && (this.wishedSpeakerPos[i][0] += 360), r += Math.sqrt(
          Math.pow(this.wishedSpeakerPos[i][0] - n[i][0], 2) + Math.pow(this.wishedSpeakerPos[i][1] - n[i][1], 2)
        );
      console.log(
        "summed / average angular dist between asked and present pos:",
        Math.round(r * 100) / 100,
        "deg /",
        Math.round(r / this.wishedSpeakerPos.length * 100) / 100,
        "deg"
      ), this.decodingMatrix = getAmbisonicDecMtx(n, this.order), this.hoaBuffer = this.getHoaFilterFromHrirFilter(), this.onLoad(this.hoaBuffer);
    });
  }
  getHoaFilterFromHrirFilter() {
    const t = this.hrirBuffer[0].length, n = this.hrirBuffer[0].sampleRate, r = this.context.createBuffer(
      this.nCh,
      t,
      n
    );
    for (let i = 0; i < this.nCh; i++) {
      const a = new Float32Array(t);
      for (let e = 0; e < this.hrirBuffer.length; e++)
        for (let c = 0; c < t; c++)
          a[c] += this.decodingMatrix[e][i] * this.hrirBuffer[e].getChannelData(0)[c];
      r.getChannelData(i).set(a);
    }
    return r;
  }
}
class wxyz2acn {
  constructor(t) {
    this.ctx = t, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(4);
    for (let n = 0; n < 4; n++)
      this.gains[n] = this.ctx.createGain(), n === 0 ? this.gains[n].gain.value = Math.SQRT2 : this.gains[n].gain.value = Math.sqrt(3), this.gains[n].connect(this.out, 0, n);
    this.in.connect(this.gains[0], 0, 0), this.in.connect(this.gains[3], 1, 0), this.in.connect(this.gains[1], 2, 0), this.in.connect(this.gains[2], 3, 0);
  }
}
class acn2wxyz {
  constructor(t) {
    this.ctx = t, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(4);
    for (let n = 0; n < 4; n++)
      this.gains[n] = this.ctx.createGain(), n === 0 ? this.gains[n].gain.value = Math.SQRT1_2 : this.gains[n].gain.value = 1 / Math.sqrt(3), this.gains[n].connect(this.out, 0, n);
    this.in.connect(this.gains[0], 0, 0), this.in.connect(this.gains[2], 1, 0), this.in.connect(this.gains[3], 2, 0), this.in.connect(this.gains[1], 3, 0);
  }
}
class sn3d2n3d {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++) {
      const i = Math.floor(Math.sqrt(r));
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = Math.sqrt(2 * i + 1), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
    }
  }
}
class n3d2sn3d {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++) {
      const i = Math.floor(Math.sqrt(r));
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1 / Math.sqrt(2 * i + 1), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
    }
  }
}
class fuma2acn {
  constructor(t, n) {
    let r = n;
    r > 3 && (console.log("FuMa specifiction is supported up to 3rd order"), r = 3);
    const i = [
      Math.sqrt(2),
      // W
      Math.sqrt(3),
      // Y
      Math.sqrt(3),
      // Z
      Math.sqrt(3),
      // X
      Math.sqrt(15) / 2,
      // V
      Math.sqrt(15) / 2,
      // T
      Math.sqrt(5),
      // R
      Math.sqrt(15) / 2,
      // S
      Math.sqrt(15) / 2,
      // U
      Math.sqrt(35 / 8),
      // Q
      Math.sqrt(35) / 3,
      // O
      Math.sqrt(224 / 45),
      // M
      Math.sqrt(7),
      // K
      Math.sqrt(224 / 45),
      // L
      Math.sqrt(35) / 3,
      // N
      Math.sqrt(35 / 8)
      // P
    ];
    if (this.ctx = t, this.order = r, this.nCh = getAmbisonicChannelCount(r), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = [], this.remapArray = [], this.remapArray.push(0, 2, 3, 1), r > 1) {
      let a = 0, e;
      for (let c = 0; c < this.nCh; c++)
        if (e = [], c >= (a + 1) * (a + 1)) {
          a += 1;
          for (let f = (a + 1) * (a + 1); f < (a + 2) * (a + 2); f++)
            (f + a % 2) % 2 === 0 ? e.push(f) : e.unshift(f);
          this.remapArray = this.remapArray.concat(e);
        }
    }
    for (let a = 0; a < this.nCh; a++)
      this.gains[a] = this.ctx.createGain(), this.gains[a].gain.value = i[a], this.in.connect(this.gains[a], this.remapArray[a], 0), this.gains[a].connect(this.out, 0, a);
  }
}
const _converters = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  acn2wxyz,
  fuma2acn,
  n3d2sn3d,
  sn3d2n3d,
  wxyz2acn
}, Symbol.toStringTag, { value: "Module" })), converters = _converters, utils = _utils;
export {
  HOAloader,
  HRIRloader2D_local,
  HRIRloader_ircam,
  HRIRloader_local,
  binDecoder,
  binDecoder2D,
  computeEncodingCoefficients,
  computeEncodingCoefficients2D,
  converters,
  convolver,
  decoder,
  degreesToRadians,
  encodeAndSumBuffers,
  encodeBuffer,
  encodeBuffer2D,
  encodeBuffer2DFromDirection,
  encodeBufferFromDirection,
  getAmbisonicChannelCount,
  getAmbisonicChannelCount2D,
  intensityAnalyser,
  intensityAnalyser2D,
  monoEncoder,
  monoEncoder2D,
  orderLimiter,
  orderLimiter2D,
  orderWeight,
  powermapAnalyser,
  radiansToDegrees,
  rmsAnalyser,
  sceneMirror,
  sceneMirror2D,
  sceneRotator,
  sceneRotator2D,
  utils,
  virtualMic
};
//# sourceMappingURL=ambisonics.es.min.js.map
