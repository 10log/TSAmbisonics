function getAmbisonicChannelCount(S) {
  return (S + 1) * (S + 1);
}
function getAmbisonicChannelCount2D(S) {
  return 2 * S + 1;
}
function degreesToRadians(S) {
  return S * Math.PI / 180;
}
function radiansToDegrees(S) {
  return S * 180 / Math.PI;
}
var commonjsGlobal = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function getDefaultExportFromCjs(S) {
  return S && S.__esModule && Object.prototype.hasOwnProperty.call(S, "default") ? S.default : S;
}
var numeric1_2_6 = {};
(function(exports$1) {
  var numeric = exports$1;
  typeof commonjsGlobal < "u" && (commonjsGlobal.numeric = numeric), numeric.version = "1.2.6", numeric.bench = function(t, n) {
    var r, i, s, e;
    for (typeof n > "u" && (n = 15), s = 0.5, r = /* @__PURE__ */ new Date(); ; ) {
      for (s *= 2, e = s; e > 3; e -= 4)
        t(), t(), t(), t();
      for (; e > 0; )
        t(), e--;
      if (i = /* @__PURE__ */ new Date(), i - r > n) break;
    }
    for (e = s; e > 3; e -= 4)
      t(), t(), t(), t();
    for (; e > 0; )
      t(), e--;
    return i = /* @__PURE__ */ new Date(), 1e3 * (3 * s - 1) / (i - r);
  }, numeric._myIndexOf = function(t) {
    var n = this.length, r;
    for (r = 0; r < n; ++r) if (this[r] === t) return r;
    return -1;
  }, numeric.myIndexOf = Array.prototype.indexOf ? Array.prototype.indexOf : numeric._myIndexOf, numeric.Function = Function, numeric.precision = 4, numeric.largeArray = 50, numeric.prettyPrint = function(t) {
    function n(s) {
      if (s === 0)
        return "0";
      if (isNaN(s))
        return "NaN";
      if (s < 0)
        return "-" + n(-s);
      if (isFinite(s)) {
        var e = Math.floor(Math.log(s) / Math.log(10)), c = s / Math.pow(10, e), f = c.toPrecision(numeric.precision);
        return parseFloat(f) === 10 && (e++, c = 1, f = c.toPrecision(numeric.precision)), parseFloat(f).toString() + "e" + e.toString();
      }
      return "Infinity";
    }
    var r = [];
    function i(s) {
      var e;
      if (typeof s > "u")
        return r.push(Array(numeric.precision + 8).join(" ")), !1;
      if (typeof s == "string")
        return r.push('"' + s + '"'), !1;
      if (typeof s == "boolean")
        return r.push(s.toString()), !1;
      if (typeof s == "number") {
        var c = n(s), f = s.toPrecision(numeric.precision), o = parseFloat(s.toString()).toString(), u = [c, f, o, parseFloat(f).toString(), parseFloat(o).toString()];
        for (e = 1; e < u.length; e++)
          u[e].length < c.length && (c = u[e]);
        return r.push(Array(numeric.precision + 8 - c.length).join(" ") + c), !1;
      }
      if (s === null)
        return r.push("null"), !1;
      if (typeof s == "function") {
        r.push(s.toString());
        var l = !1;
        for (e in s)
          s.hasOwnProperty(e) && (l ? r.push(`,
`) : r.push(`
{`), l = !0, r.push(e), r.push(`: 
`), i(s[e]));
        return l && r.push(`}
`), !0;
      }
      if (s instanceof Array) {
        if (s.length > numeric.largeArray)
          return r.push("...Large Array..."), !0;
        var l = !1;
        for (r.push("["), e = 0; e < s.length; e++)
          e > 0 && (r.push(","), l && r.push(`
 `)), l = i(s[e]);
        return r.push("]"), !0;
      }
      r.push("{");
      var l = !1;
      for (e in s)
        s.hasOwnProperty(e) && (l && r.push(`,
`), l = !0, r.push(e), r.push(`: 
`), i(s[e]));
      return r.push("}"), !0;
    }
    return i(t), r.join("");
  }, numeric.parseDate = function(t) {
    function n(r) {
      if (typeof r == "string")
        return Date.parse(r.replace(/-/g, "/"));
      if (!(r instanceof Array))
        throw new Error("parseDate: parameter must be arrays of strings");
      var i = [], s;
      for (s = 0; s < r.length; s++)
        i[s] = n(r[s]);
      return i;
    }
    return n(t);
  }, numeric.parseFloat = function(t) {
    function n(r) {
      if (typeof r == "string")
        return parseFloat(r);
      if (!(r instanceof Array))
        throw new Error("parseFloat: parameter must be arrays of strings");
      var i = [], s;
      for (s = 0; s < r.length; s++)
        i[s] = n(r[s]);
      return i;
    }
    return n(t);
  }, numeric.parseCSV = function(t) {
    var n = t.split(`
`), r, i, s = [], e = /(([^'",]*)|('[^']*')|("[^"]*")),/g, c = /^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/, f = function(y) {
      return y.substr(0, y.length - 1);
    }, o = 0;
    for (i = 0; i < n.length; i++) {
      var u = (n[i] + ",").match(e), l;
      if (u.length > 0) {
        for (s[o] = [], r = 0; r < u.length; r++)
          l = f(u[r]), c.test(l) ? s[o][r] = parseFloat(l) : s[o][r] = l;
        o++;
      }
    }
    return s;
  }, numeric.toCSV = function(t) {
    var n = numeric.dim(t), r, i, s, e, c;
    for (s = n[0], n[1], c = [], r = 0; r < s; r++) {
      for (e = [], i = 0; i < s; i++)
        e[i] = t[r][i].toString();
      c[r] = e.join(", ");
    }
    return c.join(`
`) + `
`;
  }, numeric.getURL = function(t) {
    var n = new XMLHttpRequest();
    return n.open("GET", t, !1), n.send(), n;
  }, numeric.imageURL = function(t) {
    function n(_) {
      var L = _.length, F, x, z, R, I, h, b, Z, G = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", J = "";
      for (F = 0; F < L; F += 3)
        x = _[F], z = _[F + 1], R = _[F + 2], I = x >> 2, h = ((x & 3) << 4) + (z >> 4), b = ((z & 15) << 2) + (R >> 6), Z = R & 63, F + 1 >= L ? b = Z = 64 : F + 2 >= L && (Z = 64), J += G.charAt(I) + G.charAt(h) + G.charAt(b) + G.charAt(Z);
      return J;
    }
    function r(_, L, F) {
      typeof L > "u" && (L = 0), typeof F > "u" && (F = _.length);
      var x = [
        0,
        1996959894,
        3993919788,
        2567524794,
        124634137,
        1886057615,
        3915621685,
        2657392035,
        249268274,
        2044508324,
        3772115230,
        2547177864,
        162941995,
        2125561021,
        3887607047,
        2428444049,
        498536548,
        1789927666,
        4089016648,
        2227061214,
        450548861,
        1843258603,
        4107580753,
        2211677639,
        325883990,
        1684777152,
        4251122042,
        2321926636,
        335633487,
        1661365465,
        4195302755,
        2366115317,
        997073096,
        1281953886,
        3579855332,
        2724688242,
        1006888145,
        1258607687,
        3524101629,
        2768942443,
        901097722,
        1119000684,
        3686517206,
        2898065728,
        853044451,
        1172266101,
        3705015759,
        2882616665,
        651767980,
        1373503546,
        3369554304,
        3218104598,
        565507253,
        1454621731,
        3485111705,
        3099436303,
        671266974,
        1594198024,
        3322730930,
        2970347812,
        795835527,
        1483230225,
        3244367275,
        3060149565,
        1994146192,
        31158534,
        2563907772,
        4023717930,
        1907459465,
        112637215,
        2680153253,
        3904427059,
        2013776290,
        251722036,
        2517215374,
        3775830040,
        2137656763,
        141376813,
        2439277719,
        3865271297,
        1802195444,
        476864866,
        2238001368,
        4066508878,
        1812370925,
        453092731,
        2181625025,
        4111451223,
        1706088902,
        314042704,
        2344532202,
        4240017532,
        1658658271,
        366619977,
        2362670323,
        4224994405,
        1303535960,
        984961486,
        2747007092,
        3569037538,
        1256170817,
        1037604311,
        2765210733,
        3554079995,
        1131014506,
        879679996,
        2909243462,
        3663771856,
        1141124467,
        855842277,
        2852801631,
        3708648649,
        1342533948,
        654459306,
        3188396048,
        3373015174,
        1466479909,
        544179635,
        3110523913,
        3462522015,
        1591671054,
        702138776,
        2966460450,
        3352799412,
        1504918807,
        783551873,
        3082640443,
        3233442989,
        3988292384,
        2596254646,
        62317068,
        1957810842,
        3939845945,
        2647816111,
        81470997,
        1943803523,
        3814918930,
        2489596804,
        225274430,
        2053790376,
        3826175755,
        2466906013,
        167816743,
        2097651377,
        4027552580,
        2265490386,
        503444072,
        1762050814,
        4150417245,
        2154129355,
        426522225,
        1852507879,
        4275313526,
        2312317920,
        282753626,
        1742555852,
        4189708143,
        2394877945,
        397917763,
        1622183637,
        3604390888,
        2714866558,
        953729732,
        1340076626,
        3518719985,
        2797360999,
        1068828381,
        1219638859,
        3624741850,
        2936675148,
        906185462,
        1090812512,
        3747672003,
        2825379669,
        829329135,
        1181335161,
        3412177804,
        3160834842,
        628085408,
        1382605366,
        3423369109,
        3138078467,
        570562233,
        1426400815,
        3317316542,
        2998733608,
        733239954,
        1555261956,
        3268935591,
        3050360625,
        752459403,
        1541320221,
        2607071920,
        3965973030,
        1969922972,
        40735498,
        2617837225,
        3943577151,
        1913087877,
        83908371,
        2512341634,
        3803740692,
        2075208622,
        213261112,
        2463272603,
        3855990285,
        2094854071,
        198958881,
        2262029012,
        4057260610,
        1759359992,
        534414190,
        2176718541,
        4139329115,
        1873836001,
        414664567,
        2282248934,
        4279200368,
        1711684554,
        285281116,
        2405801727,
        4167216745,
        1634467795,
        376229701,
        2685067896,
        3608007406,
        1308918612,
        956543938,
        2808555105,
        3495958263,
        1231636301,
        1047427035,
        2932959818,
        3654703836,
        1088359270,
        936918e3,
        2847714899,
        3736837829,
        1202900863,
        817233897,
        3183342108,
        3401237130,
        1404277552,
        615818150,
        3134207493,
        3453421203,
        1423857449,
        601450431,
        3009837614,
        3294710456,
        1567103746,
        711928724,
        3020668471,
        3272380065,
        1510334235,
        755167117
      ], z = -1, R = 0;
      _.length;
      var I;
      for (I = L; I < F; I++)
        R = (z ^ _[I]) & 255, z = z >>> 8 ^ x[R];
      return z ^ -1;
    }
    var i = t[0].length, s = t[0][0].length, e, c, f, o, u, l, y, v, m, p, D = [
      137,
      80,
      78,
      71,
      13,
      10,
      26,
      10,
      //  0: PNG signature
      0,
      0,
      0,
      13,
      //  8: IHDR Chunk length
      73,
      72,
      68,
      82,
      // 12: "IHDR" 
      s >> 24 & 255,
      s >> 16 & 255,
      s >> 8 & 255,
      s & 255,
      // 16: Width
      i >> 24 & 255,
      i >> 16 & 255,
      i >> 8 & 255,
      i & 255,
      // 20: Height
      8,
      // 24: bit depth
      2,
      // 25: RGB
      0,
      // 26: deflate
      0,
      // 27: no filter
      0,
      // 28: no interlace
      -1,
      -2,
      -3,
      -4,
      // 29: CRC
      -5,
      -6,
      -7,
      -8,
      // 33: IDAT Chunk length
      73,
      68,
      65,
      84,
      // 37: "IDAT"
      // RFC 1950 header starts here
      8,
      // 41: RFC1950 CMF
      29
      // 42: RFC1950 FLG
    ];
    for (p = r(D, 12, 29), D[29] = p >> 24 & 255, D[30] = p >> 16 & 255, D[31] = p >> 8 & 255, D[32] = p & 255, e = 1, c = 0, y = 0; y < i; y++) {
      for (y < i - 1 ? D.push(0) : D.push(1), u = 3 * s + 1 + (y === 0) & 255, l = 3 * s + 1 + (y === 0) >> 8 & 255, D.push(u), D.push(l), D.push(~u & 255), D.push(~l & 255), y === 0 && D.push(0), v = 0; v < s; v++)
        for (f = 0; f < 3; f++)
          u = t[f][y][v], u > 255 ? u = 255 : u < 0 ? u = 0 : u = Math.round(u), e = (e + u) % 65521, c = (c + e) % 65521, D.push(u);
      D.push(0);
    }
    return m = (c << 16) + e, D.push(m >> 24 & 255), D.push(m >> 16 & 255), D.push(m >> 8 & 255), D.push(m & 255), o = D.length - 41, D[33] = o >> 24 & 255, D[34] = o >> 16 & 255, D[35] = o >> 8 & 255, D[36] = o & 255, p = r(D, 37), D.push(p >> 24 & 255), D.push(p >> 16 & 255), D.push(p >> 8 & 255), D.push(p & 255), D.push(0), D.push(0), D.push(0), D.push(0), D.push(73), D.push(69), D.push(78), D.push(68), D.push(174), D.push(66), D.push(96), D.push(130), "data:image/png;base64," + n(D);
  }, numeric._dim = function(t) {
    for (var n = []; typeof t == "object"; )
      n.push(t.length), t = t[0];
    return n;
  }, numeric.dim = function(t) {
    var n, r;
    return typeof t == "object" ? (n = t[0], typeof n == "object" ? (r = n[0], typeof r == "object" ? numeric._dim(t) : [t.length, n.length]) : [t.length]) : [];
  }, numeric.mapreduce = function(t, n) {
    return Function(
      "x",
      "accum",
      "_s",
      "_k",
      'if(typeof accum === "undefined") accum = ' + n + `;
if(typeof x === "number") { var xi = x; ` + t + `; return accum; }
if(typeof _s === "undefined") _s = numeric.dim(x);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i,xi;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) {
        accum = arguments.callee(x[i],accum,_s,_k+1);
    }    return accum;
}
for(i=_n-1;i>=1;i-=2) { 
    xi = x[i];
    ` + t + `;
    xi = x[i-1];
    ` + t + `;
}
if(i === 0) {
    xi = x[i];
    ` + t + `
}
return accum;`
    );
  }, numeric.mapreduce2 = function(t, n) {
    return Function(
      "x",
      `var n = x.length;
var i,xi;
` + n + `;
for(i=n-1;i!==-1;--i) { 
    xi = x[i];
    ` + t + `;
}
return accum;`
    );
  }, numeric.same = function S(t, n) {
    var r, i;
    if (!(t instanceof Array) || !(n instanceof Array) || (i = t.length, i !== n.length))
      return !1;
    for (r = 0; r < i; r++)
      if (t[r] !== n[r])
        if (typeof t[r] == "object") {
          if (!S(t[r], n[r])) return !1;
        } else
          return !1;
    return !0;
  }, numeric.rep = function(t, n, r) {
    typeof r > "u" && (r = 0);
    var i = t[r], s = Array(i), e;
    if (r === t.length - 1) {
      for (e = i - 2; e >= 0; e -= 2)
        s[e + 1] = n, s[e] = n;
      return e === -1 && (s[0] = n), s;
    }
    for (e = i - 1; e >= 0; e--)
      s[e] = numeric.rep(t, n, r + 1);
    return s;
  }, numeric.dotMMsmall = function(t, n) {
    var r, i, s, e, c, f, o, u, l, y, v;
    for (e = t.length, c = n.length, f = n[0].length, o = Array(e), r = e - 1; r >= 0; r--) {
      for (u = Array(f), l = t[r], s = f - 1; s >= 0; s--) {
        for (y = l[c - 1] * n[c - 1][s], i = c - 2; i >= 1; i -= 2)
          v = i - 1, y += l[i] * n[i][s] + l[v] * n[v][s];
        i === 0 && (y += l[0] * n[0][s]), u[s] = y;
      }
      o[r] = u;
    }
    return o;
  }, numeric._getCol = function(t, n, r) {
    var i = t.length, s;
    for (s = i - 1; s > 0; --s)
      r[s] = t[s][n], --s, r[s] = t[s][n];
    s === 0 && (r[0] = t[0][n]);
  }, numeric.dotMMbig = function(t, n) {
    var r = numeric._getCol, i = n.length, s = Array(i), e = t.length, c = n[0].length, f = new Array(e), o, u = numeric.dotVV, l, y;
    for (--i, --e, l = e; l !== -1; --l) f[l] = Array(c);
    for (--c, l = c; l !== -1; --l)
      for (r(n, l, s), y = e; y !== -1; --y)
        o = t[y], f[y][l] = u(o, s);
    return f;
  }, numeric.dotMV = function(t, n) {
    var r = t.length;
    n.length;
    var i, s = Array(r), e = numeric.dotVV;
    for (i = r - 1; i >= 0; i--)
      s[i] = e(t[i], n);
    return s;
  }, numeric.dotVM = function(t, n) {
    var r, i, s, e, c, f, o;
    for (s = t.length, e = n[0].length, c = Array(e), i = e - 1; i >= 0; i--) {
      for (f = t[s - 1] * n[s - 1][i], r = s - 2; r >= 1; r -= 2)
        o = r - 1, f += t[r] * n[r][i] + t[o] * n[o][i];
      r === 0 && (f += t[0] * n[0][i]), c[i] = f;
    }
    return c;
  }, numeric.dotVV = function(t, n) {
    var r, i = t.length, s, e = t[i - 1] * n[i - 1];
    for (r = i - 2; r >= 1; r -= 2)
      s = r - 1, e += t[r] * n[r] + t[s] * n[s];
    return r === 0 && (e += t[0] * n[0]), e;
  }, numeric.dot = function(t, n) {
    var r = numeric.dim;
    switch (r(t).length * 1e3 + r(n).length) {
      case 2002:
        return n.length < 10 ? numeric.dotMMsmall(t, n) : numeric.dotMMbig(t, n);
      case 2001:
        return numeric.dotMV(t, n);
      case 1002:
        return numeric.dotVM(t, n);
      case 1001:
        return numeric.dotVV(t, n);
      case 1e3:
        return numeric.mulVS(t, n);
      case 1:
        return numeric.mulSV(t, n);
      case 0:
        return t * n;
      default:
        throw new Error("numeric.dot only works on vectors and matrices");
    }
  }, numeric.diag = function(t) {
    var n, r, i, s = t.length, e = Array(s), c;
    for (n = s - 1; n >= 0; n--) {
      for (c = Array(s), r = n + 2, i = s - 1; i >= r; i -= 2)
        c[i] = 0, c[i - 1] = 0;
      for (i > n && (c[i] = 0), c[n] = t[n], i = n - 1; i >= 1; i -= 2)
        c[i] = 0, c[i - 1] = 0;
      i === 0 && (c[0] = 0), e[n] = c;
    }
    return e;
  }, numeric.getDiag = function(S) {
    var t = Math.min(S.length, S[0].length), n, r = Array(t);
    for (n = t - 1; n >= 1; --n)
      r[n] = S[n][n], --n, r[n] = S[n][n];
    return n === 0 && (r[0] = S[0][0]), r;
  }, numeric.identity = function(t) {
    return numeric.diag(numeric.rep([t], 1));
  }, numeric.pointwise = function(t, n, r) {
    typeof r > "u" && (r = "");
    var i = [], s, e = /\[i\]$/, c, f = "", o = !1;
    for (s = 0; s < t.length; s++)
      e.test(t[s]) ? (c = t[s].substring(0, t[s].length - 3), f = c) : c = t[s], c === "ret" && (o = !0), i.push(c);
    return i[t.length] = "_s", i[t.length + 1] = "_k", i[t.length + 2] = 'if(typeof _s === "undefined") _s = numeric.dim(' + f + `);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i` + (o ? "" : ", ret = Array(_n)") + `;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(` + t.join(",") + `,_s,_k+1);
    return ret;
}
` + r + `
for(i=_n-1;i!==-1;--i) {
    ` + n + `
}
return ret;`, Function.apply(null, i);
  }, numeric.pointwise2 = function(t, n, r) {
    typeof r > "u" && (r = "");
    var i = [], s, e = /\[i\]$/, c, f = "", o = !1;
    for (s = 0; s < t.length; s++)
      e.test(t[s]) ? (c = t[s].substring(0, t[s].length - 3), f = c) : c = t[s], c === "ret" && (o = !0), i.push(c);
    return i[t.length] = "var _n = " + f + `.length;
var i` + (o ? "" : ", ret = Array(_n)") + `;
` + r + `
for(i=_n-1;i!==-1;--i) {
` + n + `
}
return ret;`, Function.apply(null, i);
  }, numeric._biforeach = function S(t, n, r, i, s) {
    if (i === r.length - 1) {
      s(t, n);
      return;
    }
    var e, c = r[i];
    for (e = c - 1; e >= 0; e--)
      S(typeof t == "object" ? t[e] : t, typeof n == "object" ? n[e] : n, r, i + 1, s);
  }, numeric._biforeach2 = function S(t, n, r, i, s) {
    if (i === r.length - 1)
      return s(t, n);
    var e, c = r[i], f = Array(c);
    for (e = c - 1; e >= 0; --e)
      f[e] = S(typeof t == "object" ? t[e] : t, typeof n == "object" ? n[e] : n, r, i + 1, s);
    return f;
  }, numeric._foreach = function S(t, n, r, i) {
    if (r === n.length - 1) {
      i(t);
      return;
    }
    var s, e = n[r];
    for (s = e - 1; s >= 0; s--)
      S(t[s], n, r + 1, i);
  }, numeric._foreach2 = function S(t, n, r, i) {
    if (r === n.length - 1)
      return i(t);
    var s, e = n[r], c = Array(e);
    for (s = e - 1; s >= 0; s--)
      c[s] = S(t[s], n, r + 1, i);
    return c;
  }, numeric.ops2 = {
    add: "+",
    sub: "-",
    mul: "*",
    div: "/",
    mod: "%",
    and: "&&",
    or: "||",
    eq: "===",
    neq: "!==",
    lt: "<",
    gt: ">",
    leq: "<=",
    geq: ">=",
    band: "&",
    bor: "|",
    bxor: "^",
    lshift: "<<",
    rshift: ">>",
    rrshift: ">>>"
  }, numeric.opseq = {
    addeq: "+=",
    subeq: "-=",
    muleq: "*=",
    diveq: "/=",
    modeq: "%=",
    lshifteq: "<<=",
    rshifteq: ">>=",
    rrshifteq: ">>>=",
    bandeq: "&=",
    boreq: "|=",
    bxoreq: "^="
  }, numeric.mathfuns = [
    "abs",
    "acos",
    "asin",
    "atan",
    "ceil",
    "cos",
    "exp",
    "floor",
    "log",
    "round",
    "sin",
    "sqrt",
    "tan",
    "isNaN",
    "isFinite"
  ], numeric.mathfuns2 = ["atan2", "pow", "max", "min"], numeric.ops1 = {
    neg: "-",
    not: "!",
    bnot: "~",
    clone: ""
  }, numeric.mapreducers = {
    any: ["if(xi) return true;", "var accum = false;"],
    all: ["if(!xi) return false;", "var accum = true;"],
    sum: ["accum += xi;", "var accum = 0;"],
    prod: ["accum *= xi;", "var accum = 1;"],
    norm2Squared: ["accum += xi*xi;", "var accum = 0;"],
    norminf: ["accum = max(accum,abs(xi));", "var accum = 0, max = Math.max, abs = Math.abs;"],
    norm1: ["accum += abs(xi)", "var accum = 0, abs = Math.abs;"],
    sup: ["accum = max(accum,xi);", "var accum = -Infinity, max = Math.max;"],
    inf: ["accum = min(accum,xi);", "var accum = Infinity, min = Math.min;"]
  }, function() {
    var S, t;
    for (S = 0; S < numeric.mathfuns2.length; ++S)
      t = numeric.mathfuns2[S], numeric.ops2[t] = t;
    for (S in numeric.ops2)
      if (numeric.ops2.hasOwnProperty(S)) {
        t = numeric.ops2[S];
        var n, r, i = "";
        numeric.myIndexOf.call(numeric.mathfuns2, S) !== -1 ? (i = "var " + t + " = Math." + t + `;
`, n = function(s, e, c) {
          return s + " = " + t + "(" + e + "," + c + ")";
        }, r = function(s, e) {
          return s + " = " + t + "(" + s + "," + e + ")";
        }) : (n = function(s, e, c) {
          return s + " = " + e + " " + t + " " + c;
        }, numeric.opseq.hasOwnProperty(S + "eq") ? r = function(s, e) {
          return s + " " + t + "= " + e;
        } : r = function(s, e) {
          return s + " = " + s + " " + t + " " + e;
        }), numeric[S + "VV"] = numeric.pointwise2(["x[i]", "y[i]"], n("ret[i]", "x[i]", "y[i]"), i), numeric[S + "SV"] = numeric.pointwise2(["x", "y[i]"], n("ret[i]", "x", "y[i]"), i), numeric[S + "VS"] = numeric.pointwise2(["x[i]", "y"], n("ret[i]", "x[i]", "y"), i), numeric[S] = Function(
          `var n = arguments.length, i, x = arguments[0], y;
var VV = numeric.` + S + "VV, VS = numeric." + S + "VS, SV = numeric." + S + `SV;
var dim = numeric.dim;
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof x === "object") {
      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);
      else x = numeric._biforeach2(x,y,dim(x),0,VS);
  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);
  else ` + r("x", "y") + `
}
return x;
`
        ), numeric[t] = numeric[S], numeric[S + "eqV"] = numeric.pointwise2(["ret[i]", "x[i]"], r("ret[i]", "x[i]"), i), numeric[S + "eqS"] = numeric.pointwise2(["ret[i]", "x"], r("ret[i]", "x"), i), numeric[S + "eq"] = Function(
          `var n = arguments.length, i, x = arguments[0], y;
var V = numeric.` + S + "eqV, S = numeric." + S + `eqS
var s = numeric.dim(x);
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);
  else numeric._biforeach(x,y,s,0,S);
}
return x;
`
        );
      }
    for (S = 0; S < numeric.mathfuns2.length; ++S)
      t = numeric.mathfuns2[S], delete numeric.ops2[t];
    for (S = 0; S < numeric.mathfuns.length; ++S)
      t = numeric.mathfuns[S], numeric.ops1[t] = t;
    for (S in numeric.ops1)
      numeric.ops1.hasOwnProperty(S) && (i = "", t = numeric.ops1[S], numeric.myIndexOf.call(numeric.mathfuns, S) !== -1 && Math.hasOwnProperty(t) && (i = "var " + t + " = Math." + t + `;
`), numeric[S + "eqV"] = numeric.pointwise2(["ret[i]"], "ret[i] = " + t + "(ret[i]);", i), numeric[S + "eq"] = Function(
        "x",
        'if(typeof x !== "object") return ' + t + `x
var i;
var V = numeric.` + S + `eqV;
var s = numeric.dim(x);
numeric._foreach(x,s,0,V);
return x;
`
      ), numeric[S + "V"] = numeric.pointwise2(["x[i]"], "ret[i] = " + t + "(x[i]);", i), numeric[S] = Function(
        "x",
        'if(typeof x !== "object") return ' + t + `(x)
var i;
var V = numeric.` + S + `V;
var s = numeric.dim(x);
return numeric._foreach2(x,s,0,V);
`
      ));
    for (S = 0; S < numeric.mathfuns.length; ++S)
      t = numeric.mathfuns[S], delete numeric.ops1[t];
    for (S in numeric.mapreducers)
      numeric.mapreducers.hasOwnProperty(S) && (t = numeric.mapreducers[S], numeric[S + "V"] = numeric.mapreduce2(t[0], t[1]), numeric[S] = Function(
        "x",
        "s",
        "k",
        t[1] + `if(typeof x !== "object") {    xi = x;
` + t[0] + `;
    return accum;
}if(typeof s === "undefined") s = numeric.dim(x);
if(typeof k === "undefined") k = 0;
if(k === s.length-1) return numeric.` + S + `V(x);
var xi;
var n = x.length, i;
for(i=n-1;i!==-1;--i) {
   xi = arguments.callee(x[i]);
` + t[0] + `;
}
return accum;
`
      ));
  }(), numeric.truncVV = numeric.pointwise(["x[i]", "y[i]"], "ret[i] = round(x[i]/y[i])*y[i];", "var round = Math.round;"), numeric.truncVS = numeric.pointwise(["x[i]", "y"], "ret[i] = round(x[i]/y)*y;", "var round = Math.round;"), numeric.truncSV = numeric.pointwise(["x", "y[i]"], "ret[i] = round(x/y[i])*y[i];", "var round = Math.round;"), numeric.trunc = function(t, n) {
    return typeof t == "object" ? typeof n == "object" ? numeric.truncVV(t, n) : numeric.truncVS(t, n) : typeof n == "object" ? numeric.truncSV(t, n) : Math.round(t / n) * n;
  }, numeric.inv = function(p) {
    var n = numeric.dim(p), r = Math.abs, i = n[0], s = n[1], e = numeric.clone(p), c, f, o = numeric.identity(i), u, l, y, v, m, p;
    for (v = 0; v < s; ++v) {
      var D = -1, _ = -1;
      for (y = v; y !== i; ++y)
        m = r(e[y][v]), m > _ && (D = y, _ = m);
      for (f = e[D], e[D] = e[v], e[v] = f, l = o[D], o[D] = o[v], o[v] = l, p = f[v], m = v; m !== s; ++m) f[m] /= p;
      for (m = s - 1; m !== -1; --m) l[m] /= p;
      for (y = i - 1; y !== -1; --y)
        if (y !== v) {
          for (c = e[y], u = o[y], p = c[v], m = v + 1; m !== s; ++m) c[m] -= f[m] * p;
          for (m = s - 1; m > 0; --m)
            u[m] -= l[m] * p, --m, u[m] -= l[m] * p;
          m === 0 && (u[0] -= l[0] * p);
        }
    }
    return o;
  }, numeric.det = function(t) {
    var n = numeric.dim(t);
    if (n.length !== 2 || n[0] !== n[1])
      throw new Error("numeric: det() only works on square matrices");
    var r = n[0], i = 1, s, e, c, f = numeric.clone(t), o, u, l, y, v;
    for (e = 0; e < r - 1; e++) {
      for (c = e, s = e + 1; s < r; s++)
        Math.abs(f[s][e]) > Math.abs(f[c][e]) && (c = s);
      for (c !== e && (y = f[c], f[c] = f[e], f[e] = y, i *= -1), o = f[e], s = e + 1; s < r; s++) {
        for (u = f[s], l = u[e] / o[e], c = e + 1; c < r - 1; c += 2)
          v = c + 1, u[c] -= o[c] * l, u[v] -= o[v] * l;
        c !== r && (u[c] -= o[c] * l);
      }
      if (o[e] === 0)
        return 0;
      i *= o[e];
    }
    return i * f[e][e];
  }, numeric.transpose = function(t) {
    var n, r, i = t.length, s = t[0].length, e = Array(s), c, f, o;
    for (r = 0; r < s; r++) e[r] = Array(i);
    for (n = i - 1; n >= 1; n -= 2) {
      for (f = t[n], c = t[n - 1], r = s - 1; r >= 1; --r)
        o = e[r], o[n] = f[r], o[n - 1] = c[r], --r, o = e[r], o[n] = f[r], o[n - 1] = c[r];
      r === 0 && (o = e[0], o[n] = f[0], o[n - 1] = c[0]);
    }
    if (n === 0) {
      for (c = t[0], r = s - 1; r >= 1; --r)
        e[r][0] = c[r], --r, e[r][0] = c[r];
      r === 0 && (e[0][0] = c[0]);
    }
    return e;
  }, numeric.negtranspose = function(t) {
    var n, r, i = t.length, s = t[0].length, e = Array(s), c, f, o;
    for (r = 0; r < s; r++) e[r] = Array(i);
    for (n = i - 1; n >= 1; n -= 2) {
      for (f = t[n], c = t[n - 1], r = s - 1; r >= 1; --r)
        o = e[r], o[n] = -f[r], o[n - 1] = -c[r], --r, o = e[r], o[n] = -f[r], o[n - 1] = -c[r];
      r === 0 && (o = e[0], o[n] = -f[0], o[n - 1] = -c[0]);
    }
    if (n === 0) {
      for (c = t[0], r = s - 1; r >= 1; --r)
        e[r][0] = -c[r], --r, e[r][0] = -c[r];
      r === 0 && (e[0][0] = -c[0]);
    }
    return e;
  }, numeric._random = function S(t, n) {
    var r, i = t[n], s = Array(i), e;
    if (n === t.length - 1) {
      for (e = Math.random, r = i - 1; r >= 1; r -= 2)
        s[r] = e(), s[r - 1] = e();
      return r === 0 && (s[0] = e()), s;
    }
    for (r = i - 1; r >= 0; r--) s[r] = S(t, n + 1);
    return s;
  }, numeric.random = function(t) {
    return numeric._random(t, 0);
  }, numeric.norm2 = function(t) {
    return Math.sqrt(numeric.norm2Squared(t));
  }, numeric.linspace = function(t, n, r) {
    if (typeof r > "u" && (r = Math.max(Math.round(n - t) + 1, 1)), r < 2)
      return r === 1 ? [t] : [];
    var i, s = Array(r);
    for (r--, i = r; i >= 0; i--)
      s[i] = (i * n + (r - i) * t) / r;
    return s;
  }, numeric.getBlock = function(t, n, r) {
    var i = numeric.dim(t);
    function s(e, c) {
      var f, o = n[c], u = r[c] - o, l = Array(u);
      if (c === i.length - 1) {
        for (f = u; f >= 0; f--)
          l[f] = e[f + o];
        return l;
      }
      for (f = u; f >= 0; f--)
        l[f] = s(e[f + o], c + 1);
      return l;
    }
    return s(t, 0);
  }, numeric.setBlock = function(t, n, r, i) {
    var s = numeric.dim(t);
    function e(c, f, o) {
      var u, l = n[o], y = r[o] - l;
      if (o === s.length - 1)
        for (u = y; u >= 0; u--)
          c[u + l] = f[u];
      for (u = y; u >= 0; u--)
        e(c[u + l], f[u], o + 1);
    }
    return e(t, i, 0), t;
  }, numeric.getRange = function(t, n, r) {
    var i = n.length, s = r.length, e, c, f = Array(i), o, u;
    for (e = i - 1; e !== -1; --e)
      for (f[e] = Array(s), o = f[e], u = t[n[e]], c = s - 1; c !== -1; --c) o[c] = u[r[c]];
    return f;
  }, numeric.blockMatrix = function(t) {
    var n = numeric.dim(t);
    if (n.length < 4) return numeric.blockMatrix([t]);
    var r = n[0], i = n[1], s, e, c, f, o;
    for (s = 0, e = 0, c = 0; c < r; ++c) s += t[c][0].length;
    for (f = 0; f < i; ++f) e += t[0][f][0].length;
    var u = Array(s);
    for (c = 0; c < s; ++c) u[c] = Array(e);
    var l = 0, y, v, m, p, D;
    for (c = 0; c < r; ++c) {
      for (y = e, f = i - 1; f !== -1; --f)
        for (o = t[c][f], y -= o[0].length, m = o.length - 1; m !== -1; --m)
          for (D = o[m], v = u[l + m], p = D.length - 1; p !== -1; --p) v[y + p] = D[p];
      l += t[c][0].length;
    }
    return u;
  }, numeric.tensor = function(t, n) {
    if (typeof t == "number" || typeof n == "number") return numeric.mul(t, n);
    var r = numeric.dim(t), i = numeric.dim(n);
    if (r.length !== 1 || i.length !== 1)
      throw new Error("numeric: tensor product is only defined for vectors");
    var s = r[0], e = i[0], c = Array(s), f, o, u, l;
    for (o = s - 1; o >= 0; o--) {
      for (f = Array(e), l = t[o], u = e - 1; u >= 3; --u)
        f[u] = l * n[u], --u, f[u] = l * n[u], --u, f[u] = l * n[u], --u, f[u] = l * n[u];
      for (; u >= 0; )
        f[u] = l * n[u], --u;
      c[o] = f;
    }
    return c;
  }, numeric.T = function(t, n) {
    this.x = t, this.y = n;
  }, numeric.t = function(t, n) {
    return new numeric.T(t, n);
  }, numeric.Tbinop = function(t, n, r, i, s) {
    if (numeric.indexOf, typeof s != "string") {
      var e;
      s = "";
      for (e in numeric)
        numeric.hasOwnProperty(e) && (t.indexOf(e) >= 0 || n.indexOf(e) >= 0 || r.indexOf(e) >= 0 || i.indexOf(e) >= 0) && e.length > 1 && (s += "var " + e + " = numeric." + e + `;
`);
    }
    return Function(
      ["y"],
      `var x = this;
if(!(y instanceof numeric.T)) { y = new numeric.T(y); }
` + s + `
if(x.y) {  if(y.y) {    return new numeric.T(` + i + `);
  }
  return new numeric.T(` + r + `);
}
if(y.y) {
  return new numeric.T(` + n + `);
}
return new numeric.T(` + t + `);
`
    );
  }, numeric.T.prototype.add = numeric.Tbinop(
    "add(x.x,y.x)",
    "add(x.x,y.x),y.y",
    "add(x.x,y.x),x.y",
    "add(x.x,y.x),add(x.y,y.y)"
  ), numeric.T.prototype.sub = numeric.Tbinop(
    "sub(x.x,y.x)",
    "sub(x.x,y.x),neg(y.y)",
    "sub(x.x,y.x),x.y",
    "sub(x.x,y.x),sub(x.y,y.y)"
  ), numeric.T.prototype.mul = numeric.Tbinop(
    "mul(x.x,y.x)",
    "mul(x.x,y.x),mul(x.x,y.y)",
    "mul(x.x,y.x),mul(x.y,y.x)",
    "sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"
  ), numeric.T.prototype.reciprocal = function() {
    var t = numeric.mul, n = numeric.div;
    if (this.y) {
      var r = numeric.add(t(this.x, this.x), t(this.y, this.y));
      return new numeric.T(n(this.x, r), n(numeric.neg(this.y), r));
    }
    return new T(n(1, this.x));
  }, numeric.T.prototype.div = function(t) {
    if (t instanceof numeric.T || (t = new numeric.T(t)), t.y)
      return this.mul(t.reciprocal());
    var n = numeric.div;
    return this.y ? new numeric.T(n(this.x, t.x), n(this.y, t.x)) : new numeric.T(n(this.x, t.x));
  }, numeric.T.prototype.dot = numeric.Tbinop(
    "dot(x.x,y.x)",
    "dot(x.x,y.x),dot(x.x,y.y)",
    "dot(x.x,y.x),dot(x.y,y.x)",
    "sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"
  ), numeric.T.prototype.transpose = function() {
    var t = numeric.transpose, n = this.x, r = this.y;
    return r ? new numeric.T(t(n), t(r)) : new numeric.T(t(n));
  }, numeric.T.prototype.transjugate = function() {
    var t = numeric.transpose, n = this.x, r = this.y;
    return r ? new numeric.T(t(n), numeric.negtranspose(r)) : new numeric.T(t(n));
  }, numeric.Tunop = function(t, n, r) {
    return typeof r != "string" && (r = ""), Function(
      `var x = this;
` + r + `
if(x.y) {  ` + n + `;
}
` + t + `;
`
    );
  }, numeric.T.prototype.exp = numeric.Tunop(
    "return new numeric.T(ex)",
    "return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))",
    "var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"
  ), numeric.T.prototype.conj = numeric.Tunop(
    "return new numeric.T(x.x);",
    "return new numeric.T(x.x,numeric.neg(x.y));"
  ), numeric.T.prototype.neg = numeric.Tunop(
    "return new numeric.T(neg(x.x));",
    "return new numeric.T(neg(x.x),neg(x.y));",
    "var neg = numeric.neg;"
  ), numeric.T.prototype.sin = numeric.Tunop(
    "return new numeric.T(numeric.sin(x.x))",
    "return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"
  ), numeric.T.prototype.cos = numeric.Tunop(
    "return new numeric.T(numeric.cos(x.x))",
    "return x.exp().add(x.neg().exp()).div(2);"
  ), numeric.T.prototype.abs = numeric.Tunop(
    "return new numeric.T(numeric.abs(x.x));",
    "return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));",
    "var mul = numeric.mul;"
  ), numeric.T.prototype.log = numeric.Tunop(
    "return new numeric.T(numeric.log(x.x));",
    `var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();
return new numeric.T(numeric.log(r.x),theta.x);`
  ), numeric.T.prototype.norm2 = numeric.Tunop(
    "return numeric.norm2(x.x);",
    `var f = numeric.norm2Squared;
return Math.sqrt(f(x.x)+f(x.y));`
  ), numeric.T.prototype.inv = function() {
    var t = this;
    if (typeof t.y > "u")
      return new numeric.T(numeric.inv(t.x));
    var n = t.x.length, p, D, _, r = numeric.identity(n), i = numeric.rep([n, n], 0), s = numeric.clone(t.x), e = numeric.clone(t.y), c, f, o, u, l, y, v, m, p, D, _, L, F, x, z, R, I, h;
    for (p = 0; p < n; p++) {
      for (x = s[p][p], z = e[p][p], L = x * x + z * z, _ = p, D = p + 1; D < n; D++)
        x = s[D][p], z = e[D][p], F = x * x + z * z, F > L && (_ = D, L = F);
      for (_ !== p && (h = s[p], s[p] = s[_], s[_] = h, h = e[p], e[p] = e[_], e[_] = h, h = r[p], r[p] = r[_], r[_] = h, h = i[p], i[p] = i[_], i[_] = h), c = s[p], f = e[p], l = r[p], y = i[p], x = c[p], z = f[p], D = p + 1; D < n; D++)
        R = c[D], I = f[D], c[D] = (R * x + I * z) / L, f[D] = (I * x - R * z) / L;
      for (D = 0; D < n; D++)
        R = l[D], I = y[D], l[D] = (R * x + I * z) / L, y[D] = (I * x - R * z) / L;
      for (D = p + 1; D < n; D++) {
        for (o = s[D], u = e[D], v = r[D], m = i[D], x = o[p], z = u[p], _ = p + 1; _ < n; _++)
          R = c[_], I = f[_], o[_] -= R * x - I * z, u[_] -= I * x + R * z;
        for (_ = 0; _ < n; _++)
          R = l[_], I = y[_], v[_] -= R * x - I * z, m[_] -= I * x + R * z;
      }
    }
    for (p = n - 1; p > 0; p--)
      for (l = r[p], y = i[p], D = p - 1; D >= 0; D--)
        for (v = r[D], m = i[D], x = s[D][p], z = e[D][p], _ = n - 1; _ >= 0; _--)
          R = l[_], I = y[_], v[_] -= x * R - z * I, m[_] -= x * I + z * R;
    return new numeric.T(r, i);
  }, numeric.T.prototype.get = function(t) {
    var n = this.x, r = this.y, i = 0, s, e = t.length;
    if (r) {
      for (; i < e; )
        s = t[i], n = n[s], r = r[s], i++;
      return new numeric.T(n, r);
    }
    for (; i < e; )
      s = t[i], n = n[s], i++;
    return new numeric.T(n);
  }, numeric.T.prototype.set = function(t, n) {
    var r = this.x, i = this.y, s = 0, e, c = t.length, f = n.x, o = n.y;
    if (c === 0)
      return o ? this.y = o : i && (this.y = void 0), this.x = r, this;
    if (o) {
      for (i || (i = numeric.rep(numeric.dim(r), 0), this.y = i); s < c - 1; )
        e = t[s], r = r[e], i = i[e], s++;
      return e = t[s], r[e] = f, i[e] = o, this;
    }
    if (i) {
      for (; s < c - 1; )
        e = t[s], r = r[e], i = i[e], s++;
      return e = t[s], r[e] = f, f instanceof Array ? i[e] = numeric.rep(numeric.dim(f), 0) : i[e] = 0, this;
    }
    for (; s < c - 1; )
      e = t[s], r = r[e], s++;
    return e = t[s], r[e] = f, this;
  }, numeric.T.prototype.getRows = function(t, n) {
    var r = n - t + 1, i, s = Array(r), e, c = this.x, f = this.y;
    for (i = t; i <= n; i++)
      s[i - t] = c[i];
    if (f) {
      for (e = Array(r), i = t; i <= n; i++)
        e[i - t] = f[i];
      return new numeric.T(s, e);
    }
    return new numeric.T(s);
  }, numeric.T.prototype.setRows = function(t, n, r) {
    var i, s = this.x, e = this.y, c = r.x, f = r.y;
    for (i = t; i <= n; i++)
      s[i] = c[i - t];
    if (f)
      for (e || (e = numeric.rep(numeric.dim(s), 0), this.y = e), i = t; i <= n; i++)
        e[i] = f[i - t];
    else if (e)
      for (i = t; i <= n; i++)
        e[i] = numeric.rep([c[i - t].length], 0);
    return this;
  }, numeric.T.prototype.getRow = function(t) {
    var n = this.x, r = this.y;
    return r ? new numeric.T(n[t], r[t]) : new numeric.T(n[t]);
  }, numeric.T.prototype.setRow = function(t, n) {
    var r = this.x, i = this.y, s = n.x, e = n.y;
    return r[t] = s, e ? (i || (i = numeric.rep(numeric.dim(r), 0), this.y = i), i[t] = e) : i && (i = numeric.rep([s.length], 0)), this;
  }, numeric.T.prototype.getBlock = function(t, n) {
    var r = this.x, i = this.y, s = numeric.getBlock;
    return i ? new numeric.T(s(r, t, n), s(i, t, n)) : new numeric.T(s(r, t, n));
  }, numeric.T.prototype.setBlock = function(t, n, r) {
    r instanceof numeric.T || (r = new numeric.T(r));
    var i = this.x, s = this.y, e = numeric.setBlock, c = r.x, f = r.y;
    if (f)
      return s || (this.y = numeric.rep(numeric.dim(this), 0), s = this.y), e(i, t, n, c), e(s, t, n, f), this;
    e(i, t, n, c), s && e(s, t, n, numeric.rep(numeric.dim(c), 0));
  }, numeric.T.rep = function(t, n) {
    var r = numeric.T;
    n instanceof r || (n = new r(n));
    var i = n.x, s = n.y, e = numeric.rep;
    return s ? new r(e(t, i), e(t, s)) : new r(e(t, i));
  }, numeric.T.diag = function(t) {
    t instanceof numeric.T || (t = new numeric.T(t));
    var n = t.x, r = t.y, i = numeric.diag;
    return r ? new numeric.T(i(n), i(r)) : new numeric.T(i(n));
  }, numeric.T.eig = function() {
    if (this.y)
      throw new Error("eig: not implemented for complex matrices.");
    return numeric.eig(this.x);
  }, numeric.T.identity = function(t) {
    return new numeric.T(numeric.identity(t));
  }, numeric.T.prototype.getDiag = function() {
    var t = numeric, n = this.x, r = this.y;
    return r ? new t.T(t.getDiag(n), t.getDiag(r)) : new t.T(t.getDiag(n));
  }, numeric.house = function(t) {
    var n = numeric.clone(t), r = t[0] >= 0 ? 1 : -1, i = r * numeric.norm2(t);
    n[0] += i;
    var s = numeric.norm2(n);
    if (s === 0)
      throw new Error("eig: internal error");
    return numeric.div(n, s);
  }, numeric.toUpperHessenberg = function(t) {
    var n = numeric.dim(t);
    if (n.length !== 2 || n[0] !== n[1])
      throw new Error("numeric: toUpperHessenberg() only works on square matrices");
    var r = n[0], i, s, e, c, f, o = numeric.clone(t), u, l, y, v, m = numeric.identity(r), p;
    for (s = 0; s < r - 2; s++) {
      for (c = Array(r - s - 1), i = s + 1; i < r; i++)
        c[i - s - 1] = o[i][s];
      if (numeric.norm2(c) > 0) {
        for (f = numeric.house(c), u = numeric.getBlock(o, [s + 1, s], [r - 1, r - 1]), l = numeric.tensor(f, numeric.dot(f, u)), i = s + 1; i < r; i++)
          for (y = o[i], v = l[i - s - 1], e = s; e < r; e++) y[e] -= 2 * v[e - s];
        for (u = numeric.getBlock(o, [0, s + 1], [r - 1, r - 1]), l = numeric.tensor(numeric.dot(u, f), f), i = 0; i < r; i++)
          for (y = o[i], v = l[i], e = s + 1; e < r; e++) y[e] -= 2 * v[e - s - 1];
        for (u = Array(r - s - 1), i = s + 1; i < r; i++) u[i - s - 1] = m[i];
        for (l = numeric.tensor(f, numeric.dot(f, u)), i = s + 1; i < r; i++)
          for (p = m[i], v = l[i - s - 1], e = 0; e < r; e++) p[e] -= 2 * v[e];
      }
    }
    return { H: o, Q: m };
  }, numeric.epsilon = 2220446049250313e-31, numeric.QRFrancis = function(S, t) {
    typeof t > "u" && (t = 1e4), S = numeric.clone(S), numeric.clone(S);
    var n = numeric.dim(S), r = n[0], i, s, e, c, f, o, u, l, y, v = numeric.identity(r), m, p, D, _, L, F, x, z, R;
    if (r < 3)
      return { Q: v, B: [[0, r - 1]] };
    var I = numeric.epsilon;
    for (R = 0; R < t; R++) {
      for (x = 0; x < r - 1; x++)
        if (Math.abs(S[x + 1][x]) < I * (Math.abs(S[x][x]) + Math.abs(S[x + 1][x + 1]))) {
          var h = numeric.QRFrancis(numeric.getBlock(S, [0, 0], [x, x]), t), b = numeric.QRFrancis(numeric.getBlock(S, [x + 1, x + 1], [r - 1, r - 1]), t);
          for (D = Array(x + 1), F = 0; F <= x; F++)
            D[F] = v[F];
          for (_ = numeric.dot(h.Q, D), F = 0; F <= x; F++)
            v[F] = _[F];
          for (D = Array(r - x - 1), F = x + 1; F < r; F++)
            D[F - x - 1] = v[F];
          for (_ = numeric.dot(b.Q, D), F = x + 1; F < r; F++)
            v[F] = _[F - x - 1];
          return { Q: v, B: h.B.concat(numeric.add(b.B, x + 1)) };
        }
      if (e = S[r - 2][r - 2], c = S[r - 2][r - 1], f = S[r - 1][r - 2], o = S[r - 1][r - 1], l = e + o, u = e * o - c * f, y = numeric.getBlock(S, [0, 0], [2, 2]), l * l >= 4 * u) {
        var Z, G;
        Z = 0.5 * (l + Math.sqrt(l * l - 4 * u)), G = 0.5 * (l - Math.sqrt(l * l - 4 * u)), y = numeric.add(
          numeric.sub(
            numeric.dot(y, y),
            numeric.mul(y, Z + G)
          ),
          numeric.diag(numeric.rep([3], Z * G))
        );
      } else
        y = numeric.add(
          numeric.sub(
            numeric.dot(y, y),
            numeric.mul(y, l)
          ),
          numeric.diag(numeric.rep([3], u))
        );
      for (i = [y[0][0], y[1][0], y[2][0]], s = numeric.house(i), D = [S[0], S[1], S[2]], _ = numeric.tensor(s, numeric.dot(s, D)), F = 0; F < 3; F++)
        for (p = S[F], L = _[F], z = 0; z < r; z++) p[z] -= 2 * L[z];
      for (D = numeric.getBlock(S, [0, 0], [r - 1, 2]), _ = numeric.tensor(numeric.dot(D, s), s), F = 0; F < r; F++)
        for (p = S[F], L = _[F], z = 0; z < 3; z++) p[z] -= 2 * L[z];
      for (D = [v[0], v[1], v[2]], _ = numeric.tensor(s, numeric.dot(s, D)), F = 0; F < 3; F++)
        for (m = v[F], L = _[F], z = 0; z < r; z++) m[z] -= 2 * L[z];
      var J;
      for (x = 0; x < r - 2; x++) {
        for (z = x; z <= x + 1; z++)
          if (Math.abs(S[z + 1][z]) < I * (Math.abs(S[z][z]) + Math.abs(S[z + 1][z + 1]))) {
            var h = numeric.QRFrancis(numeric.getBlock(S, [0, 0], [z, z]), t), b = numeric.QRFrancis(numeric.getBlock(S, [z + 1, z + 1], [r - 1, r - 1]), t);
            for (D = Array(z + 1), F = 0; F <= z; F++)
              D[F] = v[F];
            for (_ = numeric.dot(h.Q, D), F = 0; F <= z; F++)
              v[F] = _[F];
            for (D = Array(r - z - 1), F = z + 1; F < r; F++)
              D[F - z - 1] = v[F];
            for (_ = numeric.dot(b.Q, D), F = z + 1; F < r; F++)
              v[F] = _[F - z - 1];
            return { Q: v, B: h.B.concat(numeric.add(b.B, z + 1)) };
          }
        for (J = Math.min(r - 1, x + 3), i = Array(J - x), F = x + 1; F <= J; F++)
          i[F - x - 1] = S[F][x];
        for (s = numeric.house(i), D = numeric.getBlock(S, [x + 1, x], [J, r - 1]), _ = numeric.tensor(s, numeric.dot(s, D)), F = x + 1; F <= J; F++)
          for (p = S[F], L = _[F - x - 1], z = x; z < r; z++) p[z] -= 2 * L[z - x];
        for (D = numeric.getBlock(S, [0, x + 1], [r - 1, J]), _ = numeric.tensor(numeric.dot(D, s), s), F = 0; F < r; F++)
          for (p = S[F], L = _[F], z = x + 1; z <= J; z++) p[z] -= 2 * L[z - x - 1];
        for (D = Array(J - x), F = x + 1; F <= J; F++) D[F - x - 1] = v[F];
        for (_ = numeric.tensor(s, numeric.dot(s, D)), F = x + 1; F <= J; F++)
          for (m = v[F], L = _[F - x - 1], z = 0; z < r; z++) m[z] -= 2 * L[z];
      }
    }
    throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");
  }, numeric.eig = function(t, n) {
    var r = numeric.toUpperHessenberg(t), i = numeric.QRFrancis(r.H, n), s = numeric.T, e0 = t.length, e, c, f = i.B, o = numeric.dot(i.Q, numeric.dot(r.H, numeric.transpose(i.Q))), u = new s(numeric.dot(i.Q, r.Q)), l, y = f.length, v, m, p, D, _, L, F, x, z, R, I, h, b, Z, G = Math.sqrt;
    for (c = 0; c < y; c++)
      if (e = f[c][0], e !== f[c][1]) {
        if (v = e + 1, m = o[e][e], p = o[e][v], D = o[v][e], _ = o[v][v], p === 0 && D === 0) continue;
        L = -m - _, F = m * _ - p * D, x = L * L - 4 * F, x >= 0 ? (L < 0 ? z = -0.5 * (L - G(x)) : z = -0.5 * (L + G(x)), b = (m - z) * (m - z) + p * p, Z = D * D + (_ - z) * (_ - z), b > Z ? (b = G(b), I = (m - z) / b, h = p / b) : (Z = G(Z), I = D / Z, h = (_ - z) / Z), l = new s([[h, -I], [I, h]]), u.setRows(e, v, l.dot(u.getRows(e, v)))) : (z = -0.5 * L, R = 0.5 * G(-x), b = (m - z) * (m - z) + p * p, Z = D * D + (_ - z) * (_ - z), b > Z ? (b = G(b + R * R), I = (m - z) / b, h = p / b, z = 0, R /= b) : (Z = G(Z + R * R), I = D / Z, h = (_ - z) / Z, z = R / Z, R = 0), l = new s([[h, -I], [I, h]], [[z, R], [R, -z]]), u.setRows(e, v, l.dot(u.getRows(e, v))));
      }
    var J = u.dot(t).dot(u.transjugate()), e0 = t.length, s0 = numeric.T.identity(e0);
    for (v = 0; v < e0; v++)
      if (v > 0)
        for (c = v - 1; c >= 0; c--) {
          var S0 = J.get([c, c]), D0 = J.get([v, v]);
          if (numeric.neq(S0.x, D0.x) || numeric.neq(S0.y, D0.y))
            z = J.getRow(c).getBlock([c], [v - 1]), R = s0.getRow(v).getBlock([c], [v - 1]), s0.set([v, c], J.get([c, v]).neg().sub(z.dot(R)).div(S0.sub(D0)));
          else {
            s0.setRow(v, s0.getRow(c));
            continue;
          }
        }
    for (v = 0; v < e0; v++)
      z = s0.getRow(v), s0.setRow(v, z.div(z.norm2()));
    return s0 = s0.transpose(), s0 = u.transjugate().dot(s0), { lambda: J.getDiag(), E: s0 };
  }, numeric.ccsSparse = function(t) {
    var n = t.length, c, r, i, s, e = [];
    for (i = n - 1; i !== -1; --i) {
      r = t[i];
      for (s in r) {
        for (s = parseInt(s); s >= e.length; ) e[e.length] = 0;
        r[s] !== 0 && e[s]++;
      }
    }
    var c = e.length, f = Array(c + 1);
    for (f[0] = 0, i = 0; i < c; ++i) f[i + 1] = f[i] + e[i];
    var o = Array(f[c]), u = Array(f[c]);
    for (i = n - 1; i !== -1; --i) {
      r = t[i];
      for (s in r)
        r[s] !== 0 && (e[s]--, o[f[s] + e[s]] = i, u[f[s] + e[s]] = r[s]);
    }
    return [f, o, u];
  }, numeric.ccsFull = function(t) {
    var n = t[0], r = t[1], i = t[2], s = numeric.ccsDim(t), e = s[0], c = s[1], f, o, u, l, y = numeric.rep([e, c], 0);
    for (f = 0; f < c; f++)
      for (u = n[f], l = n[f + 1], o = u; o < l; ++o)
        y[r[o]][f] = i[o];
    return y;
  }, numeric.ccsTSolve = function(t, n, r, i, s) {
    var e = t[0], c = t[1], f = t[2], o = e.length - 1, u = Math.max, l = 0;
    typeof i > "u" && (r = numeric.rep([o], 0)), typeof i > "u" && (i = numeric.linspace(0, r.length - 1)), typeof s > "u" && (s = []);
    function y(x) {
      var z;
      if (r[x] === 0) {
        for (r[x] = 1, z = e[x]; z < e[x + 1]; ++z) y(c[z]);
        s[l] = x, ++l;
      }
    }
    var v, m, p, D, _, L, F;
    for (v = i.length - 1; v !== -1; --v)
      y(i[v]);
    for (s.length = l, v = s.length - 1; v !== -1; --v)
      r[s[v]] = 0;
    for (v = i.length - 1; v !== -1; --v)
      m = i[v], r[m] = n[m];
    for (v = s.length - 1; v !== -1; --v) {
      for (m = s[v], p = e[m], D = u(e[m + 1], p), _ = p; _ !== D; ++_)
        if (c[_] === m) {
          r[m] /= f[_];
          break;
        }
      for (F = r[m], _ = p; _ !== D; ++_)
        L = c[_], L !== m && (r[L] -= F * f[_]);
    }
    return r;
  }, numeric.ccsDFS = function(t) {
    this.k = Array(t), this.k1 = Array(t), this.j = Array(t);
  }, numeric.ccsDFS.prototype.dfs = function(t, n, r, i, s, e) {
    var c = 0, f, o = s.length, u = this.k, l = this.k1, y = this.j, v, m;
    if (i[t] === 0)
      for (i[t] = 1, y[0] = t, u[0] = v = n[t], l[0] = m = n[t + 1]; ; )
        if (v >= m) {
          if (s[o] = y[c], c === 0) return;
          ++o, --c, v = u[c], m = l[c];
        } else
          f = e[r[v]], i[f] === 0 ? (i[f] = 1, u[c] = v, ++c, y[c] = f, v = n[f], l[c] = m = n[f + 1]) : ++v;
  }, numeric.ccsLPSolve = function(t, n, r, i, s, e, c) {
    var f = t[0], o = t[1], u = t[2];
    f.length - 1;
    var l = n[0], y = n[1], v = n[2], m, p, D, _, L, F, x, z, R;
    for (p = l[s], D = l[s + 1], i.length = 0, m = p; m < D; ++m)
      c.dfs(e[y[m]], f, o, r, i, e);
    for (m = i.length - 1; m !== -1; --m)
      r[i[m]] = 0;
    for (m = p; m !== D; ++m)
      _ = e[y[m]], r[_] = v[m];
    for (m = i.length - 1; m !== -1; --m) {
      for (_ = i[m], L = f[_], F = f[_ + 1], x = L; x < F; ++x)
        if (e[o[x]] === _) {
          r[_] /= u[x];
          break;
        }
      for (R = r[_], x = L; x < F; ++x)
        z = e[o[x]], z !== _ && (r[z] -= R * u[x]);
    }
    return r;
  }, numeric.ccsLUP1 = function(t, n) {
    var r = t[0].length - 1, i = [numeric.rep([r + 1], 0), [], []], s = [numeric.rep([r + 1], 0), [], []], e = i[0], c = i[1], f = i[2], o = s[0], u = s[1], l = s[2], y = numeric.rep([r], 0), v = numeric.rep([r], 0), m, p, D, _, L, F, x, z = numeric.ccsLPSolve, R = Math.abs, I = numeric.linspace(0, r - 1), h = numeric.linspace(0, r - 1), b = new numeric.ccsDFS(r);
    for (typeof n > "u" && (n = 1), m = 0; m < r; ++m) {
      for (z(i, t, y, v, m, h, b), _ = -1, L = -1, p = v.length - 1; p !== -1; --p)
        D = v[p], !(D <= m) && (F = R(y[D]), F > _ && (L = D, _ = F));
      for (R(y[m]) < n * _ && (p = I[m], _ = I[L], I[m] = _, h[_] = m, I[L] = p, h[p] = L, _ = y[m], y[m] = y[L], y[L] = _), _ = e[m], L = o[m], x = y[m], c[_] = I[m], f[_] = 1, ++_, p = v.length - 1; p !== -1; --p)
        D = v[p], F = y[D], v[p] = 0, y[D] = 0, D <= m ? (u[L] = D, l[L] = F, ++L) : (c[_] = I[D], f[_] = F / x, ++_);
      e[m + 1] = _, o[m + 1] = L;
    }
    for (p = c.length - 1; p !== -1; --p)
      c[p] = h[c[p]];
    return { L: i, U: s, P: I, Pinv: h };
  }, numeric.ccsDFS0 = function(t) {
    this.k = Array(t), this.k1 = Array(t), this.j = Array(t);
  }, numeric.ccsDFS0.prototype.dfs = function(t, n, r, i, s, e, c) {
    var f = 0, o, u = s.length, l = this.k, y = this.k1, v = this.j, m, p;
    if (i[t] === 0)
      for (i[t] = 1, v[0] = t, l[0] = m = n[e[t]], y[0] = p = n[e[t] + 1]; ; ) {
        if (isNaN(m)) throw new Error("Ow!");
        if (m >= p) {
          if (s[u] = e[v[f]], f === 0) return;
          ++u, --f, m = l[f], p = y[f];
        } else
          o = r[m], i[o] === 0 ? (i[o] = 1, l[f] = m, ++f, v[f] = o, o = e[o], m = n[o], y[f] = p = n[o + 1]) : ++m;
      }
  }, numeric.ccsLPSolve0 = function(t, n, r, i, s, e, c, f) {
    var o = t[0], u = t[1], l = t[2];
    o.length - 1;
    var y = n[0], v = n[1], m = n[2], p, D, _, L, F, x, z, R, I;
    for (D = y[s], _ = y[s + 1], i.length = 0, p = D; p < _; ++p)
      f.dfs(v[p], o, u, r, i, e, c);
    for (p = i.length - 1; p !== -1; --p)
      L = i[p], r[c[L]] = 0;
    for (p = D; p !== _; ++p)
      L = v[p], r[L] = m[p];
    for (p = i.length - 1; p !== -1; --p) {
      for (L = i[p], R = c[L], F = o[L], x = o[L + 1], z = F; z < x; ++z)
        if (u[z] === R) {
          r[R] /= l[z];
          break;
        }
      for (I = r[R], z = F; z < x; ++z) r[u[z]] -= I * l[z];
      r[R] = I;
    }
  }, numeric.ccsLUP0 = function(t, n) {
    var r = t[0].length - 1, i = [numeric.rep([r + 1], 0), [], []], s = [numeric.rep([r + 1], 0), [], []], e = i[0], c = i[1], f = i[2], o = s[0], u = s[1], l = s[2], y = numeric.rep([r], 0), v = numeric.rep([r], 0), m, p, D, _, L, F, x, z = numeric.ccsLPSolve0, R = Math.abs, I = numeric.linspace(0, r - 1), h = numeric.linspace(0, r - 1), b = new numeric.ccsDFS0(r);
    for (typeof n > "u" && (n = 1), m = 0; m < r; ++m) {
      for (z(i, t, y, v, m, h, I, b), _ = -1, L = -1, p = v.length - 1; p !== -1; --p)
        D = v[p], !(D <= m) && (F = R(y[I[D]]), F > _ && (L = D, _ = F));
      for (R(y[I[m]]) < n * _ && (p = I[m], _ = I[L], I[m] = _, h[_] = m, I[L] = p, h[p] = L), _ = e[m], L = o[m], x = y[I[m]], c[_] = I[m], f[_] = 1, ++_, p = v.length - 1; p !== -1; --p)
        D = v[p], F = y[I[D]], v[p] = 0, y[I[D]] = 0, D <= m ? (u[L] = D, l[L] = F, ++L) : (c[_] = I[D], f[_] = F / x, ++_);
      e[m + 1] = _, o[m + 1] = L;
    }
    for (p = c.length - 1; p !== -1; --p)
      c[p] = h[c[p]];
    return { L: i, U: s, P: I, Pinv: h };
  }, numeric.ccsLUP = numeric.ccsLUP0, numeric.ccsDim = function(t) {
    return [numeric.sup(t[1]) + 1, t[0].length - 1];
  }, numeric.ccsGetBlock = function(t, n, r) {
    var i = numeric.ccsDim(t), s = i[0], e = i[1];
    typeof n > "u" ? n = numeric.linspace(0, s - 1) : typeof n == "number" && (n = [n]), typeof r > "u" ? r = numeric.linspace(0, e - 1) : typeof r == "number" && (r = [r]);
    var c, f = n.length, o, u = r.length, l, y, v, m = numeric.rep([e], 0), p = [], D = [], _ = [m, p, D], L = t[0], F = t[1], x = t[2], z = numeric.rep([s], 0), R = 0, I = numeric.rep([s], 0);
    for (o = 0; o < u; ++o) {
      y = r[o];
      var h = L[y], b = L[y + 1];
      for (c = h; c < b; ++c)
        l = F[c], I[l] = 1, z[l] = x[c];
      for (c = 0; c < f; ++c)
        v = n[c], I[v] && (p[R] = c, D[R] = z[n[c]], ++R);
      for (c = h; c < b; ++c)
        l = F[c], I[l] = 0;
      m[o + 1] = R;
    }
    return _;
  }, numeric.ccsDot = function(t, n) {
    var r = t[0], i = t[1], s = t[2], e = n[0], c = n[1], f = n[2], o = numeric.ccsDim(t), u = numeric.ccsDim(n), l = o[0];
    o[1];
    var y = u[1], v = numeric.rep([l], 0), m = numeric.rep([l], 0), p = Array(l), D = numeric.rep([y], 0), _ = [], L = [], F = [D, _, L], x, z, R, I, h, b, Z, G, J, e0, s0;
    for (R = 0; R !== y; ++R) {
      for (I = e[R], h = e[R + 1], J = 0, z = I; z < h; ++z)
        for (e0 = c[z], s0 = f[z], b = r[e0], Z = r[e0 + 1], x = b; x < Z; ++x)
          G = i[x], m[G] === 0 && (p[J] = G, m[G] = 1, J = J + 1), v[G] = v[G] + s[x] * s0;
      for (I = D[R], h = I + J, D[R + 1] = h, z = J - 1; z !== -1; --z)
        s0 = I + z, x = p[z], _[s0] = x, L[s0] = v[x], m[x] = 0, v[x] = 0;
      D[R + 1] = D[R] + J;
    }
    return F;
  }, numeric.ccsLUPSolve = function(t, n) {
    var r = t.L, i = t.U;
    t.P;
    var s = n[0], e = !1;
    typeof s != "object" && (n = [[0, n.length], numeric.linspace(0, n.length - 1), n], s = n[0], e = !0);
    var c = n[1], f = n[2], o = r[0].length - 1, u = s.length - 1, l = numeric.rep([o], 0), y = Array(o), v = numeric.rep([o], 0), m = Array(o), p = numeric.rep([u + 1], 0), D = [], _ = [], L = numeric.ccsTSolve, F, x, z, R, I, h, b = 0;
    for (F = 0; F < u; ++F) {
      for (I = 0, z = s[F], R = s[F + 1], x = z; x < R; ++x)
        h = t.Pinv[c[x]], m[I] = h, v[h] = f[x], ++I;
      for (m.length = I, L(r, v, l, m, y), x = m.length - 1; x !== -1; --x) v[m[x]] = 0;
      if (L(i, l, v, y, m), e) return v;
      for (x = y.length - 1; x !== -1; --x) l[y[x]] = 0;
      for (x = m.length - 1; x !== -1; --x)
        h = m[x], D[b] = h, _[b] = v[h], v[h] = 0, ++b;
      p[F + 1] = b;
    }
    return [p, D, _];
  }, numeric.ccsbinop = function(t, n) {
    return typeof n > "u" && (n = ""), Function(
      "X",
      "Y",
      `var Xi = X[0], Xj = X[1], Xv = X[2];
var Yi = Y[0], Yj = Y[1], Yv = Y[2];
var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;
var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];
var x = numeric.rep([m],0),y = numeric.rep([m],0);
var xk,yk,zk;
var i,j,j0,j1,k,p=0;
` + n + `for(i=0;i<n;++i) {
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Xj[j];
    x[k] = 1;
    Zj[p] = k;
    ++p;
  }
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Yj[j];
    y[k] = Yv[j];
    if(x[k] === 0) {
      Zj[p] = k;
      ++p;
    }
  }
  Zi[i+1] = p;
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];
  j0 = Zi[i]; j1 = Zi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Zj[j];
    xk = x[k];
    yk = y[k];
` + t + `
    Zv[j] = zk;
  }
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;
}
return [Zi,Zj,Zv];`
    );
  }, function() {
    var k, A, B, C;
    for (k in numeric.ops2)
      isFinite(eval("1" + numeric.ops2[k] + "0")) ? A = "[Y[0],Y[1],numeric." + k + "(X,Y[2])]" : A = "NaN", isFinite(eval("0" + numeric.ops2[k] + "1")) ? B = "[X[0],X[1],numeric." + k + "(X[2],Y)]" : B = "NaN", isFinite(eval("1" + numeric.ops2[k] + "0")) && isFinite(eval("0" + numeric.ops2[k] + "1")) ? C = "numeric.ccs" + k + "MM(X,Y)" : C = "NaN", numeric["ccs" + k + "MM"] = numeric.ccsbinop("zk = xk " + numeric.ops2[k] + "yk;"), numeric["ccs" + k] = Function(
        "X",
        "Y",
        'if(typeof X === "number") return ' + A + `;
if(typeof Y === "number") return ` + B + `;
return ` + C + `;
`
      );
  }(), numeric.ccsScatter = function S(t) {
    var n = t[0], r = t[1], i = t[2], s = numeric.sup(r) + 1, e = n.length, c = numeric.rep([s], 0), f = Array(e), o = Array(e), u = numeric.rep([s], 0), l;
    for (l = 0; l < e; ++l) u[r[l]]++;
    for (l = 0; l < s; ++l) c[l + 1] = c[l] + u[l];
    var y = c.slice(0), v, m;
    for (l = 0; l < e; ++l)
      m = r[l], v = y[m], f[v] = n[l], o[v] = i[l], y[m] = y[m] + 1;
    return [c, f, o];
  }, numeric.ccsGather = function S(t) {
    var n = t[0], r = t[1], i = t[2], s = n.length - 1, e = r.length, c = Array(e), f = Array(e), o = Array(e), u, l, y, v, m;
    for (m = 0, u = 0; u < s; ++u)
      for (y = n[u], v = n[u + 1], l = y; l !== v; ++l)
        f[m] = u, c[m] = r[l], o[m] = i[l], ++m;
    return [c, f, o];
  }, numeric.sdim = function S(t, n, r) {
    if (typeof n > "u" && (n = []), typeof t != "object") return n;
    typeof r > "u" && (r = 0), r in n || (n[r] = 0), t.length > n[r] && (n[r] = t.length);
    var i;
    for (i in t)
      t.hasOwnProperty(i) && S(t[i], n, r + 1);
    return n;
  }, numeric.sclone = function S(t, n, r) {
    typeof n > "u" && (n = 0), typeof r > "u" && (r = numeric.sdim(t).length);
    var i, s = Array(t.length);
    if (n === r - 1) {
      for (i in t)
        t.hasOwnProperty(i) && (s[i] = t[i]);
      return s;
    }
    for (i in t)
      t.hasOwnProperty(i) && (s[i] = S(t[i], n + 1, r));
    return s;
  }, numeric.sdiag = function S(t) {
    var n = t.length, r, i = Array(n), s;
    for (r = n - 1; r >= 1; r -= 2)
      s = r - 1, i[r] = [], i[r][r] = t[r], i[s] = [], i[s][s] = t[s];
    return r === 0 && (i[0] = [], i[0][0] = t[r]), i;
  }, numeric.sidentity = function S(t) {
    return numeric.sdiag(numeric.rep([t], 1));
  }, numeric.stranspose = function S(t) {
    var n = [];
    t.length;
    var r, i, s;
    for (r in t)
      if (t.hasOwnProperty(r)) {
        s = t[r];
        for (i in s)
          s.hasOwnProperty(i) && (typeof n[i] != "object" && (n[i] = []), n[i][r] = s[i]);
      }
    return n;
  }, numeric.sLUP = function S(t, n) {
    throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");
  }, numeric.sdotMM = function S(t, n) {
    var r = t.length;
    n.length;
    var i = numeric.stranspose(n), s = i.length, e, c, f, o, u, l, y = Array(r), v;
    for (f = r - 1; f >= 0; f--) {
      for (v = [], e = t[f], u = s - 1; u >= 0; u--) {
        l = 0, c = i[u];
        for (o in e)
          e.hasOwnProperty(o) && o in c && (l += e[o] * c[o]);
        l && (v[u] = l);
      }
      y[f] = v;
    }
    return y;
  }, numeric.sdotMV = function S(t, n) {
    var r = t.length, i, s, e, c = Array(r), f;
    for (s = r - 1; s >= 0; s--) {
      i = t[s], f = 0;
      for (e in i)
        i.hasOwnProperty(e) && n[e] && (f += i[e] * n[e]);
      f && (c[s] = f);
    }
    return c;
  }, numeric.sdotVM = function S(t, n) {
    var r, i, s, e, c = [];
    for (r in t)
      if (t.hasOwnProperty(r)) {
        s = n[r], e = t[r];
        for (i in s)
          s.hasOwnProperty(i) && (c[i] || (c[i] = 0), c[i] += e * s[i]);
      }
    return c;
  }, numeric.sdotVV = function S(t, n) {
    var r, i = 0;
    for (r in t)
      t[r] && n[r] && (i += t[r] * n[r]);
    return i;
  }, numeric.sdot = function S(t, n) {
    var r = numeric.sdim(t).length, i = numeric.sdim(n).length, s = r * 1e3 + i;
    switch (s) {
      case 0:
        return t * n;
      case 1001:
        return numeric.sdotVV(t, n);
      case 2001:
        return numeric.sdotMV(t, n);
      case 1002:
        return numeric.sdotVM(t, n);
      case 2002:
        return numeric.sdotMM(t, n);
      default:
        throw new Error("numeric.sdot not implemented for tensors of order " + r + " and " + i);
    }
  }, numeric.sscatter = function S(t) {
    var n = t[0].length, r, i, s, e = t.length, c = [], f;
    for (i = n - 1; i >= 0; --i)
      if (t[e - 1][i]) {
        for (f = c, s = 0; s < e - 2; s++)
          r = t[s][i], f[r] || (f[r] = []), f = f[r];
        f[t[s][i]] = t[s + 1][i];
      }
    return c;
  }, numeric.sgather = function S(t, n, r) {
    typeof n > "u" && (n = []), typeof r > "u" && (r = []);
    var i, s, e;
    i = r.length;
    for (s in t)
      if (t.hasOwnProperty(s))
        if (r[i] = parseInt(s), e = t[s], typeof e == "number") {
          if (e) {
            if (n.length === 0)
              for (s = i + 1; s >= 0; --s) n[s] = [];
            for (s = i; s >= 0; --s) n[s].push(r[s]);
            n[i + 1].push(e);
          }
        } else S(e, n, r);
    return r.length > i && r.pop(), n;
  }, numeric.cLU = function S(t) {
    var n = t[0], r = t[1], i = t[2], b = n.length, s = 0, e, c, f, o, u, l;
    for (e = 0; e < b; e++) n[e] > s && (s = n[e]);
    s++;
    var y = Array(s), v = Array(s), m = numeric.rep([s], 1 / 0), p = numeric.rep([s], -1 / 0), F, x, D;
    for (f = 0; f < b; f++)
      e = n[f], c = r[f], c < m[e] && (m[e] = c), c > p[e] && (p[e] = c);
    for (e = 0; e < s - 1; e++)
      p[e] > p[e + 1] && (p[e + 1] = p[e]);
    for (e = s - 1; e >= 1; e--)
      m[e] < m[e - 1] && (m[e - 1] = m[e]);
    var _ = 0, L = 0;
    for (e = 0; e < s; e++)
      v[e] = numeric.rep([p[e] - m[e] + 1], 0), y[e] = numeric.rep([e - m[e]], 0), _ += e - m[e] + 1, L += p[e] - e + 1;
    for (f = 0; f < b; f++)
      e = n[f], v[e][r[f] - m[e]] = i[f];
    for (e = 0; e < s - 1; e++)
      for (o = e - m[e], F = v[e], c = e + 1; m[c] <= e && c < s; c++)
        if (u = e - m[c], l = p[e] - e, x = v[c], D = x[u] / F[o], D) {
          for (f = 1; f <= l; f++)
            x[f + u] -= D * F[f + o];
          y[c][e - m[c]] = D;
        }
    var F = [], x = [], z = [], R = [], I = [], h = [], b, Z, G;
    for (b = 0, Z = 0, e = 0; e < s; e++) {
      for (o = m[e], u = p[e], G = v[e], c = e; c <= u; c++)
        G[c - o] && (F[b] = e, x[b] = c, z[b] = G[c - o], b++);
      for (G = y[e], c = o; c < e; c++)
        G[c - o] && (R[Z] = e, I[Z] = c, h[Z] = G[c - o], Z++);
      R[Z] = e, I[Z] = e, h[Z] = 1, Z++;
    }
    return { U: [F, x, z], L: [R, I, h] };
  }, numeric.cLUsolve = function S(t, n) {
    var r = t.L, i = t.U, s = numeric.clone(n), e = r[0], c = r[1], f = r[2], o = i[0], u = i[1], l = i[2], y = o.length;
    e.length;
    var v = s.length, m, p;
    for (p = 0, m = 0; m < v; m++) {
      for (; c[p] < m; )
        s[m] -= f[p] * s[c[p]], p++;
      p++;
    }
    for (p = y - 1, m = v - 1; m >= 0; m--) {
      for (; u[p] > m; )
        s[m] -= l[p] * s[u[p]], p--;
      s[m] /= l[p], p--;
    }
    return s;
  }, numeric.cgrid = function S(t, n) {
    typeof t == "number" && (t = [t, t]);
    var r = numeric.rep(t, -1), i, s, e;
    if (typeof n != "function")
      switch (n) {
        case "L":
          n = function(c, f) {
            return c >= t[0] / 2 || f < t[1] / 2;
          };
          break;
        default:
          n = function(c, f) {
            return !0;
          };
          break;
      }
    for (e = 0, i = 1; i < t[0] - 1; i++) for (s = 1; s < t[1] - 1; s++)
      n(i, s) && (r[i][s] = e, e++);
    return r;
  }, numeric.cdelsq = function S(t) {
    var n = [[-1, 0], [0, -1], [0, 1], [1, 0]], r = numeric.dim(t), i = r[0], s = r[1], e, c, f, o, u, l = [], y = [], v = [];
    for (e = 1; e < i - 1; e++) for (c = 1; c < s - 1; c++)
      if (!(t[e][c] < 0)) {
        for (f = 0; f < 4; f++)
          o = e + n[f][0], u = c + n[f][1], !(t[o][u] < 0) && (l.push(t[e][c]), y.push(t[o][u]), v.push(-1));
        l.push(t[e][c]), y.push(t[e][c]), v.push(4);
      }
    return [l, y, v];
  }, numeric.cdotMV = function S(t, n) {
    var r, i = t[0], s = t[1], e = t[2], c, f = i.length, o;
    for (o = 0, c = 0; c < f; c++)
      i[c] > o && (o = i[c]);
    for (o++, r = numeric.rep([o], 0), c = 0; c < f; c++)
      r[i[c]] += e[c] * n[s[c]];
    return r;
  }, numeric.Spline = function S(t, n, r, i, s) {
    this.x = t, this.yl = n, this.yr = r, this.kl = i, this.kr = s;
  }, numeric.Spline.prototype._at = function S(f, n) {
    var r = this.x, i = this.yl, s = this.yr, e = this.kl, c = this.kr, f, o, u, l, y = numeric.add, v = numeric.sub, m = numeric.mul;
    o = v(m(e[n], r[n + 1] - r[n]), v(s[n + 1], i[n])), u = y(m(c[n + 1], r[n] - r[n + 1]), v(s[n + 1], i[n])), l = (f - r[n]) / (r[n + 1] - r[n]);
    var p = l * (1 - l);
    return y(y(y(m(1 - l, i[n]), m(l, s[n + 1])), m(o, p * (1 - l))), m(u, p * l));
  }, numeric.Spline.prototype.at = function S(t) {
    if (typeof t == "number") {
      var n = this.x, c = n.length, r, i, s, e = Math.floor;
      for (r = 0, i = c - 1; i - r > 1; )
        s = e((r + i) / 2), n[s] <= t ? r = s : i = s;
      return this._at(t, r);
    }
    var c = t.length, f, o = Array(c);
    for (f = c - 1; f !== -1; --f) o[f] = this.at(t[f]);
    return o;
  }, numeric.Spline.prototype.diff = function S() {
    var t = this.x, n = this.yl, r = this.yr, i = this.kl, s = this.kr, e = n.length, c, f, o, u = i, l = s, y = Array(e), v = Array(e), m = numeric.add, p = numeric.mul, D = numeric.div, _ = numeric.sub;
    for (c = e - 1; c !== -1; --c)
      f = t[c + 1] - t[c], o = _(r[c + 1], n[c]), y[c] = D(m(p(o, 6), p(i[c], -4 * f), p(s[c + 1], -2 * f)), f * f), v[c + 1] = D(m(p(o, -6), p(i[c], 2 * f), p(s[c + 1], 4 * f)), f * f);
    return new numeric.Spline(t, u, l, y, v);
  }, numeric.Spline.prototype.roots = function S() {
    function t(M) {
      return M * M;
    }
    var D = [], n = this.x, r = this.yl, i = this.yr, s = this.kl, e = this.kr;
    typeof r[0] == "number" && (r = [r], i = [i], s = [s], e = [e]);
    var c = r.length, f = n.length - 1, o, u, l, y, v, m, p, D = Array(c), _, L, F, x, z, R, I, h, b, Z, G, J, e0, s0, S0, D0, _0 = Math.sqrt;
    for (o = 0; o !== c; ++o) {
      for (y = r[o], v = i[o], m = s[o], p = e[o], _ = [], u = 0; u !== f; u++) {
        for (u > 0 && v[u] * y[u] < 0 && _.push(n[u]), b = n[u + 1] - n[u], n[u], x = y[u], z = v[u + 1], L = m[u] / b, F = p[u + 1] / b, h = t(L - F + 3 * (x - z)) + 12 * F * x, R = F + 3 * x + 2 * L - 3 * z, I = 3 * (F + L + 2 * (x - z)), h <= 0 ? (G = R / I, G > n[u] && G < n[u + 1] ? Z = [n[u], G, n[u + 1]] : Z = [n[u], n[u + 1]]) : (G = (R - _0(h)) / I, J = (R + _0(h)) / I, Z = [n[u]], G > n[u] && G < n[u + 1] && Z.push(G), J > n[u] && J < n[u + 1] && Z.push(J), Z.push(n[u + 1])), s0 = Z[0], G = this._at(s0, u), l = 0; l < Z.length - 1; l++) {
          if (S0 = Z[l + 1], J = this._at(S0, u), G === 0) {
            _.push(s0), s0 = S0, G = J;
            continue;
          }
          if (J === 0 || G * J > 0) {
            s0 = S0, G = J;
            continue;
          }
          for (var N = 0; D0 = (G * S0 - J * s0) / (G - J), !(D0 <= s0 || D0 >= S0); )
            if (e0 = this._at(D0, u), e0 * J > 0)
              S0 = D0, J = e0, N === -1 && (G *= 0.5), N = -1;
            else if (e0 * G > 0)
              s0 = D0, G = e0, N === 1 && (J *= 0.5), N = 1;
            else break;
          _.push(D0), s0 = Z[l + 1], G = this._at(s0, u);
        }
        J === 0 && _.push(S0);
      }
      D[o] = _;
    }
    return typeof this.yl[0] == "number" ? D[0] : D;
  }, numeric.spline = function S(t, n, r, i) {
    var s = t.length, e = [], c = [], f = [], o, u = numeric.sub, l = numeric.mul, y = numeric.add;
    for (o = s - 2; o >= 0; o--)
      c[o] = t[o + 1] - t[o], f[o] = u(n[o + 1], n[o]);
    (typeof r == "string" || typeof i == "string") && (r = i = "periodic");
    var v = [[], [], []];
    switch (typeof r) {
      case "undefined":
        e[0] = l(3 / (c[0] * c[0]), f[0]), v[0].push(0, 0), v[1].push(0, 1), v[2].push(2 / c[0], 1 / c[0]);
        break;
      case "string":
        e[0] = y(l(3 / (c[s - 2] * c[s - 2]), f[s - 2]), l(3 / (c[0] * c[0]), f[0])), v[0].push(0, 0, 0), v[1].push(s - 2, 0, 1), v[2].push(1 / c[s - 2], 2 / c[s - 2] + 2 / c[0], 1 / c[0]);
        break;
      default:
        e[0] = r, v[0].push(0), v[1].push(0), v[2].push(1);
        break;
    }
    for (o = 1; o < s - 1; o++)
      e[o] = y(l(3 / (c[o - 1] * c[o - 1]), f[o - 1]), l(3 / (c[o] * c[o]), f[o])), v[0].push(o, o, o), v[1].push(o - 1, o, o + 1), v[2].push(1 / c[o - 1], 2 / c[o - 1] + 2 / c[o], 1 / c[o]);
    switch (typeof i) {
      case "undefined":
        e[s - 1] = l(3 / (c[s - 2] * c[s - 2]), f[s - 2]), v[0].push(s - 1, s - 1), v[1].push(s - 2, s - 1), v[2].push(1 / c[s - 2], 2 / c[s - 2]);
        break;
      case "string":
        v[1][v[1].length - 1] = 0;
        break;
      default:
        e[s - 1] = i, v[0].push(s - 1), v[1].push(s - 1), v[2].push(1);
        break;
    }
    typeof e[0] != "number" ? e = numeric.transpose(e) : e = [e];
    var m = Array(e.length);
    if (typeof r == "string")
      for (o = m.length - 1; o !== -1; --o)
        m[o] = numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(v)), e[o]), m[o][s - 1] = m[o][0];
    else
      for (o = m.length - 1; o !== -1; --o)
        m[o] = numeric.cLUsolve(numeric.cLU(v), e[o]);
    return typeof n[0] == "number" ? m = m[0] : m = numeric.transpose(m), new numeric.Spline(t, n, n, m, m);
  }, numeric.fftpow2 = function S(t, n) {
    var r = t.length;
    if (r !== 1) {
      var i = Math.cos, s = Math.sin, e, c, f = Array(r / 2), o = Array(r / 2), u = Array(r / 2), l = Array(r / 2);
      for (c = r / 2, e = r - 1; e !== -1; --e)
        --c, u[c] = t[e], l[c] = n[e], --e, f[c] = t[e], o[c] = n[e];
      S(f, o), S(u, l), c = r / 2;
      var y, v = -6.283185307179586 / r, m, p;
      for (e = r - 1; e !== -1; --e)
        --c, c === -1 && (c = r / 2 - 1), y = v * e, m = i(y), p = s(y), t[e] = f[c] + m * u[c] - p * l[c], n[e] = o[c] + m * l[c] + p * u[c];
    }
  }, numeric._ifftpow2 = function S(t, n) {
    var r = t.length;
    if (r !== 1) {
      var i = Math.cos, s = Math.sin, e, c, f = Array(r / 2), o = Array(r / 2), u = Array(r / 2), l = Array(r / 2);
      for (c = r / 2, e = r - 1; e !== -1; --e)
        --c, u[c] = t[e], l[c] = n[e], --e, f[c] = t[e], o[c] = n[e];
      S(f, o), S(u, l), c = r / 2;
      var y, v = 6.283185307179586 / r, m, p;
      for (e = r - 1; e !== -1; --e)
        --c, c === -1 && (c = r / 2 - 1), y = v * e, m = i(y), p = s(y), t[e] = f[c] + m * u[c] - p * l[c], n[e] = o[c] + m * l[c] + p * u[c];
    }
  }, numeric.ifftpow2 = function S(t, n) {
    numeric._ifftpow2(t, n), numeric.diveq(t, t.length), numeric.diveq(n, n.length);
  }, numeric.convpow2 = function S(t, n, r, i) {
    numeric.fftpow2(t, n), numeric.fftpow2(r, i);
    var s, e = t.length, c, f, o, u;
    for (s = e - 1; s !== -1; --s)
      c = t[s], o = n[s], f = r[s], u = i[s], t[s] = c * f - o * u, n[s] = c * u + o * f;
    numeric.ifftpow2(t, n);
  }, numeric.T.prototype.fft = function S() {
    var t = this.x, n = this.y, r = t.length, i = Math.log, s = i(2), e = Math.ceil(i(2 * r - 1) / s), c = Math.pow(2, e), f = numeric.rep([c], 0), o = numeric.rep([c], 0), u = Math.cos, l = Math.sin, y, v = -3.141592653589793 / r, m, p = numeric.rep([c], 0), D = numeric.rep([c], 0);
    for (y = 0; y < r; y++) p[y] = t[y];
    if (typeof n < "u") for (y = 0; y < r; y++) D[y] = n[y];
    for (f[0] = 1, y = 1; y <= c / 2; y++)
      m = v * y * y, f[y] = u(m), o[y] = l(m), f[c - y] = u(m), o[c - y] = l(m);
    var _ = new numeric.T(p, D), L = new numeric.T(f, o);
    return _ = _.mul(L), numeric.convpow2(_.x, _.y, numeric.clone(L.x), numeric.neg(L.y)), _ = _.mul(L), _.x.length = r, _.y.length = r, _;
  }, numeric.T.prototype.ifft = function S() {
    var t = this.x, n = this.y, r = t.length, i = Math.log, s = i(2), e = Math.ceil(i(2 * r - 1) / s), c = Math.pow(2, e), f = numeric.rep([c], 0), o = numeric.rep([c], 0), u = Math.cos, l = Math.sin, y, v = 3.141592653589793 / r, m, p = numeric.rep([c], 0), D = numeric.rep([c], 0);
    for (y = 0; y < r; y++) p[y] = t[y];
    if (typeof n < "u") for (y = 0; y < r; y++) D[y] = n[y];
    for (f[0] = 1, y = 1; y <= c / 2; y++)
      m = v * y * y, f[y] = u(m), o[y] = l(m), f[c - y] = u(m), o[c - y] = l(m);
    var _ = new numeric.T(p, D), L = new numeric.T(f, o);
    return _ = _.mul(L), numeric.convpow2(_.x, _.y, numeric.clone(L.x), numeric.neg(L.y)), _ = _.mul(L), _.x.length = r, _.y.length = r, _.div(r);
  }, numeric.gradient = function S(t, n) {
    var r = n.length, i = t(n);
    if (isNaN(i)) throw new Error("gradient: f(x) is a NaN!");
    var l = Math.max, s, e = numeric.clone(n), c, f, o = Array(r);
    numeric.div, numeric.sub;
    var u, l = Math.max, y = 1e-3, v = Math.abs, m = Math.min, p, D, _, L = 0, F, x, z;
    for (s = 0; s < r; s++)
      for (var R = l(1e-6 * i, 1e-8); ; ) {
        if (++L, L > 20)
          throw new Error("Numerical gradient fails");
        if (e[s] = n[s] + R, c = t(e), e[s] = n[s] - R, f = t(e), e[s] = n[s], isNaN(c) || isNaN(f)) {
          R /= 16;
          continue;
        }
        if (o[s] = (c - f) / (2 * R), p = n[s] - R, D = n[s], _ = n[s] + R, F = (c - i) / R, x = (i - f) / R, z = l(v(o[s]), v(i), v(c), v(f), v(p), v(D), v(_), 1e-8), u = m(l(v(F - o[s]), v(x - o[s]), v(F - x)) / z, R / z), u > y)
          R /= 16;
        else break;
      }
    return o;
  }, numeric.uncmin = function S(t, n, r, i, s, e, c) {
    var f = numeric.gradient;
    typeof c > "u" && (c = {}), typeof r > "u" && (r = 1e-8), typeof i > "u" && (i = function(t0) {
      return f(t, t0);
    }), typeof s > "u" && (s = 1e3), n = numeric.clone(n);
    var o = n.length, u = t(n), l, y;
    if (isNaN(u)) throw new Error("uncmin: f(x0) is a NaN!");
    var v = Math.max, m = numeric.norm2;
    r = v(r, numeric.epsilon);
    var p, D, _, L = c.Hinv || numeric.identity(o), F = numeric.dot;
    numeric.inv;
    var x = numeric.sub, z = numeric.add, R = numeric.tensor, I = numeric.div, h = numeric.mul, b = numeric.all, Z = numeric.isFinite, G = numeric.neg, J = 0, e0, s0, S0, D0, _0, N, M, O = "";
    for (D = i(n); J < s; ) {
      if (typeof e == "function" && e(J, n, u, D, L)) {
        O = "Callback returned true";
        break;
      }
      if (!b(Z(D))) {
        O = "Gradient has Infinity or NaN";
        break;
      }
      if (p = G(F(L, D)), !b(Z(p))) {
        O = "Search direction has Infinity or NaN";
        break;
      }
      if (M = m(p), M < r) {
        O = "Newton step smaller than tol";
        break;
      }
      for (N = 1, y = F(D, p), s0 = n; J < s && !(N * M < r); ) {
        if (e0 = h(p, N), s0 = z(n, e0), l = t(s0), l - u >= 0.1 * N * y || isNaN(l)) {
          N *= 0.5, ++J;
          continue;
        }
        break;
      }
      if (N * M < r) {
        O = "Line search step size smaller than tol";
        break;
      }
      if (J === s) {
        O = "maxit reached during line search";
        break;
      }
      _ = i(s0), S0 = x(_, D), _0 = F(S0, e0), D0 = F(L, S0), L = x(
        z(
          L,
          h(
            (_0 + F(S0, D0)) / (_0 * _0),
            R(e0, e0)
          )
        ),
        I(z(R(D0, e0), R(e0, D0)), _0)
      ), n = s0, u = l, D = _, ++J;
    }
    return { solution: n, f: u, gradient: D, invHessian: L, iterations: J, message: O };
  }, numeric.Dopri = function S(t, n, r, i, s, e, c) {
    this.x = t, this.y = n, this.f = r, this.ymid = i, this.iterations = s, this.events = c, this.message = e;
  }, numeric.Dopri.prototype._at = function S(p, n) {
    function r(h) {
      return h * h;
    }
    var i = this, s = i.x, e = i.y, c = i.f, f = i.ymid;
    s.length;
    var o, u, l, y, v, m, p, D, _ = 0.5, L = numeric.add, F = numeric.mul, x = numeric.sub, z, R, I;
    return o = s[n], u = s[n + 1], y = e[n], v = e[n + 1], D = u - o, l = o + _ * D, m = f[n], z = x(c[n], F(y, 1 / (o - l) + 2 / (o - u))), R = x(c[n + 1], F(v, 1 / (u - l) + 2 / (u - o))), I = [
      r(p - u) * (p - l) / r(o - u) / (o - l),
      r(p - o) * r(p - u) / r(o - l) / r(u - l),
      r(p - o) * (p - l) / r(u - o) / (u - l),
      (p - o) * r(p - u) * (p - l) / r(o - u) / (o - l),
      (p - u) * r(p - o) * (p - l) / r(o - u) / (u - l)
    ], L(
      L(
        L(
          L(
            F(y, I[0]),
            F(m, I[1])
          ),
          F(v, I[2])
        ),
        F(z, I[3])
      ),
      F(R, I[4])
    );
  }, numeric.Dopri.prototype.at = function S(t) {
    var n, r, i, s = Math.floor;
    if (typeof t != "number") {
      var e = t.length, c = Array(e);
      for (n = e - 1; n !== -1; --n)
        c[n] = this.at(t[n]);
      return c;
    }
    var f = this.x;
    for (n = 0, r = f.length - 1; r - n > 1; )
      i = s(0.5 * (n + r)), f[i] <= t ? n = i : r = i;
    return this._at(t, n);
  }, numeric.dopri = function S(t, n, r, i, s, e, c) {
    typeof s > "u" && (s = 1e-6), typeof e > "u" && (e = 1e3);
    var f = [t], o = [r], u = [i(t, r)], l, y, v, m, p, D, _ = [], L = 1 / 5, F = [3 / 40, 9 / 40], x = [44 / 45, -56 / 15, 32 / 9], z = [19372 / 6561, -25360 / 2187, 64448 / 6561, -212 / 729], R = [9017 / 3168, -355 / 33, 46732 / 5247, 49 / 176, -5103 / 18656], I = [35 / 384, 0, 500 / 1113, 125 / 192, -2187 / 6784, 11 / 84], h = [
      0.5 * 6025192743 / 30085553152,
      0,
      0.5 * 51252292925 / 65400821598,
      0.5 * -2691868925 / 45128329728,
      0.5 * 187940372067 / 1594534317056,
      0.5 * -1776094331 / 19743644256,
      0.5 * 11237099 / 235043384
    ], b = [1 / 5, 3 / 10, 4 / 5, 8 / 9, 1, 1], Z = [-71 / 57600, 0, 71 / 16695, -71 / 1920, 17253 / 339200, -22 / 525, 1 / 40], G = 0, J, e0, s0 = (n - t) / 10, S0 = 0, D0 = numeric.add, _0 = numeric.mul, N, M, O = Math.min, t0 = Math.abs, i0 = numeric.norminf, c0 = Math.pow, g0 = numeric.any, w = numeric.lt, d = numeric.and;
    numeric.sub;
    var E, Q, j, X = new numeric.Dopri(f, o, u, _, -1, "");
    for (typeof c == "function" && (E = c(t, r)); t < n && S0 < e; ) {
      if (++S0, t + s0 > n && (s0 = n - t), l = i(t + b[0] * s0, D0(r, _0(L * s0, u[G]))), y = i(t + b[1] * s0, D0(D0(r, _0(F[0] * s0, u[G])), _0(F[1] * s0, l))), v = i(t + b[2] * s0, D0(D0(D0(r, _0(x[0] * s0, u[G])), _0(x[1] * s0, l)), _0(x[2] * s0, y))), m = i(t + b[3] * s0, D0(D0(D0(D0(r, _0(z[0] * s0, u[G])), _0(z[1] * s0, l)), _0(z[2] * s0, y)), _0(z[3] * s0, v))), p = i(t + b[4] * s0, D0(D0(D0(D0(D0(r, _0(R[0] * s0, u[G])), _0(R[1] * s0, l)), _0(R[2] * s0, y)), _0(R[3] * s0, v)), _0(R[4] * s0, m))), N = D0(D0(D0(D0(D0(r, _0(u[G], s0 * I[0])), _0(y, s0 * I[2])), _0(v, s0 * I[3])), _0(m, s0 * I[4])), _0(p, s0 * I[5])), D = i(t + s0, N), J = D0(D0(D0(D0(D0(_0(u[G], s0 * Z[0]), _0(y, s0 * Z[2])), _0(v, s0 * Z[3])), _0(m, s0 * Z[4])), _0(p, s0 * Z[5])), _0(D, s0 * Z[6])), typeof J == "number" ? M = t0(J) : M = i0(J), M > s) {
        if (s0 = 0.2 * s0 * c0(s / M, 0.25), t + s0 === t) {
          X.msg = "Step size became too small";
          break;
        }
        continue;
      }
      if (_[G] = D0(
        D0(
          D0(
            D0(
              D0(
                D0(
                  r,
                  _0(u[G], s0 * h[0])
                ),
                _0(y, s0 * h[2])
              ),
              _0(v, s0 * h[3])
            ),
            _0(m, s0 * h[4])
          ),
          _0(p, s0 * h[5])
        ),
        _0(D, s0 * h[6])
      ), ++G, f[G] = t + s0, o[G] = N, u[G] = D, typeof c == "function") {
        var $, h0 = t, d0 = t + 0.5 * s0, q;
        if (Q = c(d0, _[G - 1]), j = d(w(E, 0), w(0, Q)), g0(j) || (h0 = d0, d0 = t + s0, E = Q, Q = c(d0, N), j = d(w(E, 0), w(0, Q))), g0(j)) {
          for (var K, n0, f0 = 0, l0 = 1, a = 1; ; ) {
            if (typeof E == "number") q = (a * Q * h0 - l0 * E * d0) / (a * Q - l0 * E);
            else
              for (q = d0, e0 = E.length - 1; e0 !== -1; --e0)
                E[e0] < 0 && Q[e0] > 0 && (q = O(q, (a * Q[e0] * h0 - l0 * E[e0] * d0) / (a * Q[e0] - l0 * E[e0])));
            if (q <= h0 || q >= d0) break;
            $ = X._at(q, G - 1), n0 = c(q, $), K = d(w(E, 0), w(0, n0)), g0(K) ? (d0 = q, Q = n0, j = K, a = 1, f0 === -1 ? l0 *= 0.5 : l0 = 1, f0 = -1) : (h0 = q, E = n0, l0 = 1, f0 === 1 ? a *= 0.5 : a = 1, f0 = 1);
          }
          return N = X._at(0.5 * (t + q), G - 1), X.f[G] = i(q, $), X.x[G] = q, X.y[G] = $, X.ymid[G - 1] = N, X.events = j, X.iterations = S0, X;
        }
      }
      t += s0, r = N, E = Q, s0 = O(0.8 * s0 * c0(s / M, 0.25), 4 * s0);
    }
    return X.iterations = S0, X;
  }, numeric.LU = function(S, t) {
    t = t || !1;
    var n = Math.abs, r, i, s, e, c, f, o, u, l, y = S.length, v = y - 1, m = new Array(y);
    for (t || (S = numeric.clone(S)), s = 0; s < y; ++s) {
      for (o = s, f = S[s], l = n(f[s]), i = s + 1; i < y; ++i)
        e = n(S[i][s]), l < e && (l = e, o = i);
      for (m[s] = o, o != s && (S[s] = S[o], S[o] = f, f = S[s]), c = f[s], r = s + 1; r < y; ++r)
        S[r][s] /= c;
      for (r = s + 1; r < y; ++r) {
        for (u = S[r], i = s + 1; i < v; ++i)
          u[i] -= u[s] * f[i], ++i, u[i] -= u[s] * f[i];
        i === v && (u[i] -= u[s] * f[i]);
      }
    }
    return {
      LU: S,
      P: m
    };
  }, numeric.LUsolve = function S(t, n) {
    var r, i, s = t.LU, e = s.length, c = numeric.clone(n), f = t.P, o, u, l;
    for (r = e - 1; r !== -1; --r) c[r] = n[r];
    for (r = 0; r < e; ++r)
      for (o = f[r], f[r] !== r && (l = c[r], c[r] = c[o], c[o] = l), u = s[r], i = 0; i < r; ++i)
        c[r] -= c[i] * u[i];
    for (r = e - 1; r >= 0; --r) {
      for (u = s[r], i = r + 1; i < e; ++i)
        c[r] -= c[i] * u[i];
      c[r] /= u[r];
    }
    return c;
  }, numeric.solve = function S(t, n, r) {
    return numeric.LUsolve(numeric.LU(t, r), n);
  }, numeric.echelonize = function S(t) {
    var n = numeric.dim(t), r = n[0], i = n[1], s = numeric.identity(r), e = Array(r), c, f, o, u, l, y, v, m, p = Math.abs, D = numeric.diveq;
    for (t = numeric.clone(t), c = 0; c < r; ++c) {
      for (o = 0, l = t[c], y = s[c], f = 1; f < i; ++f) p(l[o]) < p(l[f]) && (o = f);
      for (e[c] = o, D(y, l[o]), D(l, l[o]), f = 0; f < r; ++f) if (f !== c) {
        for (v = t[f], m = v[o], u = i - 1; u !== -1; --u) v[u] -= l[u] * m;
        for (v = s[f], u = r - 1; u !== -1; --u) v[u] -= y[u] * m;
      }
    }
    return { I: s, A: t, P: e };
  }, numeric.__solveLP = function S(t, n, r, i, s, e, c) {
    var f = numeric.sum;
    numeric.log;
    var o = numeric.mul, u = numeric.sub, l = numeric.dot, y = numeric.div, v = numeric.add, m = t.length, p = r.length, D, _ = !1, L = 0, F = 1;
    numeric.transpose(n), numeric.svd;
    var x = numeric.transpose;
    numeric.leq;
    var z = Math.sqrt, R = Math.abs;
    numeric.muleq, numeric.norminf, numeric.any;
    var I = Math.min, h = numeric.all, b = numeric.gt, Z = Array(m), G = Array(p);
    numeric.rep([p], 1);
    var J, e0 = numeric.solve, s0 = u(r, l(n, e)), S0, D0 = l(t, t), _0;
    for (S0 = L; S0 < s; ++S0) {
      var N, M;
      for (N = p - 1; N !== -1; --N) G[N] = y(n[N], s0[N]);
      var O = x(G);
      for (N = m - 1; N !== -1; --N) Z[N] = /*x[i]+*/
      f(O[N]);
      F = 0.25 * R(D0 / l(t, Z));
      var t0 = 100 * z(D0 / l(Z, Z));
      for ((!isFinite(F) || F > t0) && (F = t0), _0 = v(t, o(F, Z)), J = l(O, G), N = m - 1; N !== -1; --N) J[N][N] += 1;
      M = e0(J, y(_0, F), !0);
      var i0 = y(s0, l(n, M)), c0 = 1;
      for (N = p - 1; N !== -1; --N) i0[N] < 0 && (c0 = I(c0, -0.999 * i0[N]));
      if (D = u(e, o(M, c0)), s0 = u(r, l(n, D)), !h(b(s0, 0))) return { solution: e, message: "", iterations: S0 };
      if (e = D, F < i) return { solution: D, message: "", iterations: S0 };
      if (c) {
        var g0 = l(t, _0), w = l(n, _0);
        for (_ = !0, N = p - 1; N !== -1; --N) if (g0 * w[N] < 0) {
          _ = !1;
          break;
        }
      } else
        e[m - 1] >= 0 ? _ = !1 : _ = !0;
      if (_) return { solution: D, message: "Unbounded", iterations: S0 };
    }
    return { solution: e, message: "maximum iteration count exceeded", iterations: S0 };
  }, numeric._solveLP = function S(t, n, r, i, s) {
    var e = t.length, c = r.length, m;
    numeric.sum, numeric.log, numeric.mul;
    var f = numeric.sub, o = numeric.dot;
    numeric.div, numeric.add;
    var u = numeric.rep([e], 0).concat([1]), l = numeric.rep([c, 1], -1), y = numeric.blockMatrix([[n, l]]), v = r, m = numeric.rep([e], 0).concat(Math.max(0, numeric.sup(numeric.neg(r))) + 1), p = numeric.__solveLP(u, y, v, i, s, m, !1), D = numeric.clone(p.solution);
    D.length = e;
    var _ = numeric.inf(f(r, o(n, D)));
    if (_ < 0)
      return { solution: NaN, message: "Infeasible", iterations: p.iterations };
    var L = numeric.__solveLP(t, n, r, i, s - p.iterations, D, !0);
    return L.iterations += p.iterations, L;
  }, numeric.solveLP = function S(t, n, r, i, s, e, c) {
    if (typeof c > "u" && (c = 1e3), typeof e > "u" && (e = numeric.epsilon), typeof i > "u") return numeric._solveLP(t, n, r, e, c);
    var f = i.length, o = i[0].length, u = n.length, l = numeric.echelonize(i), y = numeric.rep([o], 0), v = l.P, m = [], p;
    for (p = v.length - 1; p !== -1; --p) y[v[p]] = 1;
    for (p = o - 1; p !== -1; --p) y[p] === 0 && m.push(p);
    var D = numeric.getRange, _ = numeric.linspace(0, f - 1), L = numeric.linspace(0, u - 1), F = D(i, _, m), x = D(n, L, v), z = D(n, L, m), R = numeric.dot, I = numeric.sub, h = R(x, l.I), b = I(z, R(h, F)), Z = I(r, R(h, s)), G = Array(v.length), J = Array(m.length);
    for (p = v.length - 1; p !== -1; --p) G[p] = t[v[p]];
    for (p = m.length - 1; p !== -1; --p) J[p] = t[m[p]];
    var e0 = I(J, R(G, R(l.I, F))), s0 = numeric._solveLP(e0, b, Z, e, c), S0 = s0.solution;
    if (S0 !== S0) return s0;
    var D0 = R(l.I, I(s, R(F, S0))), _0 = Array(t.length);
    for (p = v.length - 1; p !== -1; --p) _0[v[p]] = D0[p];
    for (p = m.length - 1; p !== -1; --p) _0[m[p]] = S0[p];
    return { solution: _0, message: s0.message, iterations: s0.iterations };
  }, numeric.MPStoLP = function S(t) {
    t instanceof String && t.split(`
`);
    var n = 0, r = ["Initial state", "NAME", "ROWS", "COLUMNS", "RHS", "BOUNDS", "ENDATA"], i = t.length, s, e, c, f = 0, o = {}, u = [], l = 0, y = {}, v = 0, m, p = [], D = [], _ = [];
    function L(I) {
      throw new Error("MPStoLP: " + I + `
Line ` + s + ": " + t[s] + `
Current state: ` + r[n] + `
`);
    }
    for (s = 0; s < i; ++s) {
      c = t[s];
      var F = c.match(/\S*/g), x = [];
      for (e = 0; e < F.length; ++e) F[e] !== "" && x.push(F[e]);
      if (x.length !== 0) {
        for (e = 0; e < r.length && c.substr(0, r[e].length) !== r[e]; ++e) ;
        if (e < r.length) {
          if (n = e, e === 1 && (m = x[1]), e === 6) return { name: m, c: p, A: numeric.transpose(D), b: _, rows: o, vars: y };
          continue;
        }
        switch (n) {
          case 0:
          case 1:
            L("Unexpected line");
          case 2:
            switch (x[0]) {
              case "N":
                f === 0 ? f = x[1] : L("Two or more N rows");
                break;
              case "L":
                o[x[1]] = l, u[l] = 1, _[l] = 0, ++l;
                break;
              case "G":
                o[x[1]] = l, u[l] = -1, _[l] = 0, ++l;
                break;
              case "E":
                o[x[1]] = l, u[l] = 0, _[l] = 0, ++l;
                break;
              default:
                L("Parse error " + numeric.prettyPrint(x));
            }
            break;
          case 3:
            y.hasOwnProperty(x[0]) || (y[x[0]] = v, p[v] = 0, D[v] = numeric.rep([l], 0), ++v);
            var z = y[x[0]];
            for (e = 1; e < x.length; e += 2) {
              if (x[e] === f) {
                p[z] = parseFloat(x[e + 1]);
                continue;
              }
              var R = o[x[e]];
              D[z][R] = (u[R] < 0 ? -1 : 1) * parseFloat(x[e + 1]);
            }
            break;
          case 4:
            for (e = 1; e < x.length; e += 2) _[o[x[e]]] = (u[o[x[e]]] < 0 ? -1 : 1) * parseFloat(x[e + 1]);
            break;
          case 5:
            break;
          case 6:
            L("Internal error");
        }
      }
    }
    L("Reached end of file without ENDATA");
  }, numeric.seedrandom = { pow: Math.pow, random: Math.random }, function(S, t, n, r, i, s, e) {
    t.seedrandom = function(y, v) {
      var m = [], p;
      return y = o(f(
        v ? [y, S] : arguments.length ? y : [(/* @__PURE__ */ new Date()).getTime(), S, window],
        3
      ), m), p = new c(m), o(p.S, S), t.random = function() {
        for (var _ = p.g(r), L = e, F = 0; _ < i; )
          _ = (_ + F) * n, L *= n, F = p.g(1);
        for (; _ >= s; )
          _ /= 2, L /= 2, F >>>= 1;
        return (_ + F) / L;
      }, y;
    };
    function c(l) {
      var y, v, m = this, p = l.length, D = 0, _ = m.i = m.j = m.m = 0;
      for (m.S = [], m.c = [], p || (l = [p++]); D < n; )
        m.S[D] = D++;
      for (D = 0; D < n; D++)
        y = m.S[D], _ = u(_ + y + l[D % p]), v = m.S[_], m.S[D] = v, m.S[_] = y;
      m.g = function(F) {
        var x = m.S, z = u(m.i + 1), R = x[z], I = u(m.j + R), h = x[I];
        x[z] = h, x[I] = R;
        for (var b = x[u(R + h)]; --F; )
          z = u(z + 1), R = x[z], I = u(I + R), h = x[I], x[z] = h, x[I] = R, b = b * n + x[u(R + h)];
        return m.i = z, m.j = I, b;
      }, m.g(n);
    }
    function f(l, y, v, m, p) {
      if (v = [], p = typeof l, y && p == "object") {
        for (m in l)
          if (m.indexOf("S") < 5)
            try {
              v.push(f(l[m], y - 1));
            } catch {
            }
      }
      return v.length ? v : l + (p != "string" ? "\0" : "");
    }
    function o(l, y, v, m) {
      for (l += "", v = 0, m = 0; m < l.length; m++)
        y[u(m)] = u((v ^= y[u(m)] * 19) + l.charCodeAt(m));
      l = "";
      for (m in y)
        l += String.fromCharCode(y[m]);
      return l;
    }
    function u(l) {
      return l & n - 1;
    }
    e = t.pow(n, r), i = t.pow(2, i), s = i * 2, o(t.random(), S);
  }(
    [],
    // pool: entropy pool starts empty
    numeric.seedrandom,
    // math: package containing random, pow, and seedrandom
    256,
    // width: each RC4 output is 0 <= x < 256
    6,
    // chunks: at least six RC4 outputs for each double
    52
    // significance: there are 52 significant digits in a double
  ), function(S) {
    function t(f) {
      if (typeof f != "object")
        return f;
      var o = [], u, l = f.length;
      for (u = 0; u < l; u++) o[u + 1] = t(f[u]);
      return o;
    }
    function n(f) {
      if (typeof f != "object")
        return f;
      var o = [], u, l = f.length;
      for (u = 1; u < l; u++) o[u - 1] = n(f[u]);
      return o;
    }
    function r(f, o, u) {
      var l, y, v, m, p;
      for (v = 1; v <= u; v = v + 1) {
        for (f[v][v] = 1 / f[v][v], p = -f[v][v], l = 1; l < v; l = l + 1)
          f[l][v] = p * f[l][v];
        if (m = v + 1, u < m)
          break;
        for (y = m; y <= u; y = y + 1)
          for (p = f[v][y], f[v][y] = 0, l = 1; l <= v; l = l + 1)
            f[l][y] = f[l][y] + p * f[l][v];
      }
    }
    function i(f, o, u, l) {
      var y, v, m, p;
      for (v = 1; v <= u; v = v + 1) {
        for (p = 0, y = 1; y < v; y = y + 1)
          p = p + f[y][v] * l[y];
        l[v] = (l[v] - p) / f[v][v];
      }
      for (m = 1; m <= u; m = m + 1)
        for (v = u + 1 - m, l[v] = l[v] / f[v][v], p = -l[v], y = 1; y < v; y = y + 1)
          l[y] = l[y] + p * f[y][v];
    }
    function s(f, o, u, l) {
      var y, v, m, p, D, _;
      for (v = 1; v <= u; v = v + 1) {
        if (l[1] = v, _ = 0, m = v - 1, m < 1) {
          if (_ = f[v][v] - _, _ <= 0)
            break;
          f[v][v] = Math.sqrt(_);
        } else {
          for (p = 1; p <= m; p = p + 1) {
            for (D = f[p][v], y = 1; y < p; y = y + 1)
              D = D - f[y][v] * f[y][p];
            D = D / f[p][p], f[p][v] = D, _ = _ + D * D;
          }
          if (_ = f[v][v] - _, _ <= 0)
            break;
          f[v][v] = Math.sqrt(_);
        }
        l[1] = 0;
      }
    }
    function e(f, o, u, l, y, v, m, p, D, _, L, F, x, z, R, I) {
      var h, b, Z, G, J, e0, s0, S0, D0, _0, N, M, O, t0, i0, c0, g0, w, d, E, Q, j, X, $, h0, d0, q;
      O = Math.min(l, _), Z = 2 * l + O * (O + 5) / 2 + 2 * _ + 1, $ = 1e-60;
      do
        $ = $ + $, h0 = 1 + 0.1 * $, d0 = 1 + 0.2 * $;
      while (h0 <= 1 || d0 <= 1);
      for (h = 1; h <= l; h = h + 1)
        R[h] = o[h];
      for (h = l + 1; h <= Z; h = h + 1)
        R[h] = 0;
      for (h = 1; h <= _; h = h + 1)
        F[h] = 0;
      if (J = [], I[1] === 0) {
        if (s(f, u, l, J), J[1] !== 0) {
          I[1] = 2;
          return;
        }
        i(f, u, l, o), r(f, u, l);
      } else {
        for (b = 1; b <= l; b = b + 1)
          for (y[b] = 0, h = 1; h <= b; h = h + 1)
            y[b] = y[b] + f[h][b] * o[h];
        for (b = 1; b <= l; b = b + 1)
          for (o[b] = 0, h = b; h <= l; h = h + 1)
            o[b] = o[b] + f[b][h] * y[h];
      }
      for (v[1] = 0, b = 1; b <= l; b = b + 1)
        for (y[b] = o[b], v[1] = v[1] + R[b] * y[b], R[b] = 0, h = b + 1; h <= l; h = h + 1)
          f[h][b] = 0;
      for (v[1] = -v[1] / 2, I[1] = 0, s0 = l, S0 = s0 + l, N = S0 + O, D0 = N + O + 1, _0 = D0 + O * (O + 1) / 2, t0 = _0 + _, h = 1; h <= _; h = h + 1) {
        for (c0 = 0, b = 1; b <= l; b = b + 1)
          c0 = c0 + m[b][h] * m[b][h];
        R[t0 + h] = Math.sqrt(c0);
      }
      x = 0, z[1] = 0, z[2] = 0;
      function K() {
        for (z[1] = z[1] + 1, Z = _0, h = 1; h <= _; h = h + 1) {
          for (Z = Z + 1, c0 = -p[h], b = 1; b <= l; b = b + 1)
            c0 = c0 + m[b][h] * y[b];
          if (Math.abs(c0) < $ && (c0 = 0), h > L)
            R[Z] = c0;
          else if (R[Z] = -Math.abs(c0), c0 > 0) {
            for (b = 1; b <= l; b = b + 1)
              m[b][h] = -m[b][h];
            p[h] = -p[h];
          }
        }
        for (h = 1; h <= x; h = h + 1)
          R[_0 + F[h]] = 0;
        for (M = 0, i0 = 0, h = 1; h <= _; h = h + 1)
          R[_0 + h] < i0 * R[t0 + h] && (M = h, i0 = R[_0 + h] / R[t0 + h]);
        return M === 0 ? 999 : 0;
      }
      function n0() {
        for (h = 1; h <= l; h = h + 1) {
          for (c0 = 0, b = 1; b <= l; b = b + 1)
            c0 = c0 + f[b][h] * m[b][M];
          R[h] = c0;
        }
        for (G = s0, h = 1; h <= l; h = h + 1)
          R[G + h] = 0;
        for (b = x + 1; b <= l; b = b + 1)
          for (h = 1; h <= l; h = h + 1)
            R[G + h] = R[G + h] + f[h][b] * R[b];
        for (j = !0, h = x; h >= 1; h = h - 1) {
          for (c0 = R[h], Z = D0 + h * (h + 3) / 2, G = Z - h, b = h + 1; b <= x; b = b + 1)
            c0 = c0 - R[Z] * R[S0 + b], Z = Z + b;
          if (c0 = c0 / R[G], R[S0 + h] = c0, F[h] < L || c0 < 0)
            break;
          j = !1, e0 = h;
        }
        if (!j)
          for (g0 = R[N + e0] / R[S0 + e0], h = 1; h <= x && !(F[h] < L || R[S0 + h] < 0); h = h + 1)
            i0 = R[N + h] / R[S0 + h], i0 < g0 && (g0 = i0, e0 = h);
        for (c0 = 0, h = s0 + 1; h <= s0 + l; h = h + 1)
          c0 = c0 + R[h] * R[h];
        if (Math.abs(c0) <= $) {
          if (j)
            return I[1] = 1, 999;
          for (h = 1; h <= x; h = h + 1)
            R[N + h] = R[N + h] - g0 * R[S0 + h];
          return R[N + x + 1] = R[N + x + 1] + g0, 700;
        } else {
          for (c0 = 0, h = 1; h <= l; h = h + 1)
            c0 = c0 + R[s0 + h] * m[h][M];
          for (w = -R[_0 + M] / c0, X = !0, j || g0 < w && (w = g0, X = !1), h = 1; h <= l; h = h + 1)
            y[h] = y[h] + w * R[s0 + h], Math.abs(y[h]) < $ && (y[h] = 0);
          for (v[1] = v[1] + w * c0 * (w / 2 + R[N + x + 1]), h = 1; h <= x; h = h + 1)
            R[N + h] = R[N + h] - w * R[S0 + h];
          if (R[N + x + 1] = R[N + x + 1] + w, X) {
            for (x = x + 1, F[x] = M, Z = D0 + (x - 1) * x / 2 + 1, h = 1; h <= x - 1; h = h + 1)
              R[Z] = R[h], Z = Z + 1;
            if (x === l)
              R[Z] = R[l];
            else {
              for (h = l; h >= x + 1 && !(R[h] === 0 || (d = Math.max(Math.abs(R[h - 1]), Math.abs(R[h])), E = Math.min(Math.abs(R[h - 1]), Math.abs(R[h])), R[h - 1] >= 0 ? i0 = Math.abs(d * Math.sqrt(1 + E * E / (d * d))) : i0 = -Math.abs(d * Math.sqrt(1 + E * E / (d * d))), d = R[h - 1] / i0, E = R[h] / i0, d === 1)); h = h - 1)
                if (d === 0)
                  for (R[h - 1] = E * i0, b = 1; b <= l; b = b + 1)
                    i0 = f[b][h - 1], f[b][h - 1] = f[b][h], f[b][h] = i0;
                else
                  for (R[h - 1] = i0, Q = E / (1 + d), b = 1; b <= l; b = b + 1)
                    i0 = d * f[b][h - 1] + E * f[b][h], f[b][h] = Q * (f[b][h - 1] + i0) - f[b][h], f[b][h - 1] = i0;
              R[Z] = R[x];
            }
          } else {
            for (c0 = -p[M], b = 1; b <= l; b = b + 1)
              c0 = c0 + y[b] * m[b][M];
            if (M > L)
              R[_0 + M] = c0;
            else if (R[_0 + M] = -Math.abs(c0), c0 > 0) {
              for (b = 1; b <= l; b = b + 1)
                m[b][M] = -m[b][M];
              p[M] = -p[M];
            }
            return 700;
          }
        }
        return 0;
      }
      function f0() {
        if (Z = D0 + e0 * (e0 + 1) / 2 + 1, G = Z + e0, R[G] === 0 || (d = Math.max(Math.abs(R[G - 1]), Math.abs(R[G])), E = Math.min(Math.abs(R[G - 1]), Math.abs(R[G])), R[G - 1] >= 0 ? i0 = Math.abs(d * Math.sqrt(1 + E * E / (d * d))) : i0 = -Math.abs(d * Math.sqrt(1 + E * E / (d * d))), d = R[G - 1] / i0, E = R[G] / i0, d === 1))
          return 798;
        if (d === 0) {
          for (h = e0 + 1; h <= x; h = h + 1)
            i0 = R[G - 1], R[G - 1] = R[G], R[G] = i0, G = G + h;
          for (h = 1; h <= l; h = h + 1)
            i0 = f[h][e0], f[h][e0] = f[h][e0 + 1], f[h][e0 + 1] = i0;
        } else {
          for (Q = E / (1 + d), h = e0 + 1; h <= x; h = h + 1)
            i0 = d * R[G - 1] + E * R[G], R[G] = Q * (R[G - 1] + i0) - R[G], R[G - 1] = i0, G = G + h;
          for (h = 1; h <= l; h = h + 1)
            i0 = d * f[h][e0] + E * f[h][e0 + 1], f[h][e0 + 1] = Q * (f[h][e0] + i0) - f[h][e0 + 1], f[h][e0] = i0;
        }
        return 0;
      }
      function l0() {
        for (G = Z - e0, h = 1; h <= e0; h = h + 1)
          R[G] = R[Z], Z = Z + 1, G = G + 1;
        return R[N + e0] = R[N + e0 + 1], F[e0] = F[e0 + 1], e0 = e0 + 1, e0 < x ? 797 : 0;
      }
      function a() {
        return R[N + x] = R[N + x + 1], R[N + x + 1] = 0, F[x] = 0, x = x - 1, z[2] = z[2] + 1, 0;
      }
      for (q = 0; ; ) {
        if (q = K(), q === 999)
          return;
        for (; q = n0(), q !== 0; ) {
          if (q === 999)
            return;
          if (q === 700)
            if (e0 === x)
              a();
            else {
              for (; f0(), q = l0(), q === 797; )
                ;
              a();
            }
        }
      }
    }
    function c(f, o, u, l, y, v) {
      f = t(f), o = t(o), u = t(u);
      var m, p, D, _, L, F = [], x = [], z = [], R = [], I = [], h;
      if (y = y || 0, v = v ? t(v) : [void 0, 0], l = l ? t(l) : [], p = f.length - 1, D = u[1].length - 1, !l)
        for (m = 1; m <= D; m = m + 1)
          l[m] = 0;
      for (m = 1; m <= D; m = m + 1)
        x[m] = 0;
      for (_ = 0, L = Math.min(p, D), m = 1; m <= p; m = m + 1)
        z[m] = 0;
      for (F[1] = 0, m = 1; m <= 2 * p + L * (L + 5) / 2 + 2 * D + 1; m = m + 1)
        R[m] = 0;
      for (m = 1; m <= 2; m = m + 1)
        I[m] = 0;
      return e(
        f,
        o,
        p,
        p,
        z,
        F,
        u,
        l,
        p,
        D,
        y,
        x,
        _,
        I,
        R,
        v
      ), h = "", v[1] === 1 && (h = "constraints are inconsistent, no solution!"), v[1] === 2 && (h = "matrix D in quadratic function is not positive definite!"), {
        solution: n(z),
        value: n(F),
        unconstrained_solution: n(o),
        iterations: n(I),
        iact: n(x),
        message: h
      };
    }
    S.solveQP = c;
  }(numeric), numeric.svd = function S(t) {
    var n, r = numeric.epsilon, i = 1e-64 / r, s = 50, e = 0, c = 0, f = 0, o = 0, u = 0, l = numeric.clone(t), y = l.length, v = l[0].length;
    if (y < v) throw "Need more rows than columns";
    var m = new Array(v), p = new Array(v);
    for (c = 0; c < v; c++) m[c] = p[c] = 0;
    var D = numeric.rep([v, v], 0);
    function _(J, e0) {
      return J = Math.abs(J), e0 = Math.abs(e0), J > e0 ? J * Math.sqrt(1 + e0 * e0 / J / J) : e0 == 0 ? J : e0 * Math.sqrt(1 + J * J / e0 / e0);
    }
    var L = 0, F = 0, x = 0, z = 0, R = 0, I = 0, h = 0;
    for (c = 0; c < v; c++) {
      for (m[c] = F, h = 0, u = c + 1, f = c; f < y; f++)
        h += l[f][c] * l[f][c];
      if (h <= i)
        F = 0;
      else
        for (L = l[c][c], F = Math.sqrt(h), L >= 0 && (F = -F), x = L * F - h, l[c][c] = L - F, f = u; f < v; f++) {
          for (h = 0, o = c; o < y; o++)
            h += l[o][c] * l[o][f];
          for (L = h / x, o = c; o < y; o++)
            l[o][f] += L * l[o][c];
        }
      for (p[c] = F, h = 0, f = u; f < v; f++)
        h = h + l[c][f] * l[c][f];
      if (h <= i)
        F = 0;
      else {
        for (L = l[c][c + 1], F = Math.sqrt(h), L >= 0 && (F = -F), x = L * F - h, l[c][c + 1] = L - F, f = u; f < v; f++) m[f] = l[c][f] / x;
        for (f = u; f < y; f++) {
          for (h = 0, o = u; o < v; o++)
            h += l[f][o] * l[c][o];
          for (o = u; o < v; o++)
            l[f][o] += h * m[o];
        }
      }
      R = Math.abs(p[c]) + Math.abs(m[c]), R > z && (z = R);
    }
    for (c = v - 1; c != -1; c += -1) {
      if (F != 0) {
        for (x = F * l[c][c + 1], f = u; f < v; f++)
          D[f][c] = l[c][f] / x;
        for (f = u; f < v; f++) {
          for (h = 0, o = u; o < v; o++)
            h += l[c][o] * D[o][f];
          for (o = u; o < v; o++)
            D[o][f] += h * D[o][c];
        }
      }
      for (f = u; f < v; f++)
        D[c][f] = 0, D[f][c] = 0;
      D[c][c] = 1, F = m[c], u = c;
    }
    for (c = v - 1; c != -1; c += -1) {
      for (u = c + 1, F = p[c], f = u; f < v; f++)
        l[c][f] = 0;
      if (F != 0) {
        for (x = l[c][c] * F, f = u; f < v; f++) {
          for (h = 0, o = u; o < y; o++) h += l[o][c] * l[o][f];
          for (L = h / x, o = c; o < y; o++) l[o][f] += L * l[o][c];
        }
        for (f = c; f < y; f++) l[f][c] = l[f][c] / F;
      } else
        for (f = c; f < y; f++) l[f][c] = 0;
      l[c][c] += 1;
    }
    for (r = r * z, o = v - 1; o != -1; o += -1)
      for (var b = 0; b < s; b++) {
        var Z = !1;
        for (u = o; u != -1; u += -1) {
          if (Math.abs(m[u]) <= r) {
            Z = !0;
            break;
          }
          if (Math.abs(p[u - 1]) <= r)
            break;
        }
        if (!Z) {
          e = 0, h = 1;
          var G = u - 1;
          for (c = u; c < o + 1 && (L = h * m[c], m[c] = e * m[c], !(Math.abs(L) <= r)); c++)
            for (F = p[c], x = _(L, F), p[c] = x, e = F / x, h = -L / x, f = 0; f < y; f++)
              R = l[f][G], I = l[f][c], l[f][G] = R * e + I * h, l[f][c] = -R * h + I * e;
        }
        if (I = p[o], u == o) {
          if (I < 0)
            for (p[o] = -I, f = 0; f < v; f++)
              D[f][o] = -D[f][o];
          break;
        }
        if (b >= s - 1)
          throw "Error: no convergence.";
        for (z = p[u], R = p[o - 1], F = m[o - 1], x = m[o], L = ((R - I) * (R + I) + (F - x) * (F + x)) / (2 * x * R), F = _(L, 1), L < 0 ? L = ((z - I) * (z + I) + x * (R / (L - F) - x)) / z : L = ((z - I) * (z + I) + x * (R / (L + F) - x)) / z, e = 1, h = 1, c = u + 1; c < o + 1; c++) {
          for (F = m[c], R = p[c], x = h * F, F = e * F, I = _(L, x), m[c - 1] = I, e = L / I, h = x / I, L = z * e + F * h, F = -z * h + F * e, x = R * h, R = R * e, f = 0; f < v; f++)
            z = D[f][c - 1], I = D[f][c], D[f][c - 1] = z * e + I * h, D[f][c] = -z * h + I * e;
          for (I = _(L, x), p[c - 1] = I, e = L / I, h = x / I, L = e * F + h * R, z = -h * F + e * R, f = 0; f < y; f++)
            R = l[f][c - 1], I = l[f][c], l[f][c - 1] = R * e + I * h, l[f][c] = -R * h + I * e;
        }
        m[u] = 0, m[o] = L, p[o] = z;
      }
    for (c = 0; c < p.length; c++)
      p[c] < r && (p[c] = 0);
    for (c = 0; c < v; c++)
      for (f = c - 1; f >= 0; f--)
        if (p[f] < p[c]) {
          for (e = p[f], p[f] = p[c], p[c] = e, o = 0; o < l.length; o++)
            n = l[o][c], l[o][c] = l[o][f], l[o][f] = n;
          for (o = 0; o < D.length; o++)
            n = D[o][c], D[o][c] = D[o][f], D[o][f] = n;
          c = f;
        }
    return { U: l, S: p, V: D };
  };
})(numeric1_2_6);
const numeric$2 = /* @__PURE__ */ getDefaultExportFromCjs(numeric1_2_6);
var numeric$1 = numeric1_2_6, forwardSHT = function(S, t, n, r) {
  var i = t.length, s = (S + 1) * (S + 1), e, c = [,];
  s > i && console.log("The SHT degree is too high for the number of data points"), n == 0 && (t = convertCart2Sph(t));
  for (var f = 0; f < t.length; f++)
    c[f] = t[f][2];
  Y_N = computeRealSH(S, t), r == 0 ? e = numeric$1.mul(1 / i, Y_N) : e = pinv_direct(numeric$1.transpose(Y_N));
  var o = numeric$1.dotMV(e, c);
  return o;
}, convertCart2Sph = function(S, t) {
  for (var n, r, i, s = new Array(S.length), e = 0; e < S.length; e++)
    n = Math.atan2(S[e][1], S[e][0]), r = Math.atan2(S[e][2], Math.sqrt(S[e][0] * S[e][0] + S[e][1] * S[e][1])), t == 1 ? s[e] = [n, r] : (i = Math.sqrt(S[e][0] * S[e][0] + S[e][1] * S[e][1] + S[e][2] * S[e][2]), s[e] = [n, r, i]);
  return s;
}, computeRealSH = function(S, t) {
  for (var n = new Array(t.length), r = new Array(t.length), i = 0; i < t.length; i++)
    n[i] = t[i][0], r[i] = t[i][1];
  var s = new Array(2 * S + 1);
  n.length;
  for (var e = (S + 1) * (S + 1), c = 0, f = 0, o, u = numeric$1.sin(r), l = 0, y = new Array(e), v, m, p, D, i = 0; i < 2 * S + 1; i++) s[i] = factorial(i);
  for (var _ = 0; _ < S + 1; _++) {
    if (_ == 0) {
      var L = new Array(n.length);
      L.fill(1), y[_] = L, l = 1;
    } else {
      o = recurseLegendrePoly(_, u, c, f), v = Math.sqrt(2 * _ + 1);
      for (var F = 0; F < _ + 1; F++)
        F == 0 ? y[l + _] = numeric$1.mul(v, o[F]) : (m = v * Math.sqrt(2 * s[_ - F] / s[_ + F]), p = numeric$1.cos(numeric$1.mul(F, n)), D = numeric$1.sin(numeric$1.mul(F, n)), y[l + _ - F] = numeric$1.mul(m, numeric$1.mul(o[F], D)), y[l + _ + F] = numeric$1.mul(m, numeric$1.mul(o[F], p)));
      l = l + 2 * _ + 1;
    }
    f = c, c = o;
  }
  return y;
}, factorial = function(S) {
  return S === 0 ? 1 : S * factorial(S - 1);
}, recurseLegendrePoly = function(S, t, n, r) {
  var i = new Array(S + 1);
  switch (S) {
    case 1:
      var u = numeric$1.mul(t, t), s = t, e = numeric$1.sqrt(numeric$1.sub(1, u));
      i[0] = s, i[1] = e;
      break;
    case 2:
      var u = numeric$1.mul(t, t), c = numeric$1.mul(3, u);
      c = numeric$1.sub(c, 1), c = numeric$1.div(c, 2);
      var f = numeric$1.sub(1, u);
      f = numeric$1.sqrt(f), f = numeric$1.mul(3, f), f = numeric$1.mul(f, t);
      var o = numeric$1.sub(1, u);
      o = numeric$1.mul(3, o), i[0] = c, i[1] = f, i[2] = o;
      break;
    default:
      var u = numeric$1.mul(t, t), l = numeric$1.sub(1, u), y = 2 * S - 1, v = 1;
      if (y % 2 == 0)
        for (var m = 1; m < y / 2 + 1; m++) v = v * 2 * m;
      else
        for (var m = 1; m < (y + 1) / 2 + 1; m++) v = v * (2 * m - 1);
      i[S] = numeric$1.mul(v, numeric$1.pow(l, S / 2)), i[S - 1] = numeric$1.mul(2 * S - 1, numeric$1.mul(t, n[S - 1]));
      for (var p = 0; p < S - 1; p++) {
        var D = numeric$1.mul(2 * S - 1, numeric$1.mul(t, n[p])), _ = numeric$1.mul(S + p - 1, r[p]);
        i[p] = numeric$1.div(numeric$1.sub(D, _), S - p);
      }
  }
  return i;
}, pinv_direct = function(S) {
  var t = numeric$1.transpose(S);
  return numeric$1.dot(numeric$1.inv(numeric$1.dot(t, S)), t);
}, getSHrotMtx = function(S, t) {
  var n = (t + 1) * (t + 1), r = numeric$1.rep([n, n], 0);
  r[0][0] = 1;
  var i = numeric$1.rep([3, 3], 0);
  i[0][0] = S[1][1], i[0][1] = S[1][2], i[0][2] = S[1][0], i[1][0] = S[2][1], i[1][1] = S[2][2], i[1][2] = S[2][0], i[2][0] = S[0][1], i[2][1] = S[0][2], i[2][2] = S[0][0], r = numeric$1.setBlock(r, [1, 1], [3, 3], i);
  for (var s = i, e = 3, c = 2; c < t + 1; c++) {
    for (var f = numeric$1.rep([2 * c + 1, 2 * c + 1], 0), o = -c; o < c + 1; o++)
      for (var u = -c; u < c + 1; u++) {
        var l, y, v, m, p;
        o == 0 ? l = 1 : l = 0, Math.abs(u) == c ? y = 2 * c * (2 * c - 1) : y = c * c - u * u, v = Math.sqrt((c * c - o * o) / y), m = Math.sqrt((1 + l) * (c + Math.abs(o) - 1) * (c + Math.abs(o)) / y) * (1 - 2 * l) * 0.5, p = Math.sqrt((c - Math.abs(o) - 1) * (c - Math.abs(o)) / y) * (1 - l) * -0.5, v != 0 && (v = v * U(c, o, u, i, s)), m != 0 && (m = m * V(c, o, u, i, s)), p != 0 && (p = p * W(c, o, u, i, s)), f[o + c][u + c] = v + m + p;
      }
    r = numeric$1.setBlock(r, [e + 1, e + 1], [e + 2 * c + 1, e + 2 * c + 1], f), s = f, e = e + 2 * c + 1;
  }
  return r;
};
function U(S, t, n, r, i) {
  return P(0, S, t, n, r, i);
}
function V(S, t, n, r, i) {
  var s, e, c, f;
  return t == 0 ? (s = P(1, S, 1, n, r, i), e = P(-1, S, -1, n, r, i), c = s + e) : t > 0 ? (t == 1 ? f = 1 : f = 0, s = P(1, S, t - 1, n, r, i), e = P(-1, S, -t + 1, n, r, i), c = s * Math.sqrt(1 + f) - e * (1 - f)) : (t == -1 ? f = 1 : f = 0, s = P(1, S, t + 1, n, r, i), e = P(-1, S, -t - 1, n, r, i), c = s * (1 - f) + e * Math.sqrt(1 + f)), c;
}
function W(S, t, n, r, i) {
  var s, e, c;
  return t == 0 ? console.error("should not be called") : t > 0 ? (s = P(1, S, t + 1, n, r, i), e = P(-1, S, -t - 1, n, r, i), c = s + e) : (s = P(1, S, t - 1, n, r, i), e = P(-1, S, -t + 1, n, r, i), c = s - e), c;
}
function P(S, t, n, r, i, s) {
  var e, c, f, o;
  return e = i[S + 1][2], c = i[S + 1][0], f = i[S + 1][1], r == -t ? o = e * s[n + t - 1][0] + c * s[n + t - 1][2 * t - 2] : r == t ? o = e * s[n + t - 1][2 * t - 2] - c * s[n + t - 1][0] : o = f * s[n + t - 1][r + t - 1], o;
}
var yawPitchRoll2Rzyx = function(S, t, n) {
  var r, i, s;
  n == 0 ? r = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : r = [[1, 0, 0], [0, Math.cos(n), Math.sin(n)], [0, -Math.sin(n), Math.cos(n)]], t == 0 ? i = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : i = [[Math.cos(t), 0, -Math.sin(t)], [0, 1, 0], [Math.sin(t), 0, Math.cos(t)]], S == 0 ? s = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : s = [[Math.cos(S), Math.sin(S), 0], [-Math.sin(S), Math.cos(S), 0], [0, 0, 1]];
  var e = numeric$1.dotMMsmall(i, s);
  return e = numeric$1.dotMMsmall(r, e), e;
}, forwardSHT_1 = forwardSHT, computeRealSH_1 = computeRealSH, factorial_1 = factorial, recurseLegendrePoly_1 = recurseLegendrePoly, getSHrotMtx_1 = getSHrotMtx, yawPitchRoll2Rzyx_1 = yawPitchRoll2Rzyx;
class monoEncoder {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.azim = 0, this.elev = 0, this.gains = new Array(this.nCh), this.gainNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gainNodes[r] = this.ctx.createGain(), this.gainNodes[r].channelCountMode = "explicit", this.gainNodes[r].channelCount = 1;
    this.updateGains();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.gainNodes[r]), this.gainNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateGains() {
    const t = computeRealSH_1(this.order, [
      [degreesToRadians(this.azim), degreesToRadians(this.elev)]
    ]);
    for (let n = 0; n < this.nCh; n++)
      this.gains[n] = t[n][0], this.gainNodes[n].gain.value = this.gains[n];
  }
}
var numeric = require("numeric"), jshlib = require("spherical-harmonic-transform"), convexhull = require("convex-hull");
function deg2rad(S) {
  var t = [], n = Math.PI / 180;
  for (let r = 0; r < S.length; r++)
    S[0].length == 3 ? t.push([
      S[r][0] * n,
      S[r][1] * n,
      S[r][2]
    ]) : S[0].length == 2 && t.push([
      S[r][0] * n,
      S[r][1] * n
    ]);
  return t;
}
function rad2deg(S) {
  var t = [], n = 180 / Math.PI;
  for (let r = 0; r < S.length; r++)
    S[0].length == 3 ? t.push([
      S[r][0] * n,
      S[r][1] * n,
      S[r][2]
    ]) : S[0].length == 2 && t.push([
      S[r][0] * n,
      S[r][1] * n
    ]);
  return t;
}
function getColumn(S, t) {
  return S.map(function(n) {
    return n[t];
  });
}
function sampleCircle(S) {
  for (var t = [], n = 360 / S, r = 0, i = 0; i < S; i++)
    t.push([r, 0, 1]), r += n;
  return t;
}
function getCircHarmonics(S, t) {
  var n = S, r = 2 * n + 1, i = t.length, s = new Array(r), e = new Array(i);
  t = numeric.mul(t, Math.PI / 180), e.fill(1 / Math.sqrt(2 * Math.PI)), s[0] = e;
  for (var c = 0; c < n; c++)
    s[2 * c + 1] = numeric.div(numeric.sin(numeric.mul(-(c + 1), t)), Math.sqrt(Math.PI)), s[2 * c + 2] = numeric.div(numeric.cos(numeric.mul(c + 1, t)), Math.sqrt(Math.PI));
  return s;
}
function getAmbisonicDecMtx(S, t) {
  var n = deg2rad(S), r = jshlib.convertSph2Cart(n), i = convexhull(r), s = i.length, e = n.length, c = new Array(s);
  for (let m = 0; m < s; m++) {
    let p = new Array(3);
    for (let L = 0; L < 3; L++)
      p[L] = r[i[m][L]];
    let D = numeric.inv(p), _ = [];
    for (let L = 0; L < 3; L++)
      for (let F = 0; F < 3; F++)
        _.push(D[F][L]);
    c[m] = _;
  }
  var f = getTdesign(2 * t), o = deg2rad(f), u = vbap3(o, i, c, e);
  u = numeric.transpose(u);
  var l = jshlib.computeRealSH(t, o);
  l = numeric.transpose(l);
  var y = o.length, v = numeric.dotMMsmall(u, l);
  return v = numeric.mul(1 / y, v), v;
}
var vbap3 = function(S, t, n, r) {
  var i = S.length, s = r, e = t.length;
  function c(u) {
    return Math.min.apply(null, u);
  }
  var f = new Array(i), o = jshlib.convertSph2Cart(S);
  for (let u = 0; u < i; u++) {
    let l = o[u], y = new Array(s);
    y.fill(0);
    for (let p = 0; p < e; p++) {
      let D = [], _ = [n[p][0], n[p][1], n[p][2]];
      if (D[0] = numeric.dotVV(_, l), _ = [n[p][3], n[p][4], n[p][5]], D[1] = numeric.dotVV(_, l), _ = [n[p][6], n[p][7], n[p][8]], D[2] = numeric.dotVV(_, l), c(D) > -1e-3) {
        let L = Math.sqrt(numeric.sum(numeric.pow(D, 2))), F = numeric.div(D, L);
        for (let x = 0; x < 3; x++)
          y[t[p][x]] = F[x];
        break;
      }
    }
    let v = Math.sqrt(numeric.sum(numeric.pow(y, 2))), m = numeric.div(y, v);
    f[u] = m;
  }
  return f;
};
function createNearestLookup(S, t) {
  var n = S.length, r = jshlib.convertSph2Cart(deg2rad(S)), i = Math.round(360 / t[0]) + 1, s = Math.round(180 / t[1]) + 1, e = new Array(i);
  e[0] = -180;
  for (let o = 1; o < i; o++)
    e[o] = e[o - 1] + t[0];
  var c = i * s, f = new Array(c);
  for (let o = 0; o < c; o++) {
    let u = [[o % i * t[0] - 180, Math.floor(o / i) * t[1] - 90]], l = jshlib.convertSph2Cart(deg2rad(u)), y = 1e3;
    for (let v = 0; v < n; v++) {
      let m = numeric.sum(numeric.pow(numeric.sub(l[0], r[v]), 2));
      m < y && (f[o] = v, y = m);
    }
  }
  return f;
}
function findNearest(S, t, n) {
  var r = S.length, i = [], s = [];
  for (let l = 0; l < r; l++)
    i.push(S[l][0] + 180), s.push(S[l][1] + 90);
  var e = Math.round(360 / n[0]) + 1, c = numeric.round(numeric.div(numeric.mod(i, 360), n[0])), f = numeric.round(numeric.div(s, n[1])), o = numeric.add(numeric.mul(f, e), c, 1), u = [];
  for (let l = 0; l < r; l++)
    u.push(t[o[l]]);
  return u;
}
function getTdesign(S) {
  if (S > 21)
    throw new Error("Designs of order greater than 21 are not implemented");
  if (S < 1)
    throw new Error("Order should be at least 1");
  var t = [
    [
      [0, 0, 1],
      [180, 0, 1]
    ],
    [
      [45, 35.26, 1],
      [-45, -35.26, 1],
      [135, -35.26, 1],
      [-135, 35.26, 1]
    ],
    [
      [0, 0, 1],
      [180, 0, 1],
      [90, 0, 1],
      [-90, 0, 1],
      [0, 90, 1],
      [0, -90, 1]
    ],
    [
      [0, -31.72, 1],
      [-58.28, 0, 1],
      [-90, 58.28, 1],
      [0, 31.72, 1],
      [-121.72, 0, 1],
      [90, -58.28, 1],
      [180, -31.72, 1],
      [121.72, 0, 1],
      [90, 58.28, 1],
      [180, 31.72, 1],
      [58.28, 0, 1],
      [-90, -58.28, 1]
    ],
    [
      [0, -31.72, 1],
      [-58.28, 0, 1],
      [-90, 58.28, 1],
      [0, 31.72, 1],
      [-121.72, 0, 1],
      [90, -58.28, 1],
      [180, -31.72, 1],
      [121.72, 0, 1],
      [90, 58.28, 1],
      [180, 31.72, 1],
      [58.28, 0, 1],
      [-90, -58.28, 1]
    ],
    [
      [26, 15.46, 1],
      [-26, -15.46, 1],
      [17.11, -24.99, 1],
      [-17.11, 24.99, 1],
      [154, -15.46, 1],
      [-154, 15.46, 1],
      [162.89, 24.99, 1],
      [-162.89, -24.99, 1],
      [72.89, 24.99, 1],
      [107.11, -24.99, 1],
      [116, 15.46, 1],
      [64, -15.46, 1],
      [-107.11, 24.99, 1],
      [-72.89, -24.99, 1],
      [-64, 15.46, 1],
      [-116, -15.46, 1],
      [32.25, 60.03, 1],
      [-147.75, 60.03, 1],
      [-57.75, 60.03, 1],
      [122.25, 60.03, 1],
      [-32.25, -60.03, 1],
      [147.75, -60.03, 1],
      [57.75, -60.03, 1],
      [-122.25, -60.03, 1]
    ],
    [
      [26, 15.46, 1],
      [-26, -15.46, 1],
      [17.11, -24.99, 1],
      [-17.11, 24.99, 1],
      [154, -15.46, 1],
      [-154, 15.46, 1],
      [162.89, 24.99, 1],
      [-162.89, -24.99, 1],
      [72.89, 24.99, 1],
      [107.11, -24.99, 1],
      [116, 15.46, 1],
      [64, -15.46, 1],
      [-107.11, 24.99, 1],
      [-72.89, -24.99, 1],
      [-64, 15.46, 1],
      [-116, -15.46, 1],
      [32.25, 60.03, 1],
      [-147.75, 60.03, 1],
      [-57.75, 60.03, 1],
      [122.25, 60.03, 1],
      [-32.25, -60.03, 1],
      [147.75, -60.03, 1],
      [57.75, -60.03, 1],
      [-122.25, -60.03, 1]
    ],
    [
      [-31.11, 53.65, 1],
      [110.82, 30.5, 1],
      [148.89, 53.65, 1],
      [32.21, -17.83, 1],
      [69.18, -30.5, 1],
      [-32.21, 17.83, 1],
      [-69.18, 30.5, 1],
      [-147.79, -17.83, 1],
      [-110.82, -30.5, 1],
      [147.79, 17.83, 1],
      [31.11, -53.65, 1],
      [-148.89, -53.65, 1],
      [-21.25, -47.78, 1],
      [-108.2, 38.78, 1],
      [158.75, -47.78, 1],
      [139.77, -14.09, 1],
      [-71.8, -38.78, 1],
      [-139.77, 14.09, 1],
      [71.8, 38.78, 1],
      [-40.23, -14.09, 1],
      [108.2, -38.78, 1],
      [40.23, 14.09, 1],
      [21.25, 47.78, 1],
      [-158.75, 47.78, 1],
      [106.65, -2.55, 1],
      [-2.66, -16.63, 1],
      [-73.35, -2.55, 1],
      [-98.84, 73.16, 1],
      [-177.34, 16.63, 1],
      [98.84, -73.16, 1],
      [177.34, -16.63, 1],
      [81.16, 73.16, 1],
      [2.66, 16.63, 1],
      [-81.16, -73.16, 1],
      [-106.65, 2.55, 1],
      [73.35, 2.55, 1]
    ],
    [
      [20.75, -3.55, 1],
      [-20.75, 3.55, 1],
      [-3.8, -20.7, 1],
      [3.8, 20.7, 1],
      [159.25, 3.55, 1],
      [-159.25, -3.55, 1],
      [-176.2, 20.7, 1],
      [176.2, -20.7, 1],
      [93.8, 20.7, 1],
      [86.2, -20.7, 1],
      [110.75, -3.55, 1],
      [69.25, 3.55, 1],
      [-86.2, 20.7, 1],
      [-93.8, -20.7, 1],
      [-69.25, -3.55, 1],
      [-110.75, 3.55, 1],
      [-9.94, 68.97, 1],
      [170.06, 68.97, 1],
      [-99.94, 68.97, 1],
      [80.06, 68.97, 1],
      [9.94, -68.97, 1],
      [-170.06, -68.97, 1],
      [99.94, -68.97, 1],
      [-80.06, -68.97, 1],
      [42.15, 17.57, 1],
      [-42.15, -17.57, 1],
      [23.12, -39.77, 1],
      [-23.12, 39.77, 1],
      [137.85, -17.57, 1],
      [-137.85, 17.57, 1],
      [156.88, 39.77, 1],
      [-156.88, -39.77, 1],
      [66.88, 39.77, 1],
      [113.12, -39.77, 1],
      [132.15, 17.57, 1],
      [47.85, -17.57, 1],
      [-113.12, 39.77, 1],
      [-66.88, -39.77, 1],
      [-47.85, 17.57, 1],
      [-132.15, -17.57, 1],
      [25.26, 44.98, 1],
      [-154.74, 44.98, 1],
      [-64.74, 44.98, 1],
      [115.26, 44.98, 1],
      [-25.26, -44.98, 1],
      [154.74, -44.98, 1],
      [64.74, -44.98, 1],
      [-115.26, -44.98, 1]
    ],
    [
      [144.09, -21.45, 1],
      [-33.81, -48.92, 1],
      [-35.91, -21.45, 1],
      [-115.87, 33.09, 1],
      [-146.19, 48.92, 1],
      [115.87, -33.09, 1],
      [146.19, -48.92, 1],
      [64.13, 33.09, 1],
      [33.81, 48.92, 1],
      [-64.13, -33.09, 1],
      [-144.09, 21.45, 1],
      [35.91, 21.45, 1],
      [-45.53, 1.95, 1],
      [177.26, 44.44, 1],
      [134.47, 1.95, 1],
      [87.21, -45.49, 1],
      [2.74, -44.44, 1],
      [-87.21, 45.49, 1],
      [-2.74, 44.44, 1],
      [-92.79, -45.49, 1],
      [-177.26, -44.44, 1],
      [92.79, 45.49, 1],
      [45.53, -1.95, 1],
      [-134.47, -1.95, 1],
      [15.59, -73.34, 1],
      [-85.4, 16.04, 1],
      [-164.41, -73.34, 1],
      [163.92, 4.42, 1],
      [-94.6, -16.04, 1],
      [-163.92, -4.42, 1],
      [94.6, 16.04, 1],
      [-16.08, 4.42, 1],
      [85.4, -16.04, 1],
      [16.08, -4.42, 1],
      [-15.59, 73.34, 1],
      [164.41, 73.34, 1],
      [-60.02, 25.27, 1],
      [151.41, 26.86, 1],
      [119.98, 25.27, 1],
      [46.63, -51.57, 1],
      [28.59, -26.86, 1],
      [-46.63, 51.57, 1],
      [-28.59, 26.86, 1],
      [-133.37, -51.57, 1],
      [-151.41, -26.86, 1],
      [133.37, 51.57, 1],
      [60.02, -25.27, 1],
      [-119.98, -25.27, 1],
      [-109.94, 6.91, 1],
      [172.65, -19.79, 1],
      [70.06, 6.91, 1],
      [-70.44, -68.94, 1],
      [7.35, 19.79, 1],
      [70.44, 68.94, 1],
      [-7.35, -19.79, 1],
      [109.56, -68.94, 1],
      [-172.65, 19.79, 1],
      [-109.56, 68.94, 1],
      [109.94, -6.91, 1],
      [-70.06, -6.91, 1]
    ],
    [
      [132.93, 7.69, 1],
      [-83.93, -23.73, 1],
      [8.47, 23.51, 1],
      [-113.34, 70.42, 1],
      [-103.27, -9.9, 1],
      [-33.24, -70.75, 1],
      [21.86, -26.46, 1],
      [-156.54, 47.78, 1],
      [-64.26, -7.72, 1],
      [165.78, 44.53, 1],
      [-25.2, 26.39, 1],
      [-97, -44.66, 1],
      [27.85, 9.77, 1],
      [153.21, -47.71, 1],
      [-155.06, 7.45, 1],
      [-11.84, -23.59, 1],
      [80.54, 23.72, 1],
      [-42.06, 70.44, 1],
      [-31.22, -9.84, 1],
      [38.84, -70.5, 1],
      [93.76, -26.29, 1],
      [-84.76, 47.61, 1],
      [7.76, -7.52, 1],
      [-122.28, 44.29, 1],
      [46.8, 26.64, 1],
      [-24.77, -44.57, 1],
      [99.89, 9.91, 1],
      [-134.78, -47.96, 1],
      [-83.09, 7.3, 1],
      [60.13, -23.34, 1],
      [152.64, 23.64, 1],
      [29.76, 70.68, 1],
      [40.78, -9.58, 1],
      [110.18, -70.39, 1],
      [165.65, -26.43, 1],
      [-12.99, 47.75, 1],
      [79.74, -7.31, 1],
      [-50.52, 44.26, 1],
      [118.92, 26.71, 1],
      [47.22, -44.31, 1],
      [171.93, 9.76, 1],
      [-62.51, -48.04, 1],
      [-11.12, 7.44, 1],
      [132.02, -23.33, 1],
      [-135.36, 23.39, 1],
      [102.37, 70.82, 1],
      [112.74, -9.49, 1],
      [-178.3, -70.58, 1],
      [-122.32, -26.67, 1],
      [59.08, 48, 1],
      [151.7, -7.38, 1],
      [21.38, 44.5, 1],
      [-169.01, 26.5, 1],
      [118.98, -44.25, 1],
      [-116.09, 9.52, 1],
      [9.65, -47.83, 1],
      [60.89, 7.68, 1],
      [-156.02, -23.57, 1],
      [-63.46, 23.31, 1],
      [174.93, 70.66, 1],
      [-175.29, -9.68, 1],
      [-105.95, -70.8, 1],
      [-50.19, -26.7, 1],
      [131.36, 48.01, 1],
      [-136.3, -7.64, 1],
      [93.56, 44.67, 1],
      [-97.08, 26.3, 1],
      [-169.16, -44.46, 1],
      [-44.13, 9.52, 1],
      [81.48, -47.62, 1]
    ],
    [
      [-154.47, 7.9, 1],
      [162.15, -63.36, 1],
      [25.53, 7.9, 1],
      [-81.26, -25.27, 1],
      [17.85, 63.36, 1],
      [81.26, 25.27, 1],
      [-17.85, -63.36, 1],
      [98.74, -25.27, 1],
      [-162.15, 63.36, 1],
      [-98.74, 25.27, 1],
      [154.47, -7.9, 1],
      [-25.53, -7.9, 1],
      [1.3, -10.47, 1],
      [-83.01, 79.45, 1],
      [-178.7, -10.47, 1],
      [100.48, 1.28, 1],
      [-96.99, -79.45, 1],
      [-100.48, -1.28, 1],
      [96.99, 79.45, 1],
      [-79.52, 1.28, 1],
      [83.01, -79.45, 1],
      [79.52, -1.28, 1],
      [-1.3, 10.47, 1],
      [178.7, 10.47, 1],
      [157.24, 13.15, 1],
      [31.14, -63.89, 1],
      [-22.76, 13.15, 1],
      [-75.78, 22.13, 1],
      [148.86, 63.89, 1],
      [75.78, -22.13, 1],
      [-148.86, -63.89, 1],
      [104.22, 22.13, 1],
      [-31.14, 63.89, 1],
      [-104.22, -22.13, 1],
      [-157.24, -13.15, 1],
      [22.76, -13.15, 1],
      [110.44, -60.62, 1],
      [-62.18, -9.87, 1],
      [-69.56, -60.62, 1],
      [-168.88, 27.37, 1],
      [-117.82, 9.87, 1],
      [168.88, -27.37, 1],
      [117.82, -9.87, 1],
      [11.12, 27.37, 1],
      [62.18, 9.87, 1],
      [-11.12, -27.37, 1],
      [-110.44, 60.62, 1],
      [69.56, 60.62, 1],
      [-125.93, -47.4, 1],
      [-126.67, -23.4, 1],
      [54.07, -47.4, 1],
      [-151.65, -33.24, 1],
      [-53.33, 23.4, 1],
      [151.65, 33.24, 1],
      [53.33, -23.4, 1],
      [28.35, -33.24, 1],
      [126.67, 23.4, 1],
      [-28.35, 33.24, 1],
      [125.93, 47.4, 1],
      [-54.07, 47.4, 1],
      [61.41, 37.54, 1],
      [41.19, 22.3, 1],
      [-118.59, 37.54, 1],
      [31.92, 44.13, 1],
      [138.81, -22.3, 1],
      [-31.92, -44.13, 1],
      [-138.81, 22.3, 1],
      [-148.08, 44.13, 1],
      [-41.19, -22.3, 1],
      [148.08, -44.13, 1],
      [-61.41, -37.54, 1],
      [118.59, -37.54, 1],
      [132.92, 4.73, 1],
      [6.45, -42.74, 1],
      [-47.08, 4.73, 1],
      [-83.07, 46.87, 1],
      [173.55, 42.74, 1],
      [83.07, -46.87, 1],
      [-173.55, -42.74, 1],
      [96.93, 46.87, 1],
      [-6.45, 42.74, 1],
      [-96.93, -46.87, 1],
      [-132.92, -4.73, 1],
      [47.08, -4.73, 1]
    ],
    [
      [-40.36, 68.7, 1],
      [61.12, 65.68, 1],
      [141.73, 70.75, 1],
      [-131.25, 72.32, 1],
      [-154.88, -12.62, 1],
      [-66.2, -9.78, 1],
      [26.36, -11.97, 1],
      [114.95, -12.58, 1],
      [37.02, 51.13, 1],
      [129.77, 51.95, 1],
      [-140.63, 50.15, 1],
      [-56.5, 47.88, 1],
      [-65.05, 12.58, 1],
      [25.12, 12.62, 1],
      [113.8, 9.78, 1],
      [-153.64, 11.97, 1],
      [-134.51, -9.73, 1],
      [-46.23, -8.37, 1],
      [47.91, -9.73, 1],
      [141.51, -8.73, 1],
      [-17.84, -44.1, 1],
      [69.37, -43.27, 1],
      [151.22, -42.67, 1],
      [-106.78, -40.18, 1],
      [-50.23, -51.95, 1],
      [39.37, -50.15, 1],
      [123.5, -47.88, 1],
      [-142.98, -51.13, 1],
      [-179.19, -60.75, 1],
      [-84.57, -54.07, 1],
      [5.39, -58.05, 1],
      [89.5, -60.75, 1],
      [-145.98, 31.02, 1],
      [-54.39, 26.43, 1],
      [28.92, 32.51, 1],
      [125.34, 30.94, 1],
      [168.71, -7.06, 1],
      [-112.49, -10.38, 1],
      [-21.96, -9.6, 1],
      [73.11, -8.31, 1],
      [95.68, 0.04, 1],
      [-170.71, 2.32, 1],
      [-84.32, -0.04, 1],
      [9.29, -2.32, 1],
      [9.19, -34.33, 1],
      [98.21, -37.31, 1],
      [-179.2, -40.48, 1],
      [-77.81, -31.6, 1],
      [-177.08, -21.74, 1],
      [-93.77, -18.83, 1],
      [-2.72, -19.8, 1],
      [90.51, -20.91, 1],
      [-106.89, 8.31, 1],
      [-11.29, 7.06, 1],
      [67.51, 10.38, 1],
      [158.04, 9.6, 1],
      [-118.88, -65.68, 1],
      [-38.27, -70.75, 1],
      [48.75, -72.32, 1],
      [139.64, -68.7, 1],
      [-54.66, -30.94, 1],
      [34.02, -31.02, 1],
      [125.61, -26.43, 1],
      [-151.08, -32.51, 1],
      [-170.81, 34.33, 1],
      [-81.79, 37.31, 1],
      [0.8, 40.48, 1],
      [102.19, 31.6, 1],
      [-28.78, 42.67, 1],
      [73.22, 40.18, 1],
      [162.16, 44.1, 1],
      [-110.63, 43.27, 1],
      [-89.49, 20.91, 1],
      [2.92, 21.74, 1],
      [86.23, 18.83, 1],
      [177.28, 19.8, 1],
      [133.77, 8.37, 1],
      [-132.09, 9.73, 1],
      [-38.49, 8.73, 1],
      [45.49, 9.73, 1],
      [-25.6, 24.04, 1],
      [55.12, 30.23, 1],
      [149.3, 28.05, 1],
      [-118.71, 26.06, 1],
      [0.81, 60.75, 1],
      [95.43, 54.07, 1],
      [-174.61, 58.05, 1],
      [-90.5, 60.75, 1],
      [-124.88, -30.23, 1],
      [-30.7, -28.05, 1],
      [61.29, -26.06, 1],
      [154.4, -24.04, 1],
      [-132.92, -85.6, 1],
      [47.08, 85.6, 1]
    ],
    [
      [-129.19, 8.11, 1],
      [169.58, -38.73, 1],
      [50.81, 8.12, 1],
      [-77.27, -50.11, 1],
      [10.42, 38.73, 1],
      [77.3, 50.12, 1],
      [-10.41, -38.72, 1],
      [102.71, -50.11, 1],
      [-169.57, 38.72, 1],
      [-102.71, 50.11, 1],
      [129.19, -8.11, 1],
      [-50.8, -8.11, 1],
      [-4.59, -56.01, 1],
      [-93.1, 33.85, 1],
      [175.39, -56.03, 1],
      [146.11, -2.57, 1],
      [-86.89, -33.86, 1],
      [-146.1, 2.56, 1],
      [86.91, 33.86, 1],
      [-33.89, -2.57, 1],
      [93.1, -33.85, 1],
      [33.9, 2.58, 1],
      [4.6, 56.03, 1],
      [-175.38, 56.01, 1],
      [106.57, 26.1, 1],
      [27.07, -14.82, 1],
      [-73.44, 26.09, 1],
      [-30.2, 59.41, 1],
      [152.94, 14.83, 1],
      [30.2, -59.4, 1],
      [-152.93, -14.84, 1],
      [149.82, 59.41, 1],
      [-27.06, 14.83, 1],
      [-149.8, -59.42, 1],
      [-106.55, -26.1, 1],
      [73.44, -26.09, 1],
      [-171.42, 77.45, 1],
      [91.9, -12.4, 1],
      [8.54, 77.46, 1],
      [-12.4, -1.85, 1],
      [88.11, 12.41, 1],
      [12.41, 1.86, 1],
      [-88.1, -12.41, 1],
      [167.6, -1.86, 1],
      [-91.89, 12.4, 1],
      [-167.59, 1.84, 1],
      [171.43, -77.46, 1],
      [-8.52, -77.45, 1],
      [-122.73, -10.44, 1],
      [-167.65, -32.13, 1],
      [57.27, -10.43, 1],
      [-108.8, -55.83, 1],
      [-12.35, 32.13, 1],
      [108.83, 55.83, 1],
      [12.36, -32.12, 1],
      [71.19, -55.82, 1],
      [167.66, 32.12, 1],
      [-71.19, 55.82, 1],
      [122.74, 10.44, 1],
      [-57.27, 10.44, 1],
      [-135.84, -23.05, 1],
      [-148.58, -41.32, 1],
      [44.16, -23.04, 1],
      [-120.66, -39.88, 1],
      [-31.41, 41.31, 1],
      [120.68, 39.87, 1],
      [31.42, -41.3, 1],
      [59.33, -39.86, 1],
      [148.6, 41.31, 1],
      [-59.33, 39.87, 1],
      [135.85, 23.05, 1],
      [-44.16, 23.05, 1],
      [-161.55, 20.62, 1],
      [130.04, -62.6, 1],
      [18.45, 20.64, 1],
      [-68.35, -17.23, 1],
      [49.96, 62.61, 1],
      [68.36, 17.23, 1],
      [-49.93, -62.6, 1],
      [111.65, -17.22, 1],
      [-130.05, 62.59, 1],
      [-111.64, 17.22, 1],
      [161.56, -20.63, 1],
      [-18.44, -20.62, 1],
      [-105.23, -3.38, 1],
      [-176.5, -15.21, 1],
      [74.77, -3.37, 1],
      [-102.64, -74.41, 1],
      [-3.5, 15.21, 1],
      [102.69, 74.41, 1],
      [3.51, -15.2, 1],
      [77.33, -74.4, 1],
      [176.51, 15.2, 1],
      [-77.36, 74.4, 1],
      [105.24, 3.38, 1],
      [-74.76, 3.37, 1],
      [-142.39, 25.42, 1],
      [142.08, -45.69, 1],
      [37.61, 25.43, 1],
      [-59.02, -33.44, 1],
      [37.92, 45.69, 1],
      [59.04, 33.45, 1],
      [-37.91, -45.68, 1],
      [120.97, -33.44, 1],
      [-142.07, 45.68, 1],
      [-120.96, 33.44, 1],
      [142.4, -25.43, 1],
      [-37.6, -25.42, 1]
    ],
    [
      [-30.6, 6.94, 1],
      [166.56, 58.69, 1],
      [149.4, 6.96, 1],
      [81.95, -30.36, 1],
      [13.48, -58.69, 1],
      [-81.93, 30.36, 1],
      [-13.46, 58.68, 1],
      [-98.06, -30.37, 1],
      [-166.54, -58.68, 1],
      [98.07, 30.37, 1],
      [30.62, -6.95, 1],
      [-149.38, -6.95, 1],
      [106.69, -22.68, 1],
      [-23.57, -15.36, 1],
      [-73.31, -22.69, 1],
      [-145.5, 62.1, 1],
      [-156.41, 15.36, 1],
      [145.53, -62.1, 1],
      [156.43, -15.35, 1],
      [34.47, 62.11, 1],
      [23.58, 15.36, 1],
      [-34.46, -62.11, 1],
      [-106.67, 22.68, 1],
      [73.33, 22.69, 1],
      [166.82, 1.39, 1],
      [6.09, -76.74, 1],
      [-13.19, 1.38, 1],
      [-88.57, 13.18, 1],
      [173.99, 76.74, 1],
      [88.59, -13.18, 1],
      [-173.97, -76.73, 1],
      [91.43, 13.2, 1],
      [-6.07, 76.73, 1],
      [-91.42, -13.2, 1],
      [-166.8, -1.38, 1],
      [13.2, -1.39, 1],
      [-74.67, 48.11, 1],
      [130.86, 10.16, 1],
      [105.32, 48.13, 1],
      [13.34, -40.08, 1],
      [49.16, -10.15, 1],
      [-13.32, 40.07, 1],
      [-49.14, 10.15, 1],
      [-166.67, -40.08, 1],
      [-130.84, -10.16, 1],
      [166.69, 40.08, 1],
      [74.7, -48.11, 1],
      [-105.31, -48.13, 1],
      [-126.99, 26.55, 1],
      [147.96, -32.57, 1],
      [53, 26.56, 1],
      [-50.28, -45.59, 1],
      [32.05, 32.58, 1],
      [50.3, 45.59, 1],
      [-32.03, -32.58, 1],
      [129.71, -45.58, 1],
      [-147.94, 32.57, 1],
      [-129.69, 45.58, 1],
      [127.02, -26.55, 1],
      [-52.98, -26.56, 1],
      [-171.93, 30.37, 1],
      [103.47, -58.68, 1],
      [8.07, 30.36, 1],
      [-59.38, -6.96, 1],
      [76.54, 58.69, 1],
      [59.4, 6.95, 1],
      [-76.53, -58.69, 1],
      [120.62, -6.94, 1],
      [-103.44, 58.68, 1],
      [-120.6, 6.95, 1],
      [171.94, -30.36, 1],
      [-8.05, -30.37, 1],
      [40.86, 10.16, 1],
      [15.32, 48.12, 1],
      [-139.14, 10.16, 1],
      [76.68, 40.09, 1],
      [164.69, -48.12, 1],
      [-76.67, -40.09, 1],
      [-164.67, 48.12, 1],
      [-103.31, 40.07, 1],
      [-15.3, -48.13, 1],
      [103.34, -40.07, 1],
      [-40.84, -10.16, 1],
      [139.16, -10.15, 1],
      [103.2, -1.38, 1],
      [-1.41, -13.19, 1],
      [-76.8, -1.39, 1],
      [-96.02, 76.73, 1],
      [-178.57, 13.19, 1],
      [96.07, -76.73, 1],
      [178.58, -13.19, 1],
      [83.94, 76.74, 1],
      [1.43, 13.19, 1],
      [-83.95, -76.74, 1],
      [-103.18, 1.38, 1],
      [76.81, 1.39, 1],
      [37.02, -26.56, 1],
      [-39.7, 45.58, 1],
      [-142.99, -26.56, 1],
      [122.05, 32.58, 1],
      [-140.29, -45.59, 1],
      [-122.04, -32.58, 1],
      [140.31, 45.59, 1],
      [-57.95, 32.57, 1],
      [39.72, -45.58, 1],
      [57.97, -32.57, 1],
      [-37, 26.55, 1],
      [143, 26.56, 1],
      [163.33, 22.69, 1],
      [55.55, -62.1, 1],
      [-16.67, 22.68, 1],
      [-66.41, 15.35, 1],
      [124.49, 62.11, 1],
      [66.43, -15.35, 1],
      [-124.48, -62.11, 1],
      [113.58, 15.36, 1],
      [-55.52, 62.1, 1],
      [-113.57, -15.36, 1],
      [-163.31, -22.68, 1],
      [16.69, -22.69, 1]
    ],
    [
      [-10.57, -17.35, 1],
      [-120.42, 69.76, 1],
      [169.43, -17.35, 1],
      [107.63, -10.08, 1],
      [-59.57, -69.78, 1],
      [-107.63, 10.08, 1],
      [59.57, 69.78, 1],
      [-72.37, -10.09, 1],
      [120.42, -69.76, 1],
      [72.37, 10.09, 1],
      [10.57, 17.35, 1],
      [-169.43, 17.35, 1],
      [-30.77, 68.25, 1],
      [101.53, 18.57, 1],
      [149.25, 68.26, 1],
      [18.92, -10.92, 1],
      [78.47, -18.56, 1],
      [-18.92, 10.92, 1],
      [-78.47, 18.56, 1],
      [-161.09, -10.92, 1],
      [-101.53, -18.56, 1],
      [161.09, 10.92, 1],
      [30.78, -68.26, 1],
      [-149.26, -68.26, 1],
      [56.46, 41.26, 1],
      [46.46, 24.54, 1],
      [-123.53, 41.26, 1],
      [32.19, 38.8, 1],
      [133.53, -24.53, 1],
      [-32.19, -38.8, 1],
      [-133.53, 24.53, 1],
      [-147.8, 38.8, 1],
      [-46.46, -24.54, 1],
      [147.8, -38.8, 1],
      [-56.46, -41.27, 1],
      [123.53, -41.26, 1],
      [84.74, 27.31, 1],
      [27.41, 4.68, 1],
      [-95.26, 27.3, 1],
      [10.06, 62.23, 1],
      [152.59, -4.67, 1],
      [-10.06, -62.23, 1],
      [-152.59, 4.67, 1],
      [-169.92, 62.23, 1],
      [-27.4, -4.68, 1],
      [169.92, -62.22, 1],
      [-84.74, -27.31, 1],
      [95.26, -27.3, 1],
      [136.27, -0.73, 1],
      [-1.05, -46.27, 1],
      [-43.73, -0.74, 1],
      [-91.01, 43.72, 1],
      [-178.94, 46.27, 1],
      [91.01, -43.72, 1],
      [178.94, -46.27, 1],
      [88.99, 43.73, 1],
      [1.05, 46.27, 1],
      [-88.99, -43.73, 1],
      [-136.27, 0.73, 1],
      [43.73, 0.73, 1],
      [55.23, 10.82, 1],
      [13.09, 34.07, 1],
      [-124.77, 10.81, 1],
      [71.48, 53.8, 1],
      [166.91, -34.06, 1],
      [-71.48, -53.8, 1],
      [-166.9, 34.06, 1],
      [-108.52, 53.79, 1],
      [-13.09, -34.06, 1],
      [108.52, -53.79, 1],
      [-55.23, -10.82, 1],
      [124.77, -10.81, 1],
      [-105.49, -68.13, 1],
      [-111.15, -5.71, 1],
      [74.52, -68.12, 1],
      [-173.89, -21.04, 1],
      [-68.85, 5.7, 1],
      [173.89, 21.04, 1],
      [68.85, -5.7, 1],
      [6.12, -21.04, 1],
      [111.15, 5.71, 1],
      [-6.12, 21.04, 1],
      [105.49, 68.13, 1],
      [-74.52, 68.12, 1],
      [35.28, -15.18, 1],
      [-25.17, 51.98, 1],
      [-144.72, -15.19, 1],
      [108.39, 33.88, 1],
      [-154.84, -51.99, 1],
      [-108.39, -33.88, 1],
      [154.84, 51.99, 1],
      [-71.61, 33.87, 1],
      [25.17, -51.98, 1],
      [71.61, -33.87, 1],
      [-35.28, 15.18, 1],
      [144.72, 15.19, 1],
      [-125.28, -28.56, 1],
      [-146.32, -30.49, 1],
      [54.72, -28.55, 1],
      [-133.29, -45.82, 1],
      [-33.69, 30.48, 1],
      [133.3, 45.82, 1],
      [33.68, -30.48, 1],
      [46.71, -45.81, 1],
      [146.32, 30.49, 1],
      [-46.71, 45.81, 1],
      [125.28, 28.56, 1],
      [-54.72, 28.54, 1],
      [-144.4, 54.71, 1],
      [112.38, -28.01, 1],
      [35.58, 54.72, 1],
      [-29.92, -19.65, 1],
      [67.62, 28.02, 1],
      [29.92, 19.65, 1],
      [-67.62, -28.02, 1],
      [150.08, -19.64, 1],
      [-112.38, 28.01, 1],
      [-150.08, 19.64, 1],
      [144.4, -54.71, 1],
      [-35.58, -54.72, 1],
      [68.53, -52.85, 1],
      [-54.82, 12.76, 1],
      [-111.46, -52.87, 1],
      [164.51, 34.19, 1],
      [-125.18, -12.77, 1],
      [-164.51, -34.19, 1],
      [125.18, 12.77, 1],
      [-15.5, 34.19, 1],
      [54.82, -12.76, 1],
      [15.49, -34.19, 1],
      [-68.53, 52.85, 1],
      [111.47, 52.86, 1],
      [91.48, -7.37, 1],
      [-7.38, -1.47, 1],
      [-88.52, -7.38, 1],
      [-168.69, 82.47, 1],
      [-172.62, 1.47, 1],
      [168.69, -82.47, 1],
      [172.62, -1.46, 1],
      [11.22, 82.48, 1],
      [7.38, 1.47, 1],
      [-11.21, -82.48, 1],
      [-91.48, 7.37, 1],
      [88.52, 7.38, 1]
    ],
    [
      [-110.97, -81.34, 1],
      [-98.09, -3.09, 1],
      [69.03, -81.34, 1],
      [-176.88, -8.08, 1],
      [-81.91, 3.09, 1],
      [176.88, 8.08, 1],
      [81.91, -3.09, 1],
      [3.12, -8.08, 1],
      [98.09, 3.09, 1],
      [-3.12, 8.08, 1],
      [110.97, 81.34, 1],
      [-69.03, 81.34, 1],
      [145.76, 30.52, 1],
      [46.33, -45.41, 1],
      [-34.24, 30.52, 1],
      [-54.51, 28.99, 1],
      [133.67, 45.41, 1],
      [54.51, -28.99, 1],
      [-133.67, -45.41, 1],
      [125.49, 28.99, 1],
      [-46.33, 45.41, 1],
      [-125.49, -28.99, 1],
      [-145.76, -30.52, 1],
      [34.24, -30.52, 1],
      [159.58, 41.4, 1],
      [68.4, -44.67, 1],
      [-20.42, 41.4, 1],
      [-46.75, 15.18, 1],
      [111.6, 44.67, 1],
      [46.75, -15.18, 1],
      [-111.6, -44.67, 1],
      [133.25, 15.18, 1],
      [-68.4, 44.67, 1],
      [-133.25, -15.18, 1],
      [-159.58, -41.4, 1],
      [20.42, -41.4, 1],
      [85.43, -37.93, 1],
      [-38.02, 3.6, 1],
      [-94.57, -37.93, 1],
      [174.17, 51.83, 1],
      [-141.98, -3.6, 1],
      [-174.17, -51.83, 1],
      [141.98, 3.6, 1],
      [-5.83, 51.83, 1],
      [38.02, -3.6, 1],
      [5.83, -51.83, 1],
      [-85.43, 37.93, 1],
      [94.57, 37.93, 1],
      [21.18, 27.17, 1],
      [54.86, 56.05, 1],
      [-158.82, 27.17, 1],
      [61.17, 18.75, 1],
      [125.14, -56.05, 1],
      [-61.17, -18.75, 1],
      [-125.14, 56.05, 1],
      [-118.83, 18.75, 1],
      [-54.86, -56.05, 1],
      [118.83, -18.75, 1],
      [-21.18, -27.17, 1],
      [158.82, -27.17, 1],
      [104.66, -9.56, 1],
      [-9.88, -14.45, 1],
      [-75.34, -9.56, 1],
      [-123.65, 72.56, 1],
      [-170.12, 14.45, 1],
      [123.65, -72.56, 1],
      [170.12, -14.45, 1],
      [56.35, 72.56, 1],
      [9.88, 14.45, 1],
      [-56.35, -72.56, 1],
      [-104.66, 9.56, 1],
      [75.34, 9.56, 1],
      [25.94, -16.83, 1],
      [-34.66, 59.4, 1],
      [-154.06, -16.83, 1],
      [108.59, 24.75, 1],
      [-145.34, -59.41, 1],
      [-108.59, -24.75, 1],
      [145.34, 59.41, 1],
      [-71.41, 24.75, 1],
      [34.66, -59.41, 1],
      [71.41, -24.75, 1],
      [-25.94, 16.83, 1],
      [154.06, 16.83, 1],
      [-100.89, 26.49, 1],
      [153.1, -9.74, 1],
      [79.11, 26.49, 1],
      [-20.77, -61.51, 1],
      [26.9, 9.74, 1],
      [20.77, 61.51, 1],
      [-26.9, -9.74, 1],
      [159.23, -61.51, 1],
      [-153.1, 9.74, 1],
      [-159.23, 61.51, 1],
      [100.89, -26.49, 1],
      [-79.11, -26.49, 1],
      [44.31, 12.28, 1],
      [17.3, 44.36, 1],
      [-135.69, 12.28, 1],
      [73.08, 43.05, 1],
      [162.7, -44.36, 1],
      [-73.08, -43.05, 1],
      [-162.7, 44.36, 1],
      [-106.92, 43.05, 1],
      [-17.3, -44.36, 1],
      [106.92, -43.05, 1],
      [-44.31, -12.28, 1],
      [135.69, -12.28, 1],
      [-169.08, -24.53, 1],
      [-112.54, -63.29, 1],
      [10.92, -24.53, 1],
      [-114.93, -9.92, 1],
      [-67.46, 63.28, 1],
      [114.93, 9.92, 1],
      [67.46, -63.29, 1],
      [65.07, -9.92, 1],
      [112.54, 63.29, 1],
      [-65.07, 9.92, 1],
      [169.08, 24.53, 1],
      [-10.92, 24.53, 1],
      [93.2, -57.39, 1],
      [-57.43, -1.73, 1],
      [-86.8, -57.39, 1],
      [-177.95, 32.55, 1],
      [-122.57, 1.73, 1],
      [177.95, -32.55, 1],
      [122.57, -1.73, 1],
      [2.05, 32.55, 1],
      [57.43, 1.73, 1],
      [-2.05, -32.55, 1],
      [-93.2, 57.39, 1],
      [86.8, 57.39, 1],
      [-17.59, 3.04, 1],
      [170.04, 72.16, 1],
      [162.41, 3.04, 1],
      [86.81, -17.56, 1],
      [9.96, -72.16, 1],
      [-86.81, 17.56, 1],
      [-9.96, 72.16, 1],
      [-93.19, -17.56, 1],
      [-170.04, -72.16, 1],
      [93.19, 17.56, 1],
      [17.59, -3.04, 1],
      [-162.41, -3.04, 1],
      [39.38, 44.26, 1],
      [56.93, 33.61, 1],
      [-140.62, 44.26, 1],
      [38.42, 27.03, 1],
      [123.07, -33.61, 1],
      [-38.42, -27.03, 1],
      [-123.07, 33.61, 1],
      [-141.58, 27.03, 1],
      [-56.93, -33.61, 1],
      [141.58, -27.03, 1],
      [-39.38, -44.26, 1],
      [140.62, -44.26, 1]
    ],
    [
      [165.52, 26.52, 1],
      [63.39, -60.04, 1],
      [-14.48, 26.52, 1],
      [-62.74, 12.93, 1],
      [116.61, 60.04, 1],
      [62.74, -12.93, 1],
      [-116.61, -60.04, 1],
      [117.26, 12.93, 1],
      [-63.39, 60.04, 1],
      [-117.26, -12.93, 1],
      [-165.52, -26.52, 1],
      [14.48, -26.52, 1],
      [-150.22, -21.62, 1],
      [-141.41, -53.79, 1],
      [29.78, -21.62, 1],
      [-114.55, -27.5, 1],
      [-38.59, 53.79, 1],
      [114.55, 27.5, 1],
      [38.59, -53.79, 1],
      [65.45, -27.5, 1],
      [141.41, 53.79, 1],
      [-65.45, 27.5, 1],
      [150.22, 21.62, 1],
      [-29.78, 21.62, 1],
      [-163.47, 81.91, 1],
      [92.31, -7.75, 1],
      [16.53, 81.91, 1],
      [-7.76, -2.29, 1],
      [87.69, 7.75, 1],
      [7.76, 2.29, 1],
      [-87.69, -7.75, 1],
      [172.24, -2.29, 1],
      [-92.31, 7.75, 1],
      [-172.24, 2.29, 1],
      [163.47, -81.91, 1],
      [-16.53, -81.91, 1],
      [-79.91, -73.49, 1],
      [-106.27, 2.85, 1],
      [100.09, -73.49, 1],
      [177.03, -16.24, 1],
      [-73.73, -2.85, 1],
      [-177.03, 16.24, 1],
      [73.73, 2.85, 1],
      [-2.97, -16.24, 1],
      [106.27, -2.85, 1],
      [2.97, 16.24, 1],
      [79.91, 73.49, 1],
      [-100.09, 73.49, 1],
      [-43.19, 73.63, 1],
      [101.37, 11.86, 1],
      [136.81, 73.63, 1],
      [12.09, -11.12, 1],
      [78.63, -11.86, 1],
      [-12.09, 11.12, 1],
      [-78.63, 11.86, 1],
      [-167.91, -11.12, 1],
      [-101.37, -11.86, 1],
      [167.91, 11.12, 1],
      [43.19, -73.63, 1],
      [-136.81, -73.63, 1],
      [109.86, -34.83, 1],
      [-36.5, -16.19, 1],
      [-70.14, -34.83, 1],
      [-153.97, 50.53, 1],
      [-143.5, 16.19, 1],
      [153.97, -50.53, 1],
      [143.5, -16.19, 1],
      [26.03, 50.53, 1],
      [36.5, 16.19, 1],
      [-26.03, -50.53, 1],
      [-109.86, 34.83, 1],
      [70.14, 34.83, 1],
      [-23.31, -6.54, 1],
      [-163.84, 65.83, 1],
      [156.69, -6.54, 1],
      [97.12, -23.15, 1],
      [-16.16, -65.83, 1],
      [-97.12, 23.15, 1],
      [16.16, 65.83, 1],
      [-82.88, -23.15, 1],
      [163.84, -65.83, 1],
      [82.88, 23.15, 1],
      [23.31, 6.54, 1],
      [-156.69, 6.54, 1],
      [-0.87, -31.92, 1],
      [-91.4, 58.07, 1],
      [179.13, -31.92, 1],
      [121.93, -0.74, 1],
      [-88.6, -58.07, 1],
      [-121.93, 0.74, 1],
      [88.6, 58.07, 1],
      [-58.07, -0.74, 1],
      [91.4, -58.07, 1],
      [58.07, 0.74, 1],
      [0.87, 31.92, 1],
      [-179.13, 31.92, 1],
      [163.12, 43.35, 1],
      [72.9, -44.1, 1],
      [-16.88, 43.35, 1],
      [-45.39, 12.19, 1],
      [107.1, 44.1, 1],
      [45.39, -12.19, 1],
      [-107.1, -44.1, 1],
      [134.61, 12.19, 1],
      [-72.9, 44.1, 1],
      [-134.61, -12.19, 1],
      [-163.12, -43.35, 1],
      [16.88, -43.35, 1],
      [-114.23, 50.37, 1],
      [127.06, -15.17, 1],
      [65.77, 50.37, 1],
      [-18.77, -35.57, 1],
      [52.94, 15.17, 1],
      [18.77, 35.57, 1],
      [-52.94, -15.17, 1],
      [161.23, -35.57, 1],
      [-127.06, 15.17, 1],
      [-161.23, 35.57, 1],
      [114.23, -50.37, 1],
      [-65.77, -50.37, 1],
      [54.17, 30.16, 1],
      [35.63, 30.41, 1],
      [-125.83, 30.16, 1],
      [45.21, 44.51, 1],
      [144.37, -30.41, 1],
      [-45.21, -44.51, 1],
      [-144.37, 30.41, 1],
      [-134.79, 44.51, 1],
      [-35.63, -30.41, 1],
      [134.79, -44.51, 1],
      [-54.17, -30.16, 1],
      [125.83, -30.16, 1],
      [126.2, 41.73, 1],
      [47.86, -26.15, 1],
      [-53.8, 41.73, 1],
      [-33.51, 37.03, 1],
      [132.14, 26.15, 1],
      [33.51, -37.03, 1],
      [-132.14, -26.15, 1],
      [146.49, 37.03, 1],
      [-47.86, 26.15, 1],
      [-146.49, -37.03, 1],
      [-126.2, -41.73, 1],
      [53.8, -41.73, 1],
      [-161.75, 20.38, 1],
      [130.12, -62.91, 1],
      [18.25, 20.38, 1],
      [-68.63, -17.07, 1],
      [49.88, 62.91, 1],
      [68.63, 17.07, 1],
      [-49.88, -62.91, 1],
      [111.37, -17.07, 1],
      [-130.12, 62.91, 1],
      [-111.37, 17.07, 1],
      [161.75, -20.38, 1],
      [-18.25, -20.38, 1],
      [2.71, 48.49, 1],
      [87.6, 41.45, 1],
      [-177.29, 48.49, 1],
      [41.48, 1.8, 1],
      [92.4, -41.45, 1],
      [-41.48, -1.8, 1],
      [-92.4, 41.45, 1],
      [-138.52, 1.8, 1],
      [-87.6, -41.45, 1],
      [138.52, -1.8, 1],
      [-2.71, -48.49, 1],
      [177.29, -48.49, 1],
      [-98.15, -27.54, 1],
      [-152.22, -7.22, 1],
      [81.85, -27.54, 1],
      [-164.79, -61.37, 1],
      [-27.78, 7.22, 1],
      [164.79, 61.37, 1],
      [27.78, -7.22, 1],
      [15.21, -61.37, 1],
      [152.22, 7.22, 1],
      [-15.21, 61.37, 1],
      [98.15, 27.54, 1],
      [-81.85, 27.54, 1]
    ],
    [
      [-40.48, 43.36, 1],
      [124.51, 33.58, 1],
      [139.52, 43.36, 1],
      [38.85, -28.17, 1],
      [55.49, -33.58, 1],
      [-38.85, 28.17, 1],
      [-55.49, 33.58, 1],
      [-141.15, -28.17, 1],
      [-124.51, -33.58, 1],
      [141.15, 28.17, 1],
      [40.48, -43.36, 1],
      [-139.52, -43.36, 1],
      [56.01, 17.18, 1],
      [20.46, 32.29, 1],
      [-123.99, 17.18, 1],
      [61.05, 52.38, 1],
      [159.54, -32.29, 1],
      [-61.05, -52.38, 1],
      [-159.54, 32.29, 1],
      [-118.95, 52.38, 1],
      [-20.46, -32.29, 1],
      [118.95, -52.38, 1],
      [-56.01, -17.18, 1],
      [123.99, -17.18, 1],
      [-179.51, -8.95, 1],
      [-93.08, -81.04, 1],
      [0.49, -8.95, 1],
      [-98.95, -0.48, 1],
      [-86.92, 81.04, 1],
      [98.95, 0.48, 1],
      [86.92, -81.04, 1],
      [81.05, -0.48, 1],
      [93.08, 81.04, 1],
      [-81.05, 0.48, 1],
      [179.51, 8.95, 1],
      [-0.49, 8.95, 1],
      [12.04, -13.56, 1],
      [-49.15, 71.95, 1],
      [-167.96, -13.56, 1],
      [103.85, 11.7, 1],
      [-130.85, -71.95, 1],
      [-103.85, -11.7, 1],
      [130.85, 71.95, 1],
      [-76.15, 11.7, 1],
      [49.15, -71.95, 1],
      [76.15, -11.7, 1],
      [-12.04, 13.56, 1],
      [167.96, 13.56, 1],
      [-13.62, -58.2, 1],
      [-98.3, 30.8, 1],
      [166.38, -58.2, 1],
      [148.93, -7.13, 1],
      [-81.7, -30.8, 1],
      [-148.93, 7.13, 1],
      [81.7, 30.8, 1],
      [-31.07, -7.13, 1],
      [98.3, -30.8, 1],
      [31.07, 7.13, 1],
      [13.62, 58.2, 1],
      [-166.38, 58.2, 1],
      [65.26, -20.55, 1],
      [-22.43, 23.07, 1],
      [-114.74, -20.55, 1],
      [131.85, 58.26, 1],
      [-157.57, -23.07, 1],
      [-131.85, -58.26, 1],
      [157.57, 23.07, 1],
      [-48.15, 58.26, 1],
      [22.43, -23.07, 1],
      [48.15, -58.26, 1],
      [-65.26, 20.55, 1],
      [114.74, 20.55, 1],
      [-135.39, 26.5, 1],
      [144.63, -39.58, 1],
      [44.61, 26.5, 1],
      [-55, -38.94, 1],
      [35.37, 39.58, 1],
      [55, 38.94, 1],
      [-35.37, -39.58, 1],
      [125, -38.94, 1],
      [-144.63, 39.58, 1],
      [-125, 38.94, 1],
      [135.39, -26.5, 1],
      [-44.61, -26.5, 1],
      [114.95, -4.75, 1],
      [-5.23, -24.86, 1],
      [-65.05, -4.75, 1],
      [-101.14, 64.63, 1],
      [-174.77, 24.86, 1],
      [101.14, -64.63, 1],
      [174.77, -24.86, 1],
      [78.86, 64.63, 1],
      [5.23, 24.86, 1],
      [-78.86, -64.63, 1],
      [-114.95, 4.75, 1],
      [65.05, 4.75, 1],
      [35.85, 52.64, 1],
      [65.91, 29.46, 1],
      [-144.15, 52.64, 1],
      [31.75, 20.82, 1],
      [114.09, -29.46, 1],
      [-31.75, -20.82, 1],
      [-114.09, 29.46, 1],
      [-148.25, 20.82, 1],
      [-65.91, -29.46, 1],
      [148.25, -20.82, 1],
      [-35.85, -52.64, 1],
      [144.15, -52.64, 1],
      [86.45, 11.52, 1],
      [11.54, 3.48, 1],
      [-93.55, 11.52, 1],
      [16.9, 77.95, 1],
      [168.46, -3.48, 1],
      [-16.9, -77.95, 1],
      [-168.46, 3.48, 1],
      [-163.1, 77.95, 1],
      [-11.54, -3.48, 1],
      [163.1, -77.95, 1],
      [-86.45, -11.52, 1],
      [93.55, -11.52, 1],
      [135.24, 4.02, 1],
      [5.69, -45.1, 1],
      [-44.76, 4.02, 1],
      [-84.35, 44.62, 1],
      [174.31, 45.1, 1],
      [84.35, -44.62, 1],
      [-174.31, -45.1, 1],
      [95.65, 44.62, 1],
      [-5.69, 45.1, 1],
      [-95.65, -44.62, 1],
      [-135.24, -4.02, 1],
      [44.76, -4.02, 1],
      [-129.84, -18.16, 1],
      [-156.86, -37.5, 1],
      [50.16, -18.16, 1],
      [-117.12, -46.85, 1],
      [-23.14, 37.5, 1],
      [117.12, 46.85, 1],
      [23.14, -37.5, 1],
      [62.88, -46.85, 1],
      [156.86, 37.5, 1],
      [-62.88, 46.85, 1],
      [129.84, 18.16, 1],
      [-50.16, 18.16, 1],
      [-74.1, 32.87, 1],
      [146.1, 13.3, 1],
      [105.9, 32.87, 1],
      [22.97, -53.88, 1],
      [33.9, -13.3, 1],
      [-22.97, 53.88, 1],
      [-33.9, 13.3, 1],
      [-157.03, -53.88, 1],
      [-146.1, -13.3, 1],
      [157.03, 53.88, 1],
      [74.1, -32.87, 1],
      [-105.9, -32.87, 1],
      [-119.92, -5.64, 1],
      [-173.5, -29.76, 1],
      [60.08, -5.64, 1],
      [-101.2, -59.6, 1],
      [-6.5, 29.76, 1],
      [101.2, 59.6, 1],
      [6.5, -29.76, 1],
      [78.8, -59.6, 1],
      [173.5, 29.76, 1],
      [-78.8, 59.6, 1],
      [119.92, 5.64, 1],
      [-60.08, 5.64, 1],
      [73.14, 16.13, 1],
      [16.82, 16.18, 1],
      [-106.86, 16.13, 1],
      [45.09, 66.83, 1],
      [163.18, -16.18, 1],
      [-45.09, -66.83, 1],
      [-163.18, 16.18, 1],
      [-134.91, 66.83, 1],
      [-16.82, -16.18, 1],
      [134.91, -66.83, 1],
      [-73.14, -16.13, 1],
      [106.86, -16.13, 1],
      [-11.7, -43.38, 1],
      [-102.11, 45.38, 1],
      [168.3, -43.38, 1],
      [133.98, -8.47, 1],
      [-77.89, -45.38, 1],
      [-133.98, 8.47, 1],
      [77.89, 45.38, 1],
      [-46.02, -8.47, 1],
      [102.11, -45.38, 1],
      [46.02, 8.47, 1],
      [11.7, 43.38, 1],
      [-168.3, 43.38, 1],
      [-24.11, 3.73, 1],
      [170.94, 65.63, 1],
      [155.89, 3.73, 1],
      [85.92, -24.05, 1],
      [9.06, -65.63, 1],
      [-85.92, 24.05, 1],
      [-9.06, 65.63, 1],
      [-94.08, -24.05, 1],
      [-170.94, -65.63, 1],
      [94.08, 24.05, 1],
      [24.11, -3.73, 1],
      [-155.89, -3.73, 1]
    ],
    [
      [104.6, -3.68, 1],
      [-3.81, -14.57, 1],
      [-75.4, -3.68, 1],
      [-104.32, 74.95, 1],
      [-176.19, 14.57, 1],
      [104.32, -74.95, 1],
      [176.19, -14.57, 1],
      [75.68, 74.95, 1],
      [3.81, 14.57, 1],
      [-75.68, -74.95, 1],
      [-104.6, 3.68, 1],
      [75.4, 3.68, 1],
      [153.77, -30.33, 1],
      [-52.93, -50.74, 1],
      [-26.23, -30.33, 1],
      [-123.11, 22.43, 1],
      [-127.07, 50.74, 1],
      [123.11, -22.43, 1],
      [127.07, -50.74, 1],
      [56.89, 22.43, 1],
      [52.93, 50.74, 1],
      [-56.89, -22.43, 1],
      [-153.77, 30.33, 1],
      [26.23, 30.33, 1],
      [35.99, -39.77, 1],
      [-54.77, 38.45, 1],
      [-144.01, -39.77, 1],
      [135.81, 26.85, 1],
      [-125.23, -38.45, 1],
      [-135.81, -26.85, 1],
      [125.23, 38.45, 1],
      [-44.19, 26.85, 1],
      [54.77, -38.45, 1],
      [44.19, -26.85, 1],
      [-35.99, 39.77, 1],
      [144.01, 39.77, 1],
      [71.82, -25.43, 1],
      [-26.58, 16.37, 1],
      [-108.18, -25.43, 1],
      [146.72, 59.1, 1],
      [-153.42, -16.37, 1],
      [-146.72, -59.1, 1],
      [153.42, 16.37, 1],
      [-33.28, 59.1, 1],
      [26.58, -16.37, 1],
      [33.28, -59.1, 1],
      [-71.82, 25.43, 1],
      [108.18, 25.43, 1],
      [-136.55, 26.52, 1],
      [144.03, -40.51, 1],
      [43.45, 26.52, 1],
      [-55.5, -37.97, 1],
      [35.97, 40.51, 1],
      [55.5, 37.97, 1],
      [-35.97, -40.51, 1],
      [124.5, -37.97, 1],
      [-144.03, 40.51, 1],
      [-124.5, 37.97, 1],
      [136.55, -26.52, 1],
      [-43.45, -26.52, 1],
      [-6.52, -1.08, 1],
      [-170.58, 83.4, 1],
      [173.48, -1.08, 1],
      [91.09, -6.52, 1],
      [-9.42, -83.4, 1],
      [-91.09, 6.52, 1],
      [9.42, 83.4, 1],
      [-88.91, -6.52, 1],
      [170.58, -83.4, 1],
      [88.91, 6.52, 1],
      [6.52, 1.08, 1],
      [-173.48, 1.08, 1],
      [-71.13, 40.38, 1],
      [138.05, 14.26, 1],
      [108.87, 40.38, 1],
      [20.82, -46.12, 1],
      [41.95, -14.26, 1],
      [-20.82, 46.12, 1],
      [-41.95, 14.26, 1],
      [-159.18, -46.12, 1],
      [-138.05, -14.26, 1],
      [159.18, 46.12, 1],
      [71.13, -40.38, 1],
      [-108.87, -40.38, 1],
      [-153.97, -27.97, 1],
      [-129.57, -52.52, 1],
      [26.03, -27.97, 1],
      [-120.59, -22.81, 1],
      [-50.43, 52.52, 1],
      [120.59, 22.81, 1],
      [50.43, -52.52, 1],
      [59.41, -22.81, 1],
      [129.57, 52.52, 1],
      [-59.41, 22.81, 1],
      [153.97, 27.97, 1],
      [-26.03, 27.97, 1],
      [-80.23, 13.48, 1],
      [166.33, 9.49, 1],
      [99.77, 13.48, 1],
      [35.29, -73.41, 1],
      [13.67, -9.49, 1],
      [-35.29, 73.41, 1],
      [-13.67, 9.49, 1],
      [-144.71, -73.41, 1],
      [-166.33, -9.49, 1],
      [144.71, 73.41, 1],
      [80.23, -13.48, 1],
      [-99.77, -13.48, 1],
      [55.43, -9, 1],
      [-10.89, 34.09, 1],
      [-124.57, -9, 1],
      [105.6, 54.41, 1],
      [-169.11, -34.09, 1],
      [-105.6, -54.41, 1],
      [169.11, 34.09, 1],
      [-74.4, 54.41, 1],
      [10.89, -34.09, 1],
      [74.4, -54.41, 1],
      [-55.43, 9, 1],
      [124.57, 9, 1],
      [68.32, -7.14, 1],
      [-7.68, 21.51, 1],
      [-111.68, -7.14, 1],
      [108.74, 67.22, 1],
      [-172.32, -21.51, 1],
      [-108.74, -67.22, 1],
      [172.32, 21.51, 1],
      [-71.26, 67.22, 1],
      [7.68, -21.51, 1],
      [71.26, -67.22, 1],
      [-68.32, 7.14, 1],
      [111.68, 7.14, 1],
      [-174.97, 36.12, 1],
      [96.85, -53.58, 1],
      [5.03, 36.12, 1],
      [-53.77, -4.06, 1],
      [83.15, 53.58, 1],
      [53.77, 4.06, 1],
      [-83.15, -53.58, 1],
      [126.23, -4.06, 1],
      [-96.85, 53.58, 1],
      [-126.23, 4.06, 1],
      [174.97, -36.12, 1],
      [-5.03, -36.12, 1],
      [-149.91, 16.26, 1],
      [149.81, -56.16, 1],
      [30.09, 16.26, 1],
      [-71.37, -28.77, 1],
      [30.19, 56.16, 1],
      [71.37, 28.77, 1],
      [-30.19, -56.16, 1],
      [108.63, -28.77, 1],
      [-149.81, 56.16, 1],
      [-108.63, 28.77, 1],
      [149.91, -16.26, 1],
      [-30.09, -16.26, 1],
      [2.52, -51.45, 1],
      [-87.99, 38.5, 1],
      [-177.48, -51.45, 1],
      [141.48, 1.57, 1],
      [-92.01, -38.5, 1],
      [-141.48, -1.57, 1],
      [92.01, 38.5, 1],
      [-38.52, 1.57, 1],
      [87.99, -38.5, 1],
      [38.52, -1.57, 1],
      [-2.52, 51.45, 1],
      [177.48, 51.45, 1],
      [161.12, -9.98, 1],
      [-28.54, -68.73, 1],
      [-18.88, -9.98, 1],
      [-100.54, 18.59, 1],
      [-151.46, 68.73, 1],
      [100.54, -18.59, 1],
      [151.46, -68.73, 1],
      [79.46, 18.59, 1],
      [28.54, 68.73, 1],
      [-79.46, -18.59, 1],
      [-161.12, 9.98, 1],
      [18.88, 9.98, 1],
      [12.84, 24.97, 1],
      [64.49, 62.11, 1],
      [-167.16, 24.97, 1],
      [64.47, 11.62, 1],
      [115.51, -62.11, 1],
      [-64.47, -11.62, 1],
      [-115.51, 62.11, 1],
      [-115.53, 11.62, 1],
      [-64.49, -62.11, 1],
      [115.53, -11.62, 1],
      [-12.84, -24.97, 1],
      [167.16, -24.97, 1],
      [74.13, 41.65, 1],
      [42.76, 11.79, 1],
      [-105.87, 41.65, 1],
      [17.09, 45.95, 1],
      [137.24, -11.79, 1],
      [-17.09, -45.95, 1],
      [-137.24, 11.79, 1],
      [-162.91, 45.95, 1],
      [-42.76, -11.79, 1],
      [162.91, -45.95, 1],
      [-74.13, -41.65, 1],
      [105.87, -41.65, 1],
      [154.04, 1.27, 1],
      [2.9, -64.01, 1],
      [-25.96, 1.27, 1],
      [-88.59, 25.96, 1],
      [177.1, 64.01, 1],
      [88.59, -25.96, 1],
      [-177.1, -64.01, 1],
      [91.41, 25.96, 1],
      [-2.9, 64.01, 1],
      [-91.41, -25.96, 1],
      [-154.04, -1.27, 1],
      [25.96, -1.27, 1]
    ],
    [
      [24.8, -10.46, 1],
      [-23.76, 63.21, 1],
      [-155.2, -10.46, 1],
      [101.5, 24.36, 1],
      [-156.24, -63.21, 1],
      [-101.5, -24.36, 1],
      [156.24, 63.21, 1],
      [-78.5, 24.36, 1],
      [23.76, -63.21, 1],
      [78.5, -24.36, 1],
      [-24.8, 10.46, 1],
      [155.2, 10.46, 1],
      [-134.64, 65.44, 1],
      [108.01, -16.98, 1],
      [45.36, 65.44, 1],
      [-17.8, -17.2, 1],
      [71.99, 16.98, 1],
      [17.8, 17.2, 1],
      [-71.99, -16.98, 1],
      [162.2, -17.2, 1],
      [-108.01, 16.98, 1],
      [-162.2, 17.2, 1],
      [134.64, -65.44, 1],
      [-45.36, -65.44, 1],
      [177.6, 54.85, 1],
      [88.31, -35.12, 1],
      [-2.4, 54.85, 1],
      [-35.13, 1.38, 1],
      [91.69, 35.12, 1],
      [35.13, -1.38, 1],
      [-91.69, -35.12, 1],
      [144.87, 1.38, 1],
      [-88.31, 35.12, 1],
      [-144.87, -1.38, 1],
      [-177.6, -54.85, 1],
      [2.4, -54.85, 1],
      [157.93, 82.01, 1],
      [86.98, -7.4, 1],
      [-22.07, 82.01, 1],
      [-7.41, 2.99, 1],
      [93.02, 7.4, 1],
      [7.41, -2.99, 1],
      [-93.02, -7.4, 1],
      [172.59, 2.99, 1],
      [-86.98, 7.4, 1],
      [-172.59, -2.99, 1],
      [-157.93, -82.01, 1],
      [22.07, -82.01, 1],
      [42.48, -13.21, 1],
      [-19.17, 45.89, 1],
      [-137.52, -13.21, 1],
      [107.66, 41.11, 1],
      [-160.83, -45.89, 1],
      [-107.66, -41.11, 1],
      [160.83, 45.89, 1],
      [-72.34, 41.11, 1],
      [19.17, -45.89, 1],
      [72.34, -41.11, 1],
      [-42.48, 13.21, 1],
      [137.52, 13.21, 1],
      [28.48, 10.9, 1],
      [21.99, 59.68, 1],
      [-151.52, 10.9, 1],
      [77.65, 27.92, 1],
      [158.01, -59.68, 1],
      [-77.65, -27.92, 1],
      [-158.01, 59.68, 1],
      [-102.35, 27.92, 1],
      [-21.99, -59.68, 1],
      [102.35, -27.92, 1],
      [-28.48, -10.9, 1],
      [151.52, -10.9, 1],
      [-33.79, 21.61, 1],
      [144.53, 50.59, 1],
      [146.21, 21.61, 1],
      [64.51, -31.14, 1],
      [35.47, -50.59, 1],
      [-64.51, 31.14, 1],
      [-35.47, 50.59, 1],
      [-115.49, -31.14, 1],
      [-144.53, -50.59, 1],
      [115.49, 31.14, 1],
      [33.79, -21.61, 1],
      [-146.21, -21.61, 1],
      [-175.53, -31.74, 1],
      [-97.19, -57.98, 1],
      [4.47, -31.74, 1],
      [-121.82, -3.8, 1],
      [-82.81, 57.98, 1],
      [121.82, 3.8, 1],
      [82.81, -57.98, 1],
      [58.18, -3.8, 1],
      [97.19, 57.98, 1],
      [-58.18, 3.8, 1],
      [175.53, 31.74, 1],
      [-4.47, 31.74, 1],
      [89.4, 19.43, 1],
      [19.43, 0.56, 1],
      [-90.6, 19.43, 1],
      [1.69, 70.56, 1],
      [160.57, -0.56, 1],
      [-1.69, -70.56, 1],
      [-160.57, 0.56, 1],
      [-178.31, 70.56, 1],
      [-19.43, -0.56, 1],
      [178.31, -70.56, 1],
      [-89.4, -19.43, 1],
      [90.6, -19.43, 1],
      [-27.28, -27.88, 1],
      [-130.91, 51.78, 1],
      [152.72, -27.88, 1],
      [120.76, -23.9, 1],
      [-49.09, -51.78, 1],
      [-120.76, 23.9, 1],
      [49.09, 51.78, 1],
      [-59.24, -23.9, 1],
      [130.91, -51.78, 1],
      [59.24, 23.9, 1],
      [27.28, 27.88, 1],
      [-152.72, 27.88, 1],
      [139.9, -15.44, 1],
      [-23.21, -47.5, 1],
      [-40.1, -15.44, 1],
      [-109.85, 38.38, 1],
      [-156.79, 47.5, 1],
      [109.85, -38.38, 1],
      [156.79, -47.5, 1],
      [70.15, 38.38, 1],
      [23.21, 47.5, 1],
      [-70.15, -38.38, 1],
      [-139.9, 15.44, 1],
      [40.1, 15.44, 1],
      [-2.17, -43.33, 1],
      [-92.29, 46.62, 1],
      [177.83, -43.33, 1],
      [133.35, -1.58, 1],
      [-87.71, -46.62, 1],
      [-133.35, 1.58, 1],
      [87.71, 46.62, 1],
      [-46.65, -1.58, 1],
      [92.29, -46.62, 1],
      [46.65, 1.58, 1],
      [2.17, 43.33, 1],
      [-177.83, 43.33, 1],
      [41.12, 27.96, 1],
      [38.91, 41.71, 1],
      [-138.88, 27.96, 1],
      [54.83, 35.51, 1],
      [141.09, -41.71, 1],
      [-54.83, -35.51, 1],
      [-141.09, 41.71, 1],
      [-125.17, 35.51, 1],
      [-38.91, -41.71, 1],
      [125.17, -35.51, 1],
      [-41.12, -27.96, 1],
      [138.88, -27.96, 1],
      [-126.67, 13.75, 1],
      [163.04, -35.46, 1],
      [53.33, 13.75, 1],
      [-67.73, -51.18, 1],
      [16.96, 35.46, 1],
      [67.73, 51.18, 1],
      [-16.96, -35.46, 1],
      [112.27, -51.18, 1],
      [-163.04, 35.46, 1],
      [-112.27, 51.18, 1],
      [126.67, -13.75, 1],
      [-53.33, -13.75, 1],
      [6.02, -15.42, 1],
      [-69.18, 73.47, 1],
      [-173.98, -15.42, 1],
      [105.51, 5.8, 1],
      [-110.82, -73.47, 1],
      [-105.51, -5.8, 1],
      [110.82, 73.47, 1],
      [-74.49, 5.8, 1],
      [69.18, -73.47, 1],
      [74.49, -5.8, 1],
      [-6.02, 15.42, 1],
      [173.98, 15.42, 1],
      [160.08, 33.45, 1],
      [62.71, -51.67, 1],
      [-19.92, 33.45, 1],
      [-54.9, 16.52, 1],
      [117.29, 51.67, 1],
      [54.9, -16.52, 1],
      [-117.29, -51.67, 1],
      [125.1, 16.52, 1],
      [-62.71, 51.67, 1],
      [-125.1, -16.52, 1],
      [-160.08, -33.45, 1],
      [19.92, -33.45, 1],
      [80.34, 6.51, 1],
      [6.61, 9.59, 1],
      [-99.66, 6.51, 1],
      [55.76, 78.37, 1],
      [173.39, -9.59, 1],
      [-55.76, -78.37, 1],
      [-173.39, 9.59, 1],
      [-124.24, 78.37, 1],
      [-6.61, -9.59, 1],
      [124.24, -78.37, 1],
      [-80.34, -6.51, 1],
      [99.66, -6.51, 1],
      [6.25, 24.64, 1],
      [76.64, 64.63, 1],
      [-173.75, 24.64, 1],
      [65.23, 5.68, 1],
      [103.36, -64.63, 1],
      [-65.23, -5.68, 1],
      [-103.36, 64.63, 1],
      [-114.77, 5.68, 1],
      [-76.64, -64.63, 1],
      [114.77, -5.68, 1],
      [-6.25, -24.64, 1],
      [173.75, -24.64, 1],
      [51.41, -63.45, 1],
      [-68.67, 16.19, 1],
      [-128.59, -63.45, 1],
      [162.69, 20.45, 1],
      [-111.33, -16.19, 1],
      [-162.69, -20.45, 1],
      [111.33, 16.19, 1],
      [-17.31, 20.45, 1],
      [68.67, -16.19, 1],
      [17.31, -20.45, 1],
      [-51.41, 63.45, 1],
      [128.59, 63.45, 1],
      [-50.6, 28.85, 1],
      [144.51, 33.77, 1],
      [129.4, 28.85, 1],
      [49.04, -42.6, 1],
      [35.49, -33.77, 1],
      [-49.04, 42.6, 1],
      [-35.49, 33.77, 1],
      [-130.96, -42.6, 1],
      [-144.51, -33.77, 1],
      [130.96, 42.6, 1],
      [50.6, -28.85, 1],
      [-129.4, -28.85, 1]
    ]
  ], n = t[S - 1];
  return n;
}
module.exports.getAmbisonicDecMtx = getAmbisonicDecMtx;
module.exports.getTdesign = getTdesign;
module.exports.deg2rad = deg2rad;
module.exports.rad2deg = rad2deg;
module.exports.createNearestLookup = createNearestLookup;
module.exports.findNearest = findNearest;
const _utils = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createNearestLookup,
  deg2rad,
  findNearest,
  getAmbisonicDecMtx,
  getCircHarmonics,
  getColumn,
  getTdesign,
  rad2deg,
  sampleCircle
}, Symbol.toStringTag, { value: "Module" }));
class monoEncoder2D {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.azim = 0, this.elev = 0, this.gainNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gainNodes[r] = this.ctx.createGain(), this.gainNodes[r].channelCountMode = "explicit", this.gainNodes[r].channelCount = 1;
    this.updateGains();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.gainNodes[r]), this.gainNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateGains() {
    const t = getCircHarmonics(this.order, [this.azim]);
    for (let n = 0; n < this.nCh; n++)
      this.gainNodes[n].gain.value = t[n][0];
  }
}
class orderLimiter {
  // Implement AmbisonicProcessor interface
  get order() {
    return this.orderOut;
  }
  get nCh() {
    return this.nChOut;
  }
  constructor(t, n, r) {
    this.ctx = t, this.orderIn = n, this.orderOut = r < n ? r : n, this.nChIn = getAmbisonicChannelCount(this.orderIn), this.nChOut = getAmbisonicChannelCount(this.orderOut), this.in = this.ctx.createChannelSplitter(this.nChIn), this.out = this.ctx.createChannelMerger(this.nChOut);
    for (let i = 0; i < this.nChOut; i++)
      this.in.connect(this.out, i, i);
  }
  updateOrder(t) {
    if (!(t > this.orderIn)) {
      this.orderOut = t, this.nChOut = getAmbisonicChannelCount(this.orderOut), this.out.disconnect(), this.out = this.ctx.createChannelMerger(this.nChOut);
      for (let n = 0; n < this.nChOut; n++)
        this.in.connect(this.out, n, n);
    }
  }
}
class orderLimiter2D {
  // Implement AmbisonicProcessor interface
  get order() {
    return this.orderOut;
  }
  get nCh() {
    return this.nChOut;
  }
  constructor(t, n, r) {
    this.ctx = t, this.orderIn = n, this.orderOut = r < n ? r : n, this.nChIn = getAmbisonicChannelCount2D(this.orderIn), this.nChOut = getAmbisonicChannelCount2D(this.orderOut), this.in = this.ctx.createChannelSplitter(this.nChIn), this.out = this.ctx.createChannelMerger(this.nChOut);
    for (let i = 0; i < this.nChOut; i++)
      this.in.connect(this.out, i, i);
  }
  updateOrder(t) {
    if (!(t > this.orderIn)) {
      this.orderOut = t, this.nChOut = getAmbisonicChannelCount2D(this.orderOut), this.out.disconnect(), this.out = this.ctx.createChannelMerger(this.nChOut);
      for (let n = 0; n < this.nChOut; n++)
        this.in.connect(this.out, n, n);
    }
  }
}
class orderWeight {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(this.order), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh), this.orderGains = new Array(this.order + 1), this.orderGains.fill(1);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  updateOrderGains() {
    for (let t = 0; t < this.nCh; t++) {
      const n = Math.floor(Math.sqrt(t));
      this.gains[t].gain.value = this.orderGains[n];
    }
  }
  computeMaxRECoeffs() {
    const t = this.order;
    this.orderGains[0] = 1;
    let n = 0, r = 0;
    for (let i = 1; i <= t; i++) {
      const s = recurseLegendrePoly_1(
        i,
        [Math.cos(2.406809 / (t + 1.51))],
        n,
        r
      );
      this.orderGains[i] = s[0][0], r = n, n = s;
    }
  }
}
class sceneRotator {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.yaw = 0, this.pitch = 0, this.roll = 0, this.rotMtx = numeric$2.identity(this.nCh), this.rotMtxNodes = new Array(this.order), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh);
    for (let i = 1; i <= this.order; i++) {
      const s = new Array(2 * i + 1);
      for (let e = 0; e < 2 * i + 1; e++) {
        s[e] = new Array(2 * i + 1);
        for (let c = 0; c < 2 * i + 1; c++)
          s[e][c] = this.ctx.createGain(), s[e][c].gain.value = e === c ? 1 : 0;
      }
      this.rotMtxNodes[i - 1] = s;
    }
    this.in.connect(this.out, 0, 0);
    let r = 1;
    for (let i = 1; i <= this.order; i++) {
      for (let s = 0; s < 2 * i + 1; s++)
        for (let e = 0; e < 2 * i + 1; e++)
          this.in.connect(this.rotMtxNodes[i - 1][s][e], r + e, 0), this.rotMtxNodes[i - 1][s][e].connect(this.out, 0, r + s);
      r = r + 2 * i + 1;
    }
  }
  updateRotMtx() {
    const t = degreesToRadians(this.yaw), n = degreesToRadians(this.pitch), r = degreesToRadians(this.roll);
    this.rotMtx = getSHrotMtx_1(
      yawPitchRoll2Rzyx_1(t, n, r),
      this.order
    );
    let i = 1;
    for (let s = 1; s < this.order + 1; s++) {
      for (let e = 0; e < 2 * s + 1; e++)
        for (let c = 0; c < 2 * s + 1; c++)
          this.rotMtxNodes[s - 1][e][c].gain.value = this.rotMtx[i + e][i + c];
      i = i + 2 * s + 1;
    }
  }
}
class sceneRotator2D {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.yaw = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.rotMtxNodes = new Array(2 * this.order), this.in.connect(this.out, 0, 0);
    for (let r = 0; r < 2 * this.order; r = r + 2) {
      const i = [
        this.ctx.createGain(),
        this.ctx.createGain()
      ], s = [
        this.ctx.createGain(),
        this.ctx.createGain()
      ];
      this.rotMtxNodes[r] = i, this.rotMtxNodes[r + 1] = s, this.in.connect(this.rotMtxNodes[r][0], r + 1, 0), this.rotMtxNodes[r][0].connect(this.out, 0, r + 1), this.in.connect(this.rotMtxNodes[r][1], r + 2, 0), this.rotMtxNodes[r][1].connect(this.out, 0, r + 1), this.in.connect(this.rotMtxNodes[r + 1][0], r + 1, 0), this.rotMtxNodes[r + 1][0].connect(this.out, 0, r + 2), this.in.connect(this.rotMtxNodes[r + 1][1], r + 2, 0), this.rotMtxNodes[r + 1][1].connect(this.out, 0, r + 2);
    }
    this.updateRotMtx();
  }
  updateRotMtx() {
    const t = degreesToRadians(this.yaw);
    let n = 1;
    for (let r = 0; r < 2 * this.order; r = r + 2)
      this.rotMtxNodes[r][0].gain.value = Math.cos(n * t), this.rotMtxNodes[r][1].gain.value = Math.sin(n * t), this.rotMtxNodes[r + 1][0].gain.value = -Math.sin(n * t), this.rotMtxNodes[r + 1][1].gain.value = Math.cos(n * t), n++;
  }
}
class sceneMirror {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.mirrorPlane = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1, this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  reset() {
    for (let t = 0; t < this.nCh; t++)
      this.gains[t].gain.value = 1;
  }
  mirror(t) {
    switch (t) {
      case 0:
        this.mirrorPlane = 0, this.reset();
        break;
      case 1:
        this.reset(), this.mirrorPlane = 1;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            (r < 0 && r % 2 === 0 || r > 0 && r % 2 === 1) && (this.gains[i].gain.value = -1);
          }
        break;
      case 2:
        this.reset(), this.mirrorPlane = 2;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            r < 0 && (this.gains[i].gain.value = -1);
          }
        break;
      case 3:
        this.reset(), this.mirrorPlane = 3;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            (r + n) % 2 === 1 && (this.gains[i].gain.value = -1);
          }
        break;
      default:
        console.log(
          "The mirroring planes can be either 1 (yz), 2 (xz), 3 (xy), or 0 (no mirroring). Value set to 0."
        ), this.mirrorPlane = 0, this.reset();
    }
  }
}
class sceneMirror2D {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.mirrorPlane = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1, this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  reset() {
    for (let t = 0; t < this.nCh; t++)
      this.gains[t].gain.value = 1;
  }
  mirror(t) {
    switch (t) {
      case 0:
        this.mirrorPlane = 0, this.reset();
        break;
      case 1:
        this.reset(), this.mirrorPlane = 1;
        for (let n = 2; n < this.nCh; n++)
          this.gains[n].gain.value = -1, n % 2 !== 0 && (n = n + 2);
        break;
      case 2:
        this.reset(), this.mirrorPlane = 2;
        for (let n = 0; n < this.nCh; n++)
          n % 2 !== 0 && (this.gains[n].gain.value = -1);
        break;
      case 3:
        console.log("up-down mirroring in 2D mode not possible");
        break;
      default:
        console.log(
          "The mirroring planes can be either 1 (yz), 2 (xz) or 0 (no mirroring). Value set to 0."
        ), this.mirrorPlane = 0, this.reset();
    }
  }
}
class binDecoder {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.decFilters = new Array(this.nCh), this.decFilterNodes = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(2), this.out.channelCountMode = "explicit", this.out.channelCount = 1, this.gainMid = this.ctx.createGain(), this.gainSide = this.ctx.createGain(), this.invertSide = this.ctx.createGain(), this.gainMid.gain.value = 1, this.gainSide.gain.value = 1, this.invertSide.gain.value = -1;
    for (let r = 0; r < this.nCh; r++)
      this.decFilterNodes[r] = this.ctx.createConvolver(), this.decFilterNodes[r].normalize = !1;
    this.resetFilters();
    for (let r = 0; r < this.nCh; r++) {
      this.in.connect(this.decFilterNodes[r], r, 0);
      const i = Math.floor(Math.sqrt(r));
      r - i * i - i >= 0 ? this.decFilterNodes[r].connect(this.gainMid) : this.decFilterNodes[r].connect(this.gainSide);
    }
    this.gainMid.connect(this.out, 0, 0), this.gainSide.connect(this.out, 0, 0), this.gainMid.connect(this.out, 0, 1), this.gainSide.connect(this.invertSide, 0, 0), this.invertSide.connect(this.out, 0, 1), this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.decFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.decFilters[n].getChannelData(0).set(t.getChannelData(n)), this.decFilterNodes[n].buffer = this.decFilters[n];
  }
  resetFilters() {
    const t = new Array(this.nCh);
    t.fill(0), t[0] = 0.5, t[1] = 0.5 / Math.sqrt(3);
    for (let n = 0; n < this.nCh; n++) {
      this.decFilters[n] = this.ctx.createBuffer(1, 64, this.ctx.sampleRate);
      for (let r = 0; r < 64; r++)
        this.decFilters[n].getChannelData(0)[r] = 0;
      this.decFilters[n].getChannelData(0)[0] = t[n], this.decFilterNodes[n].buffer = this.decFilters[n];
    }
  }
}
class binDecoder2D {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.decFilters = new Array(this.nCh), this.decFilterNodes = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(2), this.out.channelCountMode = "explicit", this.out.channelCount = 1, this.gainMid = this.ctx.createGain(), this.gainSide = this.ctx.createGain(), this.invertSide = this.ctx.createGain(), this.gainMid.gain.value = 1, this.gainSide.gain.value = 1, this.invertSide.gain.value = -1;
    for (let r = 0; r < this.nCh; r++)
      this.decFilterNodes[r] = this.ctx.createConvolver(), this.decFilterNodes[r].normalize = !1;
    this.resetFilters();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.decFilterNodes[r], r, 0), r % 2 === 0 ? this.decFilterNodes[r].connect(this.gainMid) : this.decFilterNodes[r].connect(this.gainSide);
    this.gainMid.connect(this.out, 0, 0), this.gainSide.connect(this.out, 0, 0), this.gainMid.connect(this.out, 0, 1), this.gainSide.connect(this.invertSide, 0, 0), this.invertSide.connect(this.out, 0, 1), this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.decFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.decFilters[n].getChannelData(0).set(t.getChannelData(n)), this.decFilterNodes[n].buffer = this.decFilters[n];
  }
  resetFilters() {
    const t = new Array(this.nCh);
    t.fill(0), t[0] = 0.5, t[1] = 0.5 / Math.sqrt(3);
    for (let n = 0; n < this.nCh; n++) {
      this.decFilters[n] = this.ctx.createBuffer(1, 64, this.ctx.sampleRate);
      for (let r = 0; r < 64; r++)
        this.decFilters[n].getChannelData(0)[r] = 0;
      this.decFilters[n].getChannelData(0)[0] = t[n], this.decFilterNodes[n].buffer = this.decFilters[n];
    }
  }
}
class decoder {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.nSpk = 0, this._decodingMatrix = [], this._spkSphPosArray = [], this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(1), this._spkSphPosArray = this._getDefaultSpkConfig(this.order), this._updateDecodeMtx(this._spkSphPosArray);
  }
  // spkSphPosArray in spherical coordinates: [ [azim1, elev1, dist1], ... [azimN, elevN, distN] ]
  set speakerPos(t) {
    t === void 0 && (t = this._getDefaultSpkConfig(this.order)), this._spkSphPosArray = t, this.out.disconnect(), this._updateDecodeMtx(t);
  }
  get speakerPos() {
    return this._spkSphPosArray;
  }
  // internal method to calculate Ambisonic decoding matrix and define new ambisonic gain nodes and values
  _updateDecodeMtx(t) {
    this.nSpk = t.length, this.out = this.ctx.createChannelMerger(this.nSpk), this._decodingMatrix = getAmbisonicDecMtx(t, this.order), this.mtxGain = new Array(this.nCh);
    for (let n = 0; n < this.nCh; n++) {
      this.mtxGain[n] = new Array(this.nSpk);
      for (let r = 0; r < this.nSpk; r++) {
        const i = this.ctx.createGain();
        i.gain.value = this._decodingMatrix[r][n], this.in.connect(i, n, 0), i.connect(this.out, 0, r), this.mtxGain[n][r] = i;
      }
    }
  }
  // get default speaker configuration for orders 1, 2, 3
  _getDefaultSpkConfig(t) {
    let n = [];
    switch (t) {
      case 1:
        n = [
          [0, 0, 1],
          [90, 0, 1],
          [180, 0, 1],
          [270, 0, 1],
          [0, 90, 1],
          [0, -90, 1]
        ];
        break;
      case 2:
        n = [
          [180, -31.7161, 0.5878],
          [180, 31.7161, 0.5878],
          [-121.7161, 0, 0.5878],
          [121.7161, 0, 0.5878],
          [-90, -58.2839, 0.5878],
          [-90, 58.2839, 0.5878],
          [90, -58.2839, 0.5878],
          [90, 58.2839, 0.5878],
          [-58.2839, 0, 0.5878],
          [58.2839, 0, 0.5878],
          [0, -31.7161, 0.5878],
          [0, 31.7161, 0.5878]
        ];
        break;
      case 3:
        n = [
          [-159.0931, 0, 0.5352],
          [159.0931, 0, 0.5352],
          [-135, -35.2644, 0.5352],
          [-135, 35.2644, 0.5352],
          [135, -35.2644, 0.5352],
          [135, 35.2644, 0.5352],
          [180, -69.0931, 0.5352],
          [180, 69.0931, 0.5352],
          [-90, -20.9069, 0.5352],
          [-90, 20.9069, 0.5352],
          [90, -20.9069, 0.5352],
          [90, 20.9069, 0.5352],
          [0, -69.0931, 0.5352],
          [0, 69.0931, 0.5352],
          [-45, -35.2644, 0.5352],
          [-45, 35.2644, 0.5352],
          [45, -35.2644, 0.5352],
          [45, 35.2644, 0.5352],
          [-20.9069, 0, 0.5352],
          [20.9069, 0, 0.5352]
        ];
        break;
      default:
        console.error("unsupported default order:", t);
    }
    return n;
  }
}
class convolver {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.encFilters = new Array(this.nCh), this.encFilterNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.encFilterNodes[r] = this.ctx.createConvolver(), this.encFilterNodes[r].normalize = !1;
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.encFilterNodes[r]), this.encFilterNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.encFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.encFilters[n].getChannelData(0).set(t.getChannelData(n)), this.encFilterNodes[n].buffer = this.encFilters[n];
  }
}
class virtualMic {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.azim = 0, this.elev = 0, this.vmicGains = new Array(this.nCh), this.vmicGainNodes = new Array(this.nCh), this.vmicCoeffs = new Array(this.order + 1), this.vmicPattern = "hypercardioid", this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createGain();
    for (let r = 0; r < this.nCh; r++)
      this.vmicGainNodes[r] = this.ctx.createGain();
    this.SHxyz = new Array(this.nCh), this.SHxyz.fill(0), this.updatePattern(), this.updateOrientation();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.vmicGainNodes[r], r, 0), this.vmicGainNodes[r].connect(this.out);
    this.initialized = !0;
  }
  updatePattern() {
    switch (this.vmicPattern) {
      case "cardioid":
        this.vmicCoeffs = this.computeCardioidCoeffs(this.order);
        break;
      case "supercardioid":
        this.vmicCoeffs = this.computeSupercardCoeffs(this.order);
        break;
      case "hypercardioid":
        this.vmicCoeffs = this.computeHypercardCoeffs(this.order);
        break;
      case "max_rE":
        this.vmicCoeffs = this.computeMaxRECoeffs(this.order);
        break;
      default:
        this.vmicPattern = "hypercardioid", this.vmicCoeffs = this.computeHypercardCoeffs(this.order);
    }
    this.updateGains();
  }
  updateOrientation() {
    const t = degreesToRadians(this.azim), n = degreesToRadians(this.elev), r = computeRealSH_1(this.order, [[t, n]]);
    for (let i = 0; i < this.nCh; i++)
      this.SHxyz[i] = r[i][0];
    this.updateGains();
  }
  updateGains() {
    for (let t = 0; t <= this.order; t++)
      for (let n = -t; n <= t; n++) {
        const r = t * t + t + n;
        this.vmicGains[r] = this.vmicCoeffs[t] * this.SHxyz[r];
      }
    for (let t = 0; t < this.nCh; t++)
      this.vmicGainNodes[t].gain.value = this.vmicGains[t];
  }
  computeCardioidCoeffs(t) {
    const n = new Array(t + 1);
    for (let r = 0; r <= t; r++)
      n[r] = factorial_1(t) * factorial_1(t) / (factorial_1(t + r + 1) * factorial_1(t - r));
    return n;
  }
  computeHypercardCoeffs(t) {
    const n = new Array(t + 1), r = (t + 1) * (t + 1);
    for (let i = 0; i <= t; i++)
      n[i] = 1 / r;
    return n;
  }
  computeSupercardCoeffs(t) {
    switch (t) {
      case 1:
        return [0.366, 0.2113];
      case 2:
        return [0.2362, 0.1562, 0.059];
      case 3:
        return [0.1768, 0.1281, 0.0633, 0.0175];
      case 4:
        return [0.1414, 0.1087, 0.0623, 0.0247, 54e-4];
      default:
        return console.error("Orders should be in the range of 1-4 at the moment."), [];
    }
  }
  computeMaxRECoeffs(t) {
    const n = new Array(t + 1);
    n[0] = 1;
    let r = 0, i = 0;
    for (let e = 1; e < t + 1; e++) {
      const c = recurseLegendrePoly_1(
        e,
        [Math.cos(2.406809 / (t + 1.51))],
        r,
        i
      );
      n[e] = c[0][0], i = r, r = c;
    }
    let s = 0;
    for (let e = 0; e <= t; e++)
      s += n[e] * (2 * e + 1);
    for (let e = 0; e <= t; e++)
      n[e] = n[e] / s;
    return n;
  }
}
if (commonjsGlobal.AnalyserNode && !commonjsGlobal.AnalyserNode.prototype.getFloatTimeDomainData) {
  var uint8 = new Uint8Array(2048);
  commonjsGlobal.AnalyserNode.prototype.getFloatTimeDomainData = function(S) {
    this.getByteTimeDomainData(uint8);
    for (var t = 0, n = S.length; t < n; t++)
      S[t] = (uint8[t] - 128) * 78125e-7;
  };
}
class rmsAnalyser {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.analysers = new Array(this.nCh), this.analBuffers = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.analysers[r] = this.ctx.createAnalyser(), this.analysers[r].fftSize = this.fftSize, this.analysers[r].smoothingTimeConstant = 0, this.analBuffers[r] = new Float32Array(this.fftSize), this.in.connect(this.analysers[r], r, 0), this.analysers[r].connect(this.out, 0, r);
  }
  updateBuffers() {
    for (let t = 0; t < this.nCh; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeRMS() {
    const t = new Array(this.nCh);
    t.fill(0);
    for (let n = 0; n < this.nCh; n++) {
      for (let r = 0; r < this.fftSize; r++)
        t[n] = t[n] + this.analBuffers[n][r] * this.analBuffers[n][r];
      t[n] = Math.sqrt(t[n] / this.fftSize);
    }
    return t;
  }
}
class powermapAnalyser {
  constructor(t, n, r) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.fftSize = 2048, this.analysers = new Array(this.nCh), this.analBuffers = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh);
    for (let s = 0; s < this.nCh; s++)
      this.analysers[s] = this.ctx.createAnalyser(), this.analysers[s].fftSize = this.fftSize, this.analysers[s].smoothingTimeConstant = 0, this.analBuffers[s] = new Float32Array(this.fftSize);
    for (let s = 0; s < this.nCh; s++)
      this.in.connect(this.out, s, s), this.in.connect(this.analysers[s], s, 0);
    const i = getTdesign(4 * n);
    this.td_dirs_rad = deg2rad(i), this.SHmtx = computeRealSH_1(this.order, this.td_dirs_rad), this.mode = r;
  }
  updateBuffers() {
    for (let t = 0; t < this.nCh; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computePowermap() {
    const t = this.td_dirs_rad.length, n = numeric$2.dot(
      numeric$2.transpose(this.SHmtx),
      this.analBuffers
    ), r = new Array(t);
    for (let i = 0; i < t; i++) {
      let s = 0;
      for (let e = 0; e < this.fftSize; e++)
        s = s + n[i][e] * n[i][e];
      s = s / this.fftSize, r[i] = [
        this.td_dirs_rad[i][0],
        this.td_dirs_rad[i][1],
        s
      ];
    }
    return this.mode === 0 ? r : forwardSHT_1(
      2 * this.order,
      r,
      1,
      0
    );
  }
}
class intensityAnalyser {
  constructor(t) {
    this.ctx = t, this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(3);
    for (let n = 0; n < 3; n++)
      this.gains[n] = this.ctx.createGain(), this.gains[n].gain.value = 1 / Math.sqrt(3);
    this.analysers = new Array(4), this.analBuffers = new Array(4);
    for (let n = 0; n < 4; n++)
      this.analysers[n] = this.ctx.createAnalyser(), this.analysers[n].fftSize = this.fftSize, this.analysers[n].smoothingTimeConstant = 0, this.analBuffers[n] = new Float32Array(this.fftSize);
    this.in.connect(this.out, 0, 0), this.in.connect(this.analysers[0], 0, 0), this.in.connect(this.gains[1], 1, 0), this.in.connect(this.gains[2], 2, 0), this.in.connect(this.gains[0], 3, 0);
    for (let n = 0; n < 3; n++)
      this.gains[n].connect(this.analysers[n + 1], 0, 0), this.gains[n].connect(this.out, 0, n + 1);
  }
  updateBuffers() {
    for (let t = 0; t < 4; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeIntensity() {
    let t = 0, n = 0, r = 0, i = 0, s = 0, e = 0, c = 0;
    for (let m = 0; m < this.fftSize; m++)
      t = t + this.analBuffers[0][m] * this.analBuffers[1][m], n = n + this.analBuffers[0][m] * this.analBuffers[2][m], r = r + this.analBuffers[0][m] * this.analBuffers[3][m], i = i + this.analBuffers[0][m] * this.analBuffers[0][m], s = s + this.analBuffers[1][m] * this.analBuffers[1][m], e = e + this.analBuffers[2][m] * this.analBuffers[2][m], c = c + this.analBuffers[3][m] * this.analBuffers[3][m];
    const f = [t, n, r], o = Math.sqrt(f[0] * f[0] + f[1] * f[1] + f[2] * f[2]), u = (i + s + e + c) / 2, l = 1 - o / (u + 1e-7), y = radiansToDegrees(Math.atan2(n, t)), v = radiansToDegrees(
      Math.atan2(f[2], Math.sqrt(f[0] * f[0] + f[1] * f[1]))
    );
    return [y, v, l, u];
  }
}
class intensityAnalyser2D {
  constructor(t) {
    this.ctx = t, this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(3), this.out = this.ctx.createChannelMerger(3), this.gains = new Array(2);
    for (let n = 0; n < 2; n++)
      this.gains[n] = this.ctx.createGain(), this.gains[n].gain.value = 1 / Math.sqrt(3);
    this.analysers = new Array(3), this.analBuffers = new Array(3);
    for (let n = 0; n < 3; n++)
      this.analysers[n] = this.ctx.createAnalyser(), this.analysers[n].fftSize = this.fftSize, this.analysers[n].smoothingTimeConstant = 0, this.analBuffers[n] = new Float32Array(this.fftSize);
    this.in.connect(this.out, 0, 0), this.in.connect(this.analysers[0], 0, 0), this.in.connect(this.gains[1], 1, 0), this.in.connect(this.gains[0], 2, 0);
    for (let n = 0; n < 2; n++)
      this.gains[n].connect(this.analysers[n + 1], 0, 0), this.gains[n].connect(this.out, 0, n + 1);
  }
  updateBuffers() {
    for (let t = 0; t < 3; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeIntensity() {
    let t = 0, n = 0, r = 0, i = 0, s = 0;
    for (let y = 0; y < this.fftSize; y++)
      t = t + this.analBuffers[0][y] * this.analBuffers[1][y], n = n + this.analBuffers[0][y] * this.analBuffers[2][y], r = r + this.analBuffers[0][y] * this.analBuffers[0][y], i = i + this.analBuffers[1][y] * this.analBuffers[1][y], s = s + this.analBuffers[2][y] * this.analBuffers[2][y];
    const e = [t, n], c = Math.sqrt(e[0] * e[0] + e[1] * e[1]), f = (r + i + s) / 2, o = 1 - c / (f + 1e-7);
    return [-radiansToDegrees(Math.atan2(n, t)), 0, o, f];
  }
}
function pad(S, t) {
  return ("000000000" + S).substr(-2);
}
class HOAloader {
  constructor(t, n, r, i) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.nChGroups = Math.ceil(this.nCh / 8), this.buffers = new Array(), this.loadCount = 0, this.loaded = !1, this.onLoad = i, this.urls = new Array(this.nChGroups), this.concatBuffer = null;
    const s = r.slice(r.length - 3, r.length);
    this.fileExt = s;
    for (let e = 0; e < this.nChGroups; e++)
      e === this.nChGroups - 1 ? this.urls[e] = r.slice(0, r.length - 4) + "_" + pad(e * 8 + 1) + "-" + pad(this.nCh) + "ch." + s : this.urls[e] = r.slice(0, r.length - 4) + "_" + pad(e * 8 + 1) + "-" + pad(e * 8 + 8) + "ch." + s;
  }
  loadBuffers(t, n) {
    const r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "arraybuffer";
    const i = this;
    r.onload = function() {
      i.context.decodeAudioData(
        r.response,
        function(s) {
          if (!s) {
            alert("error decoding file data: " + t);
            return;
          }
          i.buffers[n] = s, i.loadCount++, i.loadCount === i.nChGroups && (i.loaded = !0, i.concatBuffers(), console.log("HOAloader: all buffers loaded and concatenated"), i.onLoad(i.concatBuffer));
        },
        function(s) {
          alert(
            "Browser cannot decode audio data:  " + t + `

Error: ` + s + `

(If you re using Safari and get a null error, this is most likely due to Apple's shady plan going on to stop the .ogg format from easing web developer's life :)`
          );
        }
      );
    }, r.onerror = function() {
      alert("HOAloader: XHR error");
    }, r.send();
  }
  load() {
    for (let t = 0; t < this.nChGroups; ++t) this.loadBuffers(this.urls[t], t);
  }
  concatBuffers() {
    if (!this.loaded) return;
    const t = this.nCh, n = this.nChGroups;
    let r = this.buffers[0].length;
    this.buffers.forEach((e) => {
      r = Math.max(r, e.length);
    });
    const i = this.buffers[0].sampleRate;
    let s = [1, 2, 3, 4, 5, 6, 7, 8];
    this.fileExt.toLowerCase() === "ogg" && (console.log(
      "Loading of 8chan OGG files [Chrome/Firefox]: remap channels to correct order!"
    ), s = [1, 3, 2, 7, 8, 5, 6, 4]), this.concatBuffer = this.context.createBuffer(t, r, i);
    for (let e = 0; e < n; e++)
      for (let c = 0; c < this.buffers[e].numberOfChannels; c++)
        this.concatBuffer.getChannelData(e * 8 + c).set(this.buffers[e].getChannelData(s[c] - 1));
  }
}
class HRIRloader_local {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.onLoad = r, this.vls_dirs_deg = getTdesign(2 * this.order), this.nVLS = this.vls_dirs_deg.length, this.nearestLookupRes = [5, 5], this.fs = 0, this.nSamples = 0, this.hrir_dirs_deg = [], this.hrirs = [], this.nearestLookup = [], this.nearest_dirs_deg = [], this.vls_hrirs = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    const n = this, r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "json", r.onload = function() {
      n.parseHrirFromJSON(r.response), n.nearestLookup = createNearestLookup(
        n.hrir_dirs_deg,
        n.nearestLookupRes
      );
      const i = findNearest(
        n.vls_dirs_deg,
        n.nearestLookup,
        n.nearestLookupRes
      );
      n.nearest_dirs_deg = n.getClosestDirs(i, n.hrir_dirs_deg), n.vls_hrirs = n.getClosestHrirFilters(i, n.hrirs), n.computeDecFilters();
    }, r.send();
  }
  parseHrirFromJSON(t) {
    const n = this;
    this.fs = t.leaves[6].data[0], this.nSamples = t.leaves[8].data[0][1].length, this.hrir_dirs_deg = [], t.leaves[4].data.forEach(function(r) {
      n.hrir_dirs_deg.push([r[0], r[1]]);
    }), this.hrirs = [], t.leaves[8].data.forEach(function(r) {
      const i = new Float64Array(r[0]), s = new Float64Array(r[1]);
      n.hrirs.push([i, s]);
    });
  }
  getClosestDirs(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  getClosestHrirFilters(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  computeDecFilters() {
    this.decodingMatrix = getAmbisonicDecMtx(
      this.nearest_dirs_deg,
      this.order
    ), this.hoaBuffer = this.getHoaFilterFromHrirFilter(
      this.nCh,
      this.nSamples,
      this.fs,
      this.vls_hrirs,
      this.decodingMatrix
    ), this.onLoad(this.hoaBuffer);
  }
  getHoaFilterFromHrirFilter(t, n, r, i, s) {
    n > i[0][0].length && (n = i[0][0].length);
    const e = this.context.createBuffer(t, n, r);
    for (let c = 0; c < t; c++) {
      const f = new Float32Array(n);
      for (let o = 0; o < i.length; o++)
        for (let u = 0; u < n; u++)
          f[u] += s[o][c] * i[o][0][u];
      e.getChannelData(c).set(f);
    }
    return e;
  }
}
class HRIRloader2D_local {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.onLoad = r, this.vls_dirs_deg = sampleCircle(2 * this.order + 2), this.nVLS = this.vls_dirs_deg.length, this.nearestLookupRes = [5, 5], this.fs = 0, this.nSamples = 0, this.hrir_dirs_deg = [], this.hrirs = [], this.nearestLookup = [], this.vls_hrirs = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    const n = this, r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "json", r.onload = function() {
      n.parseHrirFromJSON(r.response), n.nearestLookup = createNearestLookup(
        n.hrir_dirs_deg,
        n.nearestLookupRes
      );
      const i = findNearest(
        n.vls_dirs_deg,
        n.nearestLookup,
        n.nearestLookupRes
      );
      n.getClosestDirs(i, n.hrir_dirs_deg), n.vls_hrirs = n.getClosestHrirFilters(i, n.hrirs), n.computeDecFilters();
    }, r.send();
  }
  parseHrirFromJSON(t) {
    const n = this;
    this.fs = t.leaves[6].data[0], this.nSamples = t.leaves[8].data[0][1].length, this.hrir_dirs_deg = [], t.leaves[4].data.forEach(function(r) {
      n.hrir_dirs_deg.push([r[0], r[1]]);
    }), this.hrirs = [], t.leaves[8].data.forEach(function(r) {
      const i = new Float64Array(r[0]), s = new Float64Array(r[1]);
      n.hrirs.push([i, s]);
    });
  }
  getClosestDirs(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  getClosestHrirFilters(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  computeDecFilters() {
    const t = [];
    t.push(1);
    for (let r = 1; r < this.order + 1; r++)
      t.push(Math.cos(r * Math.PI / (2 * this.order + 2))), t.push(Math.cos(r * Math.PI / (2 * this.order + 2)));
    const n = numeric$2.diag(t);
    this.decodingMatrix = numeric$2.transpose(
      getCircHarmonics(
        this.order,
        getColumn(this.vls_dirs_deg, 0)
      )
    ), this.decodingMatrix = numeric$2.dot(
      this.decodingMatrix,
      n
    ), this.decodingMatrix = numeric$2.mul(
      2 * Math.PI / this.vls_dirs_deg.length,
      this.decodingMatrix
    ), this.hoaBuffer = this.getHoaFilterFromHrirFilter(
      this.nCh,
      this.nSamples,
      this.fs,
      this.vls_hrirs,
      this.decodingMatrix
    ), this.onLoad(this.hoaBuffer);
  }
  getHoaFilterFromHrirFilter(t, n, r, i, s) {
    n > i[0][0].length && (n = i[0][0].length);
    const e = this.context.createBuffer(t, n, r);
    for (let c = 0; c < t; c++) {
      const f = new Float32Array(n);
      for (let o = 0; o < i.length; o++)
        for (let u = 0; u < n; u++)
          f[u] += s[o][c] * i[o][0][u];
      e.getChannelData(c).set(f);
    }
    return e;
  }
}
function commonjsRequire(S) {
  throw new Error('Could not dynamically require "' + S + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var serveSofaHrir = { exports: {} };
(function(S, t) {
  (function(n) {
    S.exports = n();
  })(function() {
    return function n(r, i, s) {
      function e(o, u) {
        if (!i[o]) {
          if (!r[o]) {
            var l = typeof commonjsRequire == "function" && commonjsRequire;
            if (!u && l) return l(o, !0);
            if (c) return c(o, !0);
            var y = new Error("Cannot find module '" + o + "'");
            throw y.code = "MODULE_NOT_FOUND", y;
          }
          var v = i[o] = { exports: {} };
          r[o][0].call(v.exports, function(m) {
            var p = r[o][1][m];
            return e(p || m);
          }, v, v.exports, n, r, i, s);
        }
        return i[o].exports;
      }
      for (var c = typeof commonjsRequire == "function" && commonjsRequire, f = 0; f < s.length; f++) e(s[f]);
      return e;
    }({ 1: [function(n, r, i) {
      r.exports = { default: n("core-js/library/fn/object/define-property"), __esModule: !0 };
    }, { "core-js/library/fn/object/define-property": 4 }], 2: [function(n, r, i) {
      i.default = function(s, e) {
        if (!(s instanceof e))
          throw new TypeError("Cannot call a class as a function");
      }, i.__esModule = !0;
    }, {}], 3: [function(n, r, i) {
      var s = n("babel-runtime/core-js/object/define-property").default;
      i.default = /* @__PURE__ */ function() {
        function e(c, f) {
          for (var o = 0; o < f.length; o++) {
            var u = f[o];
            u.enumerable = u.enumerable || !1, u.configurable = !0, "value" in u && (u.writable = !0), s(c, u.key, u);
          }
        }
        return function(c, f, o) {
          return f && e(c.prototype, f), o && e(c, o), c;
        };
      }(), i.__esModule = !0;
    }, { "babel-runtime/core-js/object/define-property": 1 }], 4: [function(n, r, i) {
      var s = n("../../modules/$");
      r.exports = function(c, f, o) {
        return s.setDesc(c, f, o);
      };
    }, { "../../modules/$": 5 }], 5: [function(n, r, i) {
      var s = Object;
      r.exports = {
        create: s.create,
        getProto: s.getPrototypeOf,
        isEnum: {}.propertyIsEnumerable,
        getDesc: s.getOwnPropertyDescriptor,
        setDesc: s.defineProperty,
        setDescs: s.defineProperties,
        getKeys: s.keys,
        getNames: s.getOwnPropertyNames,
        getSymbols: s.getOwnPropertySymbols,
        each: [].forEach
      };
    }, {}], 6: [function(n, r, i) {
      var s = n("babel-runtime/helpers/create-class").default, e = n("babel-runtime/helpers/class-call-check").default;
      Object.defineProperty(i, "__esModule", {
        value: !0
      });
      var c = function() {
        function f(o, u) {
          e(this, f), this.delayTime = 0, this.posRead = 0, this.posWrite = 0, this.fracXi1 = 0, this.fracYi1 = 0, this.intDelay = 0, this.fracDelay = 0, this.a1 = void 0, this.sampleRate = o, this.maxDelayTime = u || 1, this.bufferSize = this.maxDelayTime * this.sampleRate, this.bufferSize % 1 !== 0 && (this.bufferSize = parseInt(this.bufferSize) + 1), this.buffer = new Float32Array(this.bufferSize);
        }
        return s(f, [{
          key: "setDelay",
          value: function(u) {
            if (u < this.maxDelayTime) {
              this.delayTime = u;
              var l = u * this.sampleRate;
              this.intDelay = parseInt(l), this.fracDelay = l - this.intDelay, this.resample(), this.fracDelay !== 0 && this.updateThiranCoefficient();
            } else
              throw new Error("delayTime > maxDelayTime");
          }
          /**
           * Update delay value
           * @public
           */
        }, {
          key: "getDelay",
          value: function() {
            return this.delayTime;
          }
          /**
           * Process method, where the output is calculated.
           * @param inputBuffer Input Array
           * @public
           */
        }, {
          key: "process",
          value: function(u) {
            for (var l = new Float32Array(u.length), y = 0; y < u.length; y = y + 1)
              this.buffer[this.posWrite] = u[y], l[y] = this.buffer[this.posRead], this.updatePointers();
            return this.fracDelay === 0 || (l = new Float32Array(this.fractionalThiranProcess(l))), l;
          }
          /**
           * Update the value of posRead and posWrite pointers inside the circular buffer
           * @private
           */
        }, {
          key: "updatePointers",
          value: function() {
            this.posWrite === this.buffer.length - 1 ? this.posWrite = 0 : this.posWrite = this.posWrite + 1, this.posRead === this.buffer.length - 1 ? this.posRead = 0 : this.posRead = this.posRead + 1;
          }
          /**
           * Update Thiran coefficient (1st order Thiran)
           * @private
           */
        }, {
          key: "updateThiranCoefficient",
          value: function() {
            this.a1 = (1 - this.fracDelay) / (1 + this.fracDelay);
          }
          /**
           * Update the pointer posRead value when the delay value is changed
           * @private
           */
        }, {
          key: "resample",
          value: function() {
            if (this.posWrite - this.intDelay < 0) {
              var u = this.intDelay - this.posWrite;
              this.posRead = this.buffer.length - u;
            } else
              this.posRead = this.posWrite - this.intDelay;
          }
          /**
           * Fractional process method.
           * @private
           * @param inputBuffer Input Array
           */
        }, {
          key: "fractionalThiranProcess",
          value: function(u) {
            for (var l = new Float32Array(u.length), y, v, m = this.fracXi1, p = this.fracYi1, D = 0; D < u.length; D = D + 1)
              y = u[D], v = this.a1 * y + m - this.a1 * p, m = y, p = v, l[D] = v;
            return this.fracXi1 = m, this.fracYi1 = p, l;
          }
        }]), f;
      }();
      i.default = c, r.exports = i.default;
    }, { "babel-runtime/helpers/class-call-check": 2, "babel-runtime/helpers/create-class": 3 }], 7: [function(n, r, i) {
      r.exports = n("./dist/fractional-delay");
    }, { "./dist/fractional-delay": 6 }], 8: [function(n, r, i) {
      (function(e, c) {
        if (typeof i == "object" && typeof r == "object")
          r.exports = c();
        else {
          var f = c();
          for (var o in f) (typeof i == "object" ? i : e)[o] = f[o];
        }
      })(this, function() {
        return (
          /******/
          function(s) {
            var e = {};
            function c(f) {
              if (e[f])
                return e[f].exports;
              var o = e[f] = {
                /******/
                i: f,
                /******/
                l: !1,
                /******/
                exports: {}
                /******/
              };
              return s[f].call(o.exports, o, o.exports, c), o.l = !0, o.exports;
            }
            return c.m = s, c.c = e, c.d = function(f, o, u) {
              c.o(f, o) || Object.defineProperty(f, o, {
                /******/
                configurable: !1,
                /******/
                enumerable: !0,
                /******/
                get: u
                /******/
              });
            }, c.n = function(f) {
              var o = f && f.__esModule ? (
                /******/
                function() {
                  return f.default;
                }
              ) : (
                /******/
                function() {
                  return f;
                }
              );
              return c.d(o, "a", o), o;
            }, c.o = function(f, o) {
              return Object.prototype.hasOwnProperty.call(f, o);
            }, c.p = "", c(c.s = 4);
          }([
            /* 0 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.setMatrixArrayType = o, e.toRadian = l, e.equals = y;
              var f = e.EPSILON = 1e-6;
              e.ARRAY_TYPE = typeof Float32Array < "u" ? Float32Array : Array, e.RANDOM = Math.random;
              function o(v) {
                e.ARRAY_TYPE = v;
              }
              var u = Math.PI / 180;
              function l(v) {
                return v * u;
              }
              function y(v, m) {
                return Math.abs(v - m) <= f * Math.max(1, Math.abs(v), Math.abs(m));
              }
            },
            /* 1 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = l, e.fromMat4 = y, e.clone = v, e.copy = m, e.fromValues = p, e.set = D, e.identity = _, e.transpose = L, e.invert = F, e.adjoint = x, e.determinant = z, e.multiply = R, e.translate = I, e.rotate = h, e.scale = b, e.fromTranslation = Z, e.fromRotation = G, e.fromScaling = J, e.fromMat2d = e0, e.fromQuat = s0, e.normalFromMat4 = S0, e.projection = D0, e.str = _0, e.frob = N, e.add = M, e.subtract = O, e.multiplyScalar = t0, e.multiplyScalarAndAdd = i0, e.exactEquals = c0, e.equals = g0;
              var f = c(0), o = u(f);
              function u(w) {
                if (w && w.__esModule)
                  return w;
                var d = {};
                if (w != null)
                  for (var E in w)
                    Object.prototype.hasOwnProperty.call(w, E) && (d[E] = w[E]);
                return d.default = w, d;
              }
              function l() {
                var w = new o.ARRAY_TYPE(9);
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 0, w[4] = 1, w[5] = 0, w[6] = 0, w[7] = 0, w[8] = 1, w;
              }
              function y(w, d) {
                return w[0] = d[0], w[1] = d[1], w[2] = d[2], w[3] = d[4], w[4] = d[5], w[5] = d[6], w[6] = d[8], w[7] = d[9], w[8] = d[10], w;
              }
              function v(w) {
                var d = new o.ARRAY_TYPE(9);
                return d[0] = w[0], d[1] = w[1], d[2] = w[2], d[3] = w[3], d[4] = w[4], d[5] = w[5], d[6] = w[6], d[7] = w[7], d[8] = w[8], d;
              }
              function m(w, d) {
                return w[0] = d[0], w[1] = d[1], w[2] = d[2], w[3] = d[3], w[4] = d[4], w[5] = d[5], w[6] = d[6], w[7] = d[7], w[8] = d[8], w;
              }
              function p(w, d, E, Q, j, X, $, h0, d0) {
                var q = new o.ARRAY_TYPE(9);
                return q[0] = w, q[1] = d, q[2] = E, q[3] = Q, q[4] = j, q[5] = X, q[6] = $, q[7] = h0, q[8] = d0, q;
              }
              function D(w, d, E, Q, j, X, $, h0, d0, q) {
                return w[0] = d, w[1] = E, w[2] = Q, w[3] = j, w[4] = X, w[5] = $, w[6] = h0, w[7] = d0, w[8] = q, w;
              }
              function _(w) {
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 0, w[4] = 1, w[5] = 0, w[6] = 0, w[7] = 0, w[8] = 1, w;
              }
              function L(w, d) {
                if (w === d) {
                  var E = d[1], Q = d[2], j = d[5];
                  w[1] = d[3], w[2] = d[6], w[3] = E, w[5] = d[7], w[6] = Q, w[7] = j;
                } else
                  w[0] = d[0], w[1] = d[3], w[2] = d[6], w[3] = d[1], w[4] = d[4], w[5] = d[7], w[6] = d[2], w[7] = d[5], w[8] = d[8];
                return w;
              }
              function F(w, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = d[4], h0 = d[5], d0 = d[6], q = d[7], K = d[8], n0 = K * $ - h0 * q, f0 = -K * X + h0 * d0, l0 = q * X - $ * d0, a = E * n0 + Q * f0 + j * l0;
                return a ? (a = 1 / a, w[0] = n0 * a, w[1] = (-K * Q + j * q) * a, w[2] = (h0 * Q - j * $) * a, w[3] = f0 * a, w[4] = (K * E - j * d0) * a, w[5] = (-h0 * E + j * X) * a, w[6] = l0 * a, w[7] = (-q * E + Q * d0) * a, w[8] = ($ * E - Q * X) * a, w) : null;
              }
              function x(w, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = d[4], h0 = d[5], d0 = d[6], q = d[7], K = d[8];
                return w[0] = $ * K - h0 * q, w[1] = j * q - Q * K, w[2] = Q * h0 - j * $, w[3] = h0 * d0 - X * K, w[4] = E * K - j * d0, w[5] = j * X - E * h0, w[6] = X * q - $ * d0, w[7] = Q * d0 - E * q, w[8] = E * $ - Q * X, w;
              }
              function z(w) {
                var d = w[0], E = w[1], Q = w[2], j = w[3], X = w[4], $ = w[5], h0 = w[6], d0 = w[7], q = w[8];
                return d * (q * X - $ * d0) + E * (-q * j + $ * h0) + Q * (d0 * j - X * h0);
              }
              function R(w, d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], h0 = d[4], d0 = d[5], q = d[6], K = d[7], n0 = d[8], f0 = E[0], l0 = E[1], a = E[2], g = E[3], Y = E[4], H = E[5], r0 = E[6], a0 = E[7], o0 = E[8];
                return w[0] = f0 * Q + l0 * $ + a * q, w[1] = f0 * j + l0 * h0 + a * K, w[2] = f0 * X + l0 * d0 + a * n0, w[3] = g * Q + Y * $ + H * q, w[4] = g * j + Y * h0 + H * K, w[5] = g * X + Y * d0 + H * n0, w[6] = r0 * Q + a0 * $ + o0 * q, w[7] = r0 * j + a0 * h0 + o0 * K, w[8] = r0 * X + a0 * d0 + o0 * n0, w;
              }
              function I(w, d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], h0 = d[4], d0 = d[5], q = d[6], K = d[7], n0 = d[8], f0 = E[0], l0 = E[1];
                return w[0] = Q, w[1] = j, w[2] = X, w[3] = $, w[4] = h0, w[5] = d0, w[6] = f0 * Q + l0 * $ + q, w[7] = f0 * j + l0 * h0 + K, w[8] = f0 * X + l0 * d0 + n0, w;
              }
              function h(w, d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], h0 = d[4], d0 = d[5], q = d[6], K = d[7], n0 = d[8], f0 = Math.sin(E), l0 = Math.cos(E);
                return w[0] = l0 * Q + f0 * $, w[1] = l0 * j + f0 * h0, w[2] = l0 * X + f0 * d0, w[3] = l0 * $ - f0 * Q, w[4] = l0 * h0 - f0 * j, w[5] = l0 * d0 - f0 * X, w[6] = q, w[7] = K, w[8] = n0, w;
              }
              function b(w, d, E) {
                var Q = E[0], j = E[1];
                return w[0] = Q * d[0], w[1] = Q * d[1], w[2] = Q * d[2], w[3] = j * d[3], w[4] = j * d[4], w[5] = j * d[5], w[6] = d[6], w[7] = d[7], w[8] = d[8], w;
              }
              function Z(w, d) {
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 0, w[4] = 1, w[5] = 0, w[6] = d[0], w[7] = d[1], w[8] = 1, w;
              }
              function G(w, d) {
                var E = Math.sin(d), Q = Math.cos(d);
                return w[0] = Q, w[1] = E, w[2] = 0, w[3] = -E, w[4] = Q, w[5] = 0, w[6] = 0, w[7] = 0, w[8] = 1, w;
              }
              function J(w, d) {
                return w[0] = d[0], w[1] = 0, w[2] = 0, w[3] = 0, w[4] = d[1], w[5] = 0, w[6] = 0, w[7] = 0, w[8] = 1, w;
              }
              function e0(w, d) {
                return w[0] = d[0], w[1] = d[1], w[2] = 0, w[3] = d[2], w[4] = d[3], w[5] = 0, w[6] = d[4], w[7] = d[5], w[8] = 1, w;
              }
              function s0(w, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = E + E, h0 = Q + Q, d0 = j + j, q = E * $, K = Q * $, n0 = Q * h0, f0 = j * $, l0 = j * h0, a = j * d0, g = X * $, Y = X * h0, H = X * d0;
                return w[0] = 1 - n0 - a, w[3] = K - H, w[6] = f0 + Y, w[1] = K + H, w[4] = 1 - q - a, w[7] = l0 - g, w[2] = f0 - Y, w[5] = l0 + g, w[8] = 1 - q - n0, w;
              }
              function S0(w, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = d[4], h0 = d[5], d0 = d[6], q = d[7], K = d[8], n0 = d[9], f0 = d[10], l0 = d[11], a = d[12], g = d[13], Y = d[14], H = d[15], r0 = E * h0 - Q * $, a0 = E * d0 - j * $, o0 = E * q - X * $, u0 = Q * d0 - j * h0, v0 = Q * q - X * h0, m0 = j * q - X * d0, y0 = K * g - n0 * a, C0 = K * Y - f0 * a, M0 = K * H - l0 * a, w0 = n0 * Y - f0 * g, x0 = n0 * H - l0 * g, A0 = f0 * H - l0 * Y, p0 = r0 * A0 - a0 * x0 + o0 * w0 + u0 * M0 - v0 * C0 + m0 * y0;
                return p0 ? (p0 = 1 / p0, w[0] = (h0 * A0 - d0 * x0 + q * w0) * p0, w[1] = (d0 * M0 - $ * A0 - q * C0) * p0, w[2] = ($ * x0 - h0 * M0 + q * y0) * p0, w[3] = (j * x0 - Q * A0 - X * w0) * p0, w[4] = (E * A0 - j * M0 + X * C0) * p0, w[5] = (Q * M0 - E * x0 - X * y0) * p0, w[6] = (g * m0 - Y * v0 + H * u0) * p0, w[7] = (Y * o0 - a * m0 - H * a0) * p0, w[8] = (a * v0 - g * o0 + H * r0) * p0, w) : null;
              }
              function D0(w, d, E) {
                return w[0] = 2 / d, w[1] = 0, w[2] = 0, w[3] = 0, w[4] = -2 / E, w[5] = 0, w[6] = -1, w[7] = 1, w[8] = 1, w;
              }
              function _0(w) {
                return "mat3(" + w[0] + ", " + w[1] + ", " + w[2] + ", " + w[3] + ", " + w[4] + ", " + w[5] + ", " + w[6] + ", " + w[7] + ", " + w[8] + ")";
              }
              function N(w) {
                return Math.sqrt(Math.pow(w[0], 2) + Math.pow(w[1], 2) + Math.pow(w[2], 2) + Math.pow(w[3], 2) + Math.pow(w[4], 2) + Math.pow(w[5], 2) + Math.pow(w[6], 2) + Math.pow(w[7], 2) + Math.pow(w[8], 2));
              }
              function M(w, d, E) {
                return w[0] = d[0] + E[0], w[1] = d[1] + E[1], w[2] = d[2] + E[2], w[3] = d[3] + E[3], w[4] = d[4] + E[4], w[5] = d[5] + E[5], w[6] = d[6] + E[6], w[7] = d[7] + E[7], w[8] = d[8] + E[8], w;
              }
              function O(w, d, E) {
                return w[0] = d[0] - E[0], w[1] = d[1] - E[1], w[2] = d[2] - E[2], w[3] = d[3] - E[3], w[4] = d[4] - E[4], w[5] = d[5] - E[5], w[6] = d[6] - E[6], w[7] = d[7] - E[7], w[8] = d[8] - E[8], w;
              }
              function t0(w, d, E) {
                return w[0] = d[0] * E, w[1] = d[1] * E, w[2] = d[2] * E, w[3] = d[3] * E, w[4] = d[4] * E, w[5] = d[5] * E, w[6] = d[6] * E, w[7] = d[7] * E, w[8] = d[8] * E, w;
              }
              function i0(w, d, E, Q) {
                return w[0] = d[0] + E[0] * Q, w[1] = d[1] + E[1] * Q, w[2] = d[2] + E[2] * Q, w[3] = d[3] + E[3] * Q, w[4] = d[4] + E[4] * Q, w[5] = d[5] + E[5] * Q, w[6] = d[6] + E[6] * Q, w[7] = d[7] + E[7] * Q, w[8] = d[8] + E[8] * Q, w;
              }
              function c0(w, d) {
                return w[0] === d[0] && w[1] === d[1] && w[2] === d[2] && w[3] === d[3] && w[4] === d[4] && w[5] === d[5] && w[6] === d[6] && w[7] === d[7] && w[8] === d[8];
              }
              function g0(w, d) {
                var E = w[0], Q = w[1], j = w[2], X = w[3], $ = w[4], h0 = w[5], d0 = w[6], q = w[7], K = w[8], n0 = d[0], f0 = d[1], l0 = d[2], a = d[3], g = d[4], Y = d[5], H = d[6], r0 = d[7], a0 = d[8];
                return Math.abs(E - n0) <= o.EPSILON * Math.max(1, Math.abs(E), Math.abs(n0)) && Math.abs(Q - f0) <= o.EPSILON * Math.max(1, Math.abs(Q), Math.abs(f0)) && Math.abs(j - l0) <= o.EPSILON * Math.max(1, Math.abs(j), Math.abs(l0)) && Math.abs(X - a) <= o.EPSILON * Math.max(1, Math.abs(X), Math.abs(a)) && Math.abs($ - g) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(g)) && Math.abs(h0 - Y) <= o.EPSILON * Math.max(1, Math.abs(h0), Math.abs(Y)) && Math.abs(d0 - H) <= o.EPSILON * Math.max(1, Math.abs(d0), Math.abs(H)) && Math.abs(q - r0) <= o.EPSILON * Math.max(1, Math.abs(q), Math.abs(r0)) && Math.abs(K - a0) <= o.EPSILON * Math.max(1, Math.abs(K), Math.abs(a0));
              }
              e.mul = R, e.sub = O;
            },
            /* 2 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = l, e.clone = y, e.length = v, e.fromValues = m, e.copy = p, e.set = D, e.add = _, e.subtract = L, e.multiply = F, e.divide = x, e.ceil = z, e.floor = R, e.min = I, e.max = h, e.round = b, e.scale = Z, e.scaleAndAdd = G, e.distance = J, e.squaredDistance = e0, e.squaredLength = s0, e.negate = S0, e.inverse = D0, e.normalize = _0, e.dot = N, e.cross = M, e.lerp = O, e.hermite = t0, e.bezier = i0, e.random = c0, e.transformMat4 = g0, e.transformMat3 = w, e.transformQuat = d, e.rotateX = E, e.rotateY = Q, e.rotateZ = j, e.angle = X, e.str = $, e.exactEquals = h0, e.equals = d0;
              var f = c(0), o = u(f);
              function u(q) {
                if (q && q.__esModule)
                  return q;
                var K = {};
                if (q != null)
                  for (var n0 in q)
                    Object.prototype.hasOwnProperty.call(q, n0) && (K[n0] = q[n0]);
                return K.default = q, K;
              }
              function l() {
                var q = new o.ARRAY_TYPE(3);
                return q[0] = 0, q[1] = 0, q[2] = 0, q;
              }
              function y(q) {
                var K = new o.ARRAY_TYPE(3);
                return K[0] = q[0], K[1] = q[1], K[2] = q[2], K;
              }
              function v(q) {
                var K = q[0], n0 = q[1], f0 = q[2];
                return Math.sqrt(K * K + n0 * n0 + f0 * f0);
              }
              function m(q, K, n0) {
                var f0 = new o.ARRAY_TYPE(3);
                return f0[0] = q, f0[1] = K, f0[2] = n0, f0;
              }
              function p(q, K) {
                return q[0] = K[0], q[1] = K[1], q[2] = K[2], q;
              }
              function D(q, K, n0, f0) {
                return q[0] = K, q[1] = n0, q[2] = f0, q;
              }
              function _(q, K, n0) {
                return q[0] = K[0] + n0[0], q[1] = K[1] + n0[1], q[2] = K[2] + n0[2], q;
              }
              function L(q, K, n0) {
                return q[0] = K[0] - n0[0], q[1] = K[1] - n0[1], q[2] = K[2] - n0[2], q;
              }
              function F(q, K, n0) {
                return q[0] = K[0] * n0[0], q[1] = K[1] * n0[1], q[2] = K[2] * n0[2], q;
              }
              function x(q, K, n0) {
                return q[0] = K[0] / n0[0], q[1] = K[1] / n0[1], q[2] = K[2] / n0[2], q;
              }
              function z(q, K) {
                return q[0] = Math.ceil(K[0]), q[1] = Math.ceil(K[1]), q[2] = Math.ceil(K[2]), q;
              }
              function R(q, K) {
                return q[0] = Math.floor(K[0]), q[1] = Math.floor(K[1]), q[2] = Math.floor(K[2]), q;
              }
              function I(q, K, n0) {
                return q[0] = Math.min(K[0], n0[0]), q[1] = Math.min(K[1], n0[1]), q[2] = Math.min(K[2], n0[2]), q;
              }
              function h(q, K, n0) {
                return q[0] = Math.max(K[0], n0[0]), q[1] = Math.max(K[1], n0[1]), q[2] = Math.max(K[2], n0[2]), q;
              }
              function b(q, K) {
                return q[0] = Math.round(K[0]), q[1] = Math.round(K[1]), q[2] = Math.round(K[2]), q;
              }
              function Z(q, K, n0) {
                return q[0] = K[0] * n0, q[1] = K[1] * n0, q[2] = K[2] * n0, q;
              }
              function G(q, K, n0, f0) {
                return q[0] = K[0] + n0[0] * f0, q[1] = K[1] + n0[1] * f0, q[2] = K[2] + n0[2] * f0, q;
              }
              function J(q, K) {
                var n0 = K[0] - q[0], f0 = K[1] - q[1], l0 = K[2] - q[2];
                return Math.sqrt(n0 * n0 + f0 * f0 + l0 * l0);
              }
              function e0(q, K) {
                var n0 = K[0] - q[0], f0 = K[1] - q[1], l0 = K[2] - q[2];
                return n0 * n0 + f0 * f0 + l0 * l0;
              }
              function s0(q) {
                var K = q[0], n0 = q[1], f0 = q[2];
                return K * K + n0 * n0 + f0 * f0;
              }
              function S0(q, K) {
                return q[0] = -K[0], q[1] = -K[1], q[2] = -K[2], q;
              }
              function D0(q, K) {
                return q[0] = 1 / K[0], q[1] = 1 / K[1], q[2] = 1 / K[2], q;
              }
              function _0(q, K) {
                var n0 = K[0], f0 = K[1], l0 = K[2], a = n0 * n0 + f0 * f0 + l0 * l0;
                return a > 0 && (a = 1 / Math.sqrt(a), q[0] = K[0] * a, q[1] = K[1] * a, q[2] = K[2] * a), q;
              }
              function N(q, K) {
                return q[0] * K[0] + q[1] * K[1] + q[2] * K[2];
              }
              function M(q, K, n0) {
                var f0 = K[0], l0 = K[1], a = K[2], g = n0[0], Y = n0[1], H = n0[2];
                return q[0] = l0 * H - a * Y, q[1] = a * g - f0 * H, q[2] = f0 * Y - l0 * g, q;
              }
              function O(q, K, n0, f0) {
                var l0 = K[0], a = K[1], g = K[2];
                return q[0] = l0 + f0 * (n0[0] - l0), q[1] = a + f0 * (n0[1] - a), q[2] = g + f0 * (n0[2] - g), q;
              }
              function t0(q, K, n0, f0, l0, a) {
                var g = a * a, Y = g * (2 * a - 3) + 1, H = g * (a - 2) + a, r0 = g * (a - 1), a0 = g * (3 - 2 * a);
                return q[0] = K[0] * Y + n0[0] * H + f0[0] * r0 + l0[0] * a0, q[1] = K[1] * Y + n0[1] * H + f0[1] * r0 + l0[1] * a0, q[2] = K[2] * Y + n0[2] * H + f0[2] * r0 + l0[2] * a0, q;
              }
              function i0(q, K, n0, f0, l0, a) {
                var g = 1 - a, Y = g * g, H = a * a, r0 = Y * g, a0 = 3 * a * Y, o0 = 3 * H * g, u0 = H * a;
                return q[0] = K[0] * r0 + n0[0] * a0 + f0[0] * o0 + l0[0] * u0, q[1] = K[1] * r0 + n0[1] * a0 + f0[1] * o0 + l0[1] * u0, q[2] = K[2] * r0 + n0[2] * a0 + f0[2] * o0 + l0[2] * u0, q;
              }
              function c0(q, K) {
                K = K || 1;
                var n0 = o.RANDOM() * 2 * Math.PI, f0 = o.RANDOM() * 2 - 1, l0 = Math.sqrt(1 - f0 * f0) * K;
                return q[0] = Math.cos(n0) * l0, q[1] = Math.sin(n0) * l0, q[2] = f0 * K, q;
              }
              function g0(q, K, n0) {
                var f0 = K[0], l0 = K[1], a = K[2], g = n0[3] * f0 + n0[7] * l0 + n0[11] * a + n0[15];
                return g = g || 1, q[0] = (n0[0] * f0 + n0[4] * l0 + n0[8] * a + n0[12]) / g, q[1] = (n0[1] * f0 + n0[5] * l0 + n0[9] * a + n0[13]) / g, q[2] = (n0[2] * f0 + n0[6] * l0 + n0[10] * a + n0[14]) / g, q;
              }
              function w(q, K, n0) {
                var f0 = K[0], l0 = K[1], a = K[2];
                return q[0] = f0 * n0[0] + l0 * n0[3] + a * n0[6], q[1] = f0 * n0[1] + l0 * n0[4] + a * n0[7], q[2] = f0 * n0[2] + l0 * n0[5] + a * n0[8], q;
              }
              function d(q, K, n0) {
                var f0 = K[0], l0 = K[1], a = K[2], g = n0[0], Y = n0[1], H = n0[2], r0 = n0[3], a0 = r0 * f0 + Y * a - H * l0, o0 = r0 * l0 + H * f0 - g * a, u0 = r0 * a + g * l0 - Y * f0, v0 = -g * f0 - Y * l0 - H * a;
                return q[0] = a0 * r0 + v0 * -g + o0 * -H - u0 * -Y, q[1] = o0 * r0 + v0 * -Y + u0 * -g - a0 * -H, q[2] = u0 * r0 + v0 * -H + a0 * -Y - o0 * -g, q;
              }
              function E(q, K, n0, f0) {
                var l0 = [], a = [];
                return l0[0] = K[0] - n0[0], l0[1] = K[1] - n0[1], l0[2] = K[2] - n0[2], a[0] = l0[0], a[1] = l0[1] * Math.cos(f0) - l0[2] * Math.sin(f0), a[2] = l0[1] * Math.sin(f0) + l0[2] * Math.cos(f0), q[0] = a[0] + n0[0], q[1] = a[1] + n0[1], q[2] = a[2] + n0[2], q;
              }
              function Q(q, K, n0, f0) {
                var l0 = [], a = [];
                return l0[0] = K[0] - n0[0], l0[1] = K[1] - n0[1], l0[2] = K[2] - n0[2], a[0] = l0[2] * Math.sin(f0) + l0[0] * Math.cos(f0), a[1] = l0[1], a[2] = l0[2] * Math.cos(f0) - l0[0] * Math.sin(f0), q[0] = a[0] + n0[0], q[1] = a[1] + n0[1], q[2] = a[2] + n0[2], q;
              }
              function j(q, K, n0, f0) {
                var l0 = [], a = [];
                return l0[0] = K[0] - n0[0], l0[1] = K[1] - n0[1], l0[2] = K[2] - n0[2], a[0] = l0[0] * Math.cos(f0) - l0[1] * Math.sin(f0), a[1] = l0[0] * Math.sin(f0) + l0[1] * Math.cos(f0), a[2] = l0[2], q[0] = a[0] + n0[0], q[1] = a[1] + n0[1], q[2] = a[2] + n0[2], q;
              }
              function X(q, K) {
                var n0 = m(q[0], q[1], q[2]), f0 = m(K[0], K[1], K[2]);
                _0(n0, n0), _0(f0, f0);
                var l0 = N(n0, f0);
                return l0 > 1 ? 0 : l0 < -1 ? Math.PI : Math.acos(l0);
              }
              function $(q) {
                return "vec3(" + q[0] + ", " + q[1] + ", " + q[2] + ")";
              }
              function h0(q, K) {
                return q[0] === K[0] && q[1] === K[1] && q[2] === K[2];
              }
              function d0(q, K) {
                var n0 = q[0], f0 = q[1], l0 = q[2], a = K[0], g = K[1], Y = K[2];
                return Math.abs(n0 - a) <= o.EPSILON * Math.max(1, Math.abs(n0), Math.abs(a)) && Math.abs(f0 - g) <= o.EPSILON * Math.max(1, Math.abs(f0), Math.abs(g)) && Math.abs(l0 - Y) <= o.EPSILON * Math.max(1, Math.abs(l0), Math.abs(Y));
              }
              e.sub = L, e.mul = F, e.div = x, e.dist = J, e.sqrDist = e0, e.len = v, e.sqrLen = s0, e.forEach = function() {
                var q = l();
                return function(K, n0, f0, l0, a, g) {
                  var Y = void 0, H = void 0;
                  for (n0 || (n0 = 3), f0 || (f0 = 0), l0 ? H = Math.min(l0 * n0 + f0, K.length) : H = K.length, Y = f0; Y < H; Y += n0)
                    q[0] = K[Y], q[1] = K[Y + 1], q[2] = K[Y + 2], a(q, q, g), K[Y] = q[0], K[Y + 1] = q[1], K[Y + 2] = q[2];
                  return K;
                };
              }();
            },
            /* 3 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = l, e.clone = y, e.fromValues = v, e.copy = m, e.set = p, e.add = D, e.subtract = _, e.multiply = L, e.divide = F, e.ceil = x, e.floor = z, e.min = R, e.max = I, e.round = h, e.scale = b, e.scaleAndAdd = Z, e.distance = G, e.squaredDistance = J, e.length = e0, e.squaredLength = s0, e.negate = S0, e.inverse = D0, e.normalize = _0, e.dot = N, e.lerp = M, e.random = O, e.transformMat4 = t0, e.transformQuat = i0, e.str = c0, e.exactEquals = g0, e.equals = w;
              var f = c(0), o = u(f);
              function u(d) {
                if (d && d.__esModule)
                  return d;
                var E = {};
                if (d != null)
                  for (var Q in d)
                    Object.prototype.hasOwnProperty.call(d, Q) && (E[Q] = d[Q]);
                return E.default = d, E;
              }
              function l() {
                var d = new o.ARRAY_TYPE(4);
                return d[0] = 0, d[1] = 0, d[2] = 0, d[3] = 0, d;
              }
              function y(d) {
                var E = new o.ARRAY_TYPE(4);
                return E[0] = d[0], E[1] = d[1], E[2] = d[2], E[3] = d[3], E;
              }
              function v(d, E, Q, j) {
                var X = new o.ARRAY_TYPE(4);
                return X[0] = d, X[1] = E, X[2] = Q, X[3] = j, X;
              }
              function m(d, E) {
                return d[0] = E[0], d[1] = E[1], d[2] = E[2], d[3] = E[3], d;
              }
              function p(d, E, Q, j, X) {
                return d[0] = E, d[1] = Q, d[2] = j, d[3] = X, d;
              }
              function D(d, E, Q) {
                return d[0] = E[0] + Q[0], d[1] = E[1] + Q[1], d[2] = E[2] + Q[2], d[3] = E[3] + Q[3], d;
              }
              function _(d, E, Q) {
                return d[0] = E[0] - Q[0], d[1] = E[1] - Q[1], d[2] = E[2] - Q[2], d[3] = E[3] - Q[3], d;
              }
              function L(d, E, Q) {
                return d[0] = E[0] * Q[0], d[1] = E[1] * Q[1], d[2] = E[2] * Q[2], d[3] = E[3] * Q[3], d;
              }
              function F(d, E, Q) {
                return d[0] = E[0] / Q[0], d[1] = E[1] / Q[1], d[2] = E[2] / Q[2], d[3] = E[3] / Q[3], d;
              }
              function x(d, E) {
                return d[0] = Math.ceil(E[0]), d[1] = Math.ceil(E[1]), d[2] = Math.ceil(E[2]), d[3] = Math.ceil(E[3]), d;
              }
              function z(d, E) {
                return d[0] = Math.floor(E[0]), d[1] = Math.floor(E[1]), d[2] = Math.floor(E[2]), d[3] = Math.floor(E[3]), d;
              }
              function R(d, E, Q) {
                return d[0] = Math.min(E[0], Q[0]), d[1] = Math.min(E[1], Q[1]), d[2] = Math.min(E[2], Q[2]), d[3] = Math.min(E[3], Q[3]), d;
              }
              function I(d, E, Q) {
                return d[0] = Math.max(E[0], Q[0]), d[1] = Math.max(E[1], Q[1]), d[2] = Math.max(E[2], Q[2]), d[3] = Math.max(E[3], Q[3]), d;
              }
              function h(d, E) {
                return d[0] = Math.round(E[0]), d[1] = Math.round(E[1]), d[2] = Math.round(E[2]), d[3] = Math.round(E[3]), d;
              }
              function b(d, E, Q) {
                return d[0] = E[0] * Q, d[1] = E[1] * Q, d[2] = E[2] * Q, d[3] = E[3] * Q, d;
              }
              function Z(d, E, Q, j) {
                return d[0] = E[0] + Q[0] * j, d[1] = E[1] + Q[1] * j, d[2] = E[2] + Q[2] * j, d[3] = E[3] + Q[3] * j, d;
              }
              function G(d, E) {
                var Q = E[0] - d[0], j = E[1] - d[1], X = E[2] - d[2], $ = E[3] - d[3];
                return Math.sqrt(Q * Q + j * j + X * X + $ * $);
              }
              function J(d, E) {
                var Q = E[0] - d[0], j = E[1] - d[1], X = E[2] - d[2], $ = E[3] - d[3];
                return Q * Q + j * j + X * X + $ * $;
              }
              function e0(d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3];
                return Math.sqrt(E * E + Q * Q + j * j + X * X);
              }
              function s0(d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3];
                return E * E + Q * Q + j * j + X * X;
              }
              function S0(d, E) {
                return d[0] = -E[0], d[1] = -E[1], d[2] = -E[2], d[3] = -E[3], d;
              }
              function D0(d, E) {
                return d[0] = 1 / E[0], d[1] = 1 / E[1], d[2] = 1 / E[2], d[3] = 1 / E[3], d;
              }
              function _0(d, E) {
                var Q = E[0], j = E[1], X = E[2], $ = E[3], h0 = Q * Q + j * j + X * X + $ * $;
                return h0 > 0 && (h0 = 1 / Math.sqrt(h0), d[0] = Q * h0, d[1] = j * h0, d[2] = X * h0, d[3] = $ * h0), d;
              }
              function N(d, E) {
                return d[0] * E[0] + d[1] * E[1] + d[2] * E[2] + d[3] * E[3];
              }
              function M(d, E, Q, j) {
                var X = E[0], $ = E[1], h0 = E[2], d0 = E[3];
                return d[0] = X + j * (Q[0] - X), d[1] = $ + j * (Q[1] - $), d[2] = h0 + j * (Q[2] - h0), d[3] = d0 + j * (Q[3] - d0), d;
              }
              function O(d, E) {
                return E = E || 1, d[0] = o.RANDOM(), d[1] = o.RANDOM(), d[2] = o.RANDOM(), d[3] = o.RANDOM(), _0(d, d), b(d, d, E), d;
              }
              function t0(d, E, Q) {
                var j = E[0], X = E[1], $ = E[2], h0 = E[3];
                return d[0] = Q[0] * j + Q[4] * X + Q[8] * $ + Q[12] * h0, d[1] = Q[1] * j + Q[5] * X + Q[9] * $ + Q[13] * h0, d[2] = Q[2] * j + Q[6] * X + Q[10] * $ + Q[14] * h0, d[3] = Q[3] * j + Q[7] * X + Q[11] * $ + Q[15] * h0, d;
              }
              function i0(d, E, Q) {
                var j = E[0], X = E[1], $ = E[2], h0 = Q[0], d0 = Q[1], q = Q[2], K = Q[3], n0 = K * j + d0 * $ - q * X, f0 = K * X + q * j - h0 * $, l0 = K * $ + h0 * X - d0 * j, a = -h0 * j - d0 * X - q * $;
                return d[0] = n0 * K + a * -h0 + f0 * -q - l0 * -d0, d[1] = f0 * K + a * -d0 + l0 * -h0 - n0 * -q, d[2] = l0 * K + a * -q + n0 * -d0 - f0 * -h0, d[3] = E[3], d;
              }
              function c0(d) {
                return "vec4(" + d[0] + ", " + d[1] + ", " + d[2] + ", " + d[3] + ")";
              }
              function g0(d, E) {
                return d[0] === E[0] && d[1] === E[1] && d[2] === E[2] && d[3] === E[3];
              }
              function w(d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], h0 = E[0], d0 = E[1], q = E[2], K = E[3];
                return Math.abs(Q - h0) <= o.EPSILON * Math.max(1, Math.abs(Q), Math.abs(h0)) && Math.abs(j - d0) <= o.EPSILON * Math.max(1, Math.abs(j), Math.abs(d0)) && Math.abs(X - q) <= o.EPSILON * Math.max(1, Math.abs(X), Math.abs(q)) && Math.abs($ - K) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(K));
              }
              e.sub = _, e.mul = L, e.div = F, e.dist = G, e.sqrDist = J, e.len = e0, e.sqrLen = s0, e.forEach = function() {
                var d = l();
                return function(E, Q, j, X, $, h0) {
                  var d0 = void 0, q = void 0;
                  for (Q || (Q = 4), j || (j = 0), X ? q = Math.min(X * Q + j, E.length) : q = E.length, d0 = j; d0 < q; d0 += Q)
                    d[0] = E[d0], d[1] = E[d0 + 1], d[2] = E[d0 + 2], d[3] = E[d0 + 3], $(d, d, h0), E[d0] = d[0], E[d0 + 1] = d[1], E[d0 + 2] = d[2], E[d0 + 3] = d[3];
                  return E;
                };
              }();
            },
            /* 4 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.vec4 = e.vec3 = e.vec2 = e.quat = e.mat4 = e.mat3 = e.mat2d = e.mat2 = e.glMatrix = void 0;
              var f = c(0), o = Z(f), u = c(5), l = Z(u), y = c(6), v = Z(y), m = c(1), p = Z(m), D = c(7), _ = Z(D), L = c(8), F = Z(L), x = c(9), z = Z(x), R = c(2), I = Z(R), h = c(3), b = Z(h);
              function Z(G) {
                if (G && G.__esModule)
                  return G;
                var J = {};
                if (G != null)
                  for (var e0 in G)
                    Object.prototype.hasOwnProperty.call(G, e0) && (J[e0] = G[e0]);
                return J.default = G, J;
              }
              e.glMatrix = o, e.mat2 = l, e.mat2d = v, e.mat3 = p, e.mat4 = _, e.quat = F, e.vec2 = z, e.vec3 = I, e.vec4 = b;
            },
            /* 5 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = l, e.clone = y, e.copy = v, e.identity = m, e.fromValues = p, e.set = D, e.transpose = _, e.invert = L, e.adjoint = F, e.determinant = x, e.multiply = z, e.rotate = R, e.scale = I, e.fromRotation = h, e.fromScaling = b, e.str = Z, e.frob = G, e.LDU = J, e.add = e0, e.subtract = s0, e.exactEquals = S0, e.equals = D0, e.multiplyScalar = _0, e.multiplyScalarAndAdd = N;
              var f = c(0), o = u(f);
              function u(M) {
                if (M && M.__esModule)
                  return M;
                var O = {};
                if (M != null)
                  for (var t0 in M)
                    Object.prototype.hasOwnProperty.call(M, t0) && (O[t0] = M[t0]);
                return O.default = M, O;
              }
              function l() {
                var M = new o.ARRAY_TYPE(4);
                return M[0] = 1, M[1] = 0, M[2] = 0, M[3] = 1, M;
              }
              function y(M) {
                var O = new o.ARRAY_TYPE(4);
                return O[0] = M[0], O[1] = M[1], O[2] = M[2], O[3] = M[3], O;
              }
              function v(M, O) {
                return M[0] = O[0], M[1] = O[1], M[2] = O[2], M[3] = O[3], M;
              }
              function m(M) {
                return M[0] = 1, M[1] = 0, M[2] = 0, M[3] = 1, M;
              }
              function p(M, O, t0, i0) {
                var c0 = new o.ARRAY_TYPE(4);
                return c0[0] = M, c0[1] = O, c0[2] = t0, c0[3] = i0, c0;
              }
              function D(M, O, t0, i0, c0) {
                return M[0] = O, M[1] = t0, M[2] = i0, M[3] = c0, M;
              }
              function _(M, O) {
                if (M === O) {
                  var t0 = O[1];
                  M[1] = O[2], M[2] = t0;
                } else
                  M[0] = O[0], M[1] = O[2], M[2] = O[1], M[3] = O[3];
                return M;
              }
              function L(M, O) {
                var t0 = O[0], i0 = O[1], c0 = O[2], g0 = O[3], w = t0 * g0 - c0 * i0;
                return w ? (w = 1 / w, M[0] = g0 * w, M[1] = -i0 * w, M[2] = -c0 * w, M[3] = t0 * w, M) : null;
              }
              function F(M, O) {
                var t0 = O[0];
                return M[0] = O[3], M[1] = -O[1], M[2] = -O[2], M[3] = t0, M;
              }
              function x(M) {
                return M[0] * M[3] - M[2] * M[1];
              }
              function z(M, O, t0) {
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = t0[0], E = t0[1], Q = t0[2], j = t0[3];
                return M[0] = i0 * d + g0 * E, M[1] = c0 * d + w * E, M[2] = i0 * Q + g0 * j, M[3] = c0 * Q + w * j, M;
              }
              function R(M, O, t0) {
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = Math.sin(t0), E = Math.cos(t0);
                return M[0] = i0 * E + g0 * d, M[1] = c0 * E + w * d, M[2] = i0 * -d + g0 * E, M[3] = c0 * -d + w * E, M;
              }
              function I(M, O, t0) {
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = t0[0], E = t0[1];
                return M[0] = i0 * d, M[1] = c0 * d, M[2] = g0 * E, M[3] = w * E, M;
              }
              function h(M, O) {
                var t0 = Math.sin(O), i0 = Math.cos(O);
                return M[0] = i0, M[1] = t0, M[2] = -t0, M[3] = i0, M;
              }
              function b(M, O) {
                return M[0] = O[0], M[1] = 0, M[2] = 0, M[3] = O[1], M;
              }
              function Z(M) {
                return "mat2(" + M[0] + ", " + M[1] + ", " + M[2] + ", " + M[3] + ")";
              }
              function G(M) {
                return Math.sqrt(Math.pow(M[0], 2) + Math.pow(M[1], 2) + Math.pow(M[2], 2) + Math.pow(M[3], 2));
              }
              function J(M, O, t0, i0) {
                return M[2] = i0[2] / i0[0], t0[0] = i0[0], t0[1] = i0[1], t0[3] = i0[3] - M[2] * t0[1], [M, O, t0];
              }
              function e0(M, O, t0) {
                return M[0] = O[0] + t0[0], M[1] = O[1] + t0[1], M[2] = O[2] + t0[2], M[3] = O[3] + t0[3], M;
              }
              function s0(M, O, t0) {
                return M[0] = O[0] - t0[0], M[1] = O[1] - t0[1], M[2] = O[2] - t0[2], M[3] = O[3] - t0[3], M;
              }
              function S0(M, O) {
                return M[0] === O[0] && M[1] === O[1] && M[2] === O[2] && M[3] === O[3];
              }
              function D0(M, O) {
                var t0 = M[0], i0 = M[1], c0 = M[2], g0 = M[3], w = O[0], d = O[1], E = O[2], Q = O[3];
                return Math.abs(t0 - w) <= o.EPSILON * Math.max(1, Math.abs(t0), Math.abs(w)) && Math.abs(i0 - d) <= o.EPSILON * Math.max(1, Math.abs(i0), Math.abs(d)) && Math.abs(c0 - E) <= o.EPSILON * Math.max(1, Math.abs(c0), Math.abs(E)) && Math.abs(g0 - Q) <= o.EPSILON * Math.max(1, Math.abs(g0), Math.abs(Q));
              }
              function _0(M, O, t0) {
                return M[0] = O[0] * t0, M[1] = O[1] * t0, M[2] = O[2] * t0, M[3] = O[3] * t0, M;
              }
              function N(M, O, t0, i0) {
                return M[0] = O[0] + t0[0] * i0, M[1] = O[1] + t0[1] * i0, M[2] = O[2] + t0[2] * i0, M[3] = O[3] + t0[3] * i0, M;
              }
              e.mul = z, e.sub = s0;
            },
            /* 6 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = l, e.clone = y, e.copy = v, e.identity = m, e.fromValues = p, e.set = D, e.invert = _, e.determinant = L, e.multiply = F, e.rotate = x, e.scale = z, e.translate = R, e.fromRotation = I, e.fromScaling = h, e.fromTranslation = b, e.str = Z, e.frob = G, e.add = J, e.subtract = e0, e.multiplyScalar = s0, e.multiplyScalarAndAdd = S0, e.exactEquals = D0, e.equals = _0;
              var f = c(0), o = u(f);
              function u(N) {
                if (N && N.__esModule)
                  return N;
                var M = {};
                if (N != null)
                  for (var O in N)
                    Object.prototype.hasOwnProperty.call(N, O) && (M[O] = N[O]);
                return M.default = N, M;
              }
              function l() {
                var N = new o.ARRAY_TYPE(6);
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = 0, N[5] = 0, N;
              }
              function y(N) {
                var M = new o.ARRAY_TYPE(6);
                return M[0] = N[0], M[1] = N[1], M[2] = N[2], M[3] = N[3], M[4] = N[4], M[5] = N[5], M;
              }
              function v(N, M) {
                return N[0] = M[0], N[1] = M[1], N[2] = M[2], N[3] = M[3], N[4] = M[4], N[5] = M[5], N;
              }
              function m(N) {
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = 0, N[5] = 0, N;
              }
              function p(N, M, O, t0, i0, c0) {
                var g0 = new o.ARRAY_TYPE(6);
                return g0[0] = N, g0[1] = M, g0[2] = O, g0[3] = t0, g0[4] = i0, g0[5] = c0, g0;
              }
              function D(N, M, O, t0, i0, c0, g0) {
                return N[0] = M, N[1] = O, N[2] = t0, N[3] = i0, N[4] = c0, N[5] = g0, N;
              }
              function _(N, M) {
                var O = M[0], t0 = M[1], i0 = M[2], c0 = M[3], g0 = M[4], w = M[5], d = O * c0 - t0 * i0;
                return d ? (d = 1 / d, N[0] = c0 * d, N[1] = -t0 * d, N[2] = -i0 * d, N[3] = O * d, N[4] = (i0 * w - c0 * g0) * d, N[5] = (t0 * g0 - O * w) * d, N) : null;
              }
              function L(N) {
                return N[0] * N[3] - N[1] * N[2];
              }
              function F(N, M, O) {
                var t0 = M[0], i0 = M[1], c0 = M[2], g0 = M[3], w = M[4], d = M[5], E = O[0], Q = O[1], j = O[2], X = O[3], $ = O[4], h0 = O[5];
                return N[0] = t0 * E + c0 * Q, N[1] = i0 * E + g0 * Q, N[2] = t0 * j + c0 * X, N[3] = i0 * j + g0 * X, N[4] = t0 * $ + c0 * h0 + w, N[5] = i0 * $ + g0 * h0 + d, N;
              }
              function x(N, M, O) {
                var t0 = M[0], i0 = M[1], c0 = M[2], g0 = M[3], w = M[4], d = M[5], E = Math.sin(O), Q = Math.cos(O);
                return N[0] = t0 * Q + c0 * E, N[1] = i0 * Q + g0 * E, N[2] = t0 * -E + c0 * Q, N[3] = i0 * -E + g0 * Q, N[4] = w, N[5] = d, N;
              }
              function z(N, M, O) {
                var t0 = M[0], i0 = M[1], c0 = M[2], g0 = M[3], w = M[4], d = M[5], E = O[0], Q = O[1];
                return N[0] = t0 * E, N[1] = i0 * E, N[2] = c0 * Q, N[3] = g0 * Q, N[4] = w, N[5] = d, N;
              }
              function R(N, M, O) {
                var t0 = M[0], i0 = M[1], c0 = M[2], g0 = M[3], w = M[4], d = M[5], E = O[0], Q = O[1];
                return N[0] = t0, N[1] = i0, N[2] = c0, N[3] = g0, N[4] = t0 * E + c0 * Q + w, N[5] = i0 * E + g0 * Q + d, N;
              }
              function I(N, M) {
                var O = Math.sin(M), t0 = Math.cos(M);
                return N[0] = t0, N[1] = O, N[2] = -O, N[3] = t0, N[4] = 0, N[5] = 0, N;
              }
              function h(N, M) {
                return N[0] = M[0], N[1] = 0, N[2] = 0, N[3] = M[1], N[4] = 0, N[5] = 0, N;
              }
              function b(N, M) {
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = M[0], N[5] = M[1], N;
              }
              function Z(N) {
                return "mat2d(" + N[0] + ", " + N[1] + ", " + N[2] + ", " + N[3] + ", " + N[4] + ", " + N[5] + ")";
              }
              function G(N) {
                return Math.sqrt(Math.pow(N[0], 2) + Math.pow(N[1], 2) + Math.pow(N[2], 2) + Math.pow(N[3], 2) + Math.pow(N[4], 2) + Math.pow(N[5], 2) + 1);
              }
              function J(N, M, O) {
                return N[0] = M[0] + O[0], N[1] = M[1] + O[1], N[2] = M[2] + O[2], N[3] = M[3] + O[3], N[4] = M[4] + O[4], N[5] = M[5] + O[5], N;
              }
              function e0(N, M, O) {
                return N[0] = M[0] - O[0], N[1] = M[1] - O[1], N[2] = M[2] - O[2], N[3] = M[3] - O[3], N[4] = M[4] - O[4], N[5] = M[5] - O[5], N;
              }
              function s0(N, M, O) {
                return N[0] = M[0] * O, N[1] = M[1] * O, N[2] = M[2] * O, N[3] = M[3] * O, N[4] = M[4] * O, N[5] = M[5] * O, N;
              }
              function S0(N, M, O, t0) {
                return N[0] = M[0] + O[0] * t0, N[1] = M[1] + O[1] * t0, N[2] = M[2] + O[2] * t0, N[3] = M[3] + O[3] * t0, N[4] = M[4] + O[4] * t0, N[5] = M[5] + O[5] * t0, N;
              }
              function D0(N, M) {
                return N[0] === M[0] && N[1] === M[1] && N[2] === M[2] && N[3] === M[3] && N[4] === M[4] && N[5] === M[5];
              }
              function _0(N, M) {
                var O = N[0], t0 = N[1], i0 = N[2], c0 = N[3], g0 = N[4], w = N[5], d = M[0], E = M[1], Q = M[2], j = M[3], X = M[4], $ = M[5];
                return Math.abs(O - d) <= o.EPSILON * Math.max(1, Math.abs(O), Math.abs(d)) && Math.abs(t0 - E) <= o.EPSILON * Math.max(1, Math.abs(t0), Math.abs(E)) && Math.abs(i0 - Q) <= o.EPSILON * Math.max(1, Math.abs(i0), Math.abs(Q)) && Math.abs(c0 - j) <= o.EPSILON * Math.max(1, Math.abs(c0), Math.abs(j)) && Math.abs(g0 - X) <= o.EPSILON * Math.max(1, Math.abs(g0), Math.abs(X)) && Math.abs(w - $) <= o.EPSILON * Math.max(1, Math.abs(w), Math.abs($));
              }
              e.mul = F, e.sub = e0;
            },
            /* 7 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = l, e.clone = y, e.copy = v, e.fromValues = m, e.set = p, e.identity = D, e.transpose = _, e.invert = L, e.adjoint = F, e.determinant = x, e.multiply = z, e.translate = R, e.scale = I, e.rotate = h, e.rotateX = b, e.rotateY = Z, e.rotateZ = G, e.fromTranslation = J, e.fromScaling = e0, e.fromRotation = s0, e.fromXRotation = S0, e.fromYRotation = D0, e.fromZRotation = _0, e.fromRotationTranslation = N, e.getTranslation = M, e.getScaling = O, e.getRotation = t0, e.fromRotationTranslationScale = i0, e.fromRotationTranslationScaleOrigin = c0, e.fromQuat = g0, e.frustum = w, e.perspective = d, e.perspectiveFromFieldOfView = E, e.ortho = Q, e.lookAt = j, e.targetTo = X, e.str = $, e.frob = h0, e.add = d0, e.subtract = q, e.multiplyScalar = K, e.multiplyScalarAndAdd = n0, e.exactEquals = f0, e.equals = l0;
              var f = c(0), o = u(f);
              function u(a) {
                if (a && a.__esModule)
                  return a;
                var g = {};
                if (a != null)
                  for (var Y in a)
                    Object.prototype.hasOwnProperty.call(a, Y) && (g[Y] = a[Y]);
                return g.default = a, g;
              }
              function l() {
                var a = new o.ARRAY_TYPE(16);
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function y(a) {
                var g = new o.ARRAY_TYPE(16);
                return g[0] = a[0], g[1] = a[1], g[2] = a[2], g[3] = a[3], g[4] = a[4], g[5] = a[5], g[6] = a[6], g[7] = a[7], g[8] = a[8], g[9] = a[9], g[10] = a[10], g[11] = a[11], g[12] = a[12], g[13] = a[13], g[14] = a[14], g[15] = a[15], g;
              }
              function v(a, g) {
                return a[0] = g[0], a[1] = g[1], a[2] = g[2], a[3] = g[3], a[4] = g[4], a[5] = g[5], a[6] = g[6], a[7] = g[7], a[8] = g[8], a[9] = g[9], a[10] = g[10], a[11] = g[11], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15], a;
              }
              function m(a, g, Y, H, r0, a0, o0, u0, v0, m0, y0, C0, M0, w0, x0, A0) {
                var p0 = new o.ARRAY_TYPE(16);
                return p0[0] = a, p0[1] = g, p0[2] = Y, p0[3] = H, p0[4] = r0, p0[5] = a0, p0[6] = o0, p0[7] = u0, p0[8] = v0, p0[9] = m0, p0[10] = y0, p0[11] = C0, p0[12] = M0, p0[13] = w0, p0[14] = x0, p0[15] = A0, p0;
              }
              function p(a, g, Y, H, r0, a0, o0, u0, v0, m0, y0, C0, M0, w0, x0, A0, p0) {
                return a[0] = g, a[1] = Y, a[2] = H, a[3] = r0, a[4] = a0, a[5] = o0, a[6] = u0, a[7] = v0, a[8] = m0, a[9] = y0, a[10] = C0, a[11] = M0, a[12] = w0, a[13] = x0, a[14] = A0, a[15] = p0, a;
              }
              function D(a) {
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function _(a, g) {
                if (a === g) {
                  var Y = g[1], H = g[2], r0 = g[3], a0 = g[6], o0 = g[7], u0 = g[11];
                  a[1] = g[4], a[2] = g[8], a[3] = g[12], a[4] = Y, a[6] = g[9], a[7] = g[13], a[8] = H, a[9] = a0, a[11] = g[14], a[12] = r0, a[13] = o0, a[14] = u0;
                } else
                  a[0] = g[0], a[1] = g[4], a[2] = g[8], a[3] = g[12], a[4] = g[1], a[5] = g[5], a[6] = g[9], a[7] = g[13], a[8] = g[2], a[9] = g[6], a[10] = g[10], a[11] = g[14], a[12] = g[3], a[13] = g[7], a[14] = g[11], a[15] = g[15];
                return a;
              }
              function L(a, g) {
                var Y = g[0], H = g[1], r0 = g[2], a0 = g[3], o0 = g[4], u0 = g[5], v0 = g[6], m0 = g[7], y0 = g[8], C0 = g[9], M0 = g[10], w0 = g[11], x0 = g[12], A0 = g[13], p0 = g[14], b0 = g[15], F0 = Y * u0 - H * o0, B0 = Y * v0 - r0 * o0, E0 = Y * m0 - a0 * o0, T0 = H * v0 - r0 * u0, P0 = H * m0 - a0 * u0, O0 = r0 * m0 - a0 * v0, q0 = y0 * A0 - C0 * x0, L0 = y0 * p0 - M0 * x0, k0 = y0 * b0 - w0 * x0, j0 = C0 * p0 - M0 * A0, z0 = C0 * b0 - w0 * A0, N0 = M0 * b0 - w0 * p0, R0 = F0 * N0 - B0 * z0 + E0 * j0 + T0 * k0 - P0 * L0 + O0 * q0;
                return R0 ? (R0 = 1 / R0, a[0] = (u0 * N0 - v0 * z0 + m0 * j0) * R0, a[1] = (r0 * z0 - H * N0 - a0 * j0) * R0, a[2] = (A0 * O0 - p0 * P0 + b0 * T0) * R0, a[3] = (M0 * P0 - C0 * O0 - w0 * T0) * R0, a[4] = (v0 * k0 - o0 * N0 - m0 * L0) * R0, a[5] = (Y * N0 - r0 * k0 + a0 * L0) * R0, a[6] = (p0 * E0 - x0 * O0 - b0 * B0) * R0, a[7] = (y0 * O0 - M0 * E0 + w0 * B0) * R0, a[8] = (o0 * z0 - u0 * k0 + m0 * q0) * R0, a[9] = (H * k0 - Y * z0 - a0 * q0) * R0, a[10] = (x0 * P0 - A0 * E0 + b0 * F0) * R0, a[11] = (C0 * E0 - y0 * P0 - w0 * F0) * R0, a[12] = (u0 * L0 - o0 * j0 - v0 * q0) * R0, a[13] = (Y * j0 - H * L0 + r0 * q0) * R0, a[14] = (A0 * B0 - x0 * T0 - p0 * F0) * R0, a[15] = (y0 * T0 - C0 * B0 + M0 * F0) * R0, a) : null;
              }
              function F(a, g) {
                var Y = g[0], H = g[1], r0 = g[2], a0 = g[3], o0 = g[4], u0 = g[5], v0 = g[6], m0 = g[7], y0 = g[8], C0 = g[9], M0 = g[10], w0 = g[11], x0 = g[12], A0 = g[13], p0 = g[14], b0 = g[15];
                return a[0] = u0 * (M0 * b0 - w0 * p0) - C0 * (v0 * b0 - m0 * p0) + A0 * (v0 * w0 - m0 * M0), a[1] = -(H * (M0 * b0 - w0 * p0) - C0 * (r0 * b0 - a0 * p0) + A0 * (r0 * w0 - a0 * M0)), a[2] = H * (v0 * b0 - m0 * p0) - u0 * (r0 * b0 - a0 * p0) + A0 * (r0 * m0 - a0 * v0), a[3] = -(H * (v0 * w0 - m0 * M0) - u0 * (r0 * w0 - a0 * M0) + C0 * (r0 * m0 - a0 * v0)), a[4] = -(o0 * (M0 * b0 - w0 * p0) - y0 * (v0 * b0 - m0 * p0) + x0 * (v0 * w0 - m0 * M0)), a[5] = Y * (M0 * b0 - w0 * p0) - y0 * (r0 * b0 - a0 * p0) + x0 * (r0 * w0 - a0 * M0), a[6] = -(Y * (v0 * b0 - m0 * p0) - o0 * (r0 * b0 - a0 * p0) + x0 * (r0 * m0 - a0 * v0)), a[7] = Y * (v0 * w0 - m0 * M0) - o0 * (r0 * w0 - a0 * M0) + y0 * (r0 * m0 - a0 * v0), a[8] = o0 * (C0 * b0 - w0 * A0) - y0 * (u0 * b0 - m0 * A0) + x0 * (u0 * w0 - m0 * C0), a[9] = -(Y * (C0 * b0 - w0 * A0) - y0 * (H * b0 - a0 * A0) + x0 * (H * w0 - a0 * C0)), a[10] = Y * (u0 * b0 - m0 * A0) - o0 * (H * b0 - a0 * A0) + x0 * (H * m0 - a0 * u0), a[11] = -(Y * (u0 * w0 - m0 * C0) - o0 * (H * w0 - a0 * C0) + y0 * (H * m0 - a0 * u0)), a[12] = -(o0 * (C0 * p0 - M0 * A0) - y0 * (u0 * p0 - v0 * A0) + x0 * (u0 * M0 - v0 * C0)), a[13] = Y * (C0 * p0 - M0 * A0) - y0 * (H * p0 - r0 * A0) + x0 * (H * M0 - r0 * C0), a[14] = -(Y * (u0 * p0 - v0 * A0) - o0 * (H * p0 - r0 * A0) + x0 * (H * v0 - r0 * u0)), a[15] = Y * (u0 * M0 - v0 * C0) - o0 * (H * M0 - r0 * C0) + y0 * (H * v0 - r0 * u0), a;
              }
              function x(a) {
                var g = a[0], Y = a[1], H = a[2], r0 = a[3], a0 = a[4], o0 = a[5], u0 = a[6], v0 = a[7], m0 = a[8], y0 = a[9], C0 = a[10], M0 = a[11], w0 = a[12], x0 = a[13], A0 = a[14], p0 = a[15], b0 = g * o0 - Y * a0, F0 = g * u0 - H * a0, B0 = g * v0 - r0 * a0, E0 = Y * u0 - H * o0, T0 = Y * v0 - r0 * o0, P0 = H * v0 - r0 * u0, O0 = m0 * x0 - y0 * w0, q0 = m0 * A0 - C0 * w0, L0 = m0 * p0 - M0 * w0, k0 = y0 * A0 - C0 * x0, j0 = y0 * p0 - M0 * x0, z0 = C0 * p0 - M0 * A0;
                return b0 * z0 - F0 * j0 + B0 * k0 + E0 * L0 - T0 * q0 + P0 * O0;
              }
              function z(a, g, Y) {
                var H = g[0], r0 = g[1], a0 = g[2], o0 = g[3], u0 = g[4], v0 = g[5], m0 = g[6], y0 = g[7], C0 = g[8], M0 = g[9], w0 = g[10], x0 = g[11], A0 = g[12], p0 = g[13], b0 = g[14], F0 = g[15], B0 = Y[0], E0 = Y[1], T0 = Y[2], P0 = Y[3];
                return a[0] = B0 * H + E0 * u0 + T0 * C0 + P0 * A0, a[1] = B0 * r0 + E0 * v0 + T0 * M0 + P0 * p0, a[2] = B0 * a0 + E0 * m0 + T0 * w0 + P0 * b0, a[3] = B0 * o0 + E0 * y0 + T0 * x0 + P0 * F0, B0 = Y[4], E0 = Y[5], T0 = Y[6], P0 = Y[7], a[4] = B0 * H + E0 * u0 + T0 * C0 + P0 * A0, a[5] = B0 * r0 + E0 * v0 + T0 * M0 + P0 * p0, a[6] = B0 * a0 + E0 * m0 + T0 * w0 + P0 * b0, a[7] = B0 * o0 + E0 * y0 + T0 * x0 + P0 * F0, B0 = Y[8], E0 = Y[9], T0 = Y[10], P0 = Y[11], a[8] = B0 * H + E0 * u0 + T0 * C0 + P0 * A0, a[9] = B0 * r0 + E0 * v0 + T0 * M0 + P0 * p0, a[10] = B0 * a0 + E0 * m0 + T0 * w0 + P0 * b0, a[11] = B0 * o0 + E0 * y0 + T0 * x0 + P0 * F0, B0 = Y[12], E0 = Y[13], T0 = Y[14], P0 = Y[15], a[12] = B0 * H + E0 * u0 + T0 * C0 + P0 * A0, a[13] = B0 * r0 + E0 * v0 + T0 * M0 + P0 * p0, a[14] = B0 * a0 + E0 * m0 + T0 * w0 + P0 * b0, a[15] = B0 * o0 + E0 * y0 + T0 * x0 + P0 * F0, a;
              }
              function R(a, g, Y) {
                var H = Y[0], r0 = Y[1], a0 = Y[2], o0 = void 0, u0 = void 0, v0 = void 0, m0 = void 0, y0 = void 0, C0 = void 0, M0 = void 0, w0 = void 0, x0 = void 0, A0 = void 0, p0 = void 0, b0 = void 0;
                return g === a ? (a[12] = g[0] * H + g[4] * r0 + g[8] * a0 + g[12], a[13] = g[1] * H + g[5] * r0 + g[9] * a0 + g[13], a[14] = g[2] * H + g[6] * r0 + g[10] * a0 + g[14], a[15] = g[3] * H + g[7] * r0 + g[11] * a0 + g[15]) : (o0 = g[0], u0 = g[1], v0 = g[2], m0 = g[3], y0 = g[4], C0 = g[5], M0 = g[6], w0 = g[7], x0 = g[8], A0 = g[9], p0 = g[10], b0 = g[11], a[0] = o0, a[1] = u0, a[2] = v0, a[3] = m0, a[4] = y0, a[5] = C0, a[6] = M0, a[7] = w0, a[8] = x0, a[9] = A0, a[10] = p0, a[11] = b0, a[12] = o0 * H + y0 * r0 + x0 * a0 + g[12], a[13] = u0 * H + C0 * r0 + A0 * a0 + g[13], a[14] = v0 * H + M0 * r0 + p0 * a0 + g[14], a[15] = m0 * H + w0 * r0 + b0 * a0 + g[15]), a;
              }
              function I(a, g, Y) {
                var H = Y[0], r0 = Y[1], a0 = Y[2];
                return a[0] = g[0] * H, a[1] = g[1] * H, a[2] = g[2] * H, a[3] = g[3] * H, a[4] = g[4] * r0, a[5] = g[5] * r0, a[6] = g[6] * r0, a[7] = g[7] * r0, a[8] = g[8] * a0, a[9] = g[9] * a0, a[10] = g[10] * a0, a[11] = g[11] * a0, a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15], a;
              }
              function h(a, g, Y, H) {
                var r0 = H[0], a0 = H[1], o0 = H[2], u0 = Math.sqrt(r0 * r0 + a0 * a0 + o0 * o0), v0 = void 0, m0 = void 0, y0 = void 0, C0 = void 0, M0 = void 0, w0 = void 0, x0 = void 0, A0 = void 0, p0 = void 0, b0 = void 0, F0 = void 0, B0 = void 0, E0 = void 0, T0 = void 0, P0 = void 0, O0 = void 0, q0 = void 0, L0 = void 0, k0 = void 0, j0 = void 0, z0 = void 0, N0 = void 0, R0 = void 0, I0 = void 0;
                return Math.abs(u0) < o.EPSILON ? null : (u0 = 1 / u0, r0 *= u0, a0 *= u0, o0 *= u0, v0 = Math.sin(Y), m0 = Math.cos(Y), y0 = 1 - m0, C0 = g[0], M0 = g[1], w0 = g[2], x0 = g[3], A0 = g[4], p0 = g[5], b0 = g[6], F0 = g[7], B0 = g[8], E0 = g[9], T0 = g[10], P0 = g[11], O0 = r0 * r0 * y0 + m0, q0 = a0 * r0 * y0 + o0 * v0, L0 = o0 * r0 * y0 - a0 * v0, k0 = r0 * a0 * y0 - o0 * v0, j0 = a0 * a0 * y0 + m0, z0 = o0 * a0 * y0 + r0 * v0, N0 = r0 * o0 * y0 + a0 * v0, R0 = a0 * o0 * y0 - r0 * v0, I0 = o0 * o0 * y0 + m0, a[0] = C0 * O0 + A0 * q0 + B0 * L0, a[1] = M0 * O0 + p0 * q0 + E0 * L0, a[2] = w0 * O0 + b0 * q0 + T0 * L0, a[3] = x0 * O0 + F0 * q0 + P0 * L0, a[4] = C0 * k0 + A0 * j0 + B0 * z0, a[5] = M0 * k0 + p0 * j0 + E0 * z0, a[6] = w0 * k0 + b0 * j0 + T0 * z0, a[7] = x0 * k0 + F0 * j0 + P0 * z0, a[8] = C0 * N0 + A0 * R0 + B0 * I0, a[9] = M0 * N0 + p0 * R0 + E0 * I0, a[10] = w0 * N0 + b0 * R0 + T0 * I0, a[11] = x0 * N0 + F0 * R0 + P0 * I0, g !== a && (a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a);
              }
              function b(a, g, Y) {
                var H = Math.sin(Y), r0 = Math.cos(Y), a0 = g[4], o0 = g[5], u0 = g[6], v0 = g[7], m0 = g[8], y0 = g[9], C0 = g[10], M0 = g[11];
                return g !== a && (a[0] = g[0], a[1] = g[1], a[2] = g[2], a[3] = g[3], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a[4] = a0 * r0 + m0 * H, a[5] = o0 * r0 + y0 * H, a[6] = u0 * r0 + C0 * H, a[7] = v0 * r0 + M0 * H, a[8] = m0 * r0 - a0 * H, a[9] = y0 * r0 - o0 * H, a[10] = C0 * r0 - u0 * H, a[11] = M0 * r0 - v0 * H, a;
              }
              function Z(a, g, Y) {
                var H = Math.sin(Y), r0 = Math.cos(Y), a0 = g[0], o0 = g[1], u0 = g[2], v0 = g[3], m0 = g[8], y0 = g[9], C0 = g[10], M0 = g[11];
                return g !== a && (a[4] = g[4], a[5] = g[5], a[6] = g[6], a[7] = g[7], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a[0] = a0 * r0 - m0 * H, a[1] = o0 * r0 - y0 * H, a[2] = u0 * r0 - C0 * H, a[3] = v0 * r0 - M0 * H, a[8] = a0 * H + m0 * r0, a[9] = o0 * H + y0 * r0, a[10] = u0 * H + C0 * r0, a[11] = v0 * H + M0 * r0, a;
              }
              function G(a, g, Y) {
                var H = Math.sin(Y), r0 = Math.cos(Y), a0 = g[0], o0 = g[1], u0 = g[2], v0 = g[3], m0 = g[4], y0 = g[5], C0 = g[6], M0 = g[7];
                return g !== a && (a[8] = g[8], a[9] = g[9], a[10] = g[10], a[11] = g[11], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a[0] = a0 * r0 + m0 * H, a[1] = o0 * r0 + y0 * H, a[2] = u0 * r0 + C0 * H, a[3] = v0 * r0 + M0 * H, a[4] = m0 * r0 - a0 * H, a[5] = y0 * r0 - o0 * H, a[6] = C0 * r0 - u0 * H, a[7] = M0 * r0 - v0 * H, a;
              }
              function J(a, g) {
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = g[0], a[13] = g[1], a[14] = g[2], a[15] = 1, a;
              }
              function e0(a, g) {
                return a[0] = g[0], a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = g[1], a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = g[2], a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function s0(a, g, Y) {
                var H = Y[0], r0 = Y[1], a0 = Y[2], o0 = Math.sqrt(H * H + r0 * r0 + a0 * a0), u0 = void 0, v0 = void 0, m0 = void 0;
                return Math.abs(o0) < o.EPSILON ? null : (o0 = 1 / o0, H *= o0, r0 *= o0, a0 *= o0, u0 = Math.sin(g), v0 = Math.cos(g), m0 = 1 - v0, a[0] = H * H * m0 + v0, a[1] = r0 * H * m0 + a0 * u0, a[2] = a0 * H * m0 - r0 * u0, a[3] = 0, a[4] = H * r0 * m0 - a0 * u0, a[5] = r0 * r0 * m0 + v0, a[6] = a0 * r0 * m0 + H * u0, a[7] = 0, a[8] = H * a0 * m0 + r0 * u0, a[9] = r0 * a0 * m0 - H * u0, a[10] = a0 * a0 * m0 + v0, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a);
              }
              function S0(a, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = H, a[6] = Y, a[7] = 0, a[8] = 0, a[9] = -Y, a[10] = H, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function D0(a, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return a[0] = H, a[1] = 0, a[2] = -Y, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = Y, a[9] = 0, a[10] = H, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function _0(a, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return a[0] = H, a[1] = Y, a[2] = 0, a[3] = 0, a[4] = -Y, a[5] = H, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function N(a, g, Y) {
                var H = g[0], r0 = g[1], a0 = g[2], o0 = g[3], u0 = H + H, v0 = r0 + r0, m0 = a0 + a0, y0 = H * u0, C0 = H * v0, M0 = H * m0, w0 = r0 * v0, x0 = r0 * m0, A0 = a0 * m0, p0 = o0 * u0, b0 = o0 * v0, F0 = o0 * m0;
                return a[0] = 1 - (w0 + A0), a[1] = C0 + F0, a[2] = M0 - b0, a[3] = 0, a[4] = C0 - F0, a[5] = 1 - (y0 + A0), a[6] = x0 + p0, a[7] = 0, a[8] = M0 + b0, a[9] = x0 - p0, a[10] = 1 - (y0 + w0), a[11] = 0, a[12] = Y[0], a[13] = Y[1], a[14] = Y[2], a[15] = 1, a;
              }
              function M(a, g) {
                return a[0] = g[12], a[1] = g[13], a[2] = g[14], a;
              }
              function O(a, g) {
                var Y = g[0], H = g[1], r0 = g[2], a0 = g[4], o0 = g[5], u0 = g[6], v0 = g[8], m0 = g[9], y0 = g[10];
                return a[0] = Math.sqrt(Y * Y + H * H + r0 * r0), a[1] = Math.sqrt(a0 * a0 + o0 * o0 + u0 * u0), a[2] = Math.sqrt(v0 * v0 + m0 * m0 + y0 * y0), a;
              }
              function t0(a, g) {
                var Y = g[0] + g[5] + g[10], H = 0;
                return Y > 0 ? (H = Math.sqrt(Y + 1) * 2, a[3] = 0.25 * H, a[0] = (g[6] - g[9]) / H, a[1] = (g[8] - g[2]) / H, a[2] = (g[1] - g[4]) / H) : g[0] > g[5] & g[0] > g[10] ? (H = Math.sqrt(1 + g[0] - g[5] - g[10]) * 2, a[3] = (g[6] - g[9]) / H, a[0] = 0.25 * H, a[1] = (g[1] + g[4]) / H, a[2] = (g[8] + g[2]) / H) : g[5] > g[10] ? (H = Math.sqrt(1 + g[5] - g[0] - g[10]) * 2, a[3] = (g[8] - g[2]) / H, a[0] = (g[1] + g[4]) / H, a[1] = 0.25 * H, a[2] = (g[6] + g[9]) / H) : (H = Math.sqrt(1 + g[10] - g[0] - g[5]) * 2, a[3] = (g[1] - g[4]) / H, a[0] = (g[8] + g[2]) / H, a[1] = (g[6] + g[9]) / H, a[2] = 0.25 * H), a;
              }
              function i0(a, g, Y, H) {
                var r0 = g[0], a0 = g[1], o0 = g[2], u0 = g[3], v0 = r0 + r0, m0 = a0 + a0, y0 = o0 + o0, C0 = r0 * v0, M0 = r0 * m0, w0 = r0 * y0, x0 = a0 * m0, A0 = a0 * y0, p0 = o0 * y0, b0 = u0 * v0, F0 = u0 * m0, B0 = u0 * y0, E0 = H[0], T0 = H[1], P0 = H[2];
                return a[0] = (1 - (x0 + p0)) * E0, a[1] = (M0 + B0) * E0, a[2] = (w0 - F0) * E0, a[3] = 0, a[4] = (M0 - B0) * T0, a[5] = (1 - (C0 + p0)) * T0, a[6] = (A0 + b0) * T0, a[7] = 0, a[8] = (w0 + F0) * P0, a[9] = (A0 - b0) * P0, a[10] = (1 - (C0 + x0)) * P0, a[11] = 0, a[12] = Y[0], a[13] = Y[1], a[14] = Y[2], a[15] = 1, a;
              }
              function c0(a, g, Y, H, r0) {
                var a0 = g[0], o0 = g[1], u0 = g[2], v0 = g[3], m0 = a0 + a0, y0 = o0 + o0, C0 = u0 + u0, M0 = a0 * m0, w0 = a0 * y0, x0 = a0 * C0, A0 = o0 * y0, p0 = o0 * C0, b0 = u0 * C0, F0 = v0 * m0, B0 = v0 * y0, E0 = v0 * C0, T0 = H[0], P0 = H[1], O0 = H[2], q0 = r0[0], L0 = r0[1], k0 = r0[2];
                return a[0] = (1 - (A0 + b0)) * T0, a[1] = (w0 + E0) * T0, a[2] = (x0 - B0) * T0, a[3] = 0, a[4] = (w0 - E0) * P0, a[5] = (1 - (M0 + b0)) * P0, a[6] = (p0 + F0) * P0, a[7] = 0, a[8] = (x0 + B0) * O0, a[9] = (p0 - F0) * O0, a[10] = (1 - (M0 + A0)) * O0, a[11] = 0, a[12] = Y[0] + q0 - (a[0] * q0 + a[4] * L0 + a[8] * k0), a[13] = Y[1] + L0 - (a[1] * q0 + a[5] * L0 + a[9] * k0), a[14] = Y[2] + k0 - (a[2] * q0 + a[6] * L0 + a[10] * k0), a[15] = 1, a;
              }
              function g0(a, g) {
                var Y = g[0], H = g[1], r0 = g[2], a0 = g[3], o0 = Y + Y, u0 = H + H, v0 = r0 + r0, m0 = Y * o0, y0 = H * o0, C0 = H * u0, M0 = r0 * o0, w0 = r0 * u0, x0 = r0 * v0, A0 = a0 * o0, p0 = a0 * u0, b0 = a0 * v0;
                return a[0] = 1 - C0 - x0, a[1] = y0 + b0, a[2] = M0 - p0, a[3] = 0, a[4] = y0 - b0, a[5] = 1 - m0 - x0, a[6] = w0 + A0, a[7] = 0, a[8] = M0 + p0, a[9] = w0 - A0, a[10] = 1 - m0 - C0, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function w(a, g, Y, H, r0, a0, o0) {
                var u0 = 1 / (Y - g), v0 = 1 / (r0 - H), m0 = 1 / (a0 - o0);
                return a[0] = a0 * 2 * u0, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = a0 * 2 * v0, a[6] = 0, a[7] = 0, a[8] = (Y + g) * u0, a[9] = (r0 + H) * v0, a[10] = (o0 + a0) * m0, a[11] = -1, a[12] = 0, a[13] = 0, a[14] = o0 * a0 * 2 * m0, a[15] = 0, a;
              }
              function d(a, g, Y, H, r0) {
                var a0 = 1 / Math.tan(g / 2), o0 = 1 / (H - r0);
                return a[0] = a0 / Y, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = a0, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = (r0 + H) * o0, a[11] = -1, a[12] = 0, a[13] = 0, a[14] = 2 * r0 * H * o0, a[15] = 0, a;
              }
              function E(a, g, Y, H) {
                var r0 = Math.tan(g.upDegrees * Math.PI / 180), a0 = Math.tan(g.downDegrees * Math.PI / 180), o0 = Math.tan(g.leftDegrees * Math.PI / 180), u0 = Math.tan(g.rightDegrees * Math.PI / 180), v0 = 2 / (o0 + u0), m0 = 2 / (r0 + a0);
                return a[0] = v0, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = m0, a[6] = 0, a[7] = 0, a[8] = -((o0 - u0) * v0 * 0.5), a[9] = (r0 - a0) * m0 * 0.5, a[10] = H / (Y - H), a[11] = -1, a[12] = 0, a[13] = 0, a[14] = H * Y / (Y - H), a[15] = 0, a;
              }
              function Q(a, g, Y, H, r0, a0, o0) {
                var u0 = 1 / (g - Y), v0 = 1 / (H - r0), m0 = 1 / (a0 - o0);
                return a[0] = -2 * u0, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = -2 * v0, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 2 * m0, a[11] = 0, a[12] = (g + Y) * u0, a[13] = (r0 + H) * v0, a[14] = (o0 + a0) * m0, a[15] = 1, a;
              }
              function j(a, g, Y, H) {
                var r0 = void 0, a0 = void 0, o0 = void 0, u0 = void 0, v0 = void 0, m0 = void 0, y0 = void 0, C0 = void 0, M0 = void 0, w0 = void 0, x0 = g[0], A0 = g[1], p0 = g[2], b0 = H[0], F0 = H[1], B0 = H[2], E0 = Y[0], T0 = Y[1], P0 = Y[2];
                return Math.abs(x0 - E0) < o.EPSILON && Math.abs(A0 - T0) < o.EPSILON && Math.abs(p0 - P0) < o.EPSILON ? mat4.identity(a) : (y0 = x0 - E0, C0 = A0 - T0, M0 = p0 - P0, w0 = 1 / Math.sqrt(y0 * y0 + C0 * C0 + M0 * M0), y0 *= w0, C0 *= w0, M0 *= w0, r0 = F0 * M0 - B0 * C0, a0 = B0 * y0 - b0 * M0, o0 = b0 * C0 - F0 * y0, w0 = Math.sqrt(r0 * r0 + a0 * a0 + o0 * o0), w0 ? (w0 = 1 / w0, r0 *= w0, a0 *= w0, o0 *= w0) : (r0 = 0, a0 = 0, o0 = 0), u0 = C0 * o0 - M0 * a0, v0 = M0 * r0 - y0 * o0, m0 = y0 * a0 - C0 * r0, w0 = Math.sqrt(u0 * u0 + v0 * v0 + m0 * m0), w0 ? (w0 = 1 / w0, u0 *= w0, v0 *= w0, m0 *= w0) : (u0 = 0, v0 = 0, m0 = 0), a[0] = r0, a[1] = u0, a[2] = y0, a[3] = 0, a[4] = a0, a[5] = v0, a[6] = C0, a[7] = 0, a[8] = o0, a[9] = m0, a[10] = M0, a[11] = 0, a[12] = -(r0 * x0 + a0 * A0 + o0 * p0), a[13] = -(u0 * x0 + v0 * A0 + m0 * p0), a[14] = -(y0 * x0 + C0 * A0 + M0 * p0), a[15] = 1, a);
              }
              function X(a, g, Y, H) {
                var r0 = g[0], a0 = g[1], o0 = g[2], u0 = H[0], v0 = H[1], m0 = H[2], y0 = r0 - Y[0], C0 = a0 - Y[1], M0 = o0 - Y[2], w0 = y0 * y0 + C0 * C0 + M0 * M0;
                w0 > 0 && (w0 = 1 / Math.sqrt(w0), y0 *= w0, C0 *= w0, M0 *= w0);
                var x0 = v0 * M0 - m0 * C0, A0 = m0 * y0 - u0 * M0, p0 = u0 * C0 - v0 * y0;
                return a[0] = x0, a[1] = A0, a[2] = p0, a[3] = 0, a[4] = C0 * p0 - M0 * A0, a[5] = M0 * x0 - y0 * p0, a[6] = y0 * A0 - C0 * x0, a[7] = 0, a[8] = y0, a[9] = C0, a[10] = M0, a[11] = 0, a[12] = r0, a[13] = a0, a[14] = o0, a[15] = 1, a;
              }
              function $(a) {
                return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
              }
              function h0(a) {
                return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));
              }
              function d0(a, g, Y) {
                return a[0] = g[0] + Y[0], a[1] = g[1] + Y[1], a[2] = g[2] + Y[2], a[3] = g[3] + Y[3], a[4] = g[4] + Y[4], a[5] = g[5] + Y[5], a[6] = g[6] + Y[6], a[7] = g[7] + Y[7], a[8] = g[8] + Y[8], a[9] = g[9] + Y[9], a[10] = g[10] + Y[10], a[11] = g[11] + Y[11], a[12] = g[12] + Y[12], a[13] = g[13] + Y[13], a[14] = g[14] + Y[14], a[15] = g[15] + Y[15], a;
              }
              function q(a, g, Y) {
                return a[0] = g[0] - Y[0], a[1] = g[1] - Y[1], a[2] = g[2] - Y[2], a[3] = g[3] - Y[3], a[4] = g[4] - Y[4], a[5] = g[5] - Y[5], a[6] = g[6] - Y[6], a[7] = g[7] - Y[7], a[8] = g[8] - Y[8], a[9] = g[9] - Y[9], a[10] = g[10] - Y[10], a[11] = g[11] - Y[11], a[12] = g[12] - Y[12], a[13] = g[13] - Y[13], a[14] = g[14] - Y[14], a[15] = g[15] - Y[15], a;
              }
              function K(a, g, Y) {
                return a[0] = g[0] * Y, a[1] = g[1] * Y, a[2] = g[2] * Y, a[3] = g[3] * Y, a[4] = g[4] * Y, a[5] = g[5] * Y, a[6] = g[6] * Y, a[7] = g[7] * Y, a[8] = g[8] * Y, a[9] = g[9] * Y, a[10] = g[10] * Y, a[11] = g[11] * Y, a[12] = g[12] * Y, a[13] = g[13] * Y, a[14] = g[14] * Y, a[15] = g[15] * Y, a;
              }
              function n0(a, g, Y, H) {
                return a[0] = g[0] + Y[0] * H, a[1] = g[1] + Y[1] * H, a[2] = g[2] + Y[2] * H, a[3] = g[3] + Y[3] * H, a[4] = g[4] + Y[4] * H, a[5] = g[5] + Y[5] * H, a[6] = g[6] + Y[6] * H, a[7] = g[7] + Y[7] * H, a[8] = g[8] + Y[8] * H, a[9] = g[9] + Y[9] * H, a[10] = g[10] + Y[10] * H, a[11] = g[11] + Y[11] * H, a[12] = g[12] + Y[12] * H, a[13] = g[13] + Y[13] * H, a[14] = g[14] + Y[14] * H, a[15] = g[15] + Y[15] * H, a;
              }
              function f0(a, g) {
                return a[0] === g[0] && a[1] === g[1] && a[2] === g[2] && a[3] === g[3] && a[4] === g[4] && a[5] === g[5] && a[6] === g[6] && a[7] === g[7] && a[8] === g[8] && a[9] === g[9] && a[10] === g[10] && a[11] === g[11] && a[12] === g[12] && a[13] === g[13] && a[14] === g[14] && a[15] === g[15];
              }
              function l0(a, g) {
                var Y = a[0], H = a[1], r0 = a[2], a0 = a[3], o0 = a[4], u0 = a[5], v0 = a[6], m0 = a[7], y0 = a[8], C0 = a[9], M0 = a[10], w0 = a[11], x0 = a[12], A0 = a[13], p0 = a[14], b0 = a[15], F0 = g[0], B0 = g[1], E0 = g[2], T0 = g[3], P0 = g[4], O0 = g[5], q0 = g[6], L0 = g[7], k0 = g[8], j0 = g[9], z0 = g[10], N0 = g[11], R0 = g[12], I0 = g[13], V0 = g[14], G0 = g[15];
                return Math.abs(Y - F0) <= o.EPSILON * Math.max(1, Math.abs(Y), Math.abs(F0)) && Math.abs(H - B0) <= o.EPSILON * Math.max(1, Math.abs(H), Math.abs(B0)) && Math.abs(r0 - E0) <= o.EPSILON * Math.max(1, Math.abs(r0), Math.abs(E0)) && Math.abs(a0 - T0) <= o.EPSILON * Math.max(1, Math.abs(a0), Math.abs(T0)) && Math.abs(o0 - P0) <= o.EPSILON * Math.max(1, Math.abs(o0), Math.abs(P0)) && Math.abs(u0 - O0) <= o.EPSILON * Math.max(1, Math.abs(u0), Math.abs(O0)) && Math.abs(v0 - q0) <= o.EPSILON * Math.max(1, Math.abs(v0), Math.abs(q0)) && Math.abs(m0 - L0) <= o.EPSILON * Math.max(1, Math.abs(m0), Math.abs(L0)) && Math.abs(y0 - k0) <= o.EPSILON * Math.max(1, Math.abs(y0), Math.abs(k0)) && Math.abs(C0 - j0) <= o.EPSILON * Math.max(1, Math.abs(C0), Math.abs(j0)) && Math.abs(M0 - z0) <= o.EPSILON * Math.max(1, Math.abs(M0), Math.abs(z0)) && Math.abs(w0 - N0) <= o.EPSILON * Math.max(1, Math.abs(w0), Math.abs(N0)) && Math.abs(x0 - R0) <= o.EPSILON * Math.max(1, Math.abs(x0), Math.abs(R0)) && Math.abs(A0 - I0) <= o.EPSILON * Math.max(1, Math.abs(A0), Math.abs(I0)) && Math.abs(p0 - V0) <= o.EPSILON * Math.max(1, Math.abs(p0), Math.abs(V0)) && Math.abs(b0 - G0) <= o.EPSILON * Math.max(1, Math.abs(b0), Math.abs(G0));
              }
              e.mul = z, e.sub = q;
            },
            /* 8 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.setAxes = e.sqlerp = e.rotationTo = e.equals = e.exactEquals = e.normalize = e.sqrLen = e.squaredLength = e.len = e.length = e.lerp = e.dot = e.scale = e.mul = e.add = e.set = e.copy = e.fromValues = e.clone = void 0, e.create = _, e.identity = L, e.setAxisAngle = F, e.getAxisAngle = x, e.multiply = z, e.rotateX = R, e.rotateY = I, e.rotateZ = h, e.calculateW = b, e.slerp = Z, e.invert = G, e.conjugate = J, e.fromMat3 = e0, e.fromEuler = s0, e.str = S0;
              var f = c(0), o = D(f), u = c(1), l = D(u), y = c(2), v = D(y), m = c(3), p = D(m);
              function D(M) {
                if (M && M.__esModule)
                  return M;
                var O = {};
                if (M != null)
                  for (var t0 in M)
                    Object.prototype.hasOwnProperty.call(M, t0) && (O[t0] = M[t0]);
                return O.default = M, O;
              }
              function _() {
                var M = new o.ARRAY_TYPE(4);
                return M[0] = 0, M[1] = 0, M[2] = 0, M[3] = 1, M;
              }
              function L(M) {
                return M[0] = 0, M[1] = 0, M[2] = 0, M[3] = 1, M;
              }
              function F(M, O, t0) {
                t0 = t0 * 0.5;
                var i0 = Math.sin(t0);
                return M[0] = i0 * O[0], M[1] = i0 * O[1], M[2] = i0 * O[2], M[3] = Math.cos(t0), M;
              }
              function x(M, O) {
                var t0 = Math.acos(O[3]) * 2, i0 = Math.sin(t0 / 2);
                return i0 != 0 ? (M[0] = O[0] / i0, M[1] = O[1] / i0, M[2] = O[2] / i0) : (M[0] = 1, M[1] = 0, M[2] = 0), t0;
              }
              function z(M, O, t0) {
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = t0[0], E = t0[1], Q = t0[2], j = t0[3];
                return M[0] = i0 * j + w * d + c0 * Q - g0 * E, M[1] = c0 * j + w * E + g0 * d - i0 * Q, M[2] = g0 * j + w * Q + i0 * E - c0 * d, M[3] = w * j - i0 * d - c0 * E - g0 * Q, M;
              }
              function R(M, O, t0) {
                t0 *= 0.5;
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = Math.sin(t0), E = Math.cos(t0);
                return M[0] = i0 * E + w * d, M[1] = c0 * E + g0 * d, M[2] = g0 * E - c0 * d, M[3] = w * E - i0 * d, M;
              }
              function I(M, O, t0) {
                t0 *= 0.5;
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = Math.sin(t0), E = Math.cos(t0);
                return M[0] = i0 * E - g0 * d, M[1] = c0 * E + w * d, M[2] = g0 * E + i0 * d, M[3] = w * E - c0 * d, M;
              }
              function h(M, O, t0) {
                t0 *= 0.5;
                var i0 = O[0], c0 = O[1], g0 = O[2], w = O[3], d = Math.sin(t0), E = Math.cos(t0);
                return M[0] = i0 * E + c0 * d, M[1] = c0 * E - i0 * d, M[2] = g0 * E + w * d, M[3] = w * E - g0 * d, M;
              }
              function b(M, O) {
                var t0 = O[0], i0 = O[1], c0 = O[2];
                return M[0] = t0, M[1] = i0, M[2] = c0, M[3] = Math.sqrt(Math.abs(1 - t0 * t0 - i0 * i0 - c0 * c0)), M;
              }
              function Z(M, O, t0, i0) {
                var c0 = O[0], g0 = O[1], w = O[2], d = O[3], E = t0[0], Q = t0[1], j = t0[2], X = t0[3], $ = void 0, h0 = void 0, d0 = void 0, q = void 0, K = void 0;
                return h0 = c0 * E + g0 * Q + w * j + d * X, h0 < 0 && (h0 = -h0, E = -E, Q = -Q, j = -j, X = -X), 1 - h0 > 1e-6 ? ($ = Math.acos(h0), d0 = Math.sin($), q = Math.sin((1 - i0) * $) / d0, K = Math.sin(i0 * $) / d0) : (q = 1 - i0, K = i0), M[0] = q * c0 + K * E, M[1] = q * g0 + K * Q, M[2] = q * w + K * j, M[3] = q * d + K * X, M;
              }
              function G(M, O) {
                var t0 = O[0], i0 = O[1], c0 = O[2], g0 = O[3], w = t0 * t0 + i0 * i0 + c0 * c0 + g0 * g0, d = w ? 1 / w : 0;
                return M[0] = -t0 * d, M[1] = -i0 * d, M[2] = -c0 * d, M[3] = g0 * d, M;
              }
              function J(M, O) {
                return M[0] = -O[0], M[1] = -O[1], M[2] = -O[2], M[3] = O[3], M;
              }
              function e0(M, O) {
                var t0 = O[0] + O[4] + O[8], i0 = void 0;
                if (t0 > 0)
                  i0 = Math.sqrt(t0 + 1), M[3] = 0.5 * i0, i0 = 0.5 / i0, M[0] = (O[5] - O[7]) * i0, M[1] = (O[6] - O[2]) * i0, M[2] = (O[1] - O[3]) * i0;
                else {
                  var c0 = 0;
                  O[4] > O[0] && (c0 = 1), O[8] > O[c0 * 3 + c0] && (c0 = 2);
                  var g0 = (c0 + 1) % 3, w = (c0 + 2) % 3;
                  i0 = Math.sqrt(O[c0 * 3 + c0] - O[g0 * 3 + g0] - O[w * 3 + w] + 1), M[c0] = 0.5 * i0, i0 = 0.5 / i0, M[3] = (O[g0 * 3 + w] - O[w * 3 + g0]) * i0, M[g0] = (O[g0 * 3 + c0] + O[c0 * 3 + g0]) * i0, M[w] = (O[w * 3 + c0] + O[c0 * 3 + w]) * i0;
                }
                return M;
              }
              function s0(M, O, t0, i0) {
                var c0 = 0.5 * Math.PI / 180;
                O *= c0, t0 *= c0, i0 *= c0;
                var g0 = Math.sin(O), w = Math.cos(O), d = Math.sin(t0), E = Math.cos(t0), Q = Math.sin(i0), j = Math.cos(i0);
                return M[0] = g0 * E * j - w * d * Q, M[1] = w * d * j + g0 * E * Q, M[2] = w * E * Q - g0 * d * j, M[3] = w * E * j + g0 * d * Q, M;
              }
              function S0(M) {
                return "quat(" + M[0] + ", " + M[1] + ", " + M[2] + ", " + M[3] + ")";
              }
              e.clone = p.clone, e.fromValues = p.fromValues, e.copy = p.copy, e.set = p.set, e.add = p.add, e.mul = z, e.scale = p.scale, e.dot = p.dot, e.lerp = p.lerp;
              var D0 = e.length = p.length;
              e.len = D0;
              var _0 = e.squaredLength = p.squaredLength;
              e.sqrLen = _0;
              var N = e.normalize = p.normalize;
              e.exactEquals = p.exactEquals, e.equals = p.equals, e.rotationTo = function() {
                var M = v.create(), O = v.fromValues(1, 0, 0), t0 = v.fromValues(0, 1, 0);
                return function(i0, c0, g0) {
                  var w = v.dot(c0, g0);
                  return w < -0.999999 ? (v.cross(M, O, c0), v.len(M) < 1e-6 && v.cross(M, t0, c0), v.normalize(M, M), F(i0, M, Math.PI), i0) : w > 0.999999 ? (i0[0] = 0, i0[1] = 0, i0[2] = 0, i0[3] = 1, i0) : (v.cross(M, c0, g0), i0[0] = M[0], i0[1] = M[1], i0[2] = M[2], i0[3] = 1 + w, N(i0, i0));
                };
              }(), e.sqlerp = function() {
                var M = _(), O = _();
                return function(t0, i0, c0, g0, w, d) {
                  return Z(M, i0, w, d), Z(O, c0, g0, d), Z(t0, M, O, 2 * d * (1 - d)), t0;
                };
              }(), e.setAxes = function() {
                var M = l.create();
                return function(O, t0, i0, c0) {
                  return M[0] = i0[0], M[3] = i0[1], M[6] = i0[2], M[1] = c0[0], M[4] = c0[1], M[7] = c0[2], M[2] = -t0[0], M[5] = -t0[1], M[8] = -t0[2], N(O, e0(O, M));
                };
              }();
            },
            /* 9 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.sqrDist = e.dist = e.div = e.mul = e.sub = e.len = void 0, e.create = l, e.clone = y, e.fromValues = v, e.copy = m, e.set = p, e.add = D, e.subtract = _, e.multiply = L, e.divide = F, e.ceil = x, e.floor = z, e.min = R, e.max = I, e.round = h, e.scale = b, e.scaleAndAdd = Z, e.distance = G, e.squaredDistance = J, e.length = e0, e.squaredLength = s0, e.negate = S0, e.inverse = D0, e.normalize = _0, e.dot = N, e.cross = M, e.lerp = O, e.random = t0, e.transformMat2 = i0, e.transformMat2d = c0, e.transformMat3 = g0, e.transformMat4 = w, e.str = d, e.exactEquals = E, e.equals = Q;
              var f = c(0), o = u(f);
              function u(j) {
                if (j && j.__esModule)
                  return j;
                var X = {};
                if (j != null)
                  for (var $ in j)
                    Object.prototype.hasOwnProperty.call(j, $) && (X[$] = j[$]);
                return X.default = j, X;
              }
              function l() {
                var j = new o.ARRAY_TYPE(2);
                return j[0] = 0, j[1] = 0, j;
              }
              function y(j) {
                var X = new o.ARRAY_TYPE(2);
                return X[0] = j[0], X[1] = j[1], X;
              }
              function v(j, X) {
                var $ = new o.ARRAY_TYPE(2);
                return $[0] = j, $[1] = X, $;
              }
              function m(j, X) {
                return j[0] = X[0], j[1] = X[1], j;
              }
              function p(j, X, $) {
                return j[0] = X, j[1] = $, j;
              }
              function D(j, X, $) {
                return j[0] = X[0] + $[0], j[1] = X[1] + $[1], j;
              }
              function _(j, X, $) {
                return j[0] = X[0] - $[0], j[1] = X[1] - $[1], j;
              }
              function L(j, X, $) {
                return j[0] = X[0] * $[0], j[1] = X[1] * $[1], j;
              }
              function F(j, X, $) {
                return j[0] = X[0] / $[0], j[1] = X[1] / $[1], j;
              }
              function x(j, X) {
                return j[0] = Math.ceil(X[0]), j[1] = Math.ceil(X[1]), j;
              }
              function z(j, X) {
                return j[0] = Math.floor(X[0]), j[1] = Math.floor(X[1]), j;
              }
              function R(j, X, $) {
                return j[0] = Math.min(X[0], $[0]), j[1] = Math.min(X[1], $[1]), j;
              }
              function I(j, X, $) {
                return j[0] = Math.max(X[0], $[0]), j[1] = Math.max(X[1], $[1]), j;
              }
              function h(j, X) {
                return j[0] = Math.round(X[0]), j[1] = Math.round(X[1]), j;
              }
              function b(j, X, $) {
                return j[0] = X[0] * $, j[1] = X[1] * $, j;
              }
              function Z(j, X, $, h0) {
                return j[0] = X[0] + $[0] * h0, j[1] = X[1] + $[1] * h0, j;
              }
              function G(j, X) {
                var $ = X[0] - j[0], h0 = X[1] - j[1];
                return Math.sqrt($ * $ + h0 * h0);
              }
              function J(j, X) {
                var $ = X[0] - j[0], h0 = X[1] - j[1];
                return $ * $ + h0 * h0;
              }
              function e0(j) {
                var X = j[0], $ = j[1];
                return Math.sqrt(X * X + $ * $);
              }
              function s0(j) {
                var X = j[0], $ = j[1];
                return X * X + $ * $;
              }
              function S0(j, X) {
                return j[0] = -X[0], j[1] = -X[1], j;
              }
              function D0(j, X) {
                return j[0] = 1 / X[0], j[1] = 1 / X[1], j;
              }
              function _0(j, X) {
                var $ = X[0], h0 = X[1], d0 = $ * $ + h0 * h0;
                return d0 > 0 && (d0 = 1 / Math.sqrt(d0), j[0] = X[0] * d0, j[1] = X[1] * d0), j;
              }
              function N(j, X) {
                return j[0] * X[0] + j[1] * X[1];
              }
              function M(j, X, $) {
                var h0 = X[0] * $[1] - X[1] * $[0];
                return j[0] = j[1] = 0, j[2] = h0, j;
              }
              function O(j, X, $, h0) {
                var d0 = X[0], q = X[1];
                return j[0] = d0 + h0 * ($[0] - d0), j[1] = q + h0 * ($[1] - q), j;
              }
              function t0(j, X) {
                X = X || 1;
                var $ = o.RANDOM() * 2 * Math.PI;
                return j[0] = Math.cos($) * X, j[1] = Math.sin($) * X, j;
              }
              function i0(j, X, $) {
                var h0 = X[0], d0 = X[1];
                return j[0] = $[0] * h0 + $[2] * d0, j[1] = $[1] * h0 + $[3] * d0, j;
              }
              function c0(j, X, $) {
                var h0 = X[0], d0 = X[1];
                return j[0] = $[0] * h0 + $[2] * d0 + $[4], j[1] = $[1] * h0 + $[3] * d0 + $[5], j;
              }
              function g0(j, X, $) {
                var h0 = X[0], d0 = X[1];
                return j[0] = $[0] * h0 + $[3] * d0 + $[6], j[1] = $[1] * h0 + $[4] * d0 + $[7], j;
              }
              function w(j, X, $) {
                var h0 = X[0], d0 = X[1];
                return j[0] = $[0] * h0 + $[4] * d0 + $[12], j[1] = $[1] * h0 + $[5] * d0 + $[13], j;
              }
              function d(j) {
                return "vec2(" + j[0] + ", " + j[1] + ")";
              }
              function E(j, X) {
                return j[0] === X[0] && j[1] === X[1];
              }
              function Q(j, X) {
                var $ = j[0], h0 = j[1], d0 = X[0], q = X[1];
                return Math.abs($ - d0) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(d0)) && Math.abs(h0 - q) <= o.EPSILON * Math.max(1, Math.abs(h0), Math.abs(q));
              }
              e.len = e0, e.sub = _, e.mul = L, e.div = F, e.dist = G, e.sqrDist = J, e.sqrLen = s0, e.forEach = function() {
                var j = l();
                return function(X, $, h0, d0, q, K) {
                  var n0 = void 0, f0 = void 0;
                  for ($ || ($ = 2), h0 || (h0 = 0), d0 ? f0 = Math.min(d0 * $ + h0, X.length) : f0 = X.length, n0 = h0; n0 < f0; n0 += $)
                    j[0] = X[n0], j[1] = X[n0 + 1], q(j, j, K), X[n0] = j[0], X[n0 + 1] = j[1];
                  return X;
                };
              }();
            }
            /******/
          ])
        );
      });
    }, {}], 9: [function(n, r, i) {
      /**
       * AUTHOR OF INITIAL JS LIBRARY
       * k-d Tree JavaScript - V 1.0
       *
       * https://github.com/ubilabs/kd-tree-javascript
       *
       * @author Mircea Pricop <pricop@ubilabs.net>, 2012
       * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
       * @author Ubilabs http://ubilabs.net, 2012
       * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
       */
      function s(f, o, u) {
        this.obj = f, this.left = null, this.right = null, this.parent = u, this.dimension = o;
      }
      function e(f, o, u) {
        var l = this;
        function y(v, m, p) {
          var D = m % u.length, _, L;
          return v.length === 0 ? null : v.length === 1 ? new s(v[0], D, p) : (v.sort(function(F, x) {
            return F[u[D]] - x[u[D]];
          }), _ = Math.floor(v.length / 2), L = new s(v[_], D, p), L.left = y(v.slice(0, _), m + 1, L), L.right = y(v.slice(_ + 1), m + 1, L), L);
        }
        this.root = y(f, 0, null), this.insert = function(v) {
          function m(L, F) {
            if (L === null)
              return F;
            var x = u[L.dimension];
            return v[x] < L.obj[x] ? m(L.left, L) : m(L.right, L);
          }
          var p = m(this.root, null), D, _;
          if (p === null) {
            this.root = new s(v, 0, null);
            return;
          }
          D = new s(v, (p.dimension + 1) % u.length, p), _ = u[p.dimension], v[_] < p.obj[_] ? p.left = D : p.right = D;
        }, this.remove = function(v) {
          var m;
          function p(_) {
            if (_ === null)
              return null;
            if (_.obj === v)
              return _;
            var L = u[_.dimension];
            return v[L] < _.obj[L] ? p(_.left) : p(_.right);
          }
          function D(_) {
            var L, F, x;
            function z(I, h) {
              var b, Z, G, J, e0;
              return I === null ? null : (b = u[h], I.dimension === h ? I.right !== null ? z(I.right, h) : I : (Z = I.obj[b], G = z(I.left, h), J = z(I.right, h), e0 = I, G !== null && G.obj[b] > Z && (e0 = G), J !== null && J.obj[b] > e0.obj[b] && (e0 = J), e0));
            }
            function R(I, h) {
              var b, Z, G, J, e0;
              return I === null ? null : (b = u[h], I.dimension === h ? I.left !== null ? R(I.left, h) : I : (Z = I.obj[b], G = R(I.left, h), J = R(I.right, h), e0 = I, G !== null && G.obj[b] < Z && (e0 = G), J !== null && J.obj[b] < e0.obj[b] && (e0 = J), e0));
            }
            if (_.left === null && _.right === null) {
              if (_.parent === null) {
                l.root = null;
                return;
              }
              x = u[_.parent.dimension], _.obj[x] < _.parent.obj[x] ? _.parent.left = null : _.parent.right = null;
              return;
            }
            _.left !== null ? L = z(_.left, _.dimension) : L = R(_.right, _.dimension), F = L.obj, D(L), _.obj = F;
          }
          m = p(l.root), m !== null && D(m);
        }, this.nearest = function(v, m, p) {
          var D, _, L;
          L = new c(
            function(x) {
              return -x[1];
            }
          );
          function F(x) {
            if (!l.root)
              return [];
            var z, R = u[x.dimension], I = o(v, x.obj), h = {}, b, Z, G;
            function J(e0, s0) {
              L.push([e0, s0]), L.size() > m && L.pop();
            }
            for (G = 0; G < u.length; G += 1)
              G === x.dimension ? h[u[G]] = v[u[G]] : h[u[G]] = x.obj[u[G]];
            if (b = o(h, x.obj), x.right === null && x.left === null) {
              (L.size() < m || I < L.peek()[1]) && J(x, I);
              return;
            }
            x.right === null ? z = x.left : x.left === null ? z = x.right : v[R] < x.obj[R] ? z = x.left : z = x.right, F(z), (L.size() < m || I < L.peek()[1]) && J(x, I), (L.size() < m || Math.abs(b) < L.peek()[1]) && (z === x.left ? Z = x.right : Z = x.left, Z !== null && F(Z));
          }
          if (p)
            for (D = 0; D < m; D += 1)
              L.push([null, p]);
          for (F(l.root), _ = [], D = 0; D < m && D < L.content.length; D += 1)
            L.content[D][0] && _.push([L.content[D][0].obj, L.content[D][1]]);
          return _;
        }, this.balanceFactor = function() {
          function v(p) {
            return p === null ? 0 : Math.max(v(p.left), v(p.right)) + 1;
          }
          function m(p) {
            return p === null ? 0 : m(p.left) + m(p.right) + 1;
          }
          return v(l.root) / (Math.log(m(l.root)) / Math.log(2));
        };
      }
      function c(f) {
        this.content = [], this.scoreFunction = f;
      }
      c.prototype = {
        push: function(f) {
          this.content.push(f), this.bubbleUp(this.content.length - 1);
        },
        pop: function() {
          var f = this.content[0], o = this.content.pop();
          return this.content.length > 0 && (this.content[0] = o, this.sinkDown(0)), f;
        },
        peek: function() {
          return this.content[0];
        },
        remove: function(f) {
          for (var o = this.content.length, u = 0; u < o; u++)
            if (this.content[u] == f) {
              var l = this.content.pop();
              u != o - 1 && (this.content[u] = l, this.scoreFunction(l) < this.scoreFunction(f) ? this.bubbleUp(u) : this.sinkDown(u));
              return;
            }
          throw new Error("Node not found.");
        },
        size: function() {
          return this.content.length;
        },
        bubbleUp: function(f) {
          for (var o = this.content[f]; f > 0; ) {
            var u = Math.floor((f + 1) / 2) - 1, l = this.content[u];
            if (this.scoreFunction(o) < this.scoreFunction(l))
              this.content[u] = o, this.content[f] = l, f = u;
            else
              break;
          }
        },
        sinkDown: function(f) {
          for (var o = this.content.length, u = this.content[f], l = this.scoreFunction(u); ; ) {
            var y = (f + 1) * 2, v = y - 1, m = null;
            if (v < o) {
              var p = this.content[v], D = this.scoreFunction(p);
              D < l && (m = v);
            }
            if (y < o) {
              var _ = this.content[y], L = this.scoreFunction(_);
              L < (m == null ? l : D) && (m = y);
            }
            if (m != null)
              this.content[f] = this.content[m], this.content[m] = u, f = m;
            else
              break;
          }
        }
      }, r.exports = {
        createKdTree: function(f, o, u) {
          return new e(f, o, u);
        }
      };
    }, {}], 10: [function(n, r, i) {
      r.exports = {
        name: "serve-sofa-hrir",
        exports: "serveSofaHrir",
        version: "0.4.2",
        description: "Utility to fetch and shape sofa formated HRIR from server",
        main: "./dist/",
        standalone: "serveSofaHrir",
        scripts: {
          lint: "eslint ./src/ ./test/ && jscs --verbose ./src/ ./test/",
          "lint-examples": "eslint -c examples/.eslintrc ./examples/*.html",
          compile: "rm -rf ./dist && babel ./src/ --out-dir ./dist/",
          browserify: "browserify ./src/index.js -t [ babelify ] --standalone serveSofaHrir > serveSofaHrir.js",
          bundle: "npm run lint && npm run test && npm run doc && npm run compile && npm run browserify",
          doc: "esdoc -c esdoc.json",
          test: "browserify test/*/*.js -t [ babelify ] --exclude 'test/*/*_listen.js*' --exclude 'test/*/*_issues.js' | tape-run",
          "test-browser": "browserify test/*/*.js -t [ babelify ] --exclude 'test/*/*_listen.js*' --exclude 'test/*/*_issues.js' | testling -u",
          "test-listen": "browserify test/*/*_listen.js -t [ babelify ] | tape-run",
          "test-issues": "browserify test/*/*_issues.js -t [ babelify ] | tape-run",
          watch: "watch 'npm run browserify && echo $( date ): browserified' ./src/"
        },
        authors: [
          "Jean-Philippe.Lambert@ircam.fr",
          "Arnau Juli <arnau.julia@gmail.com>",
          "Samuel.Goldszmidt@ircam.fr",
          "David.Poirier-Quinot@ircam.fr"
        ],
        license: "BSD-3-Clause",
        dependencies: {
          "fractional-delay": "git://github.com/Ircam-RnD/fractional-delay#gh-pages",
          "gl-matrix": "^2.4.0",
          "kd.tree": "akshaylive/node-kdt#39bc780704a324393bca68a17cf7bc71be8544c6"
        },
        repository: {
          type: "git",
          url: "https://github.com/Ircam-RnD/serveSofaHrir"
        },
        engines: {
          node: "0.12 || 4",
          npm: ">=1.0.0 <3.0.0"
        },
        devDependencies: {
          "babel-cli": "^6.5.1",
          "babel-eslint": "^4.1.8",
          "babel-preset-es2015": "^6.5.0",
          babelify: "^7.2.0",
          "blue-tape": "^0.1.11",
          browserify: "^12.0.2",
          esdoc: "^0.4.6",
          eslint: "^1.10.3",
          "eslint-config-airbnb": "^1.0.2",
          "eslint-plugin-html": "^1.4.0",
          jscs: "2.11.0",
          "jscs-jsdoc": "^1.3.1",
          tape: "^4.4.0",
          "tape-run": "^2.1.2",
          testling: "^1.7.1",
          watch: "^0.17.1"
        }
      };
    }, {}], 11: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.resampleFloat32Array = f;
      var s = n("fractional-delay"), e = c(s);
      function c(o) {
        return o && o.__esModule ? o : { default: o };
      }
      function f() {
        var o = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, u = new Promise(function(l, y) {
          var v = o.inputSamples, m = o.inputSampleRate, p = typeof o.inputDelay < "u" ? o.inputDelay : 0, D = typeof o.outputSampleRate < "u" ? o.outputSampleRate : m;
          if (m === D && p === 0)
            l(new Float32Array(v));
          else
            try {
              var _ = Math.ceil(v.length * D / m), L = new window.OfflineAudioContext(1, _, D), F = L.createBuffer(1, v.length, m), x = 1, z = new e.default(m, x);
              z.setDelay(p / m), F.getChannelData(0).set(z.process(v));
              var R = L.createBufferSource();
              R.buffer = F, R.connect(L.destination), R.start(), L.oncomplete = function(I) {
                var h = I.renderedBuffer.getChannelData(0);
                l(h);
              }, L.startRendering();
            } catch (I) {
              y(new Error("Unable to re-sample Float32Array. " + I.message));
            }
        });
        return u;
      }
      /**
       * @fileOverview Audio utilities
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      i.default = {
        resampleFloat32Array: f
      };
    }, { "fractional-delay": 7 }], 12: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.tree = void 0, i.distanceSquared = f, i.distance = o;
      var s = n("kd.tree"), e = c(s);
      function c(u) {
        return u && u.__esModule ? u : { default: u };
      }
      i.tree = e.default;
      /**
       * @fileOverview Helpers for k-d tree.
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function f(u, l) {
        var y = l.x - u.x, v = l.y - u.y, m = l.z - u.z;
        return y * y + v * v + m * m;
      }
      function o(u, l) {
        return Math.sqrt(this.distanceSquared(u, l));
      }
      i.default = {
        distance: o,
        distanceSquared: f,
        tree: e.default
      };
    }, { "kd.tree": 9 }], 13: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.sofaCartesianToGl = f, i.glToSofaCartesian = o, i.sofaCartesianToSofaSpherical = u, i.sofaSphericalToSofaCartesian = l, i.sofaSphericalToGl = y, i.glToSofaSpherical = v, i.sofaToSofaCartesian = m, i.spat4CartesianToGl = p, i.glToSpat4Cartesian = D, i.spat4CartesianToSpat4Spherical = _, i.spat4SphericalToSpat4Cartesian = L, i.spat4SphericalToGl = F, i.glToSpat4Spherical = x, i.systemType = z, i.systemToGl = R, i.glToSystem = I;
      var s = n("./degree"), e = c(s);
      function c(h) {
        return h && h.__esModule ? h : { default: h };
      }
      function f(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = 0 - G, h[1] = J, h[2] = 0 - Z, h;
      }
      /**
       * @fileOverview Coordinate systems conversions. openGL, SOFA, and Spat4 (Ircam).
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function o(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = 0 - J, h[1] = 0 - Z, h[2] = G, h;
      }
      function u(h, b) {
        var Z = b[0], G = b[1], J = b[2], e0 = Z * Z + G * G;
        return h[0] = (e.default.atan2(G, Z) + 360) % 360, h[1] = e.default.atan2(J, Math.sqrt(e0)), h[2] = Math.sqrt(e0 + J * J), h;
      }
      function l(h, b) {
        var Z = b[0], G = b[1], J = b[2], e0 = e.default.cos(G);
        return h[0] = J * e0 * e.default.cos(Z), h[1] = J * e0 * e.default.sin(Z), h[2] = J * e.default.sin(G), h;
      }
      function y(h, b) {
        var Z = b[0], G = b[1], J = b[2], e0 = e.default.cos(G);
        return h[0] = 0 - J * e0 * e.default.sin(Z), h[1] = J * e.default.sin(G), h[2] = 0 - J * e0 * e.default.cos(Z), h;
      }
      function v(h, b) {
        var Z = 0 - b[2], G = 0 - b[0], J = b[1], e0 = Z * Z + G * G;
        return h[0] = (e.default.atan2(G, Z) + 360) % 360, h[1] = e.default.atan2(J, Math.sqrt(e0)), h[2] = Math.sqrt(e0 + J * J), h;
      }
      function m(h, b, Z) {
        switch (Z) {
          case "sofaCartesian":
            h[0] = b[0], h[1] = b[1], h[2] = b[2];
            break;
          case "sofaSpherical":
            l(h, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return h;
      }
      function p(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = Z, h[1] = J, h[2] = 0 - G, h;
      }
      function D(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = Z, h[1] = 0 - J, h[2] = G, h;
      }
      function _(h, b) {
        var Z = b[0], G = b[1], J = b[2], e0 = Z * Z + G * G;
        return h[0] = e.default.atan2(Z, G), h[1] = e.default.atan2(J, Math.sqrt(e0)), h[2] = Math.sqrt(e0 + J * J), h;
      }
      function L(h, b) {
        var Z = b[0], G = b[1], J = b[2], e0 = e.default.cos(G);
        return h[0] = J * e0 * e.default.sin(Z), h[1] = J * e0 * e.default.cos(Z), h[2] = J * e.default.sin(G), h;
      }
      function F(h, b) {
        var Z = b[0], G = b[1], J = b[2], e0 = e.default.cos(G);
        return h[0] = J * e0 * e.default.sin(Z), h[1] = J * e.default.sin(G), h[2] = 0 - J * e0 * e.default.cos(Z), h;
      }
      function x(h, b) {
        var Z = b[0], G = 0 - b[2], J = b[1], e0 = Z * Z + G * G;
        return h[0] = e.default.atan2(Z, G), h[1] = e.default.atan2(J, Math.sqrt(e0)), h[2] = Math.sqrt(e0 + J * J), h;
      }
      function z(h) {
        var b = void 0;
        if (h === "sofaCartesian" || h === "spat4Cartesian" || h === "gl")
          b = "cartesian";
        else if (h === "sofaSpherical" || h === "spat4Spherical")
          b = "spherical";
        else
          throw new Error("Unknown coordinate system type " + h);
        return b;
      }
      function R(h, b, Z) {
        switch (Z) {
          case "gl":
            h[0] = b[0], h[1] = b[1], h[2] = b[2];
            break;
          case "sofaCartesian":
            f(h, b);
            break;
          case "sofaSpherical":
            y(h, b);
            break;
          case "spat4Cartesian":
            p(h, b);
            break;
          case "spat4Spherical":
            F(h, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return h;
      }
      function I(h, b, Z) {
        switch (Z) {
          case "gl":
            h[0] = b[0], h[1] = b[1], h[2] = b[2];
            break;
          case "sofaCartesian":
            o(h, b);
            break;
          case "sofaSpherical":
            v(h, b);
            break;
          case "spat4Cartesian":
            D(h, b);
            break;
          case "spat4Spherical":
            x(h, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return h;
      }
      i.default = {
        glToSofaCartesian: o,
        glToSofaSpherical: v,
        glToSpat4Cartesian: D,
        glToSpat4Spherical: x,
        glToSystem: I,
        sofaCartesianToGl: f,
        sofaCartesianToSofaSpherical: u,
        sofaSphericalToGl: y,
        sofaSphericalToSofaCartesian: l,
        sofaToSofaCartesian: m,
        spat4CartesianToGl: p,
        spat4CartesianToSpat4Spherical: _,
        spat4SphericalToGl: F,
        spat4SphericalToSpat4Cartesian: L,
        systemToGl: R,
        systemType: z
      };
    }, { "./degree": 14 }], 14: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.toRadian = c, i.fromRadian = f, i.cos = o, i.sin = u, i.atan2 = l;
      /**
       * @fileOverview Convert to and from degree
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var s = i.toRadianFactor = Math.PI / 180, e = i.fromRadianFactor = 1 / s;
      function c(y) {
        return y * s;
      }
      function f(y) {
        return y * e;
      }
      function o(y) {
        return Math.cos(y * s);
      }
      function u(y) {
        return Math.sin(y * s);
      }
      function l(y, v) {
        return Math.atan2(y, v) * e;
      }
      i.default = {
        atan2: l,
        cos: o,
        fromRadian: f,
        fromRadianFactor: e,
        sin: u,
        toRadian: c,
        toRadianFactor: s
      };
    }, {}], 15: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.ServerDataBase = i.HrtfSet = void 0;
      var s = n("./sofa/HrtfSet"), e = o(s), c = n("./sofa/ServerDataBase"), f = o(c);
      function o(u) {
        return u && u.__esModule ? u : { default: u };
      }
      i.HrtfSet = e.default, i.ServerDataBase = f.default, i.default = {
        HrtfSet: e.default,
        ServerDataBase: f.default
      };
    }, { "./sofa/HrtfSet": 17, "./sofa/ServerDataBase": 18 }], 16: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.version = i.name = i.license = i.description = void 0;
      var s = n("../package.json"), e = c(s);
      function c(y) {
        return y && y.__esModule ? y : { default: y };
      }
      var f = e.default.description;
      /**
       * @fileOverview Information on the library, from the `package.json` file.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      i.description = f;
      var o = e.default.license;
      i.license = o;
      var u = e.default.name;
      i.name = u;
      var l = e.default.version;
      i.version = l, i.default = {
        description: f,
        license: o,
        name: u,
        version: l
      };
    }, { "../package.json": 10 }], 17: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.HrtfSet = void 0;
      var s = /* @__PURE__ */ function() {
        function R(I, h) {
          for (var b = 0; b < h.length; b++) {
            var Z = h[b];
            Z.enumerable = Z.enumerable || !1, Z.configurable = !0, "value" in Z && (Z.writable = !0), Object.defineProperty(I, Z.key, Z);
          }
        }
        return function(I, h, b) {
          return h && R(I.prototype, h), b && R(I, b), I;
        };
      }();
      /**
       * @fileOverview Container for HRTF set: load a set from an URL and get
       * filters from corresponding positions.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var e = n("gl-matrix"), c = L(e), f = n("../info"), o = _(f), u = n("./parseDataSet"), l = n("./parseSofa"), y = n("../geometry/coordinates"), v = _(y), m = n("../geometry/KdTree"), p = _(m), D = n("../audio/utilities");
      function _(R) {
        return R && R.__esModule ? R : { default: R };
      }
      function L(R) {
        if (R && R.__esModule)
          return R;
        var I = {};
        if (R != null)
          for (var h in R)
            Object.prototype.hasOwnProperty.call(R, h) && (I[h] = R[h]);
        return I.default = R, I;
      }
      function F(R) {
        if (Array.isArray(R)) {
          for (var I = 0, h = Array(R.length); I < R.length; I++)
            h[I] = R[I];
          return h;
        } else
          return Array.from(R);
      }
      function x(R, I) {
        if (!(R instanceof I))
          throw new TypeError("Cannot call a class as a function");
      }
      var z = i.HrtfSet = function() {
        function R() {
          var I = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          x(this, R), this._audioContext = I.audioContext, this._ready = !1, this.coordinateSystem = I.coordinateSystem, this.filterCoordinateSystem = I.filterCoordinateSystem, this.filterPositions = I.filterPositions, this.filterAfterLoad = I.filterAfterLoad;
        }
        return s(R, [{
          key: "applyFilterPositions",
          // ------------- public methods
          /**
           * Apply filter positions to an existing set of HRTF. (After a successful
           * load.)
           *
           * This is destructive.
           *
           * @see {@link HrtfSet#load}
           */
          value: function() {
            var h = this, b = this._filterPositions.map(function(Z) {
              return h._kdt.nearest({ x: Z[0], y: Z[1], z: Z[2] }, 1).pop()[0];
            });
            b = [].concat(F(new Set(b))), this._kdt = p.default.tree.createKdTree(b, p.default.distanceSquared, ["x", "y", "z"]);
          }
          /**
           * Load an URL and generate the corresponding set of IR buffers.
           *
           * @param {String} sourceUrl
           * @returns {Promise.<this|Error>} resolve when the URL sucessfully
           * loaded.
           */
        }, {
          key: "load",
          value: function(h) {
            var b = this, Z = h.split(".").pop(), G = Z === "sofa" ? h + ".json" : h, J = void 0, e0 = typeof this._filterPositions < "u" && !this.filterAfterLoad && Z === "sofa";
            return e0 ? J = Promise.all([this._loadMetaAndPositions(h), this._loadDataSet(h)]).then(function(s0) {
              var S0 = s0[0], D0 = s0[1];
              return b._loadSofaPartial(h, S0, D0).then(function() {
                return b._ready = !0, b;
              });
            }).catch(function() {
              return b._loadSofaFull(G).then(function() {
                return b.applyFilterPositions(), b._ready = !0, b;
              });
            }) : J = this._loadSofaFull(G).then(function() {
              return typeof b._filterPositions < "u" && b.filterAfterLoad && b.applyFilterPositions(), b._ready = !0, b;
            }), J;
          }
          /**
           * Export the current HRTF set as a JSON string.
           *
           * When set, `this.filterPositions` reduce the actual number of filter, and
           * thus the exported set. The coordinate system of the export is
           * `this.filterCoordinateSystem`.
           *
           * @see {@link HrtfSet#filterCoordinateSystem}
           * @see {@link HrtfSet#filterPositions}
           *
           * @returns {String} as a SOFA JSON file.
           * @throws {Error} when this.filterCoordinateSystem is unknown.
           */
        }, {
          key: "export",
          value: function() {
            var h = this, b = void 0, Z = v.default.systemType(this.filterCoordinateSystem);
            switch (Z) {
              case "cartesian":
                b = this._sofaSourcePosition.map(function(J) {
                  return v.default.glToSofaCartesian([], J);
                });
                break;
              case "spherical":
                b = this._sofaSourcePosition.map(function(J) {
                  return v.default.glToSofaSpherical([], J);
                });
                break;
              default:
                throw new Error("Bad source position type " + Z + " for export.");
            }
            var G = this._sofaSourcePosition.map(function(J) {
              for (var e0 = h._kdt.nearest({ x: J[0], y: J[1], z: J[2] }, 1).pop()[0].fir, s0 = [], S0 = 0; S0 < e0.numberOfChannels; ++S0)
                s0.push([].concat(F(e0.getChannelData(S0))));
              return s0;
            });
            return (0, l.stringifySofa)({
              name: this._sofaName,
              metaData: this._sofaMetaData,
              ListenerPosition: [0, 0, 0],
              ListenerPositionType: "cartesian",
              ListenerUp: [0, 0, 1],
              ListenerUpType: "cartesian",
              ListenerView: [1, 0, 0],
              ListenerViewType: "cartesian",
              SourcePositionType: Z,
              SourcePosition: b,
              DataSamplingRate: this._audioContext.sampleRate,
              DataDelay: this._sofaDelay,
              DataIR: G,
              RoomVolume: this._sofaRoomVolume
            });
          }
          /**
           * @typedef {Object} HrtfSet.nearestType
           * @property {Number} distance from the request
           * @property {AudioBuffer} fir 2-channels impulse response
           * @property {Number} index original index in the SOFA set
           * @property {Coordinates} position using coordinateSystem coordinates
           * system.
           */
          /**
           * Get the nearest point in the HRTF set, after a successful load.
           *
           * @see {@link HrtfSet#load}
           *
           * @param {Coordinates} positionRequest
           * @returns {HrtfSet.nearestType}
           */
        }, {
          key: "nearest",
          value: function(h) {
            var b = v.default.systemToGl([], h, this.coordinateSystem), Z = this._kdt.nearest({
              x: b[0],
              y: b[1],
              z: b[2]
            }, 1).pop(), G = Z[0];
            return v.default.glToSystem(b, [G.x, G.y, G.z], this.coordinateSystem), {
              distance: Z[1],
              fir: G.fir,
              index: G.index,
              position: b
            };
          }
          /**
           * Get the FIR AudioBuffer that corresponds to the closest position in
           * the set.
           * @param {Coordinates} positionRequest
           * @returns {AudioBuffer}
           */
        }, {
          key: "nearestFir",
          value: function(h) {
            return this.nearest(h).fir;
          }
          // ----------- private methods
          /**
           * Creates a kd-tree out of the specified indices, positions, and FIR.
           *
           * @private
           *
           * @param {Array} indicesPositionsFirs
           * @returns {this}
           */
        }, {
          key: "_createKdTree",
          value: function(h) {
            var b = this, Z = h.map(function(G) {
              var J = G[2], e0 = b._audioContext.createBuffer(J.length, J[0].length, b._audioContext.sampleRate);
              return J.forEach(function(s0, S0) {
                e0.getChannelData(S0).set(s0);
              }), {
                index: G[0],
                x: G[1][0],
                y: G[1][1],
                z: G[1][2],
                fir: e0
              };
            });
            return this._sofaSourcePosition = Z.map(function(G) {
              return [G.x, G.y, G.z];
            }), this._kdt = p.default.tree.createKdTree(Z, p.default.distanceSquared, ["x", "y", "z"]), this;
          }
          /**
           * Asynchronously create Float32Arrays, with possible re-sampling.
           *
           * @private
           *
           * @param {Array.<Number>} indices
           * @param {Array.<Coordinates>} positions
           * @param {Array.<Float32Array>} firs
           * @returns {Promise.<Array|Error>}
           * @throws {Error} assertion that the channel count is 2
           */
        }, {
          key: "_generateIndicesPositionsFirs",
          value: function(h, b, Z, G) {
            var J = this, e0 = Z.map(function(s0, S0) {
              var D0 = s0.length;
              if (D0 !== 2)
                throw new Error("Bad number of channels" + (" for IR index " + h[S0]) + (" (" + D0 + " instead of 2)"));
              if (G[0].length !== 2)
                throw new Error("Bad delay format" + (" for IR index " + h[S0]) + (" (first element in Data.Delay is " + G[0]) + " instead of [[delayL, delayR]] )");
              var _0 = typeof G[S0] < "u" ? G[S0] : G[0], N = s0.map(function(M, O) {
                if (_0[O] < 0)
                  throw new Error("Negative delay detected (not handled at the moment):" + (" delay index " + h[S0]) + (" channel " + O));
                return (0, D.resampleFloat32Array)({
                  inputSamples: M,
                  inputDelay: _0[O],
                  inputSampleRate: J._sofaSampleRate,
                  outputSampleRate: J._audioContext.sampleRate
                });
              });
              return Promise.all(N).then(function(M) {
                return [h[S0], b[S0], M];
              }).catch(function(M) {
                throw new Error("Unable to re-sample impulse response " + S0 + ". " + M.message);
              });
            });
            return Promise.all(e0);
          }
          /**
           * Try to load a data set from a SOFA URL.
           *
           * @private
           *
           * @param {String} sourceUrl
           * @returns {Promise.<Object|Error>}
           */
        }, {
          key: "_loadDataSet",
          value: function(h) {
            var b = new Promise(function(Z, G) {
              var J = h + ".dds", e0 = new window.XMLHttpRequest();
              e0.open("GET", J), e0.onerror = function() {
                G(new Error("Unable to GET " + J + ", status " + e0.status + " " + ("" + e0.responseText)));
              }, e0.onload = function() {
                if (e0.status < 200 || e0.status >= 300) {
                  e0.onerror();
                  return;
                }
                try {
                  var s0 = (0, u.parseDataSet)(e0.response);
                  Z(s0);
                } catch (S0) {
                  G(new Error("Unable to parse " + J + ". " + S0.message));
                }
              }, e0.send();
            });
            return b;
          }
          /**
           * Try to load meta-data and positions from a SOFA URL, to get the
           * indices closest to the filter positions.
           *
           * @private
           *
           * @param {String} sourceUrl
           * @returns {Promise.<Array.<Number>|Error>}
           */
        }, {
          key: "_loadMetaAndPositions",
          value: function(h) {
            var b = this, Z = new Promise(function(G, J) {
              var e0 = h + ".json?ListenerPosition,ListenerUp,ListenerView,SourcePosition,Data.Delay,Data.SamplingRate,EmitterPosition,ReceiverPosition,RoomVolume", s0 = new window.XMLHttpRequest();
              s0.open("GET", e0), s0.onerror = function() {
                J(new Error("Unable to GET " + e0 + ", status " + s0.status + " " + ("" + s0.responseText)));
              }, s0.onload = function() {
                if (s0.status < 200 || s0.status >= 300) {
                  s0.onerror();
                  return;
                }
                try {
                  var S0 = (0, l.parseSofa)(s0.response);
                  b._setMetaData(S0, h);
                  var D0 = b._sourcePositionsToGl(S0), _0 = D0.map(function(O, t0) {
                    return {
                      x: O[0],
                      y: O[1],
                      z: O[2],
                      index: t0
                    };
                  }), N = p.default.tree.createKdTree(_0, p.default.distanceSquared, ["x", "y", "z"]), M = b._filterPositions.map(function(O) {
                    return N.nearest({ x: O[0], y: O[1], z: O[2] }, 1).pop()[0].index;
                  });
                  M = [].concat(F(new Set(M))), b._sofaUrl = h, G(M);
                } catch (O) {
                  J(new Error("Unable to parse " + e0 + ". " + O.message));
                }
              }, s0.send();
            });
            return Z;
          }
          /**
           * Try to load full SOFA URL.
           *
           * @private
           *
           * @param {String} url
           * @returns {Promise.<this|Error>}
           */
        }, {
          key: "_loadSofaFull",
          value: function(h) {
            var b = this, Z = new Promise(function(G, J) {
              var e0 = new window.XMLHttpRequest();
              e0.open("GET", h), e0.onerror = function() {
                J(new Error("Unable to GET " + h + ", status " + e0.status + " " + ("" + e0.responseText)));
              }, e0.onload = function() {
                if (e0.status < 200 || e0.status >= 300) {
                  e0.onerror();
                  return;
                }
                try {
                  var s0 = (0, l.parseSofa)(e0.response);
                  b._setMetaData(s0, h);
                  var S0 = b._sourcePositionsToGl(s0);
                  b._generateIndicesPositionsFirs(
                    S0.map(function(D0, _0) {
                      return _0;
                    }),
                    // full
                    S0,
                    s0["Data.IR"].data,
                    s0["Data.Delay"].data
                  ).then(function(D0) {
                    b._createKdTree(D0), b._sofaUrl = h, G(b);
                  });
                } catch (D0) {
                  J(new Error("Unable to parse " + h + ". " + D0.message));
                }
              }, e0.send();
            });
            return Z;
          }
          /**
           * Try to load partial data from a SOFA URL.
           *
           * @private
           *
           * @param {Array.<String>} sourceUrl
           * @param {Array.<Number>} indices
           * @param {Object} dataSet
           * @returns {Promise.<this|Error>}
           */
        }, {
          key: "_loadSofaPartial",
          value: function(h, b, Z) {
            var G = this, J = b.map(function(e0) {
              var s0 = new Promise(function(S0, D0) {
                var _0 = h + ".json?" + ("SourcePosition[" + e0 + "][0:1:" + (Z.SourcePosition.C - 1) + "],") + ("Data.IR[" + e0 + "][0:1:" + (Z["Data.IR"].R - 1) + "]") + ("[0:1:" + (Z["Data.IR"].N - 1) + "]"), N = new window.XMLHttpRequest();
                N.open("GET", _0), N.onerror = function() {
                  D0(new Error("Unable to GET " + _0 + ", status " + N.status + " " + ("" + N.responseText)));
                }, N.onload = function() {
                  (N.status < 200 || N.status >= 300) && N.onerror();
                  try {
                    var M = (0, l.parseSofa)(N.response), O = G._sourcePositionsToGl(M);
                    G._generateIndicesPositionsFirs([e0], O, M["Data.IR"].data, M["Data.Delay"].data).then(function(t0) {
                      S0(t0[0]);
                    });
                  } catch (t0) {
                    D0(new Error("Unable to parse " + _0 + ". " + t0.message));
                  }
                }, N.send();
              });
              return s0;
            });
            return Promise.all(J).then(function(e0) {
              return G._createKdTree(e0), G;
            });
          }
          /**
           * Set meta-data, and assert for supported HRTF type.
           *
           * @private
           *
           * @param {Object} data
           * @param {String} sourceUrl
           * @throws {Error} assertion for FIR data.
           */
        }, {
          key: "_setMetaData",
          value: function(h, b) {
            if (typeof h.metaData.DataType < "u" && h.metaData.DataType !== "FIR")
              throw new Error("According to meta-data, SOFA data type is not FIR");
            var Z = (/* @__PURE__ */ new Date()).toISOString();
            this._sofaName = typeof h.name < "u" ? "" + h.name : "HRTF.sofa", this._sofaMetaData = typeof h.metaData < "u" ? h.metaData : {}, typeof b < "u" && (this._sofaMetaData.OriginalUrl = b), this._sofaMetaData.Converter = "Ircam " + o.default.name + " " + o.default.version + " javascript API ", this._sofaMetaData.DateConverted = Z, this._sofaSampleRate = typeof h["Data.SamplingRate"] < "u" ? h["Data.SamplingRate"].data[0] : 48e3, this._sofaSampleRate !== this._audioContext.sampleRate && (this._sofaMetaData.OriginalSampleRate = this._sofaSampleRate), this._sofaDelay = typeof h["Data.Delay"] < "u" ? h["Data.Delay"].data : [0, 0], this._sofaRoomVolume = typeof h.RoomVolume < "u" ? h.RoomVolume.data[0] : void 0;
            var G = v.default.sofaToSofaCartesian([], h.ListenerPosition.data[0], (0, l.conformSofaCoordinateSystem)(h.ListenerPosition.Type || "cartesian")), J = v.default.sofaToSofaCartesian([], h.ListenerView.data[0], (0, l.conformSofaCoordinateSystem)(h.ListenerView.Type || "cartesian")), e0 = v.default.sofaToSofaCartesian([], h.ListenerUp.data[0], (0, l.conformSofaCoordinateSystem)(h.ListenerUp.Type || "cartesian"));
            this._sofaToGl = c.mat4.lookAt([], G, J, e0);
          }
          /**
           * Convert to GL coordinates, in-place.
           *
           * @private
           *
           * @param {Object} data
           * @returns {Array.<Coordinates>}
           * @throws {Error}
           */
        }, {
          key: "_sourcePositionsToGl",
          value: function(h) {
            var b = this, Z = h.SourcePosition.data, G = typeof h.SourcePosition.Type < "u" ? h.SourcePosition.Type : "spherical";
            switch (G) {
              case "cartesian":
                Z.forEach(function(J) {
                  c.vec3.transformMat4(J, J, b._sofaToGl);
                });
                break;
              case "spherical":
                Z.forEach(function(J) {
                  v.default.sofaSphericalToSofaCartesian(J, J), c.vec3.transformMat4(J, J, b._sofaToGl);
                });
                break;
              default:
                throw new Error("Bad source position type");
            }
            return Z;
          }
        }, {
          key: "coordinateSystem",
          set: function(h) {
            this._coordinateSystem = typeof h < "u" ? h : "gl";
          },
          get: function() {
            return this._coordinateSystem;
          }
          /**
           * Set coordinate system for filter positions.
           *
           * @param {CoordinateSystem} [system] undefined to use coordinateSystem
           */
        }, {
          key: "filterCoordinateSystem",
          set: function(h) {
            this._filterCoordinateSystem = typeof h < "u" ? h : this.coordinateSystem;
          },
          get: function() {
            return this._filterCoordinateSystem;
          }
          /**
           * Set filter positions.
           *
           * @param {Array.<Coordinates>} [positions] undefined for no filtering.
           */
        }, {
          key: "filterPositions",
          set: function(h) {
            if (typeof h > "u")
              this._filterPositions = void 0;
            else
              switch (this.filterCoordinateSystem) {
                case "gl":
                  this._filterPositions = h.map(function(b) {
                    return b.slice(0);
                  });
                  break;
                case "sofaCartesian":
                  this._filterPositions = h.map(function(b) {
                    return v.default.sofaCartesianToGl([], b);
                  });
                  break;
                case "sofaSpherical":
                  this._filterPositions = h.map(function(b) {
                    return v.default.sofaSphericalToGl([], b);
                  });
                  break;
                default:
                  throw new Error("Bad filter coordinate system");
              }
          },
          get: function() {
            var h = void 0;
            if (typeof this._filterPositions < "u")
              switch (this.filterCoordinateSystem) {
                case "gl":
                  h = this._filterPositions.map(function(b) {
                    return b.slice(0);
                  });
                  break;
                case "sofaCartesian":
                  h = this._filterPositions.map(function(b) {
                    return v.default.glToSofaCartesian([], b);
                  });
                  break;
                case "sofaSpherical":
                  h = this._filterPositions.map(function(b) {
                    return v.default.glToSofaSpherical([], b);
                  });
                  break;
                default:
                  throw new Error("Bad filter coordinate system");
              }
            return h;
          }
          /**
           * Set post-filtering flag. When false, try to load a partial set of
           * HRTF.
           *
           * @param {Boolean} [post=false]
           */
        }, {
          key: "filterAfterLoad",
          set: function(h) {
            this._filterAfterLoad = typeof h < "u" ? h : !1;
          },
          get: function() {
            return this._filterAfterLoad;
          }
          /**
           * Test whether an HRTF set is actually loaded.
           *
           * @see {@link HrtfSet#load}
           *
           * @returns {Boolean} false before any successful load, true after.
           *
           */
        }, {
          key: "isReady",
          get: function() {
            return this._ready;
          }
          /**
           * Get the original name of the HRTF set.
           *
           * @returns {String} that is undefined before a successfully load.
           */
        }, {
          key: "sofaName",
          get: function() {
            return this._sofaName;
          }
          /**
           * Get the URL used to actually load the HRTF set.
           *
           * @returns {String} that is undefined before a successfully load.
           */
        }, {
          key: "sofaUrl",
          get: function() {
            return this._sofaUrl;
          }
          /**
           * Get the original sample-rate from the SOFA URL already loaded.
           *
           * @returns {Number} that is undefined before a successfully load.
           */
        }, {
          key: "sofaSampleRate",
          get: function() {
            return this._sofaSampleRate;
          }
          /**
           * Get the meta-data from the SOFA URL already loaded.
           *
           * @returns {Object} that is undefined before a successfully load.
           */
        }, {
          key: "sofaMetaData",
          get: function() {
            return this._sofaMetaData;
          }
        }]), R;
      }();
      i.default = z;
    }, { "../audio/utilities": 11, "../geometry/KdTree": 12, "../geometry/coordinates": 13, "../info": 16, "./parseDataSet": 19, "./parseSofa": 20, "gl-matrix": 8 }], 18: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.ServerDataBase = void 0;
      var s = /* @__PURE__ */ function() {
        function y(v, m) {
          for (var p = 0; p < m.length; p++) {
            var D = m[p];
            D.enumerable = D.enumerable || !1, D.configurable = !0, "value" in D && (D.writable = !0), Object.defineProperty(v, D.key, D);
          }
        }
        return function(v, m, p) {
          return m && y(v.prototype, m), p && y(v, p), v;
        };
      }();
      /**
       * @fileOverview Access a remote catalogue from a SOFA server, and get URLs
       * with filtering.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var e = n("./parseXml"), c = o(e), f = n("./parseDataSet");
      function o(y) {
        return y && y.__esModule ? y : { default: y };
      }
      function u(y, v) {
        if (!(y instanceof v))
          throw new TypeError("Cannot call a class as a function");
      }
      var l = i.ServerDataBase = function() {
        function y() {
          var v = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          if (u(this, y), this._server = v.serverUrl, typeof this._server > "u") {
            var m = window.location.protocol === "https:" ? "https:" : "http:";
            this._server = m + "//bili2.ircam.fr";
          }
          this._catalogue = {}, this._urls = [];
        }
        return s(y, [{
          key: "loadCatalogue",
          value: function() {
            var m = this, p = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this._server + "/catalog.xml", D = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this._catalogue, _ = new Promise(function(L, F) {
              var x = new window.XMLHttpRequest();
              x.open("GET", p), x.onerror = function() {
                F(new Error("Unable to GET " + p + ", status " + x.status + " " + ("" + x.responseText)));
              }, x.onload = function() {
                if (x.status < 200 || x.status >= 300) {
                  x.onerror();
                  return;
                }
                var z = (0, c.default)(x.response), R = z.querySelector("dataset"), I = z.querySelectorAll("dataset > catalogRef");
                if (I.length === 0) {
                  D.urls = [];
                  for (var h = z.querySelectorAll("dataset > dataset"), b = 0; b < h.length; ++b) {
                    var Z = m._server + R.getAttribute("name") + "/" + h[b].getAttribute("name");
                    m._urls.push(Z), D.urls.push(Z);
                  }
                  L(p);
                } else {
                  for (var G = [], J = 0; J < I.length; ++J) {
                    var e0 = I[J].getAttribute("name"), s0 = m._server + R.getAttribute("name") + "/" + I[J].getAttribute("xlink:href");
                    D[e0] = {}, G.push(m.loadCatalogue(s0, D[e0]));
                  }
                  Promise.all(G).then(function() {
                    m._urls.sort(), L(p);
                  }).catch(function(S0) {
                    F(S0);
                  });
                }
              }, x.send();
            });
            return _;
          }
          /**
           * Get URLs, possibly filtered.
           *
           * Any filter can be partial, and is case-insensitive. The result must
           * match every supplied filter. Undefined filters are not applied. For
           * any filter, `|` is the or operator.
           *
           * @param {Object} [options] optional filters
           * @param {String} [options.convention] 'HRIR' or 'SOS'
           * @param {String} [options.dataBase] 'LISTEN', 'BILI', etc.
           * @param {String} [options.equalisation] 'RAW','COMPENSATED'
           * @param {String} [options.sampleRate] in Hertz
           * @param {String} [options.sosOrder] '12order' or '24order'
           * @param {String} [options.freePattern] any pattern matched
           * globally. Use separators (spaces, tabs, etc.) to combine multiple
           * patterns: '44100 listen' will restrict on URLs matching '44100' and
           * 'listen'; '44100|48000 bili|listen' matches ('44100' or '48000') and
           * ('bili' or 'listen').
           * @returns {Array.<String>} URLs that match every filter.
           */
        }, {
          key: "getUrls",
          value: function() {
            var m = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, p = [m.convention, m.dataBase, m.equalisation, m.sampleRate, m.sosOrder], D = typeof m.freePattern == "number" ? m.freePattern.toString() : m.freePattern, _ = p.reduce(function(z, R) {
              return z + "/" + (typeof R < "u" ? "[^/]*(?:" + R + ")[^/]*" : "[^/]*");
            }, ""), L = new RegExp(_, "i"), F = this._urls.filter(function(z) {
              return L.test(z);
            });
            if (typeof D < "u") {
              var x = D.split(/\s+/);
              x.forEach(function(z) {
                L = new RegExp(z, "i"), F = F.filter(function(R) {
                  return L.test(R);
                });
              });
            }
            return F;
          }
          /**
           * Get the data-set definitions of a given URL.
           *
           * @param {String} sourceUrl is the complete SOFA URL, with the
           * server, like
           * 'http://bili2.ircam.fr/SimpleFreeFieldHRIR/BILI/COMPENSATED/44100/IRC_1100_C_HRIR.sofa'
           *
           * @returns {Promise.<Object|String>} The promise will resolve after
           * successfully loading, with definitions as * `{definition: {key: values}}`
           * objects; the promise will reject is the transfer fails, with an error.
           */
        }, {
          key: "getDataSetDefinitions",
          value: function(m) {
            var p = new Promise(function(D, _) {
              var L = m + ".dds", F = new window.XMLHttpRequest();
              F.open("GET", L), F.onerror = function() {
                _(new Error("Unable to GET " + L + ", status " + F.status + " " + ("" + F.responseText)));
              }, F.onload = function() {
                if (F.status < 200 || F.status >= 300) {
                  F.onerror();
                  return;
                }
                D((0, f.parseDataSet)(F.response));
              }, F.send();
            });
            return p;
          }
          /**
           * Get all source positions of a given URL.
           *
           * @param {String} sourceUrl is the complete SOFA URL, with the
           * server, like
           * 'http://bili2.ircam.fr/SimpleFreeFieldHRIR/BILI/COMPENSATED/44100/IRC_1100_C_HRIR.sofa'
           *
           * @returns {Promise.<Array<Array.<Number>>|Error>} The promise will resolve
           * after successfully loading, with an array of positions (which are
           * arrays of 3 numbers); the promise will reject is the transfer fails,
           * with an error.
           */
        }, {
          key: "getSourcePositions",
          value: function(m) {
            var p = new Promise(function(D, _) {
              var L = m + ".json?SourcePosition", F = new window.XMLHttpRequest();
              F.open("GET", L), F.onerror = function() {
                _(new Error("Unable to GET " + L + ", status " + F.status + " " + ("" + F.responseText)));
              }, F.onload = function() {
                if (F.status < 200 || F.status >= 300) {
                  F.onerror();
                  return;
                }
                try {
                  var x = JSON.parse(F.response);
                  if (x.leaves[0].name !== "SourcePosition")
                    throw new Error("SourcePosition not found");
                  D(x.leaves[0].data);
                } catch (z) {
                  _(new Error("Unable to parse response from " + L + ". " + z.message));
                }
              }, F.send();
            });
            return p;
          }
        }]), y;
      }();
      i.default = l;
    }, { "./parseDataSet": 19, "./parseXml": 21 }], 19: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i._parseDimension = v, i._parseDefinition = m, i.parseDataSet = p;
      /**
       * @fileOverview Parser for DDS files
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var s = "\\[\\s*(\\w+)\\s*=\\s*(\\d+)\\s*\\]", e = new RegExp(s, "g"), c = new RegExp(s), f = "\\s*(\\w+)\\s*([\\w.]+)\\s*((?:\\[[^\\]]+\\]\\s*)+);\\s*", o = new RegExp(f, "g"), u = new RegExp(f), l = "\\s*Dataset\\s*\\{\\s*((?:[^;]+;\\s*)*)\\s*\\}\\s*[\\w.]+\\s*;\\s*", y = new RegExp(l);
      function v(D) {
        var _ = [], L = D.match(e);
        return L !== null && L.forEach(function(F) {
          var x = c.exec(F);
          x !== null && x.length > 2 && _.push([x[1], Number(x[2])]);
        }), _;
      }
      function m(D) {
        var _ = [], L = D.match(o);
        return L !== null && L.forEach(function(F) {
          var x = u.exec(F);
          if (x !== null && x.length > 3) {
            var z = [];
            z[0] = x[2], z[1] = {}, z[1].type = x[1], v(x[3]).forEach(function(R) {
              z[1][R[0]] = R[1];
            }), _.push(z);
          }
        }), _;
      }
      function p(D) {
        var _ = {}, L = y.exec(D);
        return L !== null && L.length > 1 && m(L[1]).forEach(function(F) {
          _[F[0]] = F[1];
        }), _;
      }
      i.default = p;
    }, {}], 20: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.parseSofa = s, i.stringifySofa = e, i.conformSofaCoordinateSystem = c;
      /**
       * @fileOverview Parser functions for SOFA files
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function s(f) {
        try {
          var o = JSON.parse(f), u = {};
          if (u.name = o.name, typeof o.attributes < "u") {
            u.metaData = {};
            var l = o.attributes.find(function(v) {
              return v.name === "NC_GLOBAL";
            });
            typeof l < "u" && l.attributes.forEach(function(v) {
              u.metaData[v.name] = v.value[0];
            });
          }
          if (typeof o.leaves < "u") {
            var y = o.leaves;
            y.forEach(function(v) {
              u[v.name] = {}, v.attributes.forEach(function(m) {
                u[v.name][m.name] = m.value[0];
              }), u[v.name].shape = v.shape, u[v.name].data = v.data;
            });
          }
          return u;
        } catch (v) {
          throw new Error("Unable to parse SOFA string. " + v.message);
        }
      }
      function e(f) {
        var o = {};
        if (typeof f.name < "u" && (o.name = f.name), typeof f.metaData < "u") {
          o.attributes = [];
          var u = {
            name: "NC_GLOBAL",
            attributes: []
          };
          for (var l in f.metaData)
            f.metaData.hasOwnProperty(l) && u.attributes.push({
              name: l,
              value: [f.metaData[l]]
            });
          o.attributes.push(u);
        }
        var y = "Float64", v = void 0;
        if (o.leaves = [], [["ListenerPosition", "ListenerPositionType"], ["ListenerUp", "ListenerUpType"], ["ListenerView", "ListenerViewType"]].forEach(function(m) {
          var p = m[0], D = f[p], _ = f[m[1]];
          if (typeof D < "u") {
            switch (_) {
              case "cartesian":
                v = [{ name: "Type", value: ["cartesian"] }, { name: "Units", value: ["metre, metre, metre"] }];
                break;
              case "spherical":
                v = [{ name: "Type", value: ["spherical"] }, { name: "Units", value: ["degree, degree, metre"] }];
                break;
              default:
                throw new Error("Unknown coordinate system type " + (_ + " for " + D));
            }
            o.leaves.push({
              name: p,
              type: y,
              attributes: v,
              shape: [1, 3],
              data: [D]
            });
          }
        }), typeof f.SourcePosition < "u") {
          switch (f.SourcePositionType) {
            case "cartesian":
              v = [{ name: "Type", value: ["cartesian"] }, { name: "Units", value: ["metre, metre, metre"] }];
              break;
            case "spherical":
              v = [{ name: "Type", value: ["spherical"] }, { name: "Units", value: ["degree, degree, metre"] }];
              break;
            default:
              throw new Error("Unknown coordinate system type " + ("" + f.SourcePositionType));
          }
          o.leaves.push({
            name: "SourcePosition",
            type: y,
            attributes: v,
            shape: [f.SourcePosition.length, f.SourcePosition[0].length],
            data: f.SourcePosition
          });
        }
        if (typeof f.DataSamplingRate < "u")
          o.leaves.push({
            name: "Data.SamplingRate",
            type: y,
            attributes: [{ name: "Unit", value: "hertz" }],
            shape: [1],
            data: [f.DataSamplingRate]
          });
        else
          throw new Error("No data sampling-rate");
        if (typeof f.DataDelay < "u" && o.leaves.push({
          name: "Data.Delay",
          type: y,
          attributes: [],
          shape: [1, f.DataDelay.length],
          data: f.DataDelay
        }), typeof f.DataIR < "u")
          o.leaves.push({
            name: "Data.IR",
            type: y,
            attributes: [],
            shape: [f.DataIR.length, f.DataIR[0].length, f.DataIR[0][0].length],
            data: f.DataIR
          });
        else
          throw new Error("No data IR");
        return typeof f.RoomVolume < "u" && o.leaves.push({
          name: "RoomVolume",
          type: y,
          attributes: [{ name: "Units", value: ["cubic metre"] }],
          shape: [1],
          data: [f.RoomVolume]
        }), o.nodes = [], JSON.stringify(o);
      }
      function c(f) {
        var o = void 0;
        switch (f) {
          case "cartesian":
            o = "sofaCartesian";
            break;
          case "spherical":
            o = "sofaSpherical";
            break;
          default:
            throw new Error("Bad SOFA type " + f);
        }
        return o;
      }
      i.default = {
        parseSofa: s,
        conformSofaCoordinateSystem: c
      };
    }, {}], 21: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      });
      /**
       * @fileOverview Simple XML parser, as a DOM parser.
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var s = i.parseXml = void 0;
      if (typeof window.DOMParser < "u")
        i.parseXml = s = function(c) {
          return new window.DOMParser().parseFromString(c, "text/xml");
        };
      else if (typeof window.ActiveXObject < "u" && new window.ActiveXObject("Microsoft.XMLDOM"))
        i.parseXml = s = function(c) {
          var f = new window.ActiveXObject("Microsoft.XMLDOM");
          return f.async = "false", f.loadXML(c), f;
        };
      else
        throw new Error("No XML parser found");
      i.default = s;
    }, {}] }, {}, [15])(15);
  });
})(serveSofaHrir);
var serveSofaHrirExports = serveSofaHrir.exports;
class HRIRloader_ircam {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.onLoad = r, this.hrtfSet = new serveSofaHrirExports.HrtfSet({
      audioContext: this.context,
      coordinateSystem: "sofaSpherical"
    }), this.wishedSpeakerPos = getTdesign(2 * this.order), this.hrirBuffer = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    this.hrtfSet.load(t).then(() => {
      const n = [];
      this.hrirBuffer = [];
      for (let i = 0; i < this.wishedSpeakerPos.length; i++)
        n.push(this.hrtfSet.nearest(this.wishedSpeakerPos[i]).position), this.hrirBuffer.push(this.hrtfSet.nearest(this.wishedSpeakerPos[i]).fir);
      let r = 0;
      for (let i = 0; i < this.wishedSpeakerPos.length; i++)
        this.wishedSpeakerPos[i][0] < 0 && (this.wishedSpeakerPos[i][0] += 360), r += Math.sqrt(
          Math.pow(this.wishedSpeakerPos[i][0] - n[i][0], 2) + Math.pow(this.wishedSpeakerPos[i][1] - n[i][1], 2)
        );
      console.log(
        "summed / average angular dist between asked and present pos:",
        Math.round(r * 100) / 100,
        "deg /",
        Math.round(r / this.wishedSpeakerPos.length * 100) / 100,
        "deg"
      ), this.decodingMatrix = getAmbisonicDecMtx(n, this.order), this.hoaBuffer = this.getHoaFilterFromHrirFilter(), this.onLoad(this.hoaBuffer);
    });
  }
  getHoaFilterFromHrirFilter() {
    const t = this.hrirBuffer[0].length, n = this.hrirBuffer[0].sampleRate, r = this.context.createBuffer(
      this.nCh,
      t,
      n
    );
    for (let i = 0; i < this.nCh; i++) {
      const s = new Float32Array(t);
      for (let e = 0; e < this.hrirBuffer.length; e++)
        for (let c = 0; c < t; c++)
          s[c] += this.decodingMatrix[e][i] * this.hrirBuffer[e].getChannelData(0)[c];
      r.getChannelData(i).set(s);
    }
    return r;
  }
}
class wxyz2acn {
  constructor(t) {
    this.ctx = t, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(4);
    for (let n = 0; n < 4; n++)
      this.gains[n] = this.ctx.createGain(), n === 0 ? this.gains[n].gain.value = Math.SQRT2 : this.gains[n].gain.value = Math.sqrt(3), this.gains[n].connect(this.out, 0, n);
    this.in.connect(this.gains[0], 0, 0), this.in.connect(this.gains[3], 1, 0), this.in.connect(this.gains[1], 2, 0), this.in.connect(this.gains[2], 3, 0);
  }
}
class acn2wxyz {
  constructor(t) {
    this.ctx = t, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(4);
    for (let n = 0; n < 4; n++)
      this.gains[n] = this.ctx.createGain(), n === 0 ? this.gains[n].gain.value = Math.SQRT1_2 : this.gains[n].gain.value = 1 / Math.sqrt(3), this.gains[n].connect(this.out, 0, n);
    this.in.connect(this.gains[0], 0, 0), this.in.connect(this.gains[2], 1, 0), this.in.connect(this.gains[3], 2, 0), this.in.connect(this.gains[1], 3, 0);
  }
}
class sn3d2n3d {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++) {
      const i = Math.floor(Math.sqrt(r));
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = Math.sqrt(2 * i + 1), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
    }
  }
}
class n3d2sn3d {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++) {
      const i = Math.floor(Math.sqrt(r));
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1 / Math.sqrt(2 * i + 1), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
    }
  }
}
class fuma2acn {
  constructor(t, n) {
    let r = n;
    r > 3 && (console.log("FuMa specifiction is supported up to 3rd order"), r = 3);
    const i = [
      Math.sqrt(2),
      // W
      Math.sqrt(3),
      // Y
      Math.sqrt(3),
      // Z
      Math.sqrt(3),
      // X
      Math.sqrt(15) / 2,
      // V
      Math.sqrt(15) / 2,
      // T
      Math.sqrt(5),
      // R
      Math.sqrt(15) / 2,
      // S
      Math.sqrt(15) / 2,
      // U
      Math.sqrt(35 / 8),
      // Q
      Math.sqrt(35) / 3,
      // O
      Math.sqrt(224 / 45),
      // M
      Math.sqrt(7),
      // K
      Math.sqrt(224 / 45),
      // L
      Math.sqrt(35) / 3,
      // N
      Math.sqrt(35 / 8)
      // P
    ];
    if (this.ctx = t, this.order = r, this.nCh = getAmbisonicChannelCount(r), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = [], this.remapArray = [], this.remapArray.push(0, 2, 3, 1), r > 1) {
      let s = 0, e;
      for (let c = 0; c < this.nCh; c++)
        if (e = [], c >= (s + 1) * (s + 1)) {
          s += 1;
          for (let f = (s + 1) * (s + 1); f < (s + 2) * (s + 2); f++)
            (f + s % 2) % 2 === 0 ? e.push(f) : e.unshift(f);
          this.remapArray = this.remapArray.concat(e);
        }
    }
    for (let s = 0; s < this.nCh; s++)
      this.gains[s] = this.ctx.createGain(), this.gains[s].gain.value = i[s], this.in.connect(this.gains[s], this.remapArray[s], 0), this.gains[s].connect(this.out, 0, s);
  }
}
const _converters = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  acn2wxyz,
  fuma2acn,
  n3d2sn3d,
  sn3d2n3d,
  wxyz2acn
}, Symbol.toStringTag, { value: "Module" })), converters = _converters, utils = _utils;
export {
  HOAloader,
  HRIRloader2D_local,
  HRIRloader_ircam,
  HRIRloader_local,
  binDecoder,
  binDecoder2D,
  converters,
  convolver,
  decoder,
  degreesToRadians,
  getAmbisonicChannelCount,
  getAmbisonicChannelCount2D,
  intensityAnalyser,
  intensityAnalyser2D,
  monoEncoder,
  monoEncoder2D,
  orderLimiter,
  orderLimiter2D,
  orderWeight,
  powermapAnalyser,
  radiansToDegrees,
  rmsAnalyser,
  sceneMirror,
  sceneMirror2D,
  sceneRotator,
  sceneRotator2D,
  utils,
  virtualMic
};
//# sourceMappingURL=ambisonics.es.min.js.map
