function getAmbisonicChannelCount(M) {
  return (M + 1) * (M + 1);
}
function getAmbisonicChannelCount2D(M) {
  return 2 * M + 1;
}
function degreesToRadians(M) {
  return M * Math.PI / 180;
}
function radiansToDegrees(M) {
  return M * 180 / Math.PI;
}
var commonjsGlobal = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function getDefaultExportFromCjs(M) {
  return M && M.__esModule && Object.prototype.hasOwnProperty.call(M, "default") ? M.default : M;
}
var numeric1_2_6 = {};
(function(exports$1) {
  var numeric = exports$1;
  typeof commonjsGlobal < "u" && (commonjsGlobal.numeric = numeric), numeric.version = "1.2.6", numeric.bench = function(t, n) {
    var r, i, s, e;
    for (typeof n > "u" && (n = 15), s = 0.5, r = /* @__PURE__ */ new Date(); ; ) {
      for (s *= 2, e = s; e > 3; e -= 4)
        t(), t(), t(), t();
      for (; e > 0; )
        t(), e--;
      if (i = /* @__PURE__ */ new Date(), i - r > n) break;
    }
    for (e = s; e > 3; e -= 4)
      t(), t(), t(), t();
    for (; e > 0; )
      t(), e--;
    return i = /* @__PURE__ */ new Date(), 1e3 * (3 * s - 1) / (i - r);
  }, numeric._myIndexOf = function(t) {
    var n = this.length, r;
    for (r = 0; r < n; ++r) if (this[r] === t) return r;
    return -1;
  }, numeric.myIndexOf = Array.prototype.indexOf ? Array.prototype.indexOf : numeric._myIndexOf, numeric.Function = Function, numeric.precision = 4, numeric.largeArray = 50, numeric.prettyPrint = function(t) {
    function n(s) {
      if (s === 0)
        return "0";
      if (isNaN(s))
        return "NaN";
      if (s < 0)
        return "-" + n(-s);
      if (isFinite(s)) {
        var e = Math.floor(Math.log(s) / Math.log(10)), c = s / Math.pow(10, e), f = c.toPrecision(numeric.precision);
        return parseFloat(f) === 10 && (e++, c = 1, f = c.toPrecision(numeric.precision)), parseFloat(f).toString() + "e" + e.toString();
      }
      return "Infinity";
    }
    var r = [];
    function i(s) {
      var e;
      if (typeof s > "u")
        return r.push(Array(numeric.precision + 8).join(" ")), !1;
      if (typeof s == "string")
        return r.push('"' + s + '"'), !1;
      if (typeof s == "boolean")
        return r.push(s.toString()), !1;
      if (typeof s == "number") {
        var c = n(s), f = s.toPrecision(numeric.precision), o = parseFloat(s.toString()).toString(), l = [c, f, o, parseFloat(f).toString(), parseFloat(o).toString()];
        for (e = 1; e < l.length; e++)
          l[e].length < c.length && (c = l[e]);
        return r.push(Array(numeric.precision + 8 - c.length).join(" ") + c), !1;
      }
      if (s === null)
        return r.push("null"), !1;
      if (typeof s == "function") {
        r.push(s.toString());
        var u = !1;
        for (e in s)
          s.hasOwnProperty(e) && (u ? r.push(`,
`) : r.push(`
{`), u = !0, r.push(e), r.push(`: 
`), i(s[e]));
        return u && r.push(`}
`), !0;
      }
      if (s instanceof Array) {
        if (s.length > numeric.largeArray)
          return r.push("...Large Array..."), !0;
        var u = !1;
        for (r.push("["), e = 0; e < s.length; e++)
          e > 0 && (r.push(","), u && r.push(`
 `)), u = i(s[e]);
        return r.push("]"), !0;
      }
      r.push("{");
      var u = !1;
      for (e in s)
        s.hasOwnProperty(e) && (u && r.push(`,
`), u = !0, r.push(e), r.push(`: 
`), i(s[e]));
      return r.push("}"), !0;
    }
    return i(t), r.join("");
  }, numeric.parseDate = function(t) {
    function n(r) {
      if (typeof r == "string")
        return Date.parse(r.replace(/-/g, "/"));
      if (!(r instanceof Array))
        throw new Error("parseDate: parameter must be arrays of strings");
      var i = [], s;
      for (s = 0; s < r.length; s++)
        i[s] = n(r[s]);
      return i;
    }
    return n(t);
  }, numeric.parseFloat = function(t) {
    function n(r) {
      if (typeof r == "string")
        return parseFloat(r);
      if (!(r instanceof Array))
        throw new Error("parseFloat: parameter must be arrays of strings");
      var i = [], s;
      for (s = 0; s < r.length; s++)
        i[s] = n(r[s]);
      return i;
    }
    return n(t);
  }, numeric.parseCSV = function(t) {
    var n = t.split(`
`), r, i, s = [], e = /(([^'",]*)|('[^']*')|("[^"]*")),/g, c = /^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/, f = function(y) {
      return y.substr(0, y.length - 1);
    }, o = 0;
    for (i = 0; i < n.length; i++) {
      var l = (n[i] + ",").match(e), u;
      if (l.length > 0) {
        for (s[o] = [], r = 0; r < l.length; r++)
          u = f(l[r]), c.test(u) ? s[o][r] = parseFloat(u) : s[o][r] = u;
        o++;
      }
    }
    return s;
  }, numeric.toCSV = function(t) {
    var n = numeric.dim(t), r, i, s, e, c;
    for (s = n[0], n[1], c = [], r = 0; r < s; r++) {
      for (e = [], i = 0; i < s; i++)
        e[i] = t[r][i].toString();
      c[r] = e.join(", ");
    }
    return c.join(`
`) + `
`;
  }, numeric.getURL = function(t) {
    var n = new XMLHttpRequest();
    return n.open("GET", t, !1), n.send(), n;
  }, numeric.imageURL = function(t) {
    function n(_) {
      var L = _.length, F, x, O, R, I, h, b, Z, G = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", J = "";
      for (F = 0; F < L; F += 3)
        x = _[F], O = _[F + 1], R = _[F + 2], I = x >> 2, h = ((x & 3) << 4) + (O >> 4), b = ((O & 15) << 2) + (R >> 6), Z = R & 63, F + 1 >= L ? b = Z = 64 : F + 2 >= L && (Z = 64), J += G.charAt(I) + G.charAt(h) + G.charAt(b) + G.charAt(Z);
      return J;
    }
    function r(_, L, F) {
      typeof L > "u" && (L = 0), typeof F > "u" && (F = _.length);
      var x = [
        0,
        1996959894,
        3993919788,
        2567524794,
        124634137,
        1886057615,
        3915621685,
        2657392035,
        249268274,
        2044508324,
        3772115230,
        2547177864,
        162941995,
        2125561021,
        3887607047,
        2428444049,
        498536548,
        1789927666,
        4089016648,
        2227061214,
        450548861,
        1843258603,
        4107580753,
        2211677639,
        325883990,
        1684777152,
        4251122042,
        2321926636,
        335633487,
        1661365465,
        4195302755,
        2366115317,
        997073096,
        1281953886,
        3579855332,
        2724688242,
        1006888145,
        1258607687,
        3524101629,
        2768942443,
        901097722,
        1119000684,
        3686517206,
        2898065728,
        853044451,
        1172266101,
        3705015759,
        2882616665,
        651767980,
        1373503546,
        3369554304,
        3218104598,
        565507253,
        1454621731,
        3485111705,
        3099436303,
        671266974,
        1594198024,
        3322730930,
        2970347812,
        795835527,
        1483230225,
        3244367275,
        3060149565,
        1994146192,
        31158534,
        2563907772,
        4023717930,
        1907459465,
        112637215,
        2680153253,
        3904427059,
        2013776290,
        251722036,
        2517215374,
        3775830040,
        2137656763,
        141376813,
        2439277719,
        3865271297,
        1802195444,
        476864866,
        2238001368,
        4066508878,
        1812370925,
        453092731,
        2181625025,
        4111451223,
        1706088902,
        314042704,
        2344532202,
        4240017532,
        1658658271,
        366619977,
        2362670323,
        4224994405,
        1303535960,
        984961486,
        2747007092,
        3569037538,
        1256170817,
        1037604311,
        2765210733,
        3554079995,
        1131014506,
        879679996,
        2909243462,
        3663771856,
        1141124467,
        855842277,
        2852801631,
        3708648649,
        1342533948,
        654459306,
        3188396048,
        3373015174,
        1466479909,
        544179635,
        3110523913,
        3462522015,
        1591671054,
        702138776,
        2966460450,
        3352799412,
        1504918807,
        783551873,
        3082640443,
        3233442989,
        3988292384,
        2596254646,
        62317068,
        1957810842,
        3939845945,
        2647816111,
        81470997,
        1943803523,
        3814918930,
        2489596804,
        225274430,
        2053790376,
        3826175755,
        2466906013,
        167816743,
        2097651377,
        4027552580,
        2265490386,
        503444072,
        1762050814,
        4150417245,
        2154129355,
        426522225,
        1852507879,
        4275313526,
        2312317920,
        282753626,
        1742555852,
        4189708143,
        2394877945,
        397917763,
        1622183637,
        3604390888,
        2714866558,
        953729732,
        1340076626,
        3518719985,
        2797360999,
        1068828381,
        1219638859,
        3624741850,
        2936675148,
        906185462,
        1090812512,
        3747672003,
        2825379669,
        829329135,
        1181335161,
        3412177804,
        3160834842,
        628085408,
        1382605366,
        3423369109,
        3138078467,
        570562233,
        1426400815,
        3317316542,
        2998733608,
        733239954,
        1555261956,
        3268935591,
        3050360625,
        752459403,
        1541320221,
        2607071920,
        3965973030,
        1969922972,
        40735498,
        2617837225,
        3943577151,
        1913087877,
        83908371,
        2512341634,
        3803740692,
        2075208622,
        213261112,
        2463272603,
        3855990285,
        2094854071,
        198958881,
        2262029012,
        4057260610,
        1759359992,
        534414190,
        2176718541,
        4139329115,
        1873836001,
        414664567,
        2282248934,
        4279200368,
        1711684554,
        285281116,
        2405801727,
        4167216745,
        1634467795,
        376229701,
        2685067896,
        3608007406,
        1308918612,
        956543938,
        2808555105,
        3495958263,
        1231636301,
        1047427035,
        2932959818,
        3654703836,
        1088359270,
        936918e3,
        2847714899,
        3736837829,
        1202900863,
        817233897,
        3183342108,
        3401237130,
        1404277552,
        615818150,
        3134207493,
        3453421203,
        1423857449,
        601450431,
        3009837614,
        3294710456,
        1567103746,
        711928724,
        3020668471,
        3272380065,
        1510334235,
        755167117
      ], O = -1, R = 0;
      _.length;
      var I;
      for (I = L; I < F; I++)
        R = (O ^ _[I]) & 255, O = O >>> 8 ^ x[R];
      return O ^ -1;
    }
    var i = t[0].length, s = t[0][0].length, e, c, f, o, l, u, y, v, m, p, D = [
      137,
      80,
      78,
      71,
      13,
      10,
      26,
      10,
      //  0: PNG signature
      0,
      0,
      0,
      13,
      //  8: IHDR Chunk length
      73,
      72,
      68,
      82,
      // 12: "IHDR" 
      s >> 24 & 255,
      s >> 16 & 255,
      s >> 8 & 255,
      s & 255,
      // 16: Width
      i >> 24 & 255,
      i >> 16 & 255,
      i >> 8 & 255,
      i & 255,
      // 20: Height
      8,
      // 24: bit depth
      2,
      // 25: RGB
      0,
      // 26: deflate
      0,
      // 27: no filter
      0,
      // 28: no interlace
      -1,
      -2,
      -3,
      -4,
      // 29: CRC
      -5,
      -6,
      -7,
      -8,
      // 33: IDAT Chunk length
      73,
      68,
      65,
      84,
      // 37: "IDAT"
      // RFC 1950 header starts here
      8,
      // 41: RFC1950 CMF
      29
      // 42: RFC1950 FLG
    ];
    for (p = r(D, 12, 29), D[29] = p >> 24 & 255, D[30] = p >> 16 & 255, D[31] = p >> 8 & 255, D[32] = p & 255, e = 1, c = 0, y = 0; y < i; y++) {
      for (y < i - 1 ? D.push(0) : D.push(1), l = 3 * s + 1 + (y === 0) & 255, u = 3 * s + 1 + (y === 0) >> 8 & 255, D.push(l), D.push(u), D.push(~l & 255), D.push(~u & 255), y === 0 && D.push(0), v = 0; v < s; v++)
        for (f = 0; f < 3; f++)
          l = t[f][y][v], l > 255 ? l = 255 : l < 0 ? l = 0 : l = Math.round(l), e = (e + l) % 65521, c = (c + e) % 65521, D.push(l);
      D.push(0);
    }
    return m = (c << 16) + e, D.push(m >> 24 & 255), D.push(m >> 16 & 255), D.push(m >> 8 & 255), D.push(m & 255), o = D.length - 41, D[33] = o >> 24 & 255, D[34] = o >> 16 & 255, D[35] = o >> 8 & 255, D[36] = o & 255, p = r(D, 37), D.push(p >> 24 & 255), D.push(p >> 16 & 255), D.push(p >> 8 & 255), D.push(p & 255), D.push(0), D.push(0), D.push(0), D.push(0), D.push(73), D.push(69), D.push(78), D.push(68), D.push(174), D.push(66), D.push(96), D.push(130), "data:image/png;base64," + n(D);
  }, numeric._dim = function(t) {
    for (var n = []; typeof t == "object"; )
      n.push(t.length), t = t[0];
    return n;
  }, numeric.dim = function(t) {
    var n, r;
    return typeof t == "object" ? (n = t[0], typeof n == "object" ? (r = n[0], typeof r == "object" ? numeric._dim(t) : [t.length, n.length]) : [t.length]) : [];
  }, numeric.mapreduce = function(t, n) {
    return Function(
      "x",
      "accum",
      "_s",
      "_k",
      'if(typeof accum === "undefined") accum = ' + n + `;
if(typeof x === "number") { var xi = x; ` + t + `; return accum; }
if(typeof _s === "undefined") _s = numeric.dim(x);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i,xi;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) {
        accum = arguments.callee(x[i],accum,_s,_k+1);
    }    return accum;
}
for(i=_n-1;i>=1;i-=2) { 
    xi = x[i];
    ` + t + `;
    xi = x[i-1];
    ` + t + `;
}
if(i === 0) {
    xi = x[i];
    ` + t + `
}
return accum;`
    );
  }, numeric.mapreduce2 = function(t, n) {
    return Function(
      "x",
      `var n = x.length;
var i,xi;
` + n + `;
for(i=n-1;i!==-1;--i) { 
    xi = x[i];
    ` + t + `;
}
return accum;`
    );
  }, numeric.same = function M(t, n) {
    var r, i;
    if (!(t instanceof Array) || !(n instanceof Array) || (i = t.length, i !== n.length))
      return !1;
    for (r = 0; r < i; r++)
      if (t[r] !== n[r])
        if (typeof t[r] == "object") {
          if (!M(t[r], n[r])) return !1;
        } else
          return !1;
    return !0;
  }, numeric.rep = function(t, n, r) {
    typeof r > "u" && (r = 0);
    var i = t[r], s = Array(i), e;
    if (r === t.length - 1) {
      for (e = i - 2; e >= 0; e -= 2)
        s[e + 1] = n, s[e] = n;
      return e === -1 && (s[0] = n), s;
    }
    for (e = i - 1; e >= 0; e--)
      s[e] = numeric.rep(t, n, r + 1);
    return s;
  }, numeric.dotMMsmall = function(t, n) {
    var r, i, s, e, c, f, o, l, u, y, v;
    for (e = t.length, c = n.length, f = n[0].length, o = Array(e), r = e - 1; r >= 0; r--) {
      for (l = Array(f), u = t[r], s = f - 1; s >= 0; s--) {
        for (y = u[c - 1] * n[c - 1][s], i = c - 2; i >= 1; i -= 2)
          v = i - 1, y += u[i] * n[i][s] + u[v] * n[v][s];
        i === 0 && (y += u[0] * n[0][s]), l[s] = y;
      }
      o[r] = l;
    }
    return o;
  }, numeric._getCol = function(t, n, r) {
    var i = t.length, s;
    for (s = i - 1; s > 0; --s)
      r[s] = t[s][n], --s, r[s] = t[s][n];
    s === 0 && (r[0] = t[0][n]);
  }, numeric.dotMMbig = function(t, n) {
    var r = numeric._getCol, i = n.length, s = Array(i), e = t.length, c = n[0].length, f = new Array(e), o, l = numeric.dotVV, u, y;
    for (--i, --e, u = e; u !== -1; --u) f[u] = Array(c);
    for (--c, u = c; u !== -1; --u)
      for (r(n, u, s), y = e; y !== -1; --y)
        o = t[y], f[y][u] = l(o, s);
    return f;
  }, numeric.dotMV = function(t, n) {
    var r = t.length;
    n.length;
    var i, s = Array(r), e = numeric.dotVV;
    for (i = r - 1; i >= 0; i--)
      s[i] = e(t[i], n);
    return s;
  }, numeric.dotVM = function(t, n) {
    var r, i, s, e, c, f, o;
    for (s = t.length, e = n[0].length, c = Array(e), i = e - 1; i >= 0; i--) {
      for (f = t[s - 1] * n[s - 1][i], r = s - 2; r >= 1; r -= 2)
        o = r - 1, f += t[r] * n[r][i] + t[o] * n[o][i];
      r === 0 && (f += t[0] * n[0][i]), c[i] = f;
    }
    return c;
  }, numeric.dotVV = function(t, n) {
    var r, i = t.length, s, e = t[i - 1] * n[i - 1];
    for (r = i - 2; r >= 1; r -= 2)
      s = r - 1, e += t[r] * n[r] + t[s] * n[s];
    return r === 0 && (e += t[0] * n[0]), e;
  }, numeric.dot = function(t, n) {
    var r = numeric.dim;
    switch (r(t).length * 1e3 + r(n).length) {
      case 2002:
        return n.length < 10 ? numeric.dotMMsmall(t, n) : numeric.dotMMbig(t, n);
      case 2001:
        return numeric.dotMV(t, n);
      case 1002:
        return numeric.dotVM(t, n);
      case 1001:
        return numeric.dotVV(t, n);
      case 1e3:
        return numeric.mulVS(t, n);
      case 1:
        return numeric.mulSV(t, n);
      case 0:
        return t * n;
      default:
        throw new Error("numeric.dot only works on vectors and matrices");
    }
  }, numeric.diag = function(t) {
    var n, r, i, s = t.length, e = Array(s), c;
    for (n = s - 1; n >= 0; n--) {
      for (c = Array(s), r = n + 2, i = s - 1; i >= r; i -= 2)
        c[i] = 0, c[i - 1] = 0;
      for (i > n && (c[i] = 0), c[n] = t[n], i = n - 1; i >= 1; i -= 2)
        c[i] = 0, c[i - 1] = 0;
      i === 0 && (c[0] = 0), e[n] = c;
    }
    return e;
  }, numeric.getDiag = function(M) {
    var t = Math.min(M.length, M[0].length), n, r = Array(t);
    for (n = t - 1; n >= 1; --n)
      r[n] = M[n][n], --n, r[n] = M[n][n];
    return n === 0 && (r[0] = M[0][0]), r;
  }, numeric.identity = function(t) {
    return numeric.diag(numeric.rep([t], 1));
  }, numeric.pointwise = function(t, n, r) {
    typeof r > "u" && (r = "");
    var i = [], s, e = /\[i\]$/, c, f = "", o = !1;
    for (s = 0; s < t.length; s++)
      e.test(t[s]) ? (c = t[s].substring(0, t[s].length - 3), f = c) : c = t[s], c === "ret" && (o = !0), i.push(c);
    return i[t.length] = "_s", i[t.length + 1] = "_k", i[t.length + 2] = 'if(typeof _s === "undefined") _s = numeric.dim(' + f + `);
if(typeof _k === "undefined") _k = 0;
var _n = _s[_k];
var i` + (o ? "" : ", ret = Array(_n)") + `;
if(_k < _s.length-1) {
    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(` + t.join(",") + `,_s,_k+1);
    return ret;
}
` + r + `
for(i=_n-1;i!==-1;--i) {
    ` + n + `
}
return ret;`, Function.apply(null, i);
  }, numeric.pointwise2 = function(t, n, r) {
    typeof r > "u" && (r = "");
    var i = [], s, e = /\[i\]$/, c, f = "", o = !1;
    for (s = 0; s < t.length; s++)
      e.test(t[s]) ? (c = t[s].substring(0, t[s].length - 3), f = c) : c = t[s], c === "ret" && (o = !0), i.push(c);
    return i[t.length] = "var _n = " + f + `.length;
var i` + (o ? "" : ", ret = Array(_n)") + `;
` + r + `
for(i=_n-1;i!==-1;--i) {
` + n + `
}
return ret;`, Function.apply(null, i);
  }, numeric._biforeach = function M(t, n, r, i, s) {
    if (i === r.length - 1) {
      s(t, n);
      return;
    }
    var e, c = r[i];
    for (e = c - 1; e >= 0; e--)
      M(typeof t == "object" ? t[e] : t, typeof n == "object" ? n[e] : n, r, i + 1, s);
  }, numeric._biforeach2 = function M(t, n, r, i, s) {
    if (i === r.length - 1)
      return s(t, n);
    var e, c = r[i], f = Array(c);
    for (e = c - 1; e >= 0; --e)
      f[e] = M(typeof t == "object" ? t[e] : t, typeof n == "object" ? n[e] : n, r, i + 1, s);
    return f;
  }, numeric._foreach = function M(t, n, r, i) {
    if (r === n.length - 1) {
      i(t);
      return;
    }
    var s, e = n[r];
    for (s = e - 1; s >= 0; s--)
      M(t[s], n, r + 1, i);
  }, numeric._foreach2 = function M(t, n, r, i) {
    if (r === n.length - 1)
      return i(t);
    var s, e = n[r], c = Array(e);
    for (s = e - 1; s >= 0; s--)
      c[s] = M(t[s], n, r + 1, i);
    return c;
  }, numeric.ops2 = {
    add: "+",
    sub: "-",
    mul: "*",
    div: "/",
    mod: "%",
    and: "&&",
    or: "||",
    eq: "===",
    neq: "!==",
    lt: "<",
    gt: ">",
    leq: "<=",
    geq: ">=",
    band: "&",
    bor: "|",
    bxor: "^",
    lshift: "<<",
    rshift: ">>",
    rrshift: ">>>"
  }, numeric.opseq = {
    addeq: "+=",
    subeq: "-=",
    muleq: "*=",
    diveq: "/=",
    modeq: "%=",
    lshifteq: "<<=",
    rshifteq: ">>=",
    rrshifteq: ">>>=",
    bandeq: "&=",
    boreq: "|=",
    bxoreq: "^="
  }, numeric.mathfuns = [
    "abs",
    "acos",
    "asin",
    "atan",
    "ceil",
    "cos",
    "exp",
    "floor",
    "log",
    "round",
    "sin",
    "sqrt",
    "tan",
    "isNaN",
    "isFinite"
  ], numeric.mathfuns2 = ["atan2", "pow", "max", "min"], numeric.ops1 = {
    neg: "-",
    not: "!",
    bnot: "~",
    clone: ""
  }, numeric.mapreducers = {
    any: ["if(xi) return true;", "var accum = false;"],
    all: ["if(!xi) return false;", "var accum = true;"],
    sum: ["accum += xi;", "var accum = 0;"],
    prod: ["accum *= xi;", "var accum = 1;"],
    norm2Squared: ["accum += xi*xi;", "var accum = 0;"],
    norminf: ["accum = max(accum,abs(xi));", "var accum = 0, max = Math.max, abs = Math.abs;"],
    norm1: ["accum += abs(xi)", "var accum = 0, abs = Math.abs;"],
    sup: ["accum = max(accum,xi);", "var accum = -Infinity, max = Math.max;"],
    inf: ["accum = min(accum,xi);", "var accum = Infinity, min = Math.min;"]
  }, function() {
    var M, t;
    for (M = 0; M < numeric.mathfuns2.length; ++M)
      t = numeric.mathfuns2[M], numeric.ops2[t] = t;
    for (M in numeric.ops2)
      if (numeric.ops2.hasOwnProperty(M)) {
        t = numeric.ops2[M];
        var n, r, i = "";
        numeric.myIndexOf.call(numeric.mathfuns2, M) !== -1 ? (i = "var " + t + " = Math." + t + `;
`, n = function(s, e, c) {
          return s + " = " + t + "(" + e + "," + c + ")";
        }, r = function(s, e) {
          return s + " = " + t + "(" + s + "," + e + ")";
        }) : (n = function(s, e, c) {
          return s + " = " + e + " " + t + " " + c;
        }, numeric.opseq.hasOwnProperty(M + "eq") ? r = function(s, e) {
          return s + " " + t + "= " + e;
        } : r = function(s, e) {
          return s + " = " + s + " " + t + " " + e;
        }), numeric[M + "VV"] = numeric.pointwise2(["x[i]", "y[i]"], n("ret[i]", "x[i]", "y[i]"), i), numeric[M + "SV"] = numeric.pointwise2(["x", "y[i]"], n("ret[i]", "x", "y[i]"), i), numeric[M + "VS"] = numeric.pointwise2(["x[i]", "y"], n("ret[i]", "x[i]", "y"), i), numeric[M] = Function(
          `var n = arguments.length, i, x = arguments[0], y;
var VV = numeric.` + M + "VV, VS = numeric." + M + "VS, SV = numeric." + M + `SV;
var dim = numeric.dim;
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof x === "object") {
      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);
      else x = numeric._biforeach2(x,y,dim(x),0,VS);
  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);
  else ` + r("x", "y") + `
}
return x;
`
        ), numeric[t] = numeric[M], numeric[M + "eqV"] = numeric.pointwise2(["ret[i]", "x[i]"], r("ret[i]", "x[i]"), i), numeric[M + "eqS"] = numeric.pointwise2(["ret[i]", "x"], r("ret[i]", "x"), i), numeric[M + "eq"] = Function(
          `var n = arguments.length, i, x = arguments[0], y;
var V = numeric.` + M + "eqV, S = numeric." + M + `eqS
var s = numeric.dim(x);
for(i=1;i!==n;++i) { 
  y = arguments[i];
  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);
  else numeric._biforeach(x,y,s,0,S);
}
return x;
`
        );
      }
    for (M = 0; M < numeric.mathfuns2.length; ++M)
      t = numeric.mathfuns2[M], delete numeric.ops2[t];
    for (M = 0; M < numeric.mathfuns.length; ++M)
      t = numeric.mathfuns[M], numeric.ops1[t] = t;
    for (M in numeric.ops1)
      numeric.ops1.hasOwnProperty(M) && (i = "", t = numeric.ops1[M], numeric.myIndexOf.call(numeric.mathfuns, M) !== -1 && Math.hasOwnProperty(t) && (i = "var " + t + " = Math." + t + `;
`), numeric[M + "eqV"] = numeric.pointwise2(["ret[i]"], "ret[i] = " + t + "(ret[i]);", i), numeric[M + "eq"] = Function(
        "x",
        'if(typeof x !== "object") return ' + t + `x
var i;
var V = numeric.` + M + `eqV;
var s = numeric.dim(x);
numeric._foreach(x,s,0,V);
return x;
`
      ), numeric[M + "V"] = numeric.pointwise2(["x[i]"], "ret[i] = " + t + "(x[i]);", i), numeric[M] = Function(
        "x",
        'if(typeof x !== "object") return ' + t + `(x)
var i;
var V = numeric.` + M + `V;
var s = numeric.dim(x);
return numeric._foreach2(x,s,0,V);
`
      ));
    for (M = 0; M < numeric.mathfuns.length; ++M)
      t = numeric.mathfuns[M], delete numeric.ops1[t];
    for (M in numeric.mapreducers)
      numeric.mapreducers.hasOwnProperty(M) && (t = numeric.mapreducers[M], numeric[M + "V"] = numeric.mapreduce2(t[0], t[1]), numeric[M] = Function(
        "x",
        "s",
        "k",
        t[1] + `if(typeof x !== "object") {    xi = x;
` + t[0] + `;
    return accum;
}if(typeof s === "undefined") s = numeric.dim(x);
if(typeof k === "undefined") k = 0;
if(k === s.length-1) return numeric.` + M + `V(x);
var xi;
var n = x.length, i;
for(i=n-1;i!==-1;--i) {
   xi = arguments.callee(x[i]);
` + t[0] + `;
}
return accum;
`
      ));
  }(), numeric.truncVV = numeric.pointwise(["x[i]", "y[i]"], "ret[i] = round(x[i]/y[i])*y[i];", "var round = Math.round;"), numeric.truncVS = numeric.pointwise(["x[i]", "y"], "ret[i] = round(x[i]/y)*y;", "var round = Math.round;"), numeric.truncSV = numeric.pointwise(["x", "y[i]"], "ret[i] = round(x/y[i])*y[i];", "var round = Math.round;"), numeric.trunc = function(t, n) {
    return typeof t == "object" ? typeof n == "object" ? numeric.truncVV(t, n) : numeric.truncVS(t, n) : typeof n == "object" ? numeric.truncSV(t, n) : Math.round(t / n) * n;
  }, numeric.inv = function(p) {
    var n = numeric.dim(p), r = Math.abs, i = n[0], s = n[1], e = numeric.clone(p), c, f, o = numeric.identity(i), l, u, y, v, m, p;
    for (v = 0; v < s; ++v) {
      var D = -1, _ = -1;
      for (y = v; y !== i; ++y)
        m = r(e[y][v]), m > _ && (D = y, _ = m);
      for (f = e[D], e[D] = e[v], e[v] = f, u = o[D], o[D] = o[v], o[v] = u, p = f[v], m = v; m !== s; ++m) f[m] /= p;
      for (m = s - 1; m !== -1; --m) u[m] /= p;
      for (y = i - 1; y !== -1; --y)
        if (y !== v) {
          for (c = e[y], l = o[y], p = c[v], m = v + 1; m !== s; ++m) c[m] -= f[m] * p;
          for (m = s - 1; m > 0; --m)
            l[m] -= u[m] * p, --m, l[m] -= u[m] * p;
          m === 0 && (l[0] -= u[0] * p);
        }
    }
    return o;
  }, numeric.det = function(t) {
    var n = numeric.dim(t);
    if (n.length !== 2 || n[0] !== n[1])
      throw new Error("numeric: det() only works on square matrices");
    var r = n[0], i = 1, s, e, c, f = numeric.clone(t), o, l, u, y, v;
    for (e = 0; e < r - 1; e++) {
      for (c = e, s = e + 1; s < r; s++)
        Math.abs(f[s][e]) > Math.abs(f[c][e]) && (c = s);
      for (c !== e && (y = f[c], f[c] = f[e], f[e] = y, i *= -1), o = f[e], s = e + 1; s < r; s++) {
        for (l = f[s], u = l[e] / o[e], c = e + 1; c < r - 1; c += 2)
          v = c + 1, l[c] -= o[c] * u, l[v] -= o[v] * u;
        c !== r && (l[c] -= o[c] * u);
      }
      if (o[e] === 0)
        return 0;
      i *= o[e];
    }
    return i * f[e][e];
  }, numeric.transpose = function(t) {
    var n, r, i = t.length, s = t[0].length, e = Array(s), c, f, o;
    for (r = 0; r < s; r++) e[r] = Array(i);
    for (n = i - 1; n >= 1; n -= 2) {
      for (f = t[n], c = t[n - 1], r = s - 1; r >= 1; --r)
        o = e[r], o[n] = f[r], o[n - 1] = c[r], --r, o = e[r], o[n] = f[r], o[n - 1] = c[r];
      r === 0 && (o = e[0], o[n] = f[0], o[n - 1] = c[0]);
    }
    if (n === 0) {
      for (c = t[0], r = s - 1; r >= 1; --r)
        e[r][0] = c[r], --r, e[r][0] = c[r];
      r === 0 && (e[0][0] = c[0]);
    }
    return e;
  }, numeric.negtranspose = function(t) {
    var n, r, i = t.length, s = t[0].length, e = Array(s), c, f, o;
    for (r = 0; r < s; r++) e[r] = Array(i);
    for (n = i - 1; n >= 1; n -= 2) {
      for (f = t[n], c = t[n - 1], r = s - 1; r >= 1; --r)
        o = e[r], o[n] = -f[r], o[n - 1] = -c[r], --r, o = e[r], o[n] = -f[r], o[n - 1] = -c[r];
      r === 0 && (o = e[0], o[n] = -f[0], o[n - 1] = -c[0]);
    }
    if (n === 0) {
      for (c = t[0], r = s - 1; r >= 1; --r)
        e[r][0] = -c[r], --r, e[r][0] = -c[r];
      r === 0 && (e[0][0] = -c[0]);
    }
    return e;
  }, numeric._random = function M(t, n) {
    var r, i = t[n], s = Array(i), e;
    if (n === t.length - 1) {
      for (e = Math.random, r = i - 1; r >= 1; r -= 2)
        s[r] = e(), s[r - 1] = e();
      return r === 0 && (s[0] = e()), s;
    }
    for (r = i - 1; r >= 0; r--) s[r] = M(t, n + 1);
    return s;
  }, numeric.random = function(t) {
    return numeric._random(t, 0);
  }, numeric.norm2 = function(t) {
    return Math.sqrt(numeric.norm2Squared(t));
  }, numeric.linspace = function(t, n, r) {
    if (typeof r > "u" && (r = Math.max(Math.round(n - t) + 1, 1)), r < 2)
      return r === 1 ? [t] : [];
    var i, s = Array(r);
    for (r--, i = r; i >= 0; i--)
      s[i] = (i * n + (r - i) * t) / r;
    return s;
  }, numeric.getBlock = function(t, n, r) {
    var i = numeric.dim(t);
    function s(e, c) {
      var f, o = n[c], l = r[c] - o, u = Array(l);
      if (c === i.length - 1) {
        for (f = l; f >= 0; f--)
          u[f] = e[f + o];
        return u;
      }
      for (f = l; f >= 0; f--)
        u[f] = s(e[f + o], c + 1);
      return u;
    }
    return s(t, 0);
  }, numeric.setBlock = function(t, n, r, i) {
    var s = numeric.dim(t);
    function e(c, f, o) {
      var l, u = n[o], y = r[o] - u;
      if (o === s.length - 1)
        for (l = y; l >= 0; l--)
          c[l + u] = f[l];
      for (l = y; l >= 0; l--)
        e(c[l + u], f[l], o + 1);
    }
    return e(t, i, 0), t;
  }, numeric.getRange = function(t, n, r) {
    var i = n.length, s = r.length, e, c, f = Array(i), o, l;
    for (e = i - 1; e !== -1; --e)
      for (f[e] = Array(s), o = f[e], l = t[n[e]], c = s - 1; c !== -1; --c) o[c] = l[r[c]];
    return f;
  }, numeric.blockMatrix = function(t) {
    var n = numeric.dim(t);
    if (n.length < 4) return numeric.blockMatrix([t]);
    var r = n[0], i = n[1], s, e, c, f, o;
    for (s = 0, e = 0, c = 0; c < r; ++c) s += t[c][0].length;
    for (f = 0; f < i; ++f) e += t[0][f][0].length;
    var l = Array(s);
    for (c = 0; c < s; ++c) l[c] = Array(e);
    var u = 0, y, v, m, p, D;
    for (c = 0; c < r; ++c) {
      for (y = e, f = i - 1; f !== -1; --f)
        for (o = t[c][f], y -= o[0].length, m = o.length - 1; m !== -1; --m)
          for (D = o[m], v = l[u + m], p = D.length - 1; p !== -1; --p) v[y + p] = D[p];
      u += t[c][0].length;
    }
    return l;
  }, numeric.tensor = function(t, n) {
    if (typeof t == "number" || typeof n == "number") return numeric.mul(t, n);
    var r = numeric.dim(t), i = numeric.dim(n);
    if (r.length !== 1 || i.length !== 1)
      throw new Error("numeric: tensor product is only defined for vectors");
    var s = r[0], e = i[0], c = Array(s), f, o, l, u;
    for (o = s - 1; o >= 0; o--) {
      for (f = Array(e), u = t[o], l = e - 1; l >= 3; --l)
        f[l] = u * n[l], --l, f[l] = u * n[l], --l, f[l] = u * n[l], --l, f[l] = u * n[l];
      for (; l >= 0; )
        f[l] = u * n[l], --l;
      c[o] = f;
    }
    return c;
  }, numeric.T = function(t, n) {
    this.x = t, this.y = n;
  }, numeric.t = function(t, n) {
    return new numeric.T(t, n);
  }, numeric.Tbinop = function(t, n, r, i, s) {
    if (numeric.indexOf, typeof s != "string") {
      var e;
      s = "";
      for (e in numeric)
        numeric.hasOwnProperty(e) && (t.indexOf(e) >= 0 || n.indexOf(e) >= 0 || r.indexOf(e) >= 0 || i.indexOf(e) >= 0) && e.length > 1 && (s += "var " + e + " = numeric." + e + `;
`);
    }
    return Function(
      ["y"],
      `var x = this;
if(!(y instanceof numeric.T)) { y = new numeric.T(y); }
` + s + `
if(x.y) {  if(y.y) {    return new numeric.T(` + i + `);
  }
  return new numeric.T(` + r + `);
}
if(y.y) {
  return new numeric.T(` + n + `);
}
return new numeric.T(` + t + `);
`
    );
  }, numeric.T.prototype.add = numeric.Tbinop(
    "add(x.x,y.x)",
    "add(x.x,y.x),y.y",
    "add(x.x,y.x),x.y",
    "add(x.x,y.x),add(x.y,y.y)"
  ), numeric.T.prototype.sub = numeric.Tbinop(
    "sub(x.x,y.x)",
    "sub(x.x,y.x),neg(y.y)",
    "sub(x.x,y.x),x.y",
    "sub(x.x,y.x),sub(x.y,y.y)"
  ), numeric.T.prototype.mul = numeric.Tbinop(
    "mul(x.x,y.x)",
    "mul(x.x,y.x),mul(x.x,y.y)",
    "mul(x.x,y.x),mul(x.y,y.x)",
    "sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"
  ), numeric.T.prototype.reciprocal = function() {
    var t = numeric.mul, n = numeric.div;
    if (this.y) {
      var r = numeric.add(t(this.x, this.x), t(this.y, this.y));
      return new numeric.T(n(this.x, r), n(numeric.neg(this.y), r));
    }
    return new T(n(1, this.x));
  }, numeric.T.prototype.div = function(t) {
    if (t instanceof numeric.T || (t = new numeric.T(t)), t.y)
      return this.mul(t.reciprocal());
    var n = numeric.div;
    return this.y ? new numeric.T(n(this.x, t.x), n(this.y, t.x)) : new numeric.T(n(this.x, t.x));
  }, numeric.T.prototype.dot = numeric.Tbinop(
    "dot(x.x,y.x)",
    "dot(x.x,y.x),dot(x.x,y.y)",
    "dot(x.x,y.x),dot(x.y,y.x)",
    "sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"
  ), numeric.T.prototype.transpose = function() {
    var t = numeric.transpose, n = this.x, r = this.y;
    return r ? new numeric.T(t(n), t(r)) : new numeric.T(t(n));
  }, numeric.T.prototype.transjugate = function() {
    var t = numeric.transpose, n = this.x, r = this.y;
    return r ? new numeric.T(t(n), numeric.negtranspose(r)) : new numeric.T(t(n));
  }, numeric.Tunop = function(t, n, r) {
    return typeof r != "string" && (r = ""), Function(
      `var x = this;
` + r + `
if(x.y) {  ` + n + `;
}
` + t + `;
`
    );
  }, numeric.T.prototype.exp = numeric.Tunop(
    "return new numeric.T(ex)",
    "return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))",
    "var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"
  ), numeric.T.prototype.conj = numeric.Tunop(
    "return new numeric.T(x.x);",
    "return new numeric.T(x.x,numeric.neg(x.y));"
  ), numeric.T.prototype.neg = numeric.Tunop(
    "return new numeric.T(neg(x.x));",
    "return new numeric.T(neg(x.x),neg(x.y));",
    "var neg = numeric.neg;"
  ), numeric.T.prototype.sin = numeric.Tunop(
    "return new numeric.T(numeric.sin(x.x))",
    "return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"
  ), numeric.T.prototype.cos = numeric.Tunop(
    "return new numeric.T(numeric.cos(x.x))",
    "return x.exp().add(x.neg().exp()).div(2);"
  ), numeric.T.prototype.abs = numeric.Tunop(
    "return new numeric.T(numeric.abs(x.x));",
    "return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));",
    "var mul = numeric.mul;"
  ), numeric.T.prototype.log = numeric.Tunop(
    "return new numeric.T(numeric.log(x.x));",
    `var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();
return new numeric.T(numeric.log(r.x),theta.x);`
  ), numeric.T.prototype.norm2 = numeric.Tunop(
    "return numeric.norm2(x.x);",
    `var f = numeric.norm2Squared;
return Math.sqrt(f(x.x)+f(x.y));`
  ), numeric.T.prototype.inv = function() {
    var t = this;
    if (typeof t.y > "u")
      return new numeric.T(numeric.inv(t.x));
    var n = t.x.length, p, D, _, r = numeric.identity(n), i = numeric.rep([n, n], 0), s = numeric.clone(t.x), e = numeric.clone(t.y), c, f, o, l, u, y, v, m, p, D, _, L, F, x, O, R, I, h;
    for (p = 0; p < n; p++) {
      for (x = s[p][p], O = e[p][p], L = x * x + O * O, _ = p, D = p + 1; D < n; D++)
        x = s[D][p], O = e[D][p], F = x * x + O * O, F > L && (_ = D, L = F);
      for (_ !== p && (h = s[p], s[p] = s[_], s[_] = h, h = e[p], e[p] = e[_], e[_] = h, h = r[p], r[p] = r[_], r[_] = h, h = i[p], i[p] = i[_], i[_] = h), c = s[p], f = e[p], u = r[p], y = i[p], x = c[p], O = f[p], D = p + 1; D < n; D++)
        R = c[D], I = f[D], c[D] = (R * x + I * O) / L, f[D] = (I * x - R * O) / L;
      for (D = 0; D < n; D++)
        R = u[D], I = y[D], u[D] = (R * x + I * O) / L, y[D] = (I * x - R * O) / L;
      for (D = p + 1; D < n; D++) {
        for (o = s[D], l = e[D], v = r[D], m = i[D], x = o[p], O = l[p], _ = p + 1; _ < n; _++)
          R = c[_], I = f[_], o[_] -= R * x - I * O, l[_] -= I * x + R * O;
        for (_ = 0; _ < n; _++)
          R = u[_], I = y[_], v[_] -= R * x - I * O, m[_] -= I * x + R * O;
      }
    }
    for (p = n - 1; p > 0; p--)
      for (u = r[p], y = i[p], D = p - 1; D >= 0; D--)
        for (v = r[D], m = i[D], x = s[D][p], O = e[D][p], _ = n - 1; _ >= 0; _--)
          R = u[_], I = y[_], v[_] -= x * R - O * I, m[_] -= x * I + O * R;
    return new numeric.T(r, i);
  }, numeric.T.prototype.get = function(t) {
    var n = this.x, r = this.y, i = 0, s, e = t.length;
    if (r) {
      for (; i < e; )
        s = t[i], n = n[s], r = r[s], i++;
      return new numeric.T(n, r);
    }
    for (; i < e; )
      s = t[i], n = n[s], i++;
    return new numeric.T(n);
  }, numeric.T.prototype.set = function(t, n) {
    var r = this.x, i = this.y, s = 0, e, c = t.length, f = n.x, o = n.y;
    if (c === 0)
      return o ? this.y = o : i && (this.y = void 0), this.x = r, this;
    if (o) {
      for (i || (i = numeric.rep(numeric.dim(r), 0), this.y = i); s < c - 1; )
        e = t[s], r = r[e], i = i[e], s++;
      return e = t[s], r[e] = f, i[e] = o, this;
    }
    if (i) {
      for (; s < c - 1; )
        e = t[s], r = r[e], i = i[e], s++;
      return e = t[s], r[e] = f, f instanceof Array ? i[e] = numeric.rep(numeric.dim(f), 0) : i[e] = 0, this;
    }
    for (; s < c - 1; )
      e = t[s], r = r[e], s++;
    return e = t[s], r[e] = f, this;
  }, numeric.T.prototype.getRows = function(t, n) {
    var r = n - t + 1, i, s = Array(r), e, c = this.x, f = this.y;
    for (i = t; i <= n; i++)
      s[i - t] = c[i];
    if (f) {
      for (e = Array(r), i = t; i <= n; i++)
        e[i - t] = f[i];
      return new numeric.T(s, e);
    }
    return new numeric.T(s);
  }, numeric.T.prototype.setRows = function(t, n, r) {
    var i, s = this.x, e = this.y, c = r.x, f = r.y;
    for (i = t; i <= n; i++)
      s[i] = c[i - t];
    if (f)
      for (e || (e = numeric.rep(numeric.dim(s), 0), this.y = e), i = t; i <= n; i++)
        e[i] = f[i - t];
    else if (e)
      for (i = t; i <= n; i++)
        e[i] = numeric.rep([c[i - t].length], 0);
    return this;
  }, numeric.T.prototype.getRow = function(t) {
    var n = this.x, r = this.y;
    return r ? new numeric.T(n[t], r[t]) : new numeric.T(n[t]);
  }, numeric.T.prototype.setRow = function(t, n) {
    var r = this.x, i = this.y, s = n.x, e = n.y;
    return r[t] = s, e ? (i || (i = numeric.rep(numeric.dim(r), 0), this.y = i), i[t] = e) : i && (i = numeric.rep([s.length], 0)), this;
  }, numeric.T.prototype.getBlock = function(t, n) {
    var r = this.x, i = this.y, s = numeric.getBlock;
    return i ? new numeric.T(s(r, t, n), s(i, t, n)) : new numeric.T(s(r, t, n));
  }, numeric.T.prototype.setBlock = function(t, n, r) {
    r instanceof numeric.T || (r = new numeric.T(r));
    var i = this.x, s = this.y, e = numeric.setBlock, c = r.x, f = r.y;
    if (f)
      return s || (this.y = numeric.rep(numeric.dim(this), 0), s = this.y), e(i, t, n, c), e(s, t, n, f), this;
    e(i, t, n, c), s && e(s, t, n, numeric.rep(numeric.dim(c), 0));
  }, numeric.T.rep = function(t, n) {
    var r = numeric.T;
    n instanceof r || (n = new r(n));
    var i = n.x, s = n.y, e = numeric.rep;
    return s ? new r(e(t, i), e(t, s)) : new r(e(t, i));
  }, numeric.T.diag = function(t) {
    t instanceof numeric.T || (t = new numeric.T(t));
    var n = t.x, r = t.y, i = numeric.diag;
    return r ? new numeric.T(i(n), i(r)) : new numeric.T(i(n));
  }, numeric.T.eig = function() {
    if (this.y)
      throw new Error("eig: not implemented for complex matrices.");
    return numeric.eig(this.x);
  }, numeric.T.identity = function(t) {
    return new numeric.T(numeric.identity(t));
  }, numeric.T.prototype.getDiag = function() {
    var t = numeric, n = this.x, r = this.y;
    return r ? new t.T(t.getDiag(n), t.getDiag(r)) : new t.T(t.getDiag(n));
  }, numeric.house = function(t) {
    var n = numeric.clone(t), r = t[0] >= 0 ? 1 : -1, i = r * numeric.norm2(t);
    n[0] += i;
    var s = numeric.norm2(n);
    if (s === 0)
      throw new Error("eig: internal error");
    return numeric.div(n, s);
  }, numeric.toUpperHessenberg = function(t) {
    var n = numeric.dim(t);
    if (n.length !== 2 || n[0] !== n[1])
      throw new Error("numeric: toUpperHessenberg() only works on square matrices");
    var r = n[0], i, s, e, c, f, o = numeric.clone(t), l, u, y, v, m = numeric.identity(r), p;
    for (s = 0; s < r - 2; s++) {
      for (c = Array(r - s - 1), i = s + 1; i < r; i++)
        c[i - s - 1] = o[i][s];
      if (numeric.norm2(c) > 0) {
        for (f = numeric.house(c), l = numeric.getBlock(o, [s + 1, s], [r - 1, r - 1]), u = numeric.tensor(f, numeric.dot(f, l)), i = s + 1; i < r; i++)
          for (y = o[i], v = u[i - s - 1], e = s; e < r; e++) y[e] -= 2 * v[e - s];
        for (l = numeric.getBlock(o, [0, s + 1], [r - 1, r - 1]), u = numeric.tensor(numeric.dot(l, f), f), i = 0; i < r; i++)
          for (y = o[i], v = u[i], e = s + 1; e < r; e++) y[e] -= 2 * v[e - s - 1];
        for (l = Array(r - s - 1), i = s + 1; i < r; i++) l[i - s - 1] = m[i];
        for (u = numeric.tensor(f, numeric.dot(f, l)), i = s + 1; i < r; i++)
          for (p = m[i], v = u[i - s - 1], e = 0; e < r; e++) p[e] -= 2 * v[e];
      }
    }
    return { H: o, Q: m };
  }, numeric.epsilon = 2220446049250313e-31, numeric.QRFrancis = function(M, t) {
    typeof t > "u" && (t = 1e4), M = numeric.clone(M), numeric.clone(M);
    var n = numeric.dim(M), r = n[0], i, s, e, c, f, o, l, u, y, v = numeric.identity(r), m, p, D, _, L, F, x, O, R;
    if (r < 3)
      return { Q: v, B: [[0, r - 1]] };
    var I = numeric.epsilon;
    for (R = 0; R < t; R++) {
      for (x = 0; x < r - 1; x++)
        if (Math.abs(M[x + 1][x]) < I * (Math.abs(M[x][x]) + Math.abs(M[x + 1][x + 1]))) {
          var h = numeric.QRFrancis(numeric.getBlock(M, [0, 0], [x, x]), t), b = numeric.QRFrancis(numeric.getBlock(M, [x + 1, x + 1], [r - 1, r - 1]), t);
          for (D = Array(x + 1), F = 0; F <= x; F++)
            D[F] = v[F];
          for (_ = numeric.dot(h.Q, D), F = 0; F <= x; F++)
            v[F] = _[F];
          for (D = Array(r - x - 1), F = x + 1; F < r; F++)
            D[F - x - 1] = v[F];
          for (_ = numeric.dot(b.Q, D), F = x + 1; F < r; F++)
            v[F] = _[F - x - 1];
          return { Q: v, B: h.B.concat(numeric.add(b.B, x + 1)) };
        }
      if (e = M[r - 2][r - 2], c = M[r - 2][r - 1], f = M[r - 1][r - 2], o = M[r - 1][r - 1], u = e + o, l = e * o - c * f, y = numeric.getBlock(M, [0, 0], [2, 2]), u * u >= 4 * l) {
        var Z, G;
        Z = 0.5 * (u + Math.sqrt(u * u - 4 * l)), G = 0.5 * (u - Math.sqrt(u * u - 4 * l)), y = numeric.add(
          numeric.sub(
            numeric.dot(y, y),
            numeric.mul(y, Z + G)
          ),
          numeric.diag(numeric.rep([3], Z * G))
        );
      } else
        y = numeric.add(
          numeric.sub(
            numeric.dot(y, y),
            numeric.mul(y, u)
          ),
          numeric.diag(numeric.rep([3], l))
        );
      for (i = [y[0][0], y[1][0], y[2][0]], s = numeric.house(i), D = [M[0], M[1], M[2]], _ = numeric.tensor(s, numeric.dot(s, D)), F = 0; F < 3; F++)
        for (p = M[F], L = _[F], O = 0; O < r; O++) p[O] -= 2 * L[O];
      for (D = numeric.getBlock(M, [0, 0], [r - 1, 2]), _ = numeric.tensor(numeric.dot(D, s), s), F = 0; F < r; F++)
        for (p = M[F], L = _[F], O = 0; O < 3; O++) p[O] -= 2 * L[O];
      for (D = [v[0], v[1], v[2]], _ = numeric.tensor(s, numeric.dot(s, D)), F = 0; F < 3; F++)
        for (m = v[F], L = _[F], O = 0; O < r; O++) m[O] -= 2 * L[O];
      var J;
      for (x = 0; x < r - 2; x++) {
        for (O = x; O <= x + 1; O++)
          if (Math.abs(M[O + 1][O]) < I * (Math.abs(M[O][O]) + Math.abs(M[O + 1][O + 1]))) {
            var h = numeric.QRFrancis(numeric.getBlock(M, [0, 0], [O, O]), t), b = numeric.QRFrancis(numeric.getBlock(M, [O + 1, O + 1], [r - 1, r - 1]), t);
            for (D = Array(O + 1), F = 0; F <= O; F++)
              D[F] = v[F];
            for (_ = numeric.dot(h.Q, D), F = 0; F <= O; F++)
              v[F] = _[F];
            for (D = Array(r - O - 1), F = O + 1; F < r; F++)
              D[F - O - 1] = v[F];
            for (_ = numeric.dot(b.Q, D), F = O + 1; F < r; F++)
              v[F] = _[F - O - 1];
            return { Q: v, B: h.B.concat(numeric.add(b.B, O + 1)) };
          }
        for (J = Math.min(r - 1, x + 3), i = Array(J - x), F = x + 1; F <= J; F++)
          i[F - x - 1] = M[F][x];
        for (s = numeric.house(i), D = numeric.getBlock(M, [x + 1, x], [J, r - 1]), _ = numeric.tensor(s, numeric.dot(s, D)), F = x + 1; F <= J; F++)
          for (p = M[F], L = _[F - x - 1], O = x; O < r; O++) p[O] -= 2 * L[O - x];
        for (D = numeric.getBlock(M, [0, x + 1], [r - 1, J]), _ = numeric.tensor(numeric.dot(D, s), s), F = 0; F < r; F++)
          for (p = M[F], L = _[F], O = x + 1; O <= J; O++) p[O] -= 2 * L[O - x - 1];
        for (D = Array(J - x), F = x + 1; F <= J; F++) D[F - x - 1] = v[F];
        for (_ = numeric.tensor(s, numeric.dot(s, D)), F = x + 1; F <= J; F++)
          for (m = v[F], L = _[F - x - 1], O = 0; O < r; O++) m[O] -= 2 * L[O];
      }
    }
    throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?");
  }, numeric.eig = function(t, n) {
    var r = numeric.toUpperHessenberg(t), i = numeric.QRFrancis(r.H, n), s = numeric.T, ee = t.length, e, c, f = i.B, o = numeric.dot(i.Q, numeric.dot(r.H, numeric.transpose(i.Q))), l = new s(numeric.dot(i.Q, r.Q)), u, y = f.length, v, m, p, D, _, L, F, x, O, R, I, h, b, Z, G = Math.sqrt;
    for (c = 0; c < y; c++)
      if (e = f[c][0], e !== f[c][1]) {
        if (v = e + 1, m = o[e][e], p = o[e][v], D = o[v][e], _ = o[v][v], p === 0 && D === 0) continue;
        L = -m - _, F = m * _ - p * D, x = L * L - 4 * F, x >= 0 ? (L < 0 ? O = -0.5 * (L - G(x)) : O = -0.5 * (L + G(x)), b = (m - O) * (m - O) + p * p, Z = D * D + (_ - O) * (_ - O), b > Z ? (b = G(b), I = (m - O) / b, h = p / b) : (Z = G(Z), I = D / Z, h = (_ - O) / Z), u = new s([[h, -I], [I, h]]), l.setRows(e, v, u.dot(l.getRows(e, v)))) : (O = -0.5 * L, R = 0.5 * G(-x), b = (m - O) * (m - O) + p * p, Z = D * D + (_ - O) * (_ - O), b > Z ? (b = G(b + R * R), I = (m - O) / b, h = p / b, O = 0, R /= b) : (Z = G(Z + R * R), I = D / Z, h = (_ - O) / Z, O = R / Z, R = 0), u = new s([[h, -I], [I, h]], [[O, R], [R, -O]]), l.setRows(e, v, u.dot(l.getRows(e, v))));
      }
    var J = l.dot(t).dot(l.transjugate()), ee = t.length, se = numeric.T.identity(ee);
    for (v = 0; v < ee; v++)
      if (v > 0)
        for (c = v - 1; c >= 0; c--) {
          var Se = J.get([c, c]), De = J.get([v, v]);
          if (numeric.neq(Se.x, De.x) || numeric.neq(Se.y, De.y))
            O = J.getRow(c).getBlock([c], [v - 1]), R = se.getRow(v).getBlock([c], [v - 1]), se.set([v, c], J.get([c, v]).neg().sub(O.dot(R)).div(Se.sub(De)));
          else {
            se.setRow(v, se.getRow(c));
            continue;
          }
        }
    for (v = 0; v < ee; v++)
      O = se.getRow(v), se.setRow(v, O.div(O.norm2()));
    return se = se.transpose(), se = l.transjugate().dot(se), { lambda: J.getDiag(), E: se };
  }, numeric.ccsSparse = function(t) {
    var n = t.length, c, r, i, s, e = [];
    for (i = n - 1; i !== -1; --i) {
      r = t[i];
      for (s in r) {
        for (s = parseInt(s); s >= e.length; ) e[e.length] = 0;
        r[s] !== 0 && e[s]++;
      }
    }
    var c = e.length, f = Array(c + 1);
    for (f[0] = 0, i = 0; i < c; ++i) f[i + 1] = f[i] + e[i];
    var o = Array(f[c]), l = Array(f[c]);
    for (i = n - 1; i !== -1; --i) {
      r = t[i];
      for (s in r)
        r[s] !== 0 && (e[s]--, o[f[s] + e[s]] = i, l[f[s] + e[s]] = r[s]);
    }
    return [f, o, l];
  }, numeric.ccsFull = function(t) {
    var n = t[0], r = t[1], i = t[2], s = numeric.ccsDim(t), e = s[0], c = s[1], f, o, l, u, y = numeric.rep([e, c], 0);
    for (f = 0; f < c; f++)
      for (l = n[f], u = n[f + 1], o = l; o < u; ++o)
        y[r[o]][f] = i[o];
    return y;
  }, numeric.ccsTSolve = function(t, n, r, i, s) {
    var e = t[0], c = t[1], f = t[2], o = e.length - 1, l = Math.max, u = 0;
    typeof i > "u" && (r = numeric.rep([o], 0)), typeof i > "u" && (i = numeric.linspace(0, r.length - 1)), typeof s > "u" && (s = []);
    function y(x) {
      var O;
      if (r[x] === 0) {
        for (r[x] = 1, O = e[x]; O < e[x + 1]; ++O) y(c[O]);
        s[u] = x, ++u;
      }
    }
    var v, m, p, D, _, L, F;
    for (v = i.length - 1; v !== -1; --v)
      y(i[v]);
    for (s.length = u, v = s.length - 1; v !== -1; --v)
      r[s[v]] = 0;
    for (v = i.length - 1; v !== -1; --v)
      m = i[v], r[m] = n[m];
    for (v = s.length - 1; v !== -1; --v) {
      for (m = s[v], p = e[m], D = l(e[m + 1], p), _ = p; _ !== D; ++_)
        if (c[_] === m) {
          r[m] /= f[_];
          break;
        }
      for (F = r[m], _ = p; _ !== D; ++_)
        L = c[_], L !== m && (r[L] -= F * f[_]);
    }
    return r;
  }, numeric.ccsDFS = function(t) {
    this.k = Array(t), this.k1 = Array(t), this.j = Array(t);
  }, numeric.ccsDFS.prototype.dfs = function(t, n, r, i, s, e) {
    var c = 0, f, o = s.length, l = this.k, u = this.k1, y = this.j, v, m;
    if (i[t] === 0)
      for (i[t] = 1, y[0] = t, l[0] = v = n[t], u[0] = m = n[t + 1]; ; )
        if (v >= m) {
          if (s[o] = y[c], c === 0) return;
          ++o, --c, v = l[c], m = u[c];
        } else
          f = e[r[v]], i[f] === 0 ? (i[f] = 1, l[c] = v, ++c, y[c] = f, v = n[f], u[c] = m = n[f + 1]) : ++v;
  }, numeric.ccsLPSolve = function(t, n, r, i, s, e, c) {
    var f = t[0], o = t[1], l = t[2];
    f.length - 1;
    var u = n[0], y = n[1], v = n[2], m, p, D, _, L, F, x, O, R;
    for (p = u[s], D = u[s + 1], i.length = 0, m = p; m < D; ++m)
      c.dfs(e[y[m]], f, o, r, i, e);
    for (m = i.length - 1; m !== -1; --m)
      r[i[m]] = 0;
    for (m = p; m !== D; ++m)
      _ = e[y[m]], r[_] = v[m];
    for (m = i.length - 1; m !== -1; --m) {
      for (_ = i[m], L = f[_], F = f[_ + 1], x = L; x < F; ++x)
        if (e[o[x]] === _) {
          r[_] /= l[x];
          break;
        }
      for (R = r[_], x = L; x < F; ++x)
        O = e[o[x]], O !== _ && (r[O] -= R * l[x]);
    }
    return r;
  }, numeric.ccsLUP1 = function(t, n) {
    var r = t[0].length - 1, i = [numeric.rep([r + 1], 0), [], []], s = [numeric.rep([r + 1], 0), [], []], e = i[0], c = i[1], f = i[2], o = s[0], l = s[1], u = s[2], y = numeric.rep([r], 0), v = numeric.rep([r], 0), m, p, D, _, L, F, x, O = numeric.ccsLPSolve, R = Math.abs, I = numeric.linspace(0, r - 1), h = numeric.linspace(0, r - 1), b = new numeric.ccsDFS(r);
    for (typeof n > "u" && (n = 1), m = 0; m < r; ++m) {
      for (O(i, t, y, v, m, h, b), _ = -1, L = -1, p = v.length - 1; p !== -1; --p)
        D = v[p], !(D <= m) && (F = R(y[D]), F > _ && (L = D, _ = F));
      for (R(y[m]) < n * _ && (p = I[m], _ = I[L], I[m] = _, h[_] = m, I[L] = p, h[p] = L, _ = y[m], y[m] = y[L], y[L] = _), _ = e[m], L = o[m], x = y[m], c[_] = I[m], f[_] = 1, ++_, p = v.length - 1; p !== -1; --p)
        D = v[p], F = y[D], v[p] = 0, y[D] = 0, D <= m ? (l[L] = D, u[L] = F, ++L) : (c[_] = I[D], f[_] = F / x, ++_);
      e[m + 1] = _, o[m + 1] = L;
    }
    for (p = c.length - 1; p !== -1; --p)
      c[p] = h[c[p]];
    return { L: i, U: s, P: I, Pinv: h };
  }, numeric.ccsDFS0 = function(t) {
    this.k = Array(t), this.k1 = Array(t), this.j = Array(t);
  }, numeric.ccsDFS0.prototype.dfs = function(t, n, r, i, s, e, c) {
    var f = 0, o, l = s.length, u = this.k, y = this.k1, v = this.j, m, p;
    if (i[t] === 0)
      for (i[t] = 1, v[0] = t, u[0] = m = n[e[t]], y[0] = p = n[e[t] + 1]; ; ) {
        if (isNaN(m)) throw new Error("Ow!");
        if (m >= p) {
          if (s[l] = e[v[f]], f === 0) return;
          ++l, --f, m = u[f], p = y[f];
        } else
          o = r[m], i[o] === 0 ? (i[o] = 1, u[f] = m, ++f, v[f] = o, o = e[o], m = n[o], y[f] = p = n[o + 1]) : ++m;
      }
  }, numeric.ccsLPSolve0 = function(t, n, r, i, s, e, c, f) {
    var o = t[0], l = t[1], u = t[2];
    o.length - 1;
    var y = n[0], v = n[1], m = n[2], p, D, _, L, F, x, O, R, I;
    for (D = y[s], _ = y[s + 1], i.length = 0, p = D; p < _; ++p)
      f.dfs(v[p], o, l, r, i, e, c);
    for (p = i.length - 1; p !== -1; --p)
      L = i[p], r[c[L]] = 0;
    for (p = D; p !== _; ++p)
      L = v[p], r[L] = m[p];
    for (p = i.length - 1; p !== -1; --p) {
      for (L = i[p], R = c[L], F = o[L], x = o[L + 1], O = F; O < x; ++O)
        if (l[O] === R) {
          r[R] /= u[O];
          break;
        }
      for (I = r[R], O = F; O < x; ++O) r[l[O]] -= I * u[O];
      r[R] = I;
    }
  }, numeric.ccsLUP0 = function(t, n) {
    var r = t[0].length - 1, i = [numeric.rep([r + 1], 0), [], []], s = [numeric.rep([r + 1], 0), [], []], e = i[0], c = i[1], f = i[2], o = s[0], l = s[1], u = s[2], y = numeric.rep([r], 0), v = numeric.rep([r], 0), m, p, D, _, L, F, x, O = numeric.ccsLPSolve0, R = Math.abs, I = numeric.linspace(0, r - 1), h = numeric.linspace(0, r - 1), b = new numeric.ccsDFS0(r);
    for (typeof n > "u" && (n = 1), m = 0; m < r; ++m) {
      for (O(i, t, y, v, m, h, I, b), _ = -1, L = -1, p = v.length - 1; p !== -1; --p)
        D = v[p], !(D <= m) && (F = R(y[I[D]]), F > _ && (L = D, _ = F));
      for (R(y[I[m]]) < n * _ && (p = I[m], _ = I[L], I[m] = _, h[_] = m, I[L] = p, h[p] = L), _ = e[m], L = o[m], x = y[I[m]], c[_] = I[m], f[_] = 1, ++_, p = v.length - 1; p !== -1; --p)
        D = v[p], F = y[I[D]], v[p] = 0, y[I[D]] = 0, D <= m ? (l[L] = D, u[L] = F, ++L) : (c[_] = I[D], f[_] = F / x, ++_);
      e[m + 1] = _, o[m + 1] = L;
    }
    for (p = c.length - 1; p !== -1; --p)
      c[p] = h[c[p]];
    return { L: i, U: s, P: I, Pinv: h };
  }, numeric.ccsLUP = numeric.ccsLUP0, numeric.ccsDim = function(t) {
    return [numeric.sup(t[1]) + 1, t[0].length - 1];
  }, numeric.ccsGetBlock = function(t, n, r) {
    var i = numeric.ccsDim(t), s = i[0], e = i[1];
    typeof n > "u" ? n = numeric.linspace(0, s - 1) : typeof n == "number" && (n = [n]), typeof r > "u" ? r = numeric.linspace(0, e - 1) : typeof r == "number" && (r = [r]);
    var c, f = n.length, o, l = r.length, u, y, v, m = numeric.rep([e], 0), p = [], D = [], _ = [m, p, D], L = t[0], F = t[1], x = t[2], O = numeric.rep([s], 0), R = 0, I = numeric.rep([s], 0);
    for (o = 0; o < l; ++o) {
      y = r[o];
      var h = L[y], b = L[y + 1];
      for (c = h; c < b; ++c)
        u = F[c], I[u] = 1, O[u] = x[c];
      for (c = 0; c < f; ++c)
        v = n[c], I[v] && (p[R] = c, D[R] = O[n[c]], ++R);
      for (c = h; c < b; ++c)
        u = F[c], I[u] = 0;
      m[o + 1] = R;
    }
    return _;
  }, numeric.ccsDot = function(t, n) {
    var r = t[0], i = t[1], s = t[2], e = n[0], c = n[1], f = n[2], o = numeric.ccsDim(t), l = numeric.ccsDim(n), u = o[0];
    o[1];
    var y = l[1], v = numeric.rep([u], 0), m = numeric.rep([u], 0), p = Array(u), D = numeric.rep([y], 0), _ = [], L = [], F = [D, _, L], x, O, R, I, h, b, Z, G, J, ee, se;
    for (R = 0; R !== y; ++R) {
      for (I = e[R], h = e[R + 1], J = 0, O = I; O < h; ++O)
        for (ee = c[O], se = f[O], b = r[ee], Z = r[ee + 1], x = b; x < Z; ++x)
          G = i[x], m[G] === 0 && (p[J] = G, m[G] = 1, J = J + 1), v[G] = v[G] + s[x] * se;
      for (I = D[R], h = I + J, D[R + 1] = h, O = J - 1; O !== -1; --O)
        se = I + O, x = p[O], _[se] = x, L[se] = v[x], m[x] = 0, v[x] = 0;
      D[R + 1] = D[R] + J;
    }
    return F;
  }, numeric.ccsLUPSolve = function(t, n) {
    var r = t.L, i = t.U;
    t.P;
    var s = n[0], e = !1;
    typeof s != "object" && (n = [[0, n.length], numeric.linspace(0, n.length - 1), n], s = n[0], e = !0);
    var c = n[1], f = n[2], o = r[0].length - 1, l = s.length - 1, u = numeric.rep([o], 0), y = Array(o), v = numeric.rep([o], 0), m = Array(o), p = numeric.rep([l + 1], 0), D = [], _ = [], L = numeric.ccsTSolve, F, x, O, R, I, h, b = 0;
    for (F = 0; F < l; ++F) {
      for (I = 0, O = s[F], R = s[F + 1], x = O; x < R; ++x)
        h = t.Pinv[c[x]], m[I] = h, v[h] = f[x], ++I;
      for (m.length = I, L(r, v, u, m, y), x = m.length - 1; x !== -1; --x) v[m[x]] = 0;
      if (L(i, u, v, y, m), e) return v;
      for (x = y.length - 1; x !== -1; --x) u[y[x]] = 0;
      for (x = m.length - 1; x !== -1; --x)
        h = m[x], D[b] = h, _[b] = v[h], v[h] = 0, ++b;
      p[F + 1] = b;
    }
    return [p, D, _];
  }, numeric.ccsbinop = function(t, n) {
    return typeof n > "u" && (n = ""), Function(
      "X",
      "Y",
      `var Xi = X[0], Xj = X[1], Xv = X[2];
var Yi = Y[0], Yj = Y[1], Yv = Y[2];
var n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;
var Zi = numeric.rep([n+1],0), Zj = [], Zv = [];
var x = numeric.rep([m],0),y = numeric.rep([m],0);
var xk,yk,zk;
var i,j,j0,j1,k,p=0;
` + n + `for(i=0;i<n;++i) {
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Xj[j];
    x[k] = 1;
    Zj[p] = k;
    ++p;
  }
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Yj[j];
    y[k] = Yv[j];
    if(x[k] === 0) {
      Zj[p] = k;
      ++p;
    }
  }
  Zi[i+1] = p;
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];
  j0 = Zi[i]; j1 = Zi[i+1];
  for(j=j0;j!==j1;++j) {
    k = Zj[j];
    xk = x[k];
    yk = y[k];
` + t + `
    Zv[j] = zk;
  }
  j0 = Xi[i]; j1 = Xi[i+1];
  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;
  j0 = Yi[i]; j1 = Yi[i+1];
  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;
}
return [Zi,Zj,Zv];`
    );
  }, function() {
    var k, A, B, C;
    for (k in numeric.ops2)
      isFinite(eval("1" + numeric.ops2[k] + "0")) ? A = "[Y[0],Y[1],numeric." + k + "(X,Y[2])]" : A = "NaN", isFinite(eval("0" + numeric.ops2[k] + "1")) ? B = "[X[0],X[1],numeric." + k + "(X[2],Y)]" : B = "NaN", isFinite(eval("1" + numeric.ops2[k] + "0")) && isFinite(eval("0" + numeric.ops2[k] + "1")) ? C = "numeric.ccs" + k + "MM(X,Y)" : C = "NaN", numeric["ccs" + k + "MM"] = numeric.ccsbinop("zk = xk " + numeric.ops2[k] + "yk;"), numeric["ccs" + k] = Function(
        "X",
        "Y",
        'if(typeof X === "number") return ' + A + `;
if(typeof Y === "number") return ` + B + `;
return ` + C + `;
`
      );
  }(), numeric.ccsScatter = function M(t) {
    var n = t[0], r = t[1], i = t[2], s = numeric.sup(r) + 1, e = n.length, c = numeric.rep([s], 0), f = Array(e), o = Array(e), l = numeric.rep([s], 0), u;
    for (u = 0; u < e; ++u) l[r[u]]++;
    for (u = 0; u < s; ++u) c[u + 1] = c[u] + l[u];
    var y = c.slice(0), v, m;
    for (u = 0; u < e; ++u)
      m = r[u], v = y[m], f[v] = n[u], o[v] = i[u], y[m] = y[m] + 1;
    return [c, f, o];
  }, numeric.ccsGather = function M(t) {
    var n = t[0], r = t[1], i = t[2], s = n.length - 1, e = r.length, c = Array(e), f = Array(e), o = Array(e), l, u, y, v, m;
    for (m = 0, l = 0; l < s; ++l)
      for (y = n[l], v = n[l + 1], u = y; u !== v; ++u)
        f[m] = l, c[m] = r[u], o[m] = i[u], ++m;
    return [c, f, o];
  }, numeric.sdim = function M(t, n, r) {
    if (typeof n > "u" && (n = []), typeof t != "object") return n;
    typeof r > "u" && (r = 0), r in n || (n[r] = 0), t.length > n[r] && (n[r] = t.length);
    var i;
    for (i in t)
      t.hasOwnProperty(i) && M(t[i], n, r + 1);
    return n;
  }, numeric.sclone = function M(t, n, r) {
    typeof n > "u" && (n = 0), typeof r > "u" && (r = numeric.sdim(t).length);
    var i, s = Array(t.length);
    if (n === r - 1) {
      for (i in t)
        t.hasOwnProperty(i) && (s[i] = t[i]);
      return s;
    }
    for (i in t)
      t.hasOwnProperty(i) && (s[i] = M(t[i], n + 1, r));
    return s;
  }, numeric.sdiag = function M(t) {
    var n = t.length, r, i = Array(n), s;
    for (r = n - 1; r >= 1; r -= 2)
      s = r - 1, i[r] = [], i[r][r] = t[r], i[s] = [], i[s][s] = t[s];
    return r === 0 && (i[0] = [], i[0][0] = t[r]), i;
  }, numeric.sidentity = function M(t) {
    return numeric.sdiag(numeric.rep([t], 1));
  }, numeric.stranspose = function M(t) {
    var n = [];
    t.length;
    var r, i, s;
    for (r in t)
      if (t.hasOwnProperty(r)) {
        s = t[r];
        for (i in s)
          s.hasOwnProperty(i) && (typeof n[i] != "object" && (n[i] = []), n[i][r] = s[i]);
      }
    return n;
  }, numeric.sLUP = function M(t, n) {
    throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.");
  }, numeric.sdotMM = function M(t, n) {
    var r = t.length;
    n.length;
    var i = numeric.stranspose(n), s = i.length, e, c, f, o, l, u, y = Array(r), v;
    for (f = r - 1; f >= 0; f--) {
      for (v = [], e = t[f], l = s - 1; l >= 0; l--) {
        u = 0, c = i[l];
        for (o in e)
          e.hasOwnProperty(o) && o in c && (u += e[o] * c[o]);
        u && (v[l] = u);
      }
      y[f] = v;
    }
    return y;
  }, numeric.sdotMV = function M(t, n) {
    var r = t.length, i, s, e, c = Array(r), f;
    for (s = r - 1; s >= 0; s--) {
      i = t[s], f = 0;
      for (e in i)
        i.hasOwnProperty(e) && n[e] && (f += i[e] * n[e]);
      f && (c[s] = f);
    }
    return c;
  }, numeric.sdotVM = function M(t, n) {
    var r, i, s, e, c = [];
    for (r in t)
      if (t.hasOwnProperty(r)) {
        s = n[r], e = t[r];
        for (i in s)
          s.hasOwnProperty(i) && (c[i] || (c[i] = 0), c[i] += e * s[i]);
      }
    return c;
  }, numeric.sdotVV = function M(t, n) {
    var r, i = 0;
    for (r in t)
      t[r] && n[r] && (i += t[r] * n[r]);
    return i;
  }, numeric.sdot = function M(t, n) {
    var r = numeric.sdim(t).length, i = numeric.sdim(n).length, s = r * 1e3 + i;
    switch (s) {
      case 0:
        return t * n;
      case 1001:
        return numeric.sdotVV(t, n);
      case 2001:
        return numeric.sdotMV(t, n);
      case 1002:
        return numeric.sdotVM(t, n);
      case 2002:
        return numeric.sdotMM(t, n);
      default:
        throw new Error("numeric.sdot not implemented for tensors of order " + r + " and " + i);
    }
  }, numeric.sscatter = function M(t) {
    var n = t[0].length, r, i, s, e = t.length, c = [], f;
    for (i = n - 1; i >= 0; --i)
      if (t[e - 1][i]) {
        for (f = c, s = 0; s < e - 2; s++)
          r = t[s][i], f[r] || (f[r] = []), f = f[r];
        f[t[s][i]] = t[s + 1][i];
      }
    return c;
  }, numeric.sgather = function M(t, n, r) {
    typeof n > "u" && (n = []), typeof r > "u" && (r = []);
    var i, s, e;
    i = r.length;
    for (s in t)
      if (t.hasOwnProperty(s))
        if (r[i] = parseInt(s), e = t[s], typeof e == "number") {
          if (e) {
            if (n.length === 0)
              for (s = i + 1; s >= 0; --s) n[s] = [];
            for (s = i; s >= 0; --s) n[s].push(r[s]);
            n[i + 1].push(e);
          }
        } else M(e, n, r);
    return r.length > i && r.pop(), n;
  }, numeric.cLU = function M(t) {
    var n = t[0], r = t[1], i = t[2], b = n.length, s = 0, e, c, f, o, l, u;
    for (e = 0; e < b; e++) n[e] > s && (s = n[e]);
    s++;
    var y = Array(s), v = Array(s), m = numeric.rep([s], 1 / 0), p = numeric.rep([s], -1 / 0), F, x, D;
    for (f = 0; f < b; f++)
      e = n[f], c = r[f], c < m[e] && (m[e] = c), c > p[e] && (p[e] = c);
    for (e = 0; e < s - 1; e++)
      p[e] > p[e + 1] && (p[e + 1] = p[e]);
    for (e = s - 1; e >= 1; e--)
      m[e] < m[e - 1] && (m[e - 1] = m[e]);
    var _ = 0, L = 0;
    for (e = 0; e < s; e++)
      v[e] = numeric.rep([p[e] - m[e] + 1], 0), y[e] = numeric.rep([e - m[e]], 0), _ += e - m[e] + 1, L += p[e] - e + 1;
    for (f = 0; f < b; f++)
      e = n[f], v[e][r[f] - m[e]] = i[f];
    for (e = 0; e < s - 1; e++)
      for (o = e - m[e], F = v[e], c = e + 1; m[c] <= e && c < s; c++)
        if (l = e - m[c], u = p[e] - e, x = v[c], D = x[l] / F[o], D) {
          for (f = 1; f <= u; f++)
            x[f + l] -= D * F[f + o];
          y[c][e - m[c]] = D;
        }
    var F = [], x = [], O = [], R = [], I = [], h = [], b, Z, G;
    for (b = 0, Z = 0, e = 0; e < s; e++) {
      for (o = m[e], l = p[e], G = v[e], c = e; c <= l; c++)
        G[c - o] && (F[b] = e, x[b] = c, O[b] = G[c - o], b++);
      for (G = y[e], c = o; c < e; c++)
        G[c - o] && (R[Z] = e, I[Z] = c, h[Z] = G[c - o], Z++);
      R[Z] = e, I[Z] = e, h[Z] = 1, Z++;
    }
    return { U: [F, x, O], L: [R, I, h] };
  }, numeric.cLUsolve = function M(t, n) {
    var r = t.L, i = t.U, s = numeric.clone(n), e = r[0], c = r[1], f = r[2], o = i[0], l = i[1], u = i[2], y = o.length;
    e.length;
    var v = s.length, m, p;
    for (p = 0, m = 0; m < v; m++) {
      for (; c[p] < m; )
        s[m] -= f[p] * s[c[p]], p++;
      p++;
    }
    for (p = y - 1, m = v - 1; m >= 0; m--) {
      for (; l[p] > m; )
        s[m] -= u[p] * s[l[p]], p--;
      s[m] /= u[p], p--;
    }
    return s;
  }, numeric.cgrid = function M(t, n) {
    typeof t == "number" && (t = [t, t]);
    var r = numeric.rep(t, -1), i, s, e;
    if (typeof n != "function")
      switch (n) {
        case "L":
          n = function(c, f) {
            return c >= t[0] / 2 || f < t[1] / 2;
          };
          break;
        default:
          n = function(c, f) {
            return !0;
          };
          break;
      }
    for (e = 0, i = 1; i < t[0] - 1; i++) for (s = 1; s < t[1] - 1; s++)
      n(i, s) && (r[i][s] = e, e++);
    return r;
  }, numeric.cdelsq = function M(t) {
    var n = [[-1, 0], [0, -1], [0, 1], [1, 0]], r = numeric.dim(t), i = r[0], s = r[1], e, c, f, o, l, u = [], y = [], v = [];
    for (e = 1; e < i - 1; e++) for (c = 1; c < s - 1; c++)
      if (!(t[e][c] < 0)) {
        for (f = 0; f < 4; f++)
          o = e + n[f][0], l = c + n[f][1], !(t[o][l] < 0) && (u.push(t[e][c]), y.push(t[o][l]), v.push(-1));
        u.push(t[e][c]), y.push(t[e][c]), v.push(4);
      }
    return [u, y, v];
  }, numeric.cdotMV = function M(t, n) {
    var r, i = t[0], s = t[1], e = t[2], c, f = i.length, o;
    for (o = 0, c = 0; c < f; c++)
      i[c] > o && (o = i[c]);
    for (o++, r = numeric.rep([o], 0), c = 0; c < f; c++)
      r[i[c]] += e[c] * n[s[c]];
    return r;
  }, numeric.Spline = function M(t, n, r, i, s) {
    this.x = t, this.yl = n, this.yr = r, this.kl = i, this.kr = s;
  }, numeric.Spline.prototype._at = function M(f, n) {
    var r = this.x, i = this.yl, s = this.yr, e = this.kl, c = this.kr, f, o, l, u, y = numeric.add, v = numeric.sub, m = numeric.mul;
    o = v(m(e[n], r[n + 1] - r[n]), v(s[n + 1], i[n])), l = y(m(c[n + 1], r[n] - r[n + 1]), v(s[n + 1], i[n])), u = (f - r[n]) / (r[n + 1] - r[n]);
    var p = u * (1 - u);
    return y(y(y(m(1 - u, i[n]), m(u, s[n + 1])), m(o, p * (1 - u))), m(l, p * u));
  }, numeric.Spline.prototype.at = function M(t) {
    if (typeof t == "number") {
      var n = this.x, c = n.length, r, i, s, e = Math.floor;
      for (r = 0, i = c - 1; i - r > 1; )
        s = e((r + i) / 2), n[s] <= t ? r = s : i = s;
      return this._at(t, r);
    }
    var c = t.length, f, o = Array(c);
    for (f = c - 1; f !== -1; --f) o[f] = this.at(t[f]);
    return o;
  }, numeric.Spline.prototype.diff = function M() {
    var t = this.x, n = this.yl, r = this.yr, i = this.kl, s = this.kr, e = n.length, c, f, o, l = i, u = s, y = Array(e), v = Array(e), m = numeric.add, p = numeric.mul, D = numeric.div, _ = numeric.sub;
    for (c = e - 1; c !== -1; --c)
      f = t[c + 1] - t[c], o = _(r[c + 1], n[c]), y[c] = D(m(p(o, 6), p(i[c], -4 * f), p(s[c + 1], -2 * f)), f * f), v[c + 1] = D(m(p(o, -6), p(i[c], 2 * f), p(s[c + 1], 4 * f)), f * f);
    return new numeric.Spline(t, l, u, y, v);
  }, numeric.Spline.prototype.roots = function M() {
    function t(w) {
      return w * w;
    }
    var D = [], n = this.x, r = this.yl, i = this.yr, s = this.kl, e = this.kr;
    typeof r[0] == "number" && (r = [r], i = [i], s = [s], e = [e]);
    var c = r.length, f = n.length - 1, o, l, u, y, v, m, p, D = Array(c), _, L, F, x, O, R, I, h, b, Z, G, J, ee, se, Se, De, _e = Math.sqrt;
    for (o = 0; o !== c; ++o) {
      for (y = r[o], v = i[o], m = s[o], p = e[o], _ = [], l = 0; l !== f; l++) {
        for (l > 0 && v[l] * y[l] < 0 && _.push(n[l]), b = n[l + 1] - n[l], n[l], x = y[l], O = v[l + 1], L = m[l] / b, F = p[l + 1] / b, h = t(L - F + 3 * (x - O)) + 12 * F * x, R = F + 3 * x + 2 * L - 3 * O, I = 3 * (F + L + 2 * (x - O)), h <= 0 ? (G = R / I, G > n[l] && G < n[l + 1] ? Z = [n[l], G, n[l + 1]] : Z = [n[l], n[l + 1]]) : (G = (R - _e(h)) / I, J = (R + _e(h)) / I, Z = [n[l]], G > n[l] && G < n[l + 1] && Z.push(G), J > n[l] && J < n[l + 1] && Z.push(J), Z.push(n[l + 1])), se = Z[0], G = this._at(se, l), u = 0; u < Z.length - 1; u++) {
          if (Se = Z[u + 1], J = this._at(Se, l), G === 0) {
            _.push(se), se = Se, G = J;
            continue;
          }
          if (J === 0 || G * J > 0) {
            se = Se, G = J;
            continue;
          }
          for (var N = 0; De = (G * Se - J * se) / (G - J), !(De <= se || De >= Se); )
            if (ee = this._at(De, l), ee * J > 0)
              Se = De, J = ee, N === -1 && (G *= 0.5), N = -1;
            else if (ee * G > 0)
              se = De, G = ee, N === 1 && (J *= 0.5), N = 1;
            else break;
          _.push(De), se = Z[u + 1], G = this._at(se, l);
        }
        J === 0 && _.push(Se);
      }
      D[o] = _;
    }
    return typeof this.yl[0] == "number" ? D[0] : D;
  }, numeric.spline = function M(t, n, r, i) {
    var s = t.length, e = [], c = [], f = [], o, l = numeric.sub, u = numeric.mul, y = numeric.add;
    for (o = s - 2; o >= 0; o--)
      c[o] = t[o + 1] - t[o], f[o] = l(n[o + 1], n[o]);
    (typeof r == "string" || typeof i == "string") && (r = i = "periodic");
    var v = [[], [], []];
    switch (typeof r) {
      case "undefined":
        e[0] = u(3 / (c[0] * c[0]), f[0]), v[0].push(0, 0), v[1].push(0, 1), v[2].push(2 / c[0], 1 / c[0]);
        break;
      case "string":
        e[0] = y(u(3 / (c[s - 2] * c[s - 2]), f[s - 2]), u(3 / (c[0] * c[0]), f[0])), v[0].push(0, 0, 0), v[1].push(s - 2, 0, 1), v[2].push(1 / c[s - 2], 2 / c[s - 2] + 2 / c[0], 1 / c[0]);
        break;
      default:
        e[0] = r, v[0].push(0), v[1].push(0), v[2].push(1);
        break;
    }
    for (o = 1; o < s - 1; o++)
      e[o] = y(u(3 / (c[o - 1] * c[o - 1]), f[o - 1]), u(3 / (c[o] * c[o]), f[o])), v[0].push(o, o, o), v[1].push(o - 1, o, o + 1), v[2].push(1 / c[o - 1], 2 / c[o - 1] + 2 / c[o], 1 / c[o]);
    switch (typeof i) {
      case "undefined":
        e[s - 1] = u(3 / (c[s - 2] * c[s - 2]), f[s - 2]), v[0].push(s - 1, s - 1), v[1].push(s - 2, s - 1), v[2].push(1 / c[s - 2], 2 / c[s - 2]);
        break;
      case "string":
        v[1][v[1].length - 1] = 0;
        break;
      default:
        e[s - 1] = i, v[0].push(s - 1), v[1].push(s - 1), v[2].push(1);
        break;
    }
    typeof e[0] != "number" ? e = numeric.transpose(e) : e = [e];
    var m = Array(e.length);
    if (typeof r == "string")
      for (o = m.length - 1; o !== -1; --o)
        m[o] = numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(v)), e[o]), m[o][s - 1] = m[o][0];
    else
      for (o = m.length - 1; o !== -1; --o)
        m[o] = numeric.cLUsolve(numeric.cLU(v), e[o]);
    return typeof n[0] == "number" ? m = m[0] : m = numeric.transpose(m), new numeric.Spline(t, n, n, m, m);
  }, numeric.fftpow2 = function M(t, n) {
    var r = t.length;
    if (r !== 1) {
      var i = Math.cos, s = Math.sin, e, c, f = Array(r / 2), o = Array(r / 2), l = Array(r / 2), u = Array(r / 2);
      for (c = r / 2, e = r - 1; e !== -1; --e)
        --c, l[c] = t[e], u[c] = n[e], --e, f[c] = t[e], o[c] = n[e];
      M(f, o), M(l, u), c = r / 2;
      var y, v = -6.283185307179586 / r, m, p;
      for (e = r - 1; e !== -1; --e)
        --c, c === -1 && (c = r / 2 - 1), y = v * e, m = i(y), p = s(y), t[e] = f[c] + m * l[c] - p * u[c], n[e] = o[c] + m * u[c] + p * l[c];
    }
  }, numeric._ifftpow2 = function M(t, n) {
    var r = t.length;
    if (r !== 1) {
      var i = Math.cos, s = Math.sin, e, c, f = Array(r / 2), o = Array(r / 2), l = Array(r / 2), u = Array(r / 2);
      for (c = r / 2, e = r - 1; e !== -1; --e)
        --c, l[c] = t[e], u[c] = n[e], --e, f[c] = t[e], o[c] = n[e];
      M(f, o), M(l, u), c = r / 2;
      var y, v = 6.283185307179586 / r, m, p;
      for (e = r - 1; e !== -1; --e)
        --c, c === -1 && (c = r / 2 - 1), y = v * e, m = i(y), p = s(y), t[e] = f[c] + m * l[c] - p * u[c], n[e] = o[c] + m * u[c] + p * l[c];
    }
  }, numeric.ifftpow2 = function M(t, n) {
    numeric._ifftpow2(t, n), numeric.diveq(t, t.length), numeric.diveq(n, n.length);
  }, numeric.convpow2 = function M(t, n, r, i) {
    numeric.fftpow2(t, n), numeric.fftpow2(r, i);
    var s, e = t.length, c, f, o, l;
    for (s = e - 1; s !== -1; --s)
      c = t[s], o = n[s], f = r[s], l = i[s], t[s] = c * f - o * l, n[s] = c * l + o * f;
    numeric.ifftpow2(t, n);
  }, numeric.T.prototype.fft = function M() {
    var t = this.x, n = this.y, r = t.length, i = Math.log, s = i(2), e = Math.ceil(i(2 * r - 1) / s), c = Math.pow(2, e), f = numeric.rep([c], 0), o = numeric.rep([c], 0), l = Math.cos, u = Math.sin, y, v = -3.141592653589793 / r, m, p = numeric.rep([c], 0), D = numeric.rep([c], 0);
    for (y = 0; y < r; y++) p[y] = t[y];
    if (typeof n < "u") for (y = 0; y < r; y++) D[y] = n[y];
    for (f[0] = 1, y = 1; y <= c / 2; y++)
      m = v * y * y, f[y] = l(m), o[y] = u(m), f[c - y] = l(m), o[c - y] = u(m);
    var _ = new numeric.T(p, D), L = new numeric.T(f, o);
    return _ = _.mul(L), numeric.convpow2(_.x, _.y, numeric.clone(L.x), numeric.neg(L.y)), _ = _.mul(L), _.x.length = r, _.y.length = r, _;
  }, numeric.T.prototype.ifft = function M() {
    var t = this.x, n = this.y, r = t.length, i = Math.log, s = i(2), e = Math.ceil(i(2 * r - 1) / s), c = Math.pow(2, e), f = numeric.rep([c], 0), o = numeric.rep([c], 0), l = Math.cos, u = Math.sin, y, v = 3.141592653589793 / r, m, p = numeric.rep([c], 0), D = numeric.rep([c], 0);
    for (y = 0; y < r; y++) p[y] = t[y];
    if (typeof n < "u") for (y = 0; y < r; y++) D[y] = n[y];
    for (f[0] = 1, y = 1; y <= c / 2; y++)
      m = v * y * y, f[y] = l(m), o[y] = u(m), f[c - y] = l(m), o[c - y] = u(m);
    var _ = new numeric.T(p, D), L = new numeric.T(f, o);
    return _ = _.mul(L), numeric.convpow2(_.x, _.y, numeric.clone(L.x), numeric.neg(L.y)), _ = _.mul(L), _.x.length = r, _.y.length = r, _.div(r);
  }, numeric.gradient = function M(t, n) {
    var r = n.length, i = t(n);
    if (isNaN(i)) throw new Error("gradient: f(x) is a NaN!");
    var u = Math.max, s, e = numeric.clone(n), c, f, o = Array(r);
    numeric.div, numeric.sub;
    var l, u = Math.max, y = 1e-3, v = Math.abs, m = Math.min, p, D, _, L = 0, F, x, O;
    for (s = 0; s < r; s++)
      for (var R = u(1e-6 * i, 1e-8); ; ) {
        if (++L, L > 20)
          throw new Error("Numerical gradient fails");
        if (e[s] = n[s] + R, c = t(e), e[s] = n[s] - R, f = t(e), e[s] = n[s], isNaN(c) || isNaN(f)) {
          R /= 16;
          continue;
        }
        if (o[s] = (c - f) / (2 * R), p = n[s] - R, D = n[s], _ = n[s] + R, F = (c - i) / R, x = (i - f) / R, O = u(v(o[s]), v(i), v(c), v(f), v(p), v(D), v(_), 1e-8), l = m(u(v(F - o[s]), v(x - o[s]), v(F - x)) / O, R / O), l > y)
          R /= 16;
        else break;
      }
    return o;
  }, numeric.uncmin = function M(t, n, r, i, s, e, c) {
    var f = numeric.gradient;
    typeof c > "u" && (c = {}), typeof r > "u" && (r = 1e-8), typeof i > "u" && (i = function(te) {
      return f(t, te);
    }), typeof s > "u" && (s = 1e3), n = numeric.clone(n);
    var o = n.length, l = t(n), u, y;
    if (isNaN(l)) throw new Error("uncmin: f(x0) is a NaN!");
    var v = Math.max, m = numeric.norm2;
    r = v(r, numeric.epsilon);
    var p, D, _, L = c.Hinv || numeric.identity(o), F = numeric.dot;
    numeric.inv;
    var x = numeric.sub, O = numeric.add, R = numeric.tensor, I = numeric.div, h = numeric.mul, b = numeric.all, Z = numeric.isFinite, G = numeric.neg, J = 0, ee, se, Se, De, _e, N, w, z = "";
    for (D = i(n); J < s; ) {
      if (typeof e == "function" && e(J, n, l, D, L)) {
        z = "Callback returned true";
        break;
      }
      if (!b(Z(D))) {
        z = "Gradient has Infinity or NaN";
        break;
      }
      if (p = G(F(L, D)), !b(Z(p))) {
        z = "Search direction has Infinity or NaN";
        break;
      }
      if (w = m(p), w < r) {
        z = "Newton step smaller than tol";
        break;
      }
      for (N = 1, y = F(D, p), se = n; J < s && !(N * w < r); ) {
        if (ee = h(p, N), se = O(n, ee), u = t(se), u - l >= 0.1 * N * y || isNaN(u)) {
          N *= 0.5, ++J;
          continue;
        }
        break;
      }
      if (N * w < r) {
        z = "Line search step size smaller than tol";
        break;
      }
      if (J === s) {
        z = "maxit reached during line search";
        break;
      }
      _ = i(se), Se = x(_, D), _e = F(Se, ee), De = F(L, Se), L = x(
        O(
          L,
          h(
            (_e + F(Se, De)) / (_e * _e),
            R(ee, ee)
          )
        ),
        I(O(R(De, ee), R(ee, De)), _e)
      ), n = se, l = u, D = _, ++J;
    }
    return { solution: n, f: l, gradient: D, invHessian: L, iterations: J, message: z };
  }, numeric.Dopri = function M(t, n, r, i, s, e, c) {
    this.x = t, this.y = n, this.f = r, this.ymid = i, this.iterations = s, this.events = c, this.message = e;
  }, numeric.Dopri.prototype._at = function M(p, n) {
    function r(h) {
      return h * h;
    }
    var i = this, s = i.x, e = i.y, c = i.f, f = i.ymid;
    s.length;
    var o, l, u, y, v, m, p, D, _ = 0.5, L = numeric.add, F = numeric.mul, x = numeric.sub, O, R, I;
    return o = s[n], l = s[n + 1], y = e[n], v = e[n + 1], D = l - o, u = o + _ * D, m = f[n], O = x(c[n], F(y, 1 / (o - u) + 2 / (o - l))), R = x(c[n + 1], F(v, 1 / (l - u) + 2 / (l - o))), I = [
      r(p - l) * (p - u) / r(o - l) / (o - u),
      r(p - o) * r(p - l) / r(o - u) / r(l - u),
      r(p - o) * (p - u) / r(l - o) / (l - u),
      (p - o) * r(p - l) * (p - u) / r(o - l) / (o - u),
      (p - l) * r(p - o) * (p - u) / r(o - l) / (l - u)
    ], L(
      L(
        L(
          L(
            F(y, I[0]),
            F(m, I[1])
          ),
          F(v, I[2])
        ),
        F(O, I[3])
      ),
      F(R, I[4])
    );
  }, numeric.Dopri.prototype.at = function M(t) {
    var n, r, i, s = Math.floor;
    if (typeof t != "number") {
      var e = t.length, c = Array(e);
      for (n = e - 1; n !== -1; --n)
        c[n] = this.at(t[n]);
      return c;
    }
    var f = this.x;
    for (n = 0, r = f.length - 1; r - n > 1; )
      i = s(0.5 * (n + r)), f[i] <= t ? n = i : r = i;
    return this._at(t, n);
  }, numeric.dopri = function M(t, n, r, i, s, e, c) {
    typeof s > "u" && (s = 1e-6), typeof e > "u" && (e = 1e3);
    var f = [t], o = [r], l = [i(t, r)], u, y, v, m, p, D, _ = [], L = 1 / 5, F = [3 / 40, 9 / 40], x = [44 / 45, -56 / 15, 32 / 9], O = [19372 / 6561, -25360 / 2187, 64448 / 6561, -212 / 729], R = [9017 / 3168, -355 / 33, 46732 / 5247, 49 / 176, -5103 / 18656], I = [35 / 384, 0, 500 / 1113, 125 / 192, -2187 / 6784, 11 / 84], h = [
      0.5 * 6025192743 / 30085553152,
      0,
      0.5 * 51252292925 / 65400821598,
      0.5 * -2691868925 / 45128329728,
      0.5 * 187940372067 / 1594534317056,
      0.5 * -1776094331 / 19743644256,
      0.5 * 11237099 / 235043384
    ], b = [1 / 5, 3 / 10, 4 / 5, 8 / 9, 1, 1], Z = [-71 / 57600, 0, 71 / 16695, -71 / 1920, 17253 / 339200, -22 / 525, 1 / 40], G = 0, J, ee, se = (n - t) / 10, Se = 0, De = numeric.add, _e = numeric.mul, N, w, z = Math.min, te = Math.abs, ie = numeric.norminf, ce = Math.pow, ge = numeric.any, S = numeric.lt, d = numeric.and;
    numeric.sub;
    var E, Q, j, X = new numeric.Dopri(f, o, l, _, -1, "");
    for (typeof c == "function" && (E = c(t, r)); t < n && Se < e; ) {
      if (++Se, t + se > n && (se = n - t), u = i(t + b[0] * se, De(r, _e(L * se, l[G]))), y = i(t + b[1] * se, De(De(r, _e(F[0] * se, l[G])), _e(F[1] * se, u))), v = i(t + b[2] * se, De(De(De(r, _e(x[0] * se, l[G])), _e(x[1] * se, u)), _e(x[2] * se, y))), m = i(t + b[3] * se, De(De(De(De(r, _e(O[0] * se, l[G])), _e(O[1] * se, u)), _e(O[2] * se, y)), _e(O[3] * se, v))), p = i(t + b[4] * se, De(De(De(De(De(r, _e(R[0] * se, l[G])), _e(R[1] * se, u)), _e(R[2] * se, y)), _e(R[3] * se, v)), _e(R[4] * se, m))), N = De(De(De(De(De(r, _e(l[G], se * I[0])), _e(y, se * I[2])), _e(v, se * I[3])), _e(m, se * I[4])), _e(p, se * I[5])), D = i(t + se, N), J = De(De(De(De(De(_e(l[G], se * Z[0]), _e(y, se * Z[2])), _e(v, se * Z[3])), _e(m, se * Z[4])), _e(p, se * Z[5])), _e(D, se * Z[6])), typeof J == "number" ? w = te(J) : w = ie(J), w > s) {
        if (se = 0.2 * se * ce(s / w, 0.25), t + se === t) {
          X.msg = "Step size became too small";
          break;
        }
        continue;
      }
      if (_[G] = De(
        De(
          De(
            De(
              De(
                De(
                  r,
                  _e(l[G], se * h[0])
                ),
                _e(y, se * h[2])
              ),
              _e(v, se * h[3])
            ),
            _e(m, se * h[4])
          ),
          _e(p, se * h[5])
        ),
        _e(D, se * h[6])
      ), ++G, f[G] = t + se, o[G] = N, l[G] = D, typeof c == "function") {
        var $, he = t, de = t + 0.5 * se, q;
        if (Q = c(de, _[G - 1]), j = d(S(E, 0), S(0, Q)), ge(j) || (he = de, de = t + se, E = Q, Q = c(de, N), j = d(S(E, 0), S(0, Q))), ge(j)) {
          for (var K, ne, fe = 0, le = 1, a = 1; ; ) {
            if (typeof E == "number") q = (a * Q * he - le * E * de) / (a * Q - le * E);
            else
              for (q = de, ee = E.length - 1; ee !== -1; --ee)
                E[ee] < 0 && Q[ee] > 0 && (q = z(q, (a * Q[ee] * he - le * E[ee] * de) / (a * Q[ee] - le * E[ee])));
            if (q <= he || q >= de) break;
            $ = X._at(q, G - 1), ne = c(q, $), K = d(S(E, 0), S(0, ne)), ge(K) ? (de = q, Q = ne, j = K, a = 1, fe === -1 ? le *= 0.5 : le = 1, fe = -1) : (he = q, E = ne, le = 1, fe === 1 ? a *= 0.5 : a = 1, fe = 1);
          }
          return N = X._at(0.5 * (t + q), G - 1), X.f[G] = i(q, $), X.x[G] = q, X.y[G] = $, X.ymid[G - 1] = N, X.events = j, X.iterations = Se, X;
        }
      }
      t += se, r = N, E = Q, se = z(0.8 * se * ce(s / w, 0.25), 4 * se);
    }
    return X.iterations = Se, X;
  }, numeric.LU = function(M, t) {
    t = t || !1;
    var n = Math.abs, r, i, s, e, c, f, o, l, u, y = M.length, v = y - 1, m = new Array(y);
    for (t || (M = numeric.clone(M)), s = 0; s < y; ++s) {
      for (o = s, f = M[s], u = n(f[s]), i = s + 1; i < y; ++i)
        e = n(M[i][s]), u < e && (u = e, o = i);
      for (m[s] = o, o != s && (M[s] = M[o], M[o] = f, f = M[s]), c = f[s], r = s + 1; r < y; ++r)
        M[r][s] /= c;
      for (r = s + 1; r < y; ++r) {
        for (l = M[r], i = s + 1; i < v; ++i)
          l[i] -= l[s] * f[i], ++i, l[i] -= l[s] * f[i];
        i === v && (l[i] -= l[s] * f[i]);
      }
    }
    return {
      LU: M,
      P: m
    };
  }, numeric.LUsolve = function M(t, n) {
    var r, i, s = t.LU, e = s.length, c = numeric.clone(n), f = t.P, o, l, u;
    for (r = e - 1; r !== -1; --r) c[r] = n[r];
    for (r = 0; r < e; ++r)
      for (o = f[r], f[r] !== r && (u = c[r], c[r] = c[o], c[o] = u), l = s[r], i = 0; i < r; ++i)
        c[r] -= c[i] * l[i];
    for (r = e - 1; r >= 0; --r) {
      for (l = s[r], i = r + 1; i < e; ++i)
        c[r] -= c[i] * l[i];
      c[r] /= l[r];
    }
    return c;
  }, numeric.solve = function M(t, n, r) {
    return numeric.LUsolve(numeric.LU(t, r), n);
  }, numeric.echelonize = function M(t) {
    var n = numeric.dim(t), r = n[0], i = n[1], s = numeric.identity(r), e = Array(r), c, f, o, l, u, y, v, m, p = Math.abs, D = numeric.diveq;
    for (t = numeric.clone(t), c = 0; c < r; ++c) {
      for (o = 0, u = t[c], y = s[c], f = 1; f < i; ++f) p(u[o]) < p(u[f]) && (o = f);
      for (e[c] = o, D(y, u[o]), D(u, u[o]), f = 0; f < r; ++f) if (f !== c) {
        for (v = t[f], m = v[o], l = i - 1; l !== -1; --l) v[l] -= u[l] * m;
        for (v = s[f], l = r - 1; l !== -1; --l) v[l] -= y[l] * m;
      }
    }
    return { I: s, A: t, P: e };
  }, numeric.__solveLP = function M(t, n, r, i, s, e, c) {
    var f = numeric.sum;
    numeric.log;
    var o = numeric.mul, l = numeric.sub, u = numeric.dot, y = numeric.div, v = numeric.add, m = t.length, p = r.length, D, _ = !1, L = 0, F = 1;
    numeric.transpose(n), numeric.svd;
    var x = numeric.transpose;
    numeric.leq;
    var O = Math.sqrt, R = Math.abs;
    numeric.muleq, numeric.norminf, numeric.any;
    var I = Math.min, h = numeric.all, b = numeric.gt, Z = Array(m), G = Array(p);
    numeric.rep([p], 1);
    var J, ee = numeric.solve, se = l(r, u(n, e)), Se, De = u(t, t), _e;
    for (Se = L; Se < s; ++Se) {
      var N, w;
      for (N = p - 1; N !== -1; --N) G[N] = y(n[N], se[N]);
      var z = x(G);
      for (N = m - 1; N !== -1; --N) Z[N] = /*x[i]+*/
      f(z[N]);
      F = 0.25 * R(De / u(t, Z));
      var te = 100 * O(De / u(Z, Z));
      for ((!isFinite(F) || F > te) && (F = te), _e = v(t, o(F, Z)), J = u(z, G), N = m - 1; N !== -1; --N) J[N][N] += 1;
      w = ee(J, y(_e, F), !0);
      var ie = y(se, u(n, w)), ce = 1;
      for (N = p - 1; N !== -1; --N) ie[N] < 0 && (ce = I(ce, -0.999 * ie[N]));
      if (D = l(e, o(w, ce)), se = l(r, u(n, D)), !h(b(se, 0))) return { solution: e, message: "", iterations: Se };
      if (e = D, F < i) return { solution: D, message: "", iterations: Se };
      if (c) {
        var ge = u(t, _e), S = u(n, _e);
        for (_ = !0, N = p - 1; N !== -1; --N) if (ge * S[N] < 0) {
          _ = !1;
          break;
        }
      } else
        e[m - 1] >= 0 ? _ = !1 : _ = !0;
      if (_) return { solution: D, message: "Unbounded", iterations: Se };
    }
    return { solution: e, message: "maximum iteration count exceeded", iterations: Se };
  }, numeric._solveLP = function M(t, n, r, i, s) {
    var e = t.length, c = r.length, m;
    numeric.sum, numeric.log, numeric.mul;
    var f = numeric.sub, o = numeric.dot;
    numeric.div, numeric.add;
    var l = numeric.rep([e], 0).concat([1]), u = numeric.rep([c, 1], -1), y = numeric.blockMatrix([[n, u]]), v = r, m = numeric.rep([e], 0).concat(Math.max(0, numeric.sup(numeric.neg(r))) + 1), p = numeric.__solveLP(l, y, v, i, s, m, !1), D = numeric.clone(p.solution);
    D.length = e;
    var _ = numeric.inf(f(r, o(n, D)));
    if (_ < 0)
      return { solution: NaN, message: "Infeasible", iterations: p.iterations };
    var L = numeric.__solveLP(t, n, r, i, s - p.iterations, D, !0);
    return L.iterations += p.iterations, L;
  }, numeric.solveLP = function M(t, n, r, i, s, e, c) {
    if (typeof c > "u" && (c = 1e3), typeof e > "u" && (e = numeric.epsilon), typeof i > "u") return numeric._solveLP(t, n, r, e, c);
    var f = i.length, o = i[0].length, l = n.length, u = numeric.echelonize(i), y = numeric.rep([o], 0), v = u.P, m = [], p;
    for (p = v.length - 1; p !== -1; --p) y[v[p]] = 1;
    for (p = o - 1; p !== -1; --p) y[p] === 0 && m.push(p);
    var D = numeric.getRange, _ = numeric.linspace(0, f - 1), L = numeric.linspace(0, l - 1), F = D(i, _, m), x = D(n, L, v), O = D(n, L, m), R = numeric.dot, I = numeric.sub, h = R(x, u.I), b = I(O, R(h, F)), Z = I(r, R(h, s)), G = Array(v.length), J = Array(m.length);
    for (p = v.length - 1; p !== -1; --p) G[p] = t[v[p]];
    for (p = m.length - 1; p !== -1; --p) J[p] = t[m[p]];
    var ee = I(J, R(G, R(u.I, F))), se = numeric._solveLP(ee, b, Z, e, c), Se = se.solution;
    if (Se !== Se) return se;
    var De = R(u.I, I(s, R(F, Se))), _e = Array(t.length);
    for (p = v.length - 1; p !== -1; --p) _e[v[p]] = De[p];
    for (p = m.length - 1; p !== -1; --p) _e[m[p]] = Se[p];
    return { solution: _e, message: se.message, iterations: se.iterations };
  }, numeric.MPStoLP = function M(t) {
    t instanceof String && t.split(`
`);
    var n = 0, r = ["Initial state", "NAME", "ROWS", "COLUMNS", "RHS", "BOUNDS", "ENDATA"], i = t.length, s, e, c, f = 0, o = {}, l = [], u = 0, y = {}, v = 0, m, p = [], D = [], _ = [];
    function L(I) {
      throw new Error("MPStoLP: " + I + `
Line ` + s + ": " + t[s] + `
Current state: ` + r[n] + `
`);
    }
    for (s = 0; s < i; ++s) {
      c = t[s];
      var F = c.match(/\S*/g), x = [];
      for (e = 0; e < F.length; ++e) F[e] !== "" && x.push(F[e]);
      if (x.length !== 0) {
        for (e = 0; e < r.length && c.substr(0, r[e].length) !== r[e]; ++e) ;
        if (e < r.length) {
          if (n = e, e === 1 && (m = x[1]), e === 6) return { name: m, c: p, A: numeric.transpose(D), b: _, rows: o, vars: y };
          continue;
        }
        switch (n) {
          case 0:
          case 1:
            L("Unexpected line");
          case 2:
            switch (x[0]) {
              case "N":
                f === 0 ? f = x[1] : L("Two or more N rows");
                break;
              case "L":
                o[x[1]] = u, l[u] = 1, _[u] = 0, ++u;
                break;
              case "G":
                o[x[1]] = u, l[u] = -1, _[u] = 0, ++u;
                break;
              case "E":
                o[x[1]] = u, l[u] = 0, _[u] = 0, ++u;
                break;
              default:
                L("Parse error " + numeric.prettyPrint(x));
            }
            break;
          case 3:
            y.hasOwnProperty(x[0]) || (y[x[0]] = v, p[v] = 0, D[v] = numeric.rep([u], 0), ++v);
            var O = y[x[0]];
            for (e = 1; e < x.length; e += 2) {
              if (x[e] === f) {
                p[O] = parseFloat(x[e + 1]);
                continue;
              }
              var R = o[x[e]];
              D[O][R] = (l[R] < 0 ? -1 : 1) * parseFloat(x[e + 1]);
            }
            break;
          case 4:
            for (e = 1; e < x.length; e += 2) _[o[x[e]]] = (l[o[x[e]]] < 0 ? -1 : 1) * parseFloat(x[e + 1]);
            break;
          case 5:
            break;
          case 6:
            L("Internal error");
        }
      }
    }
    L("Reached end of file without ENDATA");
  }, numeric.seedrandom = { pow: Math.pow, random: Math.random }, function(M, t, n, r, i, s, e) {
    t.seedrandom = function(y, v) {
      var m = [], p;
      return y = o(f(
        v ? [y, M] : arguments.length ? y : [(/* @__PURE__ */ new Date()).getTime(), M, window],
        3
      ), m), p = new c(m), o(p.S, M), t.random = function() {
        for (var _ = p.g(r), L = e, F = 0; _ < i; )
          _ = (_ + F) * n, L *= n, F = p.g(1);
        for (; _ >= s; )
          _ /= 2, L /= 2, F >>>= 1;
        return (_ + F) / L;
      }, y;
    };
    function c(u) {
      var y, v, m = this, p = u.length, D = 0, _ = m.i = m.j = m.m = 0;
      for (m.S = [], m.c = [], p || (u = [p++]); D < n; )
        m.S[D] = D++;
      for (D = 0; D < n; D++)
        y = m.S[D], _ = l(_ + y + u[D % p]), v = m.S[_], m.S[D] = v, m.S[_] = y;
      m.g = function(F) {
        var x = m.S, O = l(m.i + 1), R = x[O], I = l(m.j + R), h = x[I];
        x[O] = h, x[I] = R;
        for (var b = x[l(R + h)]; --F; )
          O = l(O + 1), R = x[O], I = l(I + R), h = x[I], x[O] = h, x[I] = R, b = b * n + x[l(R + h)];
        return m.i = O, m.j = I, b;
      }, m.g(n);
    }
    function f(u, y, v, m, p) {
      if (v = [], p = typeof u, y && p == "object") {
        for (m in u)
          if (m.indexOf("S") < 5)
            try {
              v.push(f(u[m], y - 1));
            } catch {
            }
      }
      return v.length ? v : u + (p != "string" ? "\0" : "");
    }
    function o(u, y, v, m) {
      for (u += "", v = 0, m = 0; m < u.length; m++)
        y[l(m)] = l((v ^= y[l(m)] * 19) + u.charCodeAt(m));
      u = "";
      for (m in y)
        u += String.fromCharCode(y[m]);
      return u;
    }
    function l(u) {
      return u & n - 1;
    }
    e = t.pow(n, r), i = t.pow(2, i), s = i * 2, o(t.random(), M);
  }(
    [],
    // pool: entropy pool starts empty
    numeric.seedrandom,
    // math: package containing random, pow, and seedrandom
    256,
    // width: each RC4 output is 0 <= x < 256
    6,
    // chunks: at least six RC4 outputs for each double
    52
    // significance: there are 52 significant digits in a double
  ), function(M) {
    function t(f) {
      if (typeof f != "object")
        return f;
      var o = [], l, u = f.length;
      for (l = 0; l < u; l++) o[l + 1] = t(f[l]);
      return o;
    }
    function n(f) {
      if (typeof f != "object")
        return f;
      var o = [], l, u = f.length;
      for (l = 1; l < u; l++) o[l - 1] = n(f[l]);
      return o;
    }
    function r(f, o, l) {
      var u, y, v, m, p;
      for (v = 1; v <= l; v = v + 1) {
        for (f[v][v] = 1 / f[v][v], p = -f[v][v], u = 1; u < v; u = u + 1)
          f[u][v] = p * f[u][v];
        if (m = v + 1, l < m)
          break;
        for (y = m; y <= l; y = y + 1)
          for (p = f[v][y], f[v][y] = 0, u = 1; u <= v; u = u + 1)
            f[u][y] = f[u][y] + p * f[u][v];
      }
    }
    function i(f, o, l, u) {
      var y, v, m, p;
      for (v = 1; v <= l; v = v + 1) {
        for (p = 0, y = 1; y < v; y = y + 1)
          p = p + f[y][v] * u[y];
        u[v] = (u[v] - p) / f[v][v];
      }
      for (m = 1; m <= l; m = m + 1)
        for (v = l + 1 - m, u[v] = u[v] / f[v][v], p = -u[v], y = 1; y < v; y = y + 1)
          u[y] = u[y] + p * f[y][v];
    }
    function s(f, o, l, u) {
      var y, v, m, p, D, _;
      for (v = 1; v <= l; v = v + 1) {
        if (u[1] = v, _ = 0, m = v - 1, m < 1) {
          if (_ = f[v][v] - _, _ <= 0)
            break;
          f[v][v] = Math.sqrt(_);
        } else {
          for (p = 1; p <= m; p = p + 1) {
            for (D = f[p][v], y = 1; y < p; y = y + 1)
              D = D - f[y][v] * f[y][p];
            D = D / f[p][p], f[p][v] = D, _ = _ + D * D;
          }
          if (_ = f[v][v] - _, _ <= 0)
            break;
          f[v][v] = Math.sqrt(_);
        }
        u[1] = 0;
      }
    }
    function e(f, o, l, u, y, v, m, p, D, _, L, F, x, O, R, I) {
      var h, b, Z, G, J, ee, se, Se, De, _e, N, w, z, te, ie, ce, ge, S, d, E, Q, j, X, $, he, de, q;
      z = Math.min(u, _), Z = 2 * u + z * (z + 5) / 2 + 2 * _ + 1, $ = 1e-60;
      do
        $ = $ + $, he = 1 + 0.1 * $, de = 1 + 0.2 * $;
      while (he <= 1 || de <= 1);
      for (h = 1; h <= u; h = h + 1)
        R[h] = o[h];
      for (h = u + 1; h <= Z; h = h + 1)
        R[h] = 0;
      for (h = 1; h <= _; h = h + 1)
        F[h] = 0;
      if (J = [], I[1] === 0) {
        if (s(f, l, u, J), J[1] !== 0) {
          I[1] = 2;
          return;
        }
        i(f, l, u, o), r(f, l, u);
      } else {
        for (b = 1; b <= u; b = b + 1)
          for (y[b] = 0, h = 1; h <= b; h = h + 1)
            y[b] = y[b] + f[h][b] * o[h];
        for (b = 1; b <= u; b = b + 1)
          for (o[b] = 0, h = b; h <= u; h = h + 1)
            o[b] = o[b] + f[b][h] * y[h];
      }
      for (v[1] = 0, b = 1; b <= u; b = b + 1)
        for (y[b] = o[b], v[1] = v[1] + R[b] * y[b], R[b] = 0, h = b + 1; h <= u; h = h + 1)
          f[h][b] = 0;
      for (v[1] = -v[1] / 2, I[1] = 0, se = u, Se = se + u, N = Se + z, De = N + z + 1, _e = De + z * (z + 1) / 2, te = _e + _, h = 1; h <= _; h = h + 1) {
        for (ce = 0, b = 1; b <= u; b = b + 1)
          ce = ce + m[b][h] * m[b][h];
        R[te + h] = Math.sqrt(ce);
      }
      x = 0, O[1] = 0, O[2] = 0;
      function K() {
        for (O[1] = O[1] + 1, Z = _e, h = 1; h <= _; h = h + 1) {
          for (Z = Z + 1, ce = -p[h], b = 1; b <= u; b = b + 1)
            ce = ce + m[b][h] * y[b];
          if (Math.abs(ce) < $ && (ce = 0), h > L)
            R[Z] = ce;
          else if (R[Z] = -Math.abs(ce), ce > 0) {
            for (b = 1; b <= u; b = b + 1)
              m[b][h] = -m[b][h];
            p[h] = -p[h];
          }
        }
        for (h = 1; h <= x; h = h + 1)
          R[_e + F[h]] = 0;
        for (w = 0, ie = 0, h = 1; h <= _; h = h + 1)
          R[_e + h] < ie * R[te + h] && (w = h, ie = R[_e + h] / R[te + h]);
        return w === 0 ? 999 : 0;
      }
      function ne() {
        for (h = 1; h <= u; h = h + 1) {
          for (ce = 0, b = 1; b <= u; b = b + 1)
            ce = ce + f[b][h] * m[b][w];
          R[h] = ce;
        }
        for (G = se, h = 1; h <= u; h = h + 1)
          R[G + h] = 0;
        for (b = x + 1; b <= u; b = b + 1)
          for (h = 1; h <= u; h = h + 1)
            R[G + h] = R[G + h] + f[h][b] * R[b];
        for (j = !0, h = x; h >= 1; h = h - 1) {
          for (ce = R[h], Z = De + h * (h + 3) / 2, G = Z - h, b = h + 1; b <= x; b = b + 1)
            ce = ce - R[Z] * R[Se + b], Z = Z + b;
          if (ce = ce / R[G], R[Se + h] = ce, F[h] < L || ce < 0)
            break;
          j = !1, ee = h;
        }
        if (!j)
          for (ge = R[N + ee] / R[Se + ee], h = 1; h <= x && !(F[h] < L || R[Se + h] < 0); h = h + 1)
            ie = R[N + h] / R[Se + h], ie < ge && (ge = ie, ee = h);
        for (ce = 0, h = se + 1; h <= se + u; h = h + 1)
          ce = ce + R[h] * R[h];
        if (Math.abs(ce) <= $) {
          if (j)
            return I[1] = 1, 999;
          for (h = 1; h <= x; h = h + 1)
            R[N + h] = R[N + h] - ge * R[Se + h];
          return R[N + x + 1] = R[N + x + 1] + ge, 700;
        } else {
          for (ce = 0, h = 1; h <= u; h = h + 1)
            ce = ce + R[se + h] * m[h][w];
          for (S = -R[_e + w] / ce, X = !0, j || ge < S && (S = ge, X = !1), h = 1; h <= u; h = h + 1)
            y[h] = y[h] + S * R[se + h], Math.abs(y[h]) < $ && (y[h] = 0);
          for (v[1] = v[1] + S * ce * (S / 2 + R[N + x + 1]), h = 1; h <= x; h = h + 1)
            R[N + h] = R[N + h] - S * R[Se + h];
          if (R[N + x + 1] = R[N + x + 1] + S, X) {
            for (x = x + 1, F[x] = w, Z = De + (x - 1) * x / 2 + 1, h = 1; h <= x - 1; h = h + 1)
              R[Z] = R[h], Z = Z + 1;
            if (x === u)
              R[Z] = R[u];
            else {
              for (h = u; h >= x + 1 && !(R[h] === 0 || (d = Math.max(Math.abs(R[h - 1]), Math.abs(R[h])), E = Math.min(Math.abs(R[h - 1]), Math.abs(R[h])), R[h - 1] >= 0 ? ie = Math.abs(d * Math.sqrt(1 + E * E / (d * d))) : ie = -Math.abs(d * Math.sqrt(1 + E * E / (d * d))), d = R[h - 1] / ie, E = R[h] / ie, d === 1)); h = h - 1)
                if (d === 0)
                  for (R[h - 1] = E * ie, b = 1; b <= u; b = b + 1)
                    ie = f[b][h - 1], f[b][h - 1] = f[b][h], f[b][h] = ie;
                else
                  for (R[h - 1] = ie, Q = E / (1 + d), b = 1; b <= u; b = b + 1)
                    ie = d * f[b][h - 1] + E * f[b][h], f[b][h] = Q * (f[b][h - 1] + ie) - f[b][h], f[b][h - 1] = ie;
              R[Z] = R[x];
            }
          } else {
            for (ce = -p[w], b = 1; b <= u; b = b + 1)
              ce = ce + y[b] * m[b][w];
            if (w > L)
              R[_e + w] = ce;
            else if (R[_e + w] = -Math.abs(ce), ce > 0) {
              for (b = 1; b <= u; b = b + 1)
                m[b][w] = -m[b][w];
              p[w] = -p[w];
            }
            return 700;
          }
        }
        return 0;
      }
      function fe() {
        if (Z = De + ee * (ee + 1) / 2 + 1, G = Z + ee, R[G] === 0 || (d = Math.max(Math.abs(R[G - 1]), Math.abs(R[G])), E = Math.min(Math.abs(R[G - 1]), Math.abs(R[G])), R[G - 1] >= 0 ? ie = Math.abs(d * Math.sqrt(1 + E * E / (d * d))) : ie = -Math.abs(d * Math.sqrt(1 + E * E / (d * d))), d = R[G - 1] / ie, E = R[G] / ie, d === 1))
          return 798;
        if (d === 0) {
          for (h = ee + 1; h <= x; h = h + 1)
            ie = R[G - 1], R[G - 1] = R[G], R[G] = ie, G = G + h;
          for (h = 1; h <= u; h = h + 1)
            ie = f[h][ee], f[h][ee] = f[h][ee + 1], f[h][ee + 1] = ie;
        } else {
          for (Q = E / (1 + d), h = ee + 1; h <= x; h = h + 1)
            ie = d * R[G - 1] + E * R[G], R[G] = Q * (R[G - 1] + ie) - R[G], R[G - 1] = ie, G = G + h;
          for (h = 1; h <= u; h = h + 1)
            ie = d * f[h][ee] + E * f[h][ee + 1], f[h][ee + 1] = Q * (f[h][ee] + ie) - f[h][ee + 1], f[h][ee] = ie;
        }
        return 0;
      }
      function le() {
        for (G = Z - ee, h = 1; h <= ee; h = h + 1)
          R[G] = R[Z], Z = Z + 1, G = G + 1;
        return R[N + ee] = R[N + ee + 1], F[ee] = F[ee + 1], ee = ee + 1, ee < x ? 797 : 0;
      }
      function a() {
        return R[N + x] = R[N + x + 1], R[N + x + 1] = 0, F[x] = 0, x = x - 1, O[2] = O[2] + 1, 0;
      }
      for (q = 0; ; ) {
        if (q = K(), q === 999)
          return;
        for (; q = ne(), q !== 0; ) {
          if (q === 999)
            return;
          if (q === 700)
            if (ee === x)
              a();
            else {
              for (; fe(), q = le(), q === 797; )
                ;
              a();
            }
        }
      }
    }
    function c(f, o, l, u, y, v) {
      f = t(f), o = t(o), l = t(l);
      var m, p, D, _, L, F = [], x = [], O = [], R = [], I = [], h;
      if (y = y || 0, v = v ? t(v) : [void 0, 0], u = u ? t(u) : [], p = f.length - 1, D = l[1].length - 1, !u)
        for (m = 1; m <= D; m = m + 1)
          u[m] = 0;
      for (m = 1; m <= D; m = m + 1)
        x[m] = 0;
      for (_ = 0, L = Math.min(p, D), m = 1; m <= p; m = m + 1)
        O[m] = 0;
      for (F[1] = 0, m = 1; m <= 2 * p + L * (L + 5) / 2 + 2 * D + 1; m = m + 1)
        R[m] = 0;
      for (m = 1; m <= 2; m = m + 1)
        I[m] = 0;
      return e(
        f,
        o,
        p,
        p,
        O,
        F,
        l,
        u,
        p,
        D,
        y,
        x,
        _,
        I,
        R,
        v
      ), h = "", v[1] === 1 && (h = "constraints are inconsistent, no solution!"), v[1] === 2 && (h = "matrix D in quadratic function is not positive definite!"), {
        solution: n(O),
        value: n(F),
        unconstrained_solution: n(o),
        iterations: n(I),
        iact: n(x),
        message: h
      };
    }
    M.solveQP = c;
  }(numeric), numeric.svd = function M(t) {
    var n, r = numeric.epsilon, i = 1e-64 / r, s = 50, e = 0, c = 0, f = 0, o = 0, l = 0, u = numeric.clone(t), y = u.length, v = u[0].length;
    if (y < v) throw "Need more rows than columns";
    var m = new Array(v), p = new Array(v);
    for (c = 0; c < v; c++) m[c] = p[c] = 0;
    var D = numeric.rep([v, v], 0);
    function _(J, ee) {
      return J = Math.abs(J), ee = Math.abs(ee), J > ee ? J * Math.sqrt(1 + ee * ee / J / J) : ee == 0 ? J : ee * Math.sqrt(1 + J * J / ee / ee);
    }
    var L = 0, F = 0, x = 0, O = 0, R = 0, I = 0, h = 0;
    for (c = 0; c < v; c++) {
      for (m[c] = F, h = 0, l = c + 1, f = c; f < y; f++)
        h += u[f][c] * u[f][c];
      if (h <= i)
        F = 0;
      else
        for (L = u[c][c], F = Math.sqrt(h), L >= 0 && (F = -F), x = L * F - h, u[c][c] = L - F, f = l; f < v; f++) {
          for (h = 0, o = c; o < y; o++)
            h += u[o][c] * u[o][f];
          for (L = h / x, o = c; o < y; o++)
            u[o][f] += L * u[o][c];
        }
      for (p[c] = F, h = 0, f = l; f < v; f++)
        h = h + u[c][f] * u[c][f];
      if (h <= i)
        F = 0;
      else {
        for (L = u[c][c + 1], F = Math.sqrt(h), L >= 0 && (F = -F), x = L * F - h, u[c][c + 1] = L - F, f = l; f < v; f++) m[f] = u[c][f] / x;
        for (f = l; f < y; f++) {
          for (h = 0, o = l; o < v; o++)
            h += u[f][o] * u[c][o];
          for (o = l; o < v; o++)
            u[f][o] += h * m[o];
        }
      }
      R = Math.abs(p[c]) + Math.abs(m[c]), R > O && (O = R);
    }
    for (c = v - 1; c != -1; c += -1) {
      if (F != 0) {
        for (x = F * u[c][c + 1], f = l; f < v; f++)
          D[f][c] = u[c][f] / x;
        for (f = l; f < v; f++) {
          for (h = 0, o = l; o < v; o++)
            h += u[c][o] * D[o][f];
          for (o = l; o < v; o++)
            D[o][f] += h * D[o][c];
        }
      }
      for (f = l; f < v; f++)
        D[c][f] = 0, D[f][c] = 0;
      D[c][c] = 1, F = m[c], l = c;
    }
    for (c = v - 1; c != -1; c += -1) {
      for (l = c + 1, F = p[c], f = l; f < v; f++)
        u[c][f] = 0;
      if (F != 0) {
        for (x = u[c][c] * F, f = l; f < v; f++) {
          for (h = 0, o = l; o < y; o++) h += u[o][c] * u[o][f];
          for (L = h / x, o = c; o < y; o++) u[o][f] += L * u[o][c];
        }
        for (f = c; f < y; f++) u[f][c] = u[f][c] / F;
      } else
        for (f = c; f < y; f++) u[f][c] = 0;
      u[c][c] += 1;
    }
    for (r = r * O, o = v - 1; o != -1; o += -1)
      for (var b = 0; b < s; b++) {
        var Z = !1;
        for (l = o; l != -1; l += -1) {
          if (Math.abs(m[l]) <= r) {
            Z = !0;
            break;
          }
          if (Math.abs(p[l - 1]) <= r)
            break;
        }
        if (!Z) {
          e = 0, h = 1;
          var G = l - 1;
          for (c = l; c < o + 1 && (L = h * m[c], m[c] = e * m[c], !(Math.abs(L) <= r)); c++)
            for (F = p[c], x = _(L, F), p[c] = x, e = F / x, h = -L / x, f = 0; f < y; f++)
              R = u[f][G], I = u[f][c], u[f][G] = R * e + I * h, u[f][c] = -R * h + I * e;
        }
        if (I = p[o], l == o) {
          if (I < 0)
            for (p[o] = -I, f = 0; f < v; f++)
              D[f][o] = -D[f][o];
          break;
        }
        if (b >= s - 1)
          throw "Error: no convergence.";
        for (O = p[l], R = p[o - 1], F = m[o - 1], x = m[o], L = ((R - I) * (R + I) + (F - x) * (F + x)) / (2 * x * R), F = _(L, 1), L < 0 ? L = ((O - I) * (O + I) + x * (R / (L - F) - x)) / O : L = ((O - I) * (O + I) + x * (R / (L + F) - x)) / O, e = 1, h = 1, c = l + 1; c < o + 1; c++) {
          for (F = m[c], R = p[c], x = h * F, F = e * F, I = _(L, x), m[c - 1] = I, e = L / I, h = x / I, L = O * e + F * h, F = -O * h + F * e, x = R * h, R = R * e, f = 0; f < v; f++)
            O = D[f][c - 1], I = D[f][c], D[f][c - 1] = O * e + I * h, D[f][c] = -O * h + I * e;
          for (I = _(L, x), p[c - 1] = I, e = L / I, h = x / I, L = e * F + h * R, O = -h * F + e * R, f = 0; f < y; f++)
            R = u[f][c - 1], I = u[f][c], u[f][c - 1] = R * e + I * h, u[f][c] = -R * h + I * e;
        }
        m[l] = 0, m[o] = L, p[o] = O;
      }
    for (c = 0; c < p.length; c++)
      p[c] < r && (p[c] = 0);
    for (c = 0; c < v; c++)
      for (f = c - 1; f >= 0; f--)
        if (p[f] < p[c]) {
          for (e = p[f], p[f] = p[c], p[c] = e, o = 0; o < u.length; o++)
            n = u[o][c], u[o][c] = u[o][f], u[o][f] = n;
          for (o = 0; o < D.length; o++)
            n = D[o][c], D[o][c] = D[o][f], D[o][f] = n;
          c = f;
        }
    return { U: u, S: p, V: D };
  };
})(numeric1_2_6);
const numeric$2 = /* @__PURE__ */ getDefaultExportFromCjs(numeric1_2_6);
var numeric$1 = numeric1_2_6, forwardSHT = function(M, t, n, r) {
  var i = t.length, s = (M + 1) * (M + 1), e, c = [,];
  s > i && console.log("The SHT degree is too high for the number of data points"), n == 0 && (t = convertCart2Sph(t));
  for (var f = 0; f < t.length; f++)
    c[f] = t[f][2];
  Y_N = computeRealSH(M, t), r == 0 ? e = numeric$1.mul(1 / i, Y_N) : e = pinv_direct(numeric$1.transpose(Y_N));
  var o = numeric$1.dotMV(e, c);
  return o;
}, convertCart2Sph = function(M, t) {
  for (var n, r, i, s = new Array(M.length), e = 0; e < M.length; e++)
    n = Math.atan2(M[e][1], M[e][0]), r = Math.atan2(M[e][2], Math.sqrt(M[e][0] * M[e][0] + M[e][1] * M[e][1])), t == 1 ? s[e] = [n, r] : (i = Math.sqrt(M[e][0] * M[e][0] + M[e][1] * M[e][1] + M[e][2] * M[e][2]), s[e] = [n, r, i]);
  return s;
}, computeRealSH = function(M, t) {
  for (var n = new Array(t.length), r = new Array(t.length), i = 0; i < t.length; i++)
    n[i] = t[i][0], r[i] = t[i][1];
  var s = new Array(2 * M + 1);
  n.length;
  for (var e = (M + 1) * (M + 1), c = 0, f = 0, o, l = numeric$1.sin(r), u = 0, y = new Array(e), v, m, p, D, i = 0; i < 2 * M + 1; i++) s[i] = factorial(i);
  for (var _ = 0; _ < M + 1; _++) {
    if (_ == 0) {
      var L = new Array(n.length);
      L.fill(1), y[_] = L, u = 1;
    } else {
      o = recurseLegendrePoly(_, l, c, f), v = Math.sqrt(2 * _ + 1);
      for (var F = 0; F < _ + 1; F++)
        F == 0 ? y[u + _] = numeric$1.mul(v, o[F]) : (m = v * Math.sqrt(2 * s[_ - F] / s[_ + F]), p = numeric$1.cos(numeric$1.mul(F, n)), D = numeric$1.sin(numeric$1.mul(F, n)), y[u + _ - F] = numeric$1.mul(m, numeric$1.mul(o[F], D)), y[u + _ + F] = numeric$1.mul(m, numeric$1.mul(o[F], p)));
      u = u + 2 * _ + 1;
    }
    f = c, c = o;
  }
  return y;
}, factorial = function(M) {
  return M === 0 ? 1 : M * factorial(M - 1);
}, recurseLegendrePoly = function(M, t, n, r) {
  var i = new Array(M + 1);
  switch (M) {
    case 1:
      var l = numeric$1.mul(t, t), s = t, e = numeric$1.sqrt(numeric$1.sub(1, l));
      i[0] = s, i[1] = e;
      break;
    case 2:
      var l = numeric$1.mul(t, t), c = numeric$1.mul(3, l);
      c = numeric$1.sub(c, 1), c = numeric$1.div(c, 2);
      var f = numeric$1.sub(1, l);
      f = numeric$1.sqrt(f), f = numeric$1.mul(3, f), f = numeric$1.mul(f, t);
      var o = numeric$1.sub(1, l);
      o = numeric$1.mul(3, o), i[0] = c, i[1] = f, i[2] = o;
      break;
    default:
      var l = numeric$1.mul(t, t), u = numeric$1.sub(1, l), y = 2 * M - 1, v = 1;
      if (y % 2 == 0)
        for (var m = 1; m < y / 2 + 1; m++) v = v * 2 * m;
      else
        for (var m = 1; m < (y + 1) / 2 + 1; m++) v = v * (2 * m - 1);
      i[M] = numeric$1.mul(v, numeric$1.pow(u, M / 2)), i[M - 1] = numeric$1.mul(2 * M - 1, numeric$1.mul(t, n[M - 1]));
      for (var p = 0; p < M - 1; p++) {
        var D = numeric$1.mul(2 * M - 1, numeric$1.mul(t, n[p])), _ = numeric$1.mul(M + p - 1, r[p]);
        i[p] = numeric$1.div(numeric$1.sub(D, _), M - p);
      }
  }
  return i;
}, pinv_direct = function(M) {
  var t = numeric$1.transpose(M);
  return numeric$1.dot(numeric$1.inv(numeric$1.dot(t, M)), t);
}, getSHrotMtx = function(M, t) {
  var n = (t + 1) * (t + 1), r = numeric$1.rep([n, n], 0);
  r[0][0] = 1;
  var i = numeric$1.rep([3, 3], 0);
  i[0][0] = M[1][1], i[0][1] = M[1][2], i[0][2] = M[1][0], i[1][0] = M[2][1], i[1][1] = M[2][2], i[1][2] = M[2][0], i[2][0] = M[0][1], i[2][1] = M[0][2], i[2][2] = M[0][0], r = numeric$1.setBlock(r, [1, 1], [3, 3], i);
  for (var s = i, e = 3, c = 2; c < t + 1; c++) {
    for (var f = numeric$1.rep([2 * c + 1, 2 * c + 1], 0), o = -c; o < c + 1; o++)
      for (var l = -c; l < c + 1; l++) {
        var u, y, v, m, p;
        o == 0 ? u = 1 : u = 0, Math.abs(l) == c ? y = 2 * c * (2 * c - 1) : y = c * c - l * l, v = Math.sqrt((c * c - o * o) / y), m = Math.sqrt((1 + u) * (c + Math.abs(o) - 1) * (c + Math.abs(o)) / y) * (1 - 2 * u) * 0.5, p = Math.sqrt((c - Math.abs(o) - 1) * (c - Math.abs(o)) / y) * (1 - u) * -0.5, v != 0 && (v = v * U(c, o, l, i, s)), m != 0 && (m = m * V(c, o, l, i, s)), p != 0 && (p = p * W(c, o, l, i, s)), f[o + c][l + c] = v + m + p;
      }
    r = numeric$1.setBlock(r, [e + 1, e + 1], [e + 2 * c + 1, e + 2 * c + 1], f), s = f, e = e + 2 * c + 1;
  }
  return r;
};
function U(M, t, n, r, i) {
  return P(0, M, t, n, r, i);
}
function V(M, t, n, r, i) {
  var s, e, c, f;
  return t == 0 ? (s = P(1, M, 1, n, r, i), e = P(-1, M, -1, n, r, i), c = s + e) : t > 0 ? (t == 1 ? f = 1 : f = 0, s = P(1, M, t - 1, n, r, i), e = P(-1, M, -t + 1, n, r, i), c = s * Math.sqrt(1 + f) - e * (1 - f)) : (t == -1 ? f = 1 : f = 0, s = P(1, M, t + 1, n, r, i), e = P(-1, M, -t - 1, n, r, i), c = s * (1 - f) + e * Math.sqrt(1 + f)), c;
}
function W(M, t, n, r, i) {
  var s, e, c;
  return t == 0 ? console.error("should not be called") : t > 0 ? (s = P(1, M, t + 1, n, r, i), e = P(-1, M, -t - 1, n, r, i), c = s + e) : (s = P(1, M, t - 1, n, r, i), e = P(-1, M, -t + 1, n, r, i), c = s - e), c;
}
function P(M, t, n, r, i, s) {
  var e, c, f, o;
  return e = i[M + 1][2], c = i[M + 1][0], f = i[M + 1][1], r == -t ? o = e * s[n + t - 1][0] + c * s[n + t - 1][2 * t - 2] : r == t ? o = e * s[n + t - 1][2 * t - 2] - c * s[n + t - 1][0] : o = f * s[n + t - 1][r + t - 1], o;
}
var yawPitchRoll2Rzyx = function(M, t, n) {
  var r, i, s;
  n == 0 ? r = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : r = [[1, 0, 0], [0, Math.cos(n), Math.sin(n)], [0, -Math.sin(n), Math.cos(n)]], t == 0 ? i = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : i = [[Math.cos(t), 0, -Math.sin(t)], [0, 1, 0], [Math.sin(t), 0, Math.cos(t)]], M == 0 ? s = [[1, 0, 0], [0, 1, 0], [0, 0, 1]] : s = [[Math.cos(M), Math.sin(M), 0], [-Math.sin(M), Math.cos(M), 0], [0, 0, 1]];
  var e = numeric$1.dotMMsmall(i, s);
  return e = numeric$1.dotMMsmall(r, e), e;
}, forwardSHT_1 = forwardSHT, convertCart2Sph_1 = convertCart2Sph, computeRealSH_1 = computeRealSH, factorial_1 = factorial, recurseLegendrePoly_1 = recurseLegendrePoly, getSHrotMtx_1 = getSHrotMtx, yawPitchRoll2Rzyx_1 = yawPitchRoll2Rzyx, numeric = require("numeric"), jshlib = require("spherical-harmonic-transform"), convexhull = require("convex-hull");
function deg2rad(M) {
  var t = [], n = Math.PI / 180;
  for (let r = 0; r < M.length; r++)
    M[0].length == 3 ? t.push([
      M[r][0] * n,
      M[r][1] * n,
      M[r][2]
    ]) : M[0].length == 2 && t.push([
      M[r][0] * n,
      M[r][1] * n
    ]);
  return t;
}
function rad2deg(M) {
  var t = [], n = 180 / Math.PI;
  for (let r = 0; r < M.length; r++)
    M[0].length == 3 ? t.push([
      M[r][0] * n,
      M[r][1] * n,
      M[r][2]
    ]) : M[0].length == 2 && t.push([
      M[r][0] * n,
      M[r][1] * n
    ]);
  return t;
}
function getColumn(M, t) {
  return M.map(function(n) {
    return n[t];
  });
}
function sampleCircle(M) {
  for (var t = [], n = 360 / M, r = 0, i = 0; i < M; i++)
    t.push([r, 0, 1]), r += n;
  return t;
}
function getCircHarmonics(M, t) {
  var n = M, r = 2 * n + 1, i = t.length, s = new Array(r), e = new Array(i);
  t = numeric.mul(t, Math.PI / 180), e.fill(1 / Math.sqrt(2 * Math.PI)), s[0] = e;
  for (var c = 0; c < n; c++)
    s[2 * c + 1] = numeric.div(numeric.sin(numeric.mul(-(c + 1), t)), Math.sqrt(Math.PI)), s[2 * c + 2] = numeric.div(numeric.cos(numeric.mul(c + 1, t)), Math.sqrt(Math.PI));
  return s;
}
function getAmbisonicDecMtx(M, t) {
  var n = deg2rad(M), r = jshlib.convertSph2Cart(n), i = convexhull(r), s = i.length, e = n.length, c = new Array(s);
  for (let m = 0; m < s; m++) {
    let p = new Array(3);
    for (let L = 0; L < 3; L++)
      p[L] = r[i[m][L]];
    let D = numeric.inv(p), _ = [];
    for (let L = 0; L < 3; L++)
      for (let F = 0; F < 3; F++)
        _.push(D[F][L]);
    c[m] = _;
  }
  var f = getTdesign(2 * t), o = deg2rad(f), l = vbap3(o, i, c, e);
  l = numeric.transpose(l);
  var u = jshlib.computeRealSH(t, o);
  u = numeric.transpose(u);
  var y = o.length, v = numeric.dotMMsmall(l, u);
  return v = numeric.mul(1 / y, v), v;
}
var vbap3 = function(M, t, n, r) {
  var i = M.length, s = r, e = t.length;
  function c(l) {
    return Math.min.apply(null, l);
  }
  var f = new Array(i), o = jshlib.convertSph2Cart(M);
  for (let l = 0; l < i; l++) {
    let u = o[l], y = new Array(s);
    y.fill(0);
    for (let p = 0; p < e; p++) {
      let D = [], _ = [n[p][0], n[p][1], n[p][2]];
      if (D[0] = numeric.dotVV(_, u), _ = [n[p][3], n[p][4], n[p][5]], D[1] = numeric.dotVV(_, u), _ = [n[p][6], n[p][7], n[p][8]], D[2] = numeric.dotVV(_, u), c(D) > -1e-3) {
        let L = Math.sqrt(numeric.sum(numeric.pow(D, 2))), F = numeric.div(D, L);
        for (let x = 0; x < 3; x++)
          y[t[p][x]] = F[x];
        break;
      }
    }
    let v = Math.sqrt(numeric.sum(numeric.pow(y, 2))), m = numeric.div(y, v);
    f[l] = m;
  }
  return f;
};
function createNearestLookup(M, t) {
  var n = M.length, r = jshlib.convertSph2Cart(deg2rad(M)), i = Math.round(360 / t[0]) + 1, s = Math.round(180 / t[1]) + 1, e = new Array(i);
  e[0] = -180;
  for (let o = 1; o < i; o++)
    e[o] = e[o - 1] + t[0];
  var c = i * s, f = new Array(c);
  for (let o = 0; o < c; o++) {
    let l = [[o % i * t[0] - 180, Math.floor(o / i) * t[1] - 90]], u = jshlib.convertSph2Cart(deg2rad(l)), y = 1e3;
    for (let v = 0; v < n; v++) {
      let m = numeric.sum(numeric.pow(numeric.sub(u[0], r[v]), 2));
      m < y && (f[o] = v, y = m);
    }
  }
  return f;
}
function findNearest(M, t, n) {
  var r = M.length, i = [], s = [];
  for (let u = 0; u < r; u++)
    i.push(M[u][0] + 180), s.push(M[u][1] + 90);
  var e = Math.round(360 / n[0]) + 1, c = numeric.round(numeric.div(numeric.mod(i, 360), n[0])), f = numeric.round(numeric.div(s, n[1])), o = numeric.add(numeric.mul(f, e), c, 1), l = [];
  for (let u = 0; u < r; u++)
    l.push(t[o[u]]);
  return l;
}
function getTdesign(M) {
  if (M > 21)
    throw new Error("Designs of order greater than 21 are not implemented");
  if (M < 1)
    throw new Error("Order should be at least 1");
  var t = [
    [
      [0, 0, 1],
      [180, 0, 1]
    ],
    [
      [45, 35.26, 1],
      [-45, -35.26, 1],
      [135, -35.26, 1],
      [-135, 35.26, 1]
    ],
    [
      [0, 0, 1],
      [180, 0, 1],
      [90, 0, 1],
      [-90, 0, 1],
      [0, 90, 1],
      [0, -90, 1]
    ],
    [
      [0, -31.72, 1],
      [-58.28, 0, 1],
      [-90, 58.28, 1],
      [0, 31.72, 1],
      [-121.72, 0, 1],
      [90, -58.28, 1],
      [180, -31.72, 1],
      [121.72, 0, 1],
      [90, 58.28, 1],
      [180, 31.72, 1],
      [58.28, 0, 1],
      [-90, -58.28, 1]
    ],
    [
      [0, -31.72, 1],
      [-58.28, 0, 1],
      [-90, 58.28, 1],
      [0, 31.72, 1],
      [-121.72, 0, 1],
      [90, -58.28, 1],
      [180, -31.72, 1],
      [121.72, 0, 1],
      [90, 58.28, 1],
      [180, 31.72, 1],
      [58.28, 0, 1],
      [-90, -58.28, 1]
    ],
    [
      [26, 15.46, 1],
      [-26, -15.46, 1],
      [17.11, -24.99, 1],
      [-17.11, 24.99, 1],
      [154, -15.46, 1],
      [-154, 15.46, 1],
      [162.89, 24.99, 1],
      [-162.89, -24.99, 1],
      [72.89, 24.99, 1],
      [107.11, -24.99, 1],
      [116, 15.46, 1],
      [64, -15.46, 1],
      [-107.11, 24.99, 1],
      [-72.89, -24.99, 1],
      [-64, 15.46, 1],
      [-116, -15.46, 1],
      [32.25, 60.03, 1],
      [-147.75, 60.03, 1],
      [-57.75, 60.03, 1],
      [122.25, 60.03, 1],
      [-32.25, -60.03, 1],
      [147.75, -60.03, 1],
      [57.75, -60.03, 1],
      [-122.25, -60.03, 1]
    ],
    [
      [26, 15.46, 1],
      [-26, -15.46, 1],
      [17.11, -24.99, 1],
      [-17.11, 24.99, 1],
      [154, -15.46, 1],
      [-154, 15.46, 1],
      [162.89, 24.99, 1],
      [-162.89, -24.99, 1],
      [72.89, 24.99, 1],
      [107.11, -24.99, 1],
      [116, 15.46, 1],
      [64, -15.46, 1],
      [-107.11, 24.99, 1],
      [-72.89, -24.99, 1],
      [-64, 15.46, 1],
      [-116, -15.46, 1],
      [32.25, 60.03, 1],
      [-147.75, 60.03, 1],
      [-57.75, 60.03, 1],
      [122.25, 60.03, 1],
      [-32.25, -60.03, 1],
      [147.75, -60.03, 1],
      [57.75, -60.03, 1],
      [-122.25, -60.03, 1]
    ],
    [
      [-31.11, 53.65, 1],
      [110.82, 30.5, 1],
      [148.89, 53.65, 1],
      [32.21, -17.83, 1],
      [69.18, -30.5, 1],
      [-32.21, 17.83, 1],
      [-69.18, 30.5, 1],
      [-147.79, -17.83, 1],
      [-110.82, -30.5, 1],
      [147.79, 17.83, 1],
      [31.11, -53.65, 1],
      [-148.89, -53.65, 1],
      [-21.25, -47.78, 1],
      [-108.2, 38.78, 1],
      [158.75, -47.78, 1],
      [139.77, -14.09, 1],
      [-71.8, -38.78, 1],
      [-139.77, 14.09, 1],
      [71.8, 38.78, 1],
      [-40.23, -14.09, 1],
      [108.2, -38.78, 1],
      [40.23, 14.09, 1],
      [21.25, 47.78, 1],
      [-158.75, 47.78, 1],
      [106.65, -2.55, 1],
      [-2.66, -16.63, 1],
      [-73.35, -2.55, 1],
      [-98.84, 73.16, 1],
      [-177.34, 16.63, 1],
      [98.84, -73.16, 1],
      [177.34, -16.63, 1],
      [81.16, 73.16, 1],
      [2.66, 16.63, 1],
      [-81.16, -73.16, 1],
      [-106.65, 2.55, 1],
      [73.35, 2.55, 1]
    ],
    [
      [20.75, -3.55, 1],
      [-20.75, 3.55, 1],
      [-3.8, -20.7, 1],
      [3.8, 20.7, 1],
      [159.25, 3.55, 1],
      [-159.25, -3.55, 1],
      [-176.2, 20.7, 1],
      [176.2, -20.7, 1],
      [93.8, 20.7, 1],
      [86.2, -20.7, 1],
      [110.75, -3.55, 1],
      [69.25, 3.55, 1],
      [-86.2, 20.7, 1],
      [-93.8, -20.7, 1],
      [-69.25, -3.55, 1],
      [-110.75, 3.55, 1],
      [-9.94, 68.97, 1],
      [170.06, 68.97, 1],
      [-99.94, 68.97, 1],
      [80.06, 68.97, 1],
      [9.94, -68.97, 1],
      [-170.06, -68.97, 1],
      [99.94, -68.97, 1],
      [-80.06, -68.97, 1],
      [42.15, 17.57, 1],
      [-42.15, -17.57, 1],
      [23.12, -39.77, 1],
      [-23.12, 39.77, 1],
      [137.85, -17.57, 1],
      [-137.85, 17.57, 1],
      [156.88, 39.77, 1],
      [-156.88, -39.77, 1],
      [66.88, 39.77, 1],
      [113.12, -39.77, 1],
      [132.15, 17.57, 1],
      [47.85, -17.57, 1],
      [-113.12, 39.77, 1],
      [-66.88, -39.77, 1],
      [-47.85, 17.57, 1],
      [-132.15, -17.57, 1],
      [25.26, 44.98, 1],
      [-154.74, 44.98, 1],
      [-64.74, 44.98, 1],
      [115.26, 44.98, 1],
      [-25.26, -44.98, 1],
      [154.74, -44.98, 1],
      [64.74, -44.98, 1],
      [-115.26, -44.98, 1]
    ],
    [
      [144.09, -21.45, 1],
      [-33.81, -48.92, 1],
      [-35.91, -21.45, 1],
      [-115.87, 33.09, 1],
      [-146.19, 48.92, 1],
      [115.87, -33.09, 1],
      [146.19, -48.92, 1],
      [64.13, 33.09, 1],
      [33.81, 48.92, 1],
      [-64.13, -33.09, 1],
      [-144.09, 21.45, 1],
      [35.91, 21.45, 1],
      [-45.53, 1.95, 1],
      [177.26, 44.44, 1],
      [134.47, 1.95, 1],
      [87.21, -45.49, 1],
      [2.74, -44.44, 1],
      [-87.21, 45.49, 1],
      [-2.74, 44.44, 1],
      [-92.79, -45.49, 1],
      [-177.26, -44.44, 1],
      [92.79, 45.49, 1],
      [45.53, -1.95, 1],
      [-134.47, -1.95, 1],
      [15.59, -73.34, 1],
      [-85.4, 16.04, 1],
      [-164.41, -73.34, 1],
      [163.92, 4.42, 1],
      [-94.6, -16.04, 1],
      [-163.92, -4.42, 1],
      [94.6, 16.04, 1],
      [-16.08, 4.42, 1],
      [85.4, -16.04, 1],
      [16.08, -4.42, 1],
      [-15.59, 73.34, 1],
      [164.41, 73.34, 1],
      [-60.02, 25.27, 1],
      [151.41, 26.86, 1],
      [119.98, 25.27, 1],
      [46.63, -51.57, 1],
      [28.59, -26.86, 1],
      [-46.63, 51.57, 1],
      [-28.59, 26.86, 1],
      [-133.37, -51.57, 1],
      [-151.41, -26.86, 1],
      [133.37, 51.57, 1],
      [60.02, -25.27, 1],
      [-119.98, -25.27, 1],
      [-109.94, 6.91, 1],
      [172.65, -19.79, 1],
      [70.06, 6.91, 1],
      [-70.44, -68.94, 1],
      [7.35, 19.79, 1],
      [70.44, 68.94, 1],
      [-7.35, -19.79, 1],
      [109.56, -68.94, 1],
      [-172.65, 19.79, 1],
      [-109.56, 68.94, 1],
      [109.94, -6.91, 1],
      [-70.06, -6.91, 1]
    ],
    [
      [132.93, 7.69, 1],
      [-83.93, -23.73, 1],
      [8.47, 23.51, 1],
      [-113.34, 70.42, 1],
      [-103.27, -9.9, 1],
      [-33.24, -70.75, 1],
      [21.86, -26.46, 1],
      [-156.54, 47.78, 1],
      [-64.26, -7.72, 1],
      [165.78, 44.53, 1],
      [-25.2, 26.39, 1],
      [-97, -44.66, 1],
      [27.85, 9.77, 1],
      [153.21, -47.71, 1],
      [-155.06, 7.45, 1],
      [-11.84, -23.59, 1],
      [80.54, 23.72, 1],
      [-42.06, 70.44, 1],
      [-31.22, -9.84, 1],
      [38.84, -70.5, 1],
      [93.76, -26.29, 1],
      [-84.76, 47.61, 1],
      [7.76, -7.52, 1],
      [-122.28, 44.29, 1],
      [46.8, 26.64, 1],
      [-24.77, -44.57, 1],
      [99.89, 9.91, 1],
      [-134.78, -47.96, 1],
      [-83.09, 7.3, 1],
      [60.13, -23.34, 1],
      [152.64, 23.64, 1],
      [29.76, 70.68, 1],
      [40.78, -9.58, 1],
      [110.18, -70.39, 1],
      [165.65, -26.43, 1],
      [-12.99, 47.75, 1],
      [79.74, -7.31, 1],
      [-50.52, 44.26, 1],
      [118.92, 26.71, 1],
      [47.22, -44.31, 1],
      [171.93, 9.76, 1],
      [-62.51, -48.04, 1],
      [-11.12, 7.44, 1],
      [132.02, -23.33, 1],
      [-135.36, 23.39, 1],
      [102.37, 70.82, 1],
      [112.74, -9.49, 1],
      [-178.3, -70.58, 1],
      [-122.32, -26.67, 1],
      [59.08, 48, 1],
      [151.7, -7.38, 1],
      [21.38, 44.5, 1],
      [-169.01, 26.5, 1],
      [118.98, -44.25, 1],
      [-116.09, 9.52, 1],
      [9.65, -47.83, 1],
      [60.89, 7.68, 1],
      [-156.02, -23.57, 1],
      [-63.46, 23.31, 1],
      [174.93, 70.66, 1],
      [-175.29, -9.68, 1],
      [-105.95, -70.8, 1],
      [-50.19, -26.7, 1],
      [131.36, 48.01, 1],
      [-136.3, -7.64, 1],
      [93.56, 44.67, 1],
      [-97.08, 26.3, 1],
      [-169.16, -44.46, 1],
      [-44.13, 9.52, 1],
      [81.48, -47.62, 1]
    ],
    [
      [-154.47, 7.9, 1],
      [162.15, -63.36, 1],
      [25.53, 7.9, 1],
      [-81.26, -25.27, 1],
      [17.85, 63.36, 1],
      [81.26, 25.27, 1],
      [-17.85, -63.36, 1],
      [98.74, -25.27, 1],
      [-162.15, 63.36, 1],
      [-98.74, 25.27, 1],
      [154.47, -7.9, 1],
      [-25.53, -7.9, 1],
      [1.3, -10.47, 1],
      [-83.01, 79.45, 1],
      [-178.7, -10.47, 1],
      [100.48, 1.28, 1],
      [-96.99, -79.45, 1],
      [-100.48, -1.28, 1],
      [96.99, 79.45, 1],
      [-79.52, 1.28, 1],
      [83.01, -79.45, 1],
      [79.52, -1.28, 1],
      [-1.3, 10.47, 1],
      [178.7, 10.47, 1],
      [157.24, 13.15, 1],
      [31.14, -63.89, 1],
      [-22.76, 13.15, 1],
      [-75.78, 22.13, 1],
      [148.86, 63.89, 1],
      [75.78, -22.13, 1],
      [-148.86, -63.89, 1],
      [104.22, 22.13, 1],
      [-31.14, 63.89, 1],
      [-104.22, -22.13, 1],
      [-157.24, -13.15, 1],
      [22.76, -13.15, 1],
      [110.44, -60.62, 1],
      [-62.18, -9.87, 1],
      [-69.56, -60.62, 1],
      [-168.88, 27.37, 1],
      [-117.82, 9.87, 1],
      [168.88, -27.37, 1],
      [117.82, -9.87, 1],
      [11.12, 27.37, 1],
      [62.18, 9.87, 1],
      [-11.12, -27.37, 1],
      [-110.44, 60.62, 1],
      [69.56, 60.62, 1],
      [-125.93, -47.4, 1],
      [-126.67, -23.4, 1],
      [54.07, -47.4, 1],
      [-151.65, -33.24, 1],
      [-53.33, 23.4, 1],
      [151.65, 33.24, 1],
      [53.33, -23.4, 1],
      [28.35, -33.24, 1],
      [126.67, 23.4, 1],
      [-28.35, 33.24, 1],
      [125.93, 47.4, 1],
      [-54.07, 47.4, 1],
      [61.41, 37.54, 1],
      [41.19, 22.3, 1],
      [-118.59, 37.54, 1],
      [31.92, 44.13, 1],
      [138.81, -22.3, 1],
      [-31.92, -44.13, 1],
      [-138.81, 22.3, 1],
      [-148.08, 44.13, 1],
      [-41.19, -22.3, 1],
      [148.08, -44.13, 1],
      [-61.41, -37.54, 1],
      [118.59, -37.54, 1],
      [132.92, 4.73, 1],
      [6.45, -42.74, 1],
      [-47.08, 4.73, 1],
      [-83.07, 46.87, 1],
      [173.55, 42.74, 1],
      [83.07, -46.87, 1],
      [-173.55, -42.74, 1],
      [96.93, 46.87, 1],
      [-6.45, 42.74, 1],
      [-96.93, -46.87, 1],
      [-132.92, -4.73, 1],
      [47.08, -4.73, 1]
    ],
    [
      [-40.36, 68.7, 1],
      [61.12, 65.68, 1],
      [141.73, 70.75, 1],
      [-131.25, 72.32, 1],
      [-154.88, -12.62, 1],
      [-66.2, -9.78, 1],
      [26.36, -11.97, 1],
      [114.95, -12.58, 1],
      [37.02, 51.13, 1],
      [129.77, 51.95, 1],
      [-140.63, 50.15, 1],
      [-56.5, 47.88, 1],
      [-65.05, 12.58, 1],
      [25.12, 12.62, 1],
      [113.8, 9.78, 1],
      [-153.64, 11.97, 1],
      [-134.51, -9.73, 1],
      [-46.23, -8.37, 1],
      [47.91, -9.73, 1],
      [141.51, -8.73, 1],
      [-17.84, -44.1, 1],
      [69.37, -43.27, 1],
      [151.22, -42.67, 1],
      [-106.78, -40.18, 1],
      [-50.23, -51.95, 1],
      [39.37, -50.15, 1],
      [123.5, -47.88, 1],
      [-142.98, -51.13, 1],
      [-179.19, -60.75, 1],
      [-84.57, -54.07, 1],
      [5.39, -58.05, 1],
      [89.5, -60.75, 1],
      [-145.98, 31.02, 1],
      [-54.39, 26.43, 1],
      [28.92, 32.51, 1],
      [125.34, 30.94, 1],
      [168.71, -7.06, 1],
      [-112.49, -10.38, 1],
      [-21.96, -9.6, 1],
      [73.11, -8.31, 1],
      [95.68, 0.04, 1],
      [-170.71, 2.32, 1],
      [-84.32, -0.04, 1],
      [9.29, -2.32, 1],
      [9.19, -34.33, 1],
      [98.21, -37.31, 1],
      [-179.2, -40.48, 1],
      [-77.81, -31.6, 1],
      [-177.08, -21.74, 1],
      [-93.77, -18.83, 1],
      [-2.72, -19.8, 1],
      [90.51, -20.91, 1],
      [-106.89, 8.31, 1],
      [-11.29, 7.06, 1],
      [67.51, 10.38, 1],
      [158.04, 9.6, 1],
      [-118.88, -65.68, 1],
      [-38.27, -70.75, 1],
      [48.75, -72.32, 1],
      [139.64, -68.7, 1],
      [-54.66, -30.94, 1],
      [34.02, -31.02, 1],
      [125.61, -26.43, 1],
      [-151.08, -32.51, 1],
      [-170.81, 34.33, 1],
      [-81.79, 37.31, 1],
      [0.8, 40.48, 1],
      [102.19, 31.6, 1],
      [-28.78, 42.67, 1],
      [73.22, 40.18, 1],
      [162.16, 44.1, 1],
      [-110.63, 43.27, 1],
      [-89.49, 20.91, 1],
      [2.92, 21.74, 1],
      [86.23, 18.83, 1],
      [177.28, 19.8, 1],
      [133.77, 8.37, 1],
      [-132.09, 9.73, 1],
      [-38.49, 8.73, 1],
      [45.49, 9.73, 1],
      [-25.6, 24.04, 1],
      [55.12, 30.23, 1],
      [149.3, 28.05, 1],
      [-118.71, 26.06, 1],
      [0.81, 60.75, 1],
      [95.43, 54.07, 1],
      [-174.61, 58.05, 1],
      [-90.5, 60.75, 1],
      [-124.88, -30.23, 1],
      [-30.7, -28.05, 1],
      [61.29, -26.06, 1],
      [154.4, -24.04, 1],
      [-132.92, -85.6, 1],
      [47.08, 85.6, 1]
    ],
    [
      [-129.19, 8.11, 1],
      [169.58, -38.73, 1],
      [50.81, 8.12, 1],
      [-77.27, -50.11, 1],
      [10.42, 38.73, 1],
      [77.3, 50.12, 1],
      [-10.41, -38.72, 1],
      [102.71, -50.11, 1],
      [-169.57, 38.72, 1],
      [-102.71, 50.11, 1],
      [129.19, -8.11, 1],
      [-50.8, -8.11, 1],
      [-4.59, -56.01, 1],
      [-93.1, 33.85, 1],
      [175.39, -56.03, 1],
      [146.11, -2.57, 1],
      [-86.89, -33.86, 1],
      [-146.1, 2.56, 1],
      [86.91, 33.86, 1],
      [-33.89, -2.57, 1],
      [93.1, -33.85, 1],
      [33.9, 2.58, 1],
      [4.6, 56.03, 1],
      [-175.38, 56.01, 1],
      [106.57, 26.1, 1],
      [27.07, -14.82, 1],
      [-73.44, 26.09, 1],
      [-30.2, 59.41, 1],
      [152.94, 14.83, 1],
      [30.2, -59.4, 1],
      [-152.93, -14.84, 1],
      [149.82, 59.41, 1],
      [-27.06, 14.83, 1],
      [-149.8, -59.42, 1],
      [-106.55, -26.1, 1],
      [73.44, -26.09, 1],
      [-171.42, 77.45, 1],
      [91.9, -12.4, 1],
      [8.54, 77.46, 1],
      [-12.4, -1.85, 1],
      [88.11, 12.41, 1],
      [12.41, 1.86, 1],
      [-88.1, -12.41, 1],
      [167.6, -1.86, 1],
      [-91.89, 12.4, 1],
      [-167.59, 1.84, 1],
      [171.43, -77.46, 1],
      [-8.52, -77.45, 1],
      [-122.73, -10.44, 1],
      [-167.65, -32.13, 1],
      [57.27, -10.43, 1],
      [-108.8, -55.83, 1],
      [-12.35, 32.13, 1],
      [108.83, 55.83, 1],
      [12.36, -32.12, 1],
      [71.19, -55.82, 1],
      [167.66, 32.12, 1],
      [-71.19, 55.82, 1],
      [122.74, 10.44, 1],
      [-57.27, 10.44, 1],
      [-135.84, -23.05, 1],
      [-148.58, -41.32, 1],
      [44.16, -23.04, 1],
      [-120.66, -39.88, 1],
      [-31.41, 41.31, 1],
      [120.68, 39.87, 1],
      [31.42, -41.3, 1],
      [59.33, -39.86, 1],
      [148.6, 41.31, 1],
      [-59.33, 39.87, 1],
      [135.85, 23.05, 1],
      [-44.16, 23.05, 1],
      [-161.55, 20.62, 1],
      [130.04, -62.6, 1],
      [18.45, 20.64, 1],
      [-68.35, -17.23, 1],
      [49.96, 62.61, 1],
      [68.36, 17.23, 1],
      [-49.93, -62.6, 1],
      [111.65, -17.22, 1],
      [-130.05, 62.59, 1],
      [-111.64, 17.22, 1],
      [161.56, -20.63, 1],
      [-18.44, -20.62, 1],
      [-105.23, -3.38, 1],
      [-176.5, -15.21, 1],
      [74.77, -3.37, 1],
      [-102.64, -74.41, 1],
      [-3.5, 15.21, 1],
      [102.69, 74.41, 1],
      [3.51, -15.2, 1],
      [77.33, -74.4, 1],
      [176.51, 15.2, 1],
      [-77.36, 74.4, 1],
      [105.24, 3.38, 1],
      [-74.76, 3.37, 1],
      [-142.39, 25.42, 1],
      [142.08, -45.69, 1],
      [37.61, 25.43, 1],
      [-59.02, -33.44, 1],
      [37.92, 45.69, 1],
      [59.04, 33.45, 1],
      [-37.91, -45.68, 1],
      [120.97, -33.44, 1],
      [-142.07, 45.68, 1],
      [-120.96, 33.44, 1],
      [142.4, -25.43, 1],
      [-37.6, -25.42, 1]
    ],
    [
      [-30.6, 6.94, 1],
      [166.56, 58.69, 1],
      [149.4, 6.96, 1],
      [81.95, -30.36, 1],
      [13.48, -58.69, 1],
      [-81.93, 30.36, 1],
      [-13.46, 58.68, 1],
      [-98.06, -30.37, 1],
      [-166.54, -58.68, 1],
      [98.07, 30.37, 1],
      [30.62, -6.95, 1],
      [-149.38, -6.95, 1],
      [106.69, -22.68, 1],
      [-23.57, -15.36, 1],
      [-73.31, -22.69, 1],
      [-145.5, 62.1, 1],
      [-156.41, 15.36, 1],
      [145.53, -62.1, 1],
      [156.43, -15.35, 1],
      [34.47, 62.11, 1],
      [23.58, 15.36, 1],
      [-34.46, -62.11, 1],
      [-106.67, 22.68, 1],
      [73.33, 22.69, 1],
      [166.82, 1.39, 1],
      [6.09, -76.74, 1],
      [-13.19, 1.38, 1],
      [-88.57, 13.18, 1],
      [173.99, 76.74, 1],
      [88.59, -13.18, 1],
      [-173.97, -76.73, 1],
      [91.43, 13.2, 1],
      [-6.07, 76.73, 1],
      [-91.42, -13.2, 1],
      [-166.8, -1.38, 1],
      [13.2, -1.39, 1],
      [-74.67, 48.11, 1],
      [130.86, 10.16, 1],
      [105.32, 48.13, 1],
      [13.34, -40.08, 1],
      [49.16, -10.15, 1],
      [-13.32, 40.07, 1],
      [-49.14, 10.15, 1],
      [-166.67, -40.08, 1],
      [-130.84, -10.16, 1],
      [166.69, 40.08, 1],
      [74.7, -48.11, 1],
      [-105.31, -48.13, 1],
      [-126.99, 26.55, 1],
      [147.96, -32.57, 1],
      [53, 26.56, 1],
      [-50.28, -45.59, 1],
      [32.05, 32.58, 1],
      [50.3, 45.59, 1],
      [-32.03, -32.58, 1],
      [129.71, -45.58, 1],
      [-147.94, 32.57, 1],
      [-129.69, 45.58, 1],
      [127.02, -26.55, 1],
      [-52.98, -26.56, 1],
      [-171.93, 30.37, 1],
      [103.47, -58.68, 1],
      [8.07, 30.36, 1],
      [-59.38, -6.96, 1],
      [76.54, 58.69, 1],
      [59.4, 6.95, 1],
      [-76.53, -58.69, 1],
      [120.62, -6.94, 1],
      [-103.44, 58.68, 1],
      [-120.6, 6.95, 1],
      [171.94, -30.36, 1],
      [-8.05, -30.37, 1],
      [40.86, 10.16, 1],
      [15.32, 48.12, 1],
      [-139.14, 10.16, 1],
      [76.68, 40.09, 1],
      [164.69, -48.12, 1],
      [-76.67, -40.09, 1],
      [-164.67, 48.12, 1],
      [-103.31, 40.07, 1],
      [-15.3, -48.13, 1],
      [103.34, -40.07, 1],
      [-40.84, -10.16, 1],
      [139.16, -10.15, 1],
      [103.2, -1.38, 1],
      [-1.41, -13.19, 1],
      [-76.8, -1.39, 1],
      [-96.02, 76.73, 1],
      [-178.57, 13.19, 1],
      [96.07, -76.73, 1],
      [178.58, -13.19, 1],
      [83.94, 76.74, 1],
      [1.43, 13.19, 1],
      [-83.95, -76.74, 1],
      [-103.18, 1.38, 1],
      [76.81, 1.39, 1],
      [37.02, -26.56, 1],
      [-39.7, 45.58, 1],
      [-142.99, -26.56, 1],
      [122.05, 32.58, 1],
      [-140.29, -45.59, 1],
      [-122.04, -32.58, 1],
      [140.31, 45.59, 1],
      [-57.95, 32.57, 1],
      [39.72, -45.58, 1],
      [57.97, -32.57, 1],
      [-37, 26.55, 1],
      [143, 26.56, 1],
      [163.33, 22.69, 1],
      [55.55, -62.1, 1],
      [-16.67, 22.68, 1],
      [-66.41, 15.35, 1],
      [124.49, 62.11, 1],
      [66.43, -15.35, 1],
      [-124.48, -62.11, 1],
      [113.58, 15.36, 1],
      [-55.52, 62.1, 1],
      [-113.57, -15.36, 1],
      [-163.31, -22.68, 1],
      [16.69, -22.69, 1]
    ],
    [
      [-10.57, -17.35, 1],
      [-120.42, 69.76, 1],
      [169.43, -17.35, 1],
      [107.63, -10.08, 1],
      [-59.57, -69.78, 1],
      [-107.63, 10.08, 1],
      [59.57, 69.78, 1],
      [-72.37, -10.09, 1],
      [120.42, -69.76, 1],
      [72.37, 10.09, 1],
      [10.57, 17.35, 1],
      [-169.43, 17.35, 1],
      [-30.77, 68.25, 1],
      [101.53, 18.57, 1],
      [149.25, 68.26, 1],
      [18.92, -10.92, 1],
      [78.47, -18.56, 1],
      [-18.92, 10.92, 1],
      [-78.47, 18.56, 1],
      [-161.09, -10.92, 1],
      [-101.53, -18.56, 1],
      [161.09, 10.92, 1],
      [30.78, -68.26, 1],
      [-149.26, -68.26, 1],
      [56.46, 41.26, 1],
      [46.46, 24.54, 1],
      [-123.53, 41.26, 1],
      [32.19, 38.8, 1],
      [133.53, -24.53, 1],
      [-32.19, -38.8, 1],
      [-133.53, 24.53, 1],
      [-147.8, 38.8, 1],
      [-46.46, -24.54, 1],
      [147.8, -38.8, 1],
      [-56.46, -41.27, 1],
      [123.53, -41.26, 1],
      [84.74, 27.31, 1],
      [27.41, 4.68, 1],
      [-95.26, 27.3, 1],
      [10.06, 62.23, 1],
      [152.59, -4.67, 1],
      [-10.06, -62.23, 1],
      [-152.59, 4.67, 1],
      [-169.92, 62.23, 1],
      [-27.4, -4.68, 1],
      [169.92, -62.22, 1],
      [-84.74, -27.31, 1],
      [95.26, -27.3, 1],
      [136.27, -0.73, 1],
      [-1.05, -46.27, 1],
      [-43.73, -0.74, 1],
      [-91.01, 43.72, 1],
      [-178.94, 46.27, 1],
      [91.01, -43.72, 1],
      [178.94, -46.27, 1],
      [88.99, 43.73, 1],
      [1.05, 46.27, 1],
      [-88.99, -43.73, 1],
      [-136.27, 0.73, 1],
      [43.73, 0.73, 1],
      [55.23, 10.82, 1],
      [13.09, 34.07, 1],
      [-124.77, 10.81, 1],
      [71.48, 53.8, 1],
      [166.91, -34.06, 1],
      [-71.48, -53.8, 1],
      [-166.9, 34.06, 1],
      [-108.52, 53.79, 1],
      [-13.09, -34.06, 1],
      [108.52, -53.79, 1],
      [-55.23, -10.82, 1],
      [124.77, -10.81, 1],
      [-105.49, -68.13, 1],
      [-111.15, -5.71, 1],
      [74.52, -68.12, 1],
      [-173.89, -21.04, 1],
      [-68.85, 5.7, 1],
      [173.89, 21.04, 1],
      [68.85, -5.7, 1],
      [6.12, -21.04, 1],
      [111.15, 5.71, 1],
      [-6.12, 21.04, 1],
      [105.49, 68.13, 1],
      [-74.52, 68.12, 1],
      [35.28, -15.18, 1],
      [-25.17, 51.98, 1],
      [-144.72, -15.19, 1],
      [108.39, 33.88, 1],
      [-154.84, -51.99, 1],
      [-108.39, -33.88, 1],
      [154.84, 51.99, 1],
      [-71.61, 33.87, 1],
      [25.17, -51.98, 1],
      [71.61, -33.87, 1],
      [-35.28, 15.18, 1],
      [144.72, 15.19, 1],
      [-125.28, -28.56, 1],
      [-146.32, -30.49, 1],
      [54.72, -28.55, 1],
      [-133.29, -45.82, 1],
      [-33.69, 30.48, 1],
      [133.3, 45.82, 1],
      [33.68, -30.48, 1],
      [46.71, -45.81, 1],
      [146.32, 30.49, 1],
      [-46.71, 45.81, 1],
      [125.28, 28.56, 1],
      [-54.72, 28.54, 1],
      [-144.4, 54.71, 1],
      [112.38, -28.01, 1],
      [35.58, 54.72, 1],
      [-29.92, -19.65, 1],
      [67.62, 28.02, 1],
      [29.92, 19.65, 1],
      [-67.62, -28.02, 1],
      [150.08, -19.64, 1],
      [-112.38, 28.01, 1],
      [-150.08, 19.64, 1],
      [144.4, -54.71, 1],
      [-35.58, -54.72, 1],
      [68.53, -52.85, 1],
      [-54.82, 12.76, 1],
      [-111.46, -52.87, 1],
      [164.51, 34.19, 1],
      [-125.18, -12.77, 1],
      [-164.51, -34.19, 1],
      [125.18, 12.77, 1],
      [-15.5, 34.19, 1],
      [54.82, -12.76, 1],
      [15.49, -34.19, 1],
      [-68.53, 52.85, 1],
      [111.47, 52.86, 1],
      [91.48, -7.37, 1],
      [-7.38, -1.47, 1],
      [-88.52, -7.38, 1],
      [-168.69, 82.47, 1],
      [-172.62, 1.47, 1],
      [168.69, -82.47, 1],
      [172.62, -1.46, 1],
      [11.22, 82.48, 1],
      [7.38, 1.47, 1],
      [-11.21, -82.48, 1],
      [-91.48, 7.37, 1],
      [88.52, 7.38, 1]
    ],
    [
      [-110.97, -81.34, 1],
      [-98.09, -3.09, 1],
      [69.03, -81.34, 1],
      [-176.88, -8.08, 1],
      [-81.91, 3.09, 1],
      [176.88, 8.08, 1],
      [81.91, -3.09, 1],
      [3.12, -8.08, 1],
      [98.09, 3.09, 1],
      [-3.12, 8.08, 1],
      [110.97, 81.34, 1],
      [-69.03, 81.34, 1],
      [145.76, 30.52, 1],
      [46.33, -45.41, 1],
      [-34.24, 30.52, 1],
      [-54.51, 28.99, 1],
      [133.67, 45.41, 1],
      [54.51, -28.99, 1],
      [-133.67, -45.41, 1],
      [125.49, 28.99, 1],
      [-46.33, 45.41, 1],
      [-125.49, -28.99, 1],
      [-145.76, -30.52, 1],
      [34.24, -30.52, 1],
      [159.58, 41.4, 1],
      [68.4, -44.67, 1],
      [-20.42, 41.4, 1],
      [-46.75, 15.18, 1],
      [111.6, 44.67, 1],
      [46.75, -15.18, 1],
      [-111.6, -44.67, 1],
      [133.25, 15.18, 1],
      [-68.4, 44.67, 1],
      [-133.25, -15.18, 1],
      [-159.58, -41.4, 1],
      [20.42, -41.4, 1],
      [85.43, -37.93, 1],
      [-38.02, 3.6, 1],
      [-94.57, -37.93, 1],
      [174.17, 51.83, 1],
      [-141.98, -3.6, 1],
      [-174.17, -51.83, 1],
      [141.98, 3.6, 1],
      [-5.83, 51.83, 1],
      [38.02, -3.6, 1],
      [5.83, -51.83, 1],
      [-85.43, 37.93, 1],
      [94.57, 37.93, 1],
      [21.18, 27.17, 1],
      [54.86, 56.05, 1],
      [-158.82, 27.17, 1],
      [61.17, 18.75, 1],
      [125.14, -56.05, 1],
      [-61.17, -18.75, 1],
      [-125.14, 56.05, 1],
      [-118.83, 18.75, 1],
      [-54.86, -56.05, 1],
      [118.83, -18.75, 1],
      [-21.18, -27.17, 1],
      [158.82, -27.17, 1],
      [104.66, -9.56, 1],
      [-9.88, -14.45, 1],
      [-75.34, -9.56, 1],
      [-123.65, 72.56, 1],
      [-170.12, 14.45, 1],
      [123.65, -72.56, 1],
      [170.12, -14.45, 1],
      [56.35, 72.56, 1],
      [9.88, 14.45, 1],
      [-56.35, -72.56, 1],
      [-104.66, 9.56, 1],
      [75.34, 9.56, 1],
      [25.94, -16.83, 1],
      [-34.66, 59.4, 1],
      [-154.06, -16.83, 1],
      [108.59, 24.75, 1],
      [-145.34, -59.41, 1],
      [-108.59, -24.75, 1],
      [145.34, 59.41, 1],
      [-71.41, 24.75, 1],
      [34.66, -59.41, 1],
      [71.41, -24.75, 1],
      [-25.94, 16.83, 1],
      [154.06, 16.83, 1],
      [-100.89, 26.49, 1],
      [153.1, -9.74, 1],
      [79.11, 26.49, 1],
      [-20.77, -61.51, 1],
      [26.9, 9.74, 1],
      [20.77, 61.51, 1],
      [-26.9, -9.74, 1],
      [159.23, -61.51, 1],
      [-153.1, 9.74, 1],
      [-159.23, 61.51, 1],
      [100.89, -26.49, 1],
      [-79.11, -26.49, 1],
      [44.31, 12.28, 1],
      [17.3, 44.36, 1],
      [-135.69, 12.28, 1],
      [73.08, 43.05, 1],
      [162.7, -44.36, 1],
      [-73.08, -43.05, 1],
      [-162.7, 44.36, 1],
      [-106.92, 43.05, 1],
      [-17.3, -44.36, 1],
      [106.92, -43.05, 1],
      [-44.31, -12.28, 1],
      [135.69, -12.28, 1],
      [-169.08, -24.53, 1],
      [-112.54, -63.29, 1],
      [10.92, -24.53, 1],
      [-114.93, -9.92, 1],
      [-67.46, 63.28, 1],
      [114.93, 9.92, 1],
      [67.46, -63.29, 1],
      [65.07, -9.92, 1],
      [112.54, 63.29, 1],
      [-65.07, 9.92, 1],
      [169.08, 24.53, 1],
      [-10.92, 24.53, 1],
      [93.2, -57.39, 1],
      [-57.43, -1.73, 1],
      [-86.8, -57.39, 1],
      [-177.95, 32.55, 1],
      [-122.57, 1.73, 1],
      [177.95, -32.55, 1],
      [122.57, -1.73, 1],
      [2.05, 32.55, 1],
      [57.43, 1.73, 1],
      [-2.05, -32.55, 1],
      [-93.2, 57.39, 1],
      [86.8, 57.39, 1],
      [-17.59, 3.04, 1],
      [170.04, 72.16, 1],
      [162.41, 3.04, 1],
      [86.81, -17.56, 1],
      [9.96, -72.16, 1],
      [-86.81, 17.56, 1],
      [-9.96, 72.16, 1],
      [-93.19, -17.56, 1],
      [-170.04, -72.16, 1],
      [93.19, 17.56, 1],
      [17.59, -3.04, 1],
      [-162.41, -3.04, 1],
      [39.38, 44.26, 1],
      [56.93, 33.61, 1],
      [-140.62, 44.26, 1],
      [38.42, 27.03, 1],
      [123.07, -33.61, 1],
      [-38.42, -27.03, 1],
      [-123.07, 33.61, 1],
      [-141.58, 27.03, 1],
      [-56.93, -33.61, 1],
      [141.58, -27.03, 1],
      [-39.38, -44.26, 1],
      [140.62, -44.26, 1]
    ],
    [
      [165.52, 26.52, 1],
      [63.39, -60.04, 1],
      [-14.48, 26.52, 1],
      [-62.74, 12.93, 1],
      [116.61, 60.04, 1],
      [62.74, -12.93, 1],
      [-116.61, -60.04, 1],
      [117.26, 12.93, 1],
      [-63.39, 60.04, 1],
      [-117.26, -12.93, 1],
      [-165.52, -26.52, 1],
      [14.48, -26.52, 1],
      [-150.22, -21.62, 1],
      [-141.41, -53.79, 1],
      [29.78, -21.62, 1],
      [-114.55, -27.5, 1],
      [-38.59, 53.79, 1],
      [114.55, 27.5, 1],
      [38.59, -53.79, 1],
      [65.45, -27.5, 1],
      [141.41, 53.79, 1],
      [-65.45, 27.5, 1],
      [150.22, 21.62, 1],
      [-29.78, 21.62, 1],
      [-163.47, 81.91, 1],
      [92.31, -7.75, 1],
      [16.53, 81.91, 1],
      [-7.76, -2.29, 1],
      [87.69, 7.75, 1],
      [7.76, 2.29, 1],
      [-87.69, -7.75, 1],
      [172.24, -2.29, 1],
      [-92.31, 7.75, 1],
      [-172.24, 2.29, 1],
      [163.47, -81.91, 1],
      [-16.53, -81.91, 1],
      [-79.91, -73.49, 1],
      [-106.27, 2.85, 1],
      [100.09, -73.49, 1],
      [177.03, -16.24, 1],
      [-73.73, -2.85, 1],
      [-177.03, 16.24, 1],
      [73.73, 2.85, 1],
      [-2.97, -16.24, 1],
      [106.27, -2.85, 1],
      [2.97, 16.24, 1],
      [79.91, 73.49, 1],
      [-100.09, 73.49, 1],
      [-43.19, 73.63, 1],
      [101.37, 11.86, 1],
      [136.81, 73.63, 1],
      [12.09, -11.12, 1],
      [78.63, -11.86, 1],
      [-12.09, 11.12, 1],
      [-78.63, 11.86, 1],
      [-167.91, -11.12, 1],
      [-101.37, -11.86, 1],
      [167.91, 11.12, 1],
      [43.19, -73.63, 1],
      [-136.81, -73.63, 1],
      [109.86, -34.83, 1],
      [-36.5, -16.19, 1],
      [-70.14, -34.83, 1],
      [-153.97, 50.53, 1],
      [-143.5, 16.19, 1],
      [153.97, -50.53, 1],
      [143.5, -16.19, 1],
      [26.03, 50.53, 1],
      [36.5, 16.19, 1],
      [-26.03, -50.53, 1],
      [-109.86, 34.83, 1],
      [70.14, 34.83, 1],
      [-23.31, -6.54, 1],
      [-163.84, 65.83, 1],
      [156.69, -6.54, 1],
      [97.12, -23.15, 1],
      [-16.16, -65.83, 1],
      [-97.12, 23.15, 1],
      [16.16, 65.83, 1],
      [-82.88, -23.15, 1],
      [163.84, -65.83, 1],
      [82.88, 23.15, 1],
      [23.31, 6.54, 1],
      [-156.69, 6.54, 1],
      [-0.87, -31.92, 1],
      [-91.4, 58.07, 1],
      [179.13, -31.92, 1],
      [121.93, -0.74, 1],
      [-88.6, -58.07, 1],
      [-121.93, 0.74, 1],
      [88.6, 58.07, 1],
      [-58.07, -0.74, 1],
      [91.4, -58.07, 1],
      [58.07, 0.74, 1],
      [0.87, 31.92, 1],
      [-179.13, 31.92, 1],
      [163.12, 43.35, 1],
      [72.9, -44.1, 1],
      [-16.88, 43.35, 1],
      [-45.39, 12.19, 1],
      [107.1, 44.1, 1],
      [45.39, -12.19, 1],
      [-107.1, -44.1, 1],
      [134.61, 12.19, 1],
      [-72.9, 44.1, 1],
      [-134.61, -12.19, 1],
      [-163.12, -43.35, 1],
      [16.88, -43.35, 1],
      [-114.23, 50.37, 1],
      [127.06, -15.17, 1],
      [65.77, 50.37, 1],
      [-18.77, -35.57, 1],
      [52.94, 15.17, 1],
      [18.77, 35.57, 1],
      [-52.94, -15.17, 1],
      [161.23, -35.57, 1],
      [-127.06, 15.17, 1],
      [-161.23, 35.57, 1],
      [114.23, -50.37, 1],
      [-65.77, -50.37, 1],
      [54.17, 30.16, 1],
      [35.63, 30.41, 1],
      [-125.83, 30.16, 1],
      [45.21, 44.51, 1],
      [144.37, -30.41, 1],
      [-45.21, -44.51, 1],
      [-144.37, 30.41, 1],
      [-134.79, 44.51, 1],
      [-35.63, -30.41, 1],
      [134.79, -44.51, 1],
      [-54.17, -30.16, 1],
      [125.83, -30.16, 1],
      [126.2, 41.73, 1],
      [47.86, -26.15, 1],
      [-53.8, 41.73, 1],
      [-33.51, 37.03, 1],
      [132.14, 26.15, 1],
      [33.51, -37.03, 1],
      [-132.14, -26.15, 1],
      [146.49, 37.03, 1],
      [-47.86, 26.15, 1],
      [-146.49, -37.03, 1],
      [-126.2, -41.73, 1],
      [53.8, -41.73, 1],
      [-161.75, 20.38, 1],
      [130.12, -62.91, 1],
      [18.25, 20.38, 1],
      [-68.63, -17.07, 1],
      [49.88, 62.91, 1],
      [68.63, 17.07, 1],
      [-49.88, -62.91, 1],
      [111.37, -17.07, 1],
      [-130.12, 62.91, 1],
      [-111.37, 17.07, 1],
      [161.75, -20.38, 1],
      [-18.25, -20.38, 1],
      [2.71, 48.49, 1],
      [87.6, 41.45, 1],
      [-177.29, 48.49, 1],
      [41.48, 1.8, 1],
      [92.4, -41.45, 1],
      [-41.48, -1.8, 1],
      [-92.4, 41.45, 1],
      [-138.52, 1.8, 1],
      [-87.6, -41.45, 1],
      [138.52, -1.8, 1],
      [-2.71, -48.49, 1],
      [177.29, -48.49, 1],
      [-98.15, -27.54, 1],
      [-152.22, -7.22, 1],
      [81.85, -27.54, 1],
      [-164.79, -61.37, 1],
      [-27.78, 7.22, 1],
      [164.79, 61.37, 1],
      [27.78, -7.22, 1],
      [15.21, -61.37, 1],
      [152.22, 7.22, 1],
      [-15.21, 61.37, 1],
      [98.15, 27.54, 1],
      [-81.85, 27.54, 1]
    ],
    [
      [-40.48, 43.36, 1],
      [124.51, 33.58, 1],
      [139.52, 43.36, 1],
      [38.85, -28.17, 1],
      [55.49, -33.58, 1],
      [-38.85, 28.17, 1],
      [-55.49, 33.58, 1],
      [-141.15, -28.17, 1],
      [-124.51, -33.58, 1],
      [141.15, 28.17, 1],
      [40.48, -43.36, 1],
      [-139.52, -43.36, 1],
      [56.01, 17.18, 1],
      [20.46, 32.29, 1],
      [-123.99, 17.18, 1],
      [61.05, 52.38, 1],
      [159.54, -32.29, 1],
      [-61.05, -52.38, 1],
      [-159.54, 32.29, 1],
      [-118.95, 52.38, 1],
      [-20.46, -32.29, 1],
      [118.95, -52.38, 1],
      [-56.01, -17.18, 1],
      [123.99, -17.18, 1],
      [-179.51, -8.95, 1],
      [-93.08, -81.04, 1],
      [0.49, -8.95, 1],
      [-98.95, -0.48, 1],
      [-86.92, 81.04, 1],
      [98.95, 0.48, 1],
      [86.92, -81.04, 1],
      [81.05, -0.48, 1],
      [93.08, 81.04, 1],
      [-81.05, 0.48, 1],
      [179.51, 8.95, 1],
      [-0.49, 8.95, 1],
      [12.04, -13.56, 1],
      [-49.15, 71.95, 1],
      [-167.96, -13.56, 1],
      [103.85, 11.7, 1],
      [-130.85, -71.95, 1],
      [-103.85, -11.7, 1],
      [130.85, 71.95, 1],
      [-76.15, 11.7, 1],
      [49.15, -71.95, 1],
      [76.15, -11.7, 1],
      [-12.04, 13.56, 1],
      [167.96, 13.56, 1],
      [-13.62, -58.2, 1],
      [-98.3, 30.8, 1],
      [166.38, -58.2, 1],
      [148.93, -7.13, 1],
      [-81.7, -30.8, 1],
      [-148.93, 7.13, 1],
      [81.7, 30.8, 1],
      [-31.07, -7.13, 1],
      [98.3, -30.8, 1],
      [31.07, 7.13, 1],
      [13.62, 58.2, 1],
      [-166.38, 58.2, 1],
      [65.26, -20.55, 1],
      [-22.43, 23.07, 1],
      [-114.74, -20.55, 1],
      [131.85, 58.26, 1],
      [-157.57, -23.07, 1],
      [-131.85, -58.26, 1],
      [157.57, 23.07, 1],
      [-48.15, 58.26, 1],
      [22.43, -23.07, 1],
      [48.15, -58.26, 1],
      [-65.26, 20.55, 1],
      [114.74, 20.55, 1],
      [-135.39, 26.5, 1],
      [144.63, -39.58, 1],
      [44.61, 26.5, 1],
      [-55, -38.94, 1],
      [35.37, 39.58, 1],
      [55, 38.94, 1],
      [-35.37, -39.58, 1],
      [125, -38.94, 1],
      [-144.63, 39.58, 1],
      [-125, 38.94, 1],
      [135.39, -26.5, 1],
      [-44.61, -26.5, 1],
      [114.95, -4.75, 1],
      [-5.23, -24.86, 1],
      [-65.05, -4.75, 1],
      [-101.14, 64.63, 1],
      [-174.77, 24.86, 1],
      [101.14, -64.63, 1],
      [174.77, -24.86, 1],
      [78.86, 64.63, 1],
      [5.23, 24.86, 1],
      [-78.86, -64.63, 1],
      [-114.95, 4.75, 1],
      [65.05, 4.75, 1],
      [35.85, 52.64, 1],
      [65.91, 29.46, 1],
      [-144.15, 52.64, 1],
      [31.75, 20.82, 1],
      [114.09, -29.46, 1],
      [-31.75, -20.82, 1],
      [-114.09, 29.46, 1],
      [-148.25, 20.82, 1],
      [-65.91, -29.46, 1],
      [148.25, -20.82, 1],
      [-35.85, -52.64, 1],
      [144.15, -52.64, 1],
      [86.45, 11.52, 1],
      [11.54, 3.48, 1],
      [-93.55, 11.52, 1],
      [16.9, 77.95, 1],
      [168.46, -3.48, 1],
      [-16.9, -77.95, 1],
      [-168.46, 3.48, 1],
      [-163.1, 77.95, 1],
      [-11.54, -3.48, 1],
      [163.1, -77.95, 1],
      [-86.45, -11.52, 1],
      [93.55, -11.52, 1],
      [135.24, 4.02, 1],
      [5.69, -45.1, 1],
      [-44.76, 4.02, 1],
      [-84.35, 44.62, 1],
      [174.31, 45.1, 1],
      [84.35, -44.62, 1],
      [-174.31, -45.1, 1],
      [95.65, 44.62, 1],
      [-5.69, 45.1, 1],
      [-95.65, -44.62, 1],
      [-135.24, -4.02, 1],
      [44.76, -4.02, 1],
      [-129.84, -18.16, 1],
      [-156.86, -37.5, 1],
      [50.16, -18.16, 1],
      [-117.12, -46.85, 1],
      [-23.14, 37.5, 1],
      [117.12, 46.85, 1],
      [23.14, -37.5, 1],
      [62.88, -46.85, 1],
      [156.86, 37.5, 1],
      [-62.88, 46.85, 1],
      [129.84, 18.16, 1],
      [-50.16, 18.16, 1],
      [-74.1, 32.87, 1],
      [146.1, 13.3, 1],
      [105.9, 32.87, 1],
      [22.97, -53.88, 1],
      [33.9, -13.3, 1],
      [-22.97, 53.88, 1],
      [-33.9, 13.3, 1],
      [-157.03, -53.88, 1],
      [-146.1, -13.3, 1],
      [157.03, 53.88, 1],
      [74.1, -32.87, 1],
      [-105.9, -32.87, 1],
      [-119.92, -5.64, 1],
      [-173.5, -29.76, 1],
      [60.08, -5.64, 1],
      [-101.2, -59.6, 1],
      [-6.5, 29.76, 1],
      [101.2, 59.6, 1],
      [6.5, -29.76, 1],
      [78.8, -59.6, 1],
      [173.5, 29.76, 1],
      [-78.8, 59.6, 1],
      [119.92, 5.64, 1],
      [-60.08, 5.64, 1],
      [73.14, 16.13, 1],
      [16.82, 16.18, 1],
      [-106.86, 16.13, 1],
      [45.09, 66.83, 1],
      [163.18, -16.18, 1],
      [-45.09, -66.83, 1],
      [-163.18, 16.18, 1],
      [-134.91, 66.83, 1],
      [-16.82, -16.18, 1],
      [134.91, -66.83, 1],
      [-73.14, -16.13, 1],
      [106.86, -16.13, 1],
      [-11.7, -43.38, 1],
      [-102.11, 45.38, 1],
      [168.3, -43.38, 1],
      [133.98, -8.47, 1],
      [-77.89, -45.38, 1],
      [-133.98, 8.47, 1],
      [77.89, 45.38, 1],
      [-46.02, -8.47, 1],
      [102.11, -45.38, 1],
      [46.02, 8.47, 1],
      [11.7, 43.38, 1],
      [-168.3, 43.38, 1],
      [-24.11, 3.73, 1],
      [170.94, 65.63, 1],
      [155.89, 3.73, 1],
      [85.92, -24.05, 1],
      [9.06, -65.63, 1],
      [-85.92, 24.05, 1],
      [-9.06, 65.63, 1],
      [-94.08, -24.05, 1],
      [-170.94, -65.63, 1],
      [94.08, 24.05, 1],
      [24.11, -3.73, 1],
      [-155.89, -3.73, 1]
    ],
    [
      [104.6, -3.68, 1],
      [-3.81, -14.57, 1],
      [-75.4, -3.68, 1],
      [-104.32, 74.95, 1],
      [-176.19, 14.57, 1],
      [104.32, -74.95, 1],
      [176.19, -14.57, 1],
      [75.68, 74.95, 1],
      [3.81, 14.57, 1],
      [-75.68, -74.95, 1],
      [-104.6, 3.68, 1],
      [75.4, 3.68, 1],
      [153.77, -30.33, 1],
      [-52.93, -50.74, 1],
      [-26.23, -30.33, 1],
      [-123.11, 22.43, 1],
      [-127.07, 50.74, 1],
      [123.11, -22.43, 1],
      [127.07, -50.74, 1],
      [56.89, 22.43, 1],
      [52.93, 50.74, 1],
      [-56.89, -22.43, 1],
      [-153.77, 30.33, 1],
      [26.23, 30.33, 1],
      [35.99, -39.77, 1],
      [-54.77, 38.45, 1],
      [-144.01, -39.77, 1],
      [135.81, 26.85, 1],
      [-125.23, -38.45, 1],
      [-135.81, -26.85, 1],
      [125.23, 38.45, 1],
      [-44.19, 26.85, 1],
      [54.77, -38.45, 1],
      [44.19, -26.85, 1],
      [-35.99, 39.77, 1],
      [144.01, 39.77, 1],
      [71.82, -25.43, 1],
      [-26.58, 16.37, 1],
      [-108.18, -25.43, 1],
      [146.72, 59.1, 1],
      [-153.42, -16.37, 1],
      [-146.72, -59.1, 1],
      [153.42, 16.37, 1],
      [-33.28, 59.1, 1],
      [26.58, -16.37, 1],
      [33.28, -59.1, 1],
      [-71.82, 25.43, 1],
      [108.18, 25.43, 1],
      [-136.55, 26.52, 1],
      [144.03, -40.51, 1],
      [43.45, 26.52, 1],
      [-55.5, -37.97, 1],
      [35.97, 40.51, 1],
      [55.5, 37.97, 1],
      [-35.97, -40.51, 1],
      [124.5, -37.97, 1],
      [-144.03, 40.51, 1],
      [-124.5, 37.97, 1],
      [136.55, -26.52, 1],
      [-43.45, -26.52, 1],
      [-6.52, -1.08, 1],
      [-170.58, 83.4, 1],
      [173.48, -1.08, 1],
      [91.09, -6.52, 1],
      [-9.42, -83.4, 1],
      [-91.09, 6.52, 1],
      [9.42, 83.4, 1],
      [-88.91, -6.52, 1],
      [170.58, -83.4, 1],
      [88.91, 6.52, 1],
      [6.52, 1.08, 1],
      [-173.48, 1.08, 1],
      [-71.13, 40.38, 1],
      [138.05, 14.26, 1],
      [108.87, 40.38, 1],
      [20.82, -46.12, 1],
      [41.95, -14.26, 1],
      [-20.82, 46.12, 1],
      [-41.95, 14.26, 1],
      [-159.18, -46.12, 1],
      [-138.05, -14.26, 1],
      [159.18, 46.12, 1],
      [71.13, -40.38, 1],
      [-108.87, -40.38, 1],
      [-153.97, -27.97, 1],
      [-129.57, -52.52, 1],
      [26.03, -27.97, 1],
      [-120.59, -22.81, 1],
      [-50.43, 52.52, 1],
      [120.59, 22.81, 1],
      [50.43, -52.52, 1],
      [59.41, -22.81, 1],
      [129.57, 52.52, 1],
      [-59.41, 22.81, 1],
      [153.97, 27.97, 1],
      [-26.03, 27.97, 1],
      [-80.23, 13.48, 1],
      [166.33, 9.49, 1],
      [99.77, 13.48, 1],
      [35.29, -73.41, 1],
      [13.67, -9.49, 1],
      [-35.29, 73.41, 1],
      [-13.67, 9.49, 1],
      [-144.71, -73.41, 1],
      [-166.33, -9.49, 1],
      [144.71, 73.41, 1],
      [80.23, -13.48, 1],
      [-99.77, -13.48, 1],
      [55.43, -9, 1],
      [-10.89, 34.09, 1],
      [-124.57, -9, 1],
      [105.6, 54.41, 1],
      [-169.11, -34.09, 1],
      [-105.6, -54.41, 1],
      [169.11, 34.09, 1],
      [-74.4, 54.41, 1],
      [10.89, -34.09, 1],
      [74.4, -54.41, 1],
      [-55.43, 9, 1],
      [124.57, 9, 1],
      [68.32, -7.14, 1],
      [-7.68, 21.51, 1],
      [-111.68, -7.14, 1],
      [108.74, 67.22, 1],
      [-172.32, -21.51, 1],
      [-108.74, -67.22, 1],
      [172.32, 21.51, 1],
      [-71.26, 67.22, 1],
      [7.68, -21.51, 1],
      [71.26, -67.22, 1],
      [-68.32, 7.14, 1],
      [111.68, 7.14, 1],
      [-174.97, 36.12, 1],
      [96.85, -53.58, 1],
      [5.03, 36.12, 1],
      [-53.77, -4.06, 1],
      [83.15, 53.58, 1],
      [53.77, 4.06, 1],
      [-83.15, -53.58, 1],
      [126.23, -4.06, 1],
      [-96.85, 53.58, 1],
      [-126.23, 4.06, 1],
      [174.97, -36.12, 1],
      [-5.03, -36.12, 1],
      [-149.91, 16.26, 1],
      [149.81, -56.16, 1],
      [30.09, 16.26, 1],
      [-71.37, -28.77, 1],
      [30.19, 56.16, 1],
      [71.37, 28.77, 1],
      [-30.19, -56.16, 1],
      [108.63, -28.77, 1],
      [-149.81, 56.16, 1],
      [-108.63, 28.77, 1],
      [149.91, -16.26, 1],
      [-30.09, -16.26, 1],
      [2.52, -51.45, 1],
      [-87.99, 38.5, 1],
      [-177.48, -51.45, 1],
      [141.48, 1.57, 1],
      [-92.01, -38.5, 1],
      [-141.48, -1.57, 1],
      [92.01, 38.5, 1],
      [-38.52, 1.57, 1],
      [87.99, -38.5, 1],
      [38.52, -1.57, 1],
      [-2.52, 51.45, 1],
      [177.48, 51.45, 1],
      [161.12, -9.98, 1],
      [-28.54, -68.73, 1],
      [-18.88, -9.98, 1],
      [-100.54, 18.59, 1],
      [-151.46, 68.73, 1],
      [100.54, -18.59, 1],
      [151.46, -68.73, 1],
      [79.46, 18.59, 1],
      [28.54, 68.73, 1],
      [-79.46, -18.59, 1],
      [-161.12, 9.98, 1],
      [18.88, 9.98, 1],
      [12.84, 24.97, 1],
      [64.49, 62.11, 1],
      [-167.16, 24.97, 1],
      [64.47, 11.62, 1],
      [115.51, -62.11, 1],
      [-64.47, -11.62, 1],
      [-115.51, 62.11, 1],
      [-115.53, 11.62, 1],
      [-64.49, -62.11, 1],
      [115.53, -11.62, 1],
      [-12.84, -24.97, 1],
      [167.16, -24.97, 1],
      [74.13, 41.65, 1],
      [42.76, 11.79, 1],
      [-105.87, 41.65, 1],
      [17.09, 45.95, 1],
      [137.24, -11.79, 1],
      [-17.09, -45.95, 1],
      [-137.24, 11.79, 1],
      [-162.91, 45.95, 1],
      [-42.76, -11.79, 1],
      [162.91, -45.95, 1],
      [-74.13, -41.65, 1],
      [105.87, -41.65, 1],
      [154.04, 1.27, 1],
      [2.9, -64.01, 1],
      [-25.96, 1.27, 1],
      [-88.59, 25.96, 1],
      [177.1, 64.01, 1],
      [88.59, -25.96, 1],
      [-177.1, -64.01, 1],
      [91.41, 25.96, 1],
      [-2.9, 64.01, 1],
      [-91.41, -25.96, 1],
      [-154.04, -1.27, 1],
      [25.96, -1.27, 1]
    ],
    [
      [24.8, -10.46, 1],
      [-23.76, 63.21, 1],
      [-155.2, -10.46, 1],
      [101.5, 24.36, 1],
      [-156.24, -63.21, 1],
      [-101.5, -24.36, 1],
      [156.24, 63.21, 1],
      [-78.5, 24.36, 1],
      [23.76, -63.21, 1],
      [78.5, -24.36, 1],
      [-24.8, 10.46, 1],
      [155.2, 10.46, 1],
      [-134.64, 65.44, 1],
      [108.01, -16.98, 1],
      [45.36, 65.44, 1],
      [-17.8, -17.2, 1],
      [71.99, 16.98, 1],
      [17.8, 17.2, 1],
      [-71.99, -16.98, 1],
      [162.2, -17.2, 1],
      [-108.01, 16.98, 1],
      [-162.2, 17.2, 1],
      [134.64, -65.44, 1],
      [-45.36, -65.44, 1],
      [177.6, 54.85, 1],
      [88.31, -35.12, 1],
      [-2.4, 54.85, 1],
      [-35.13, 1.38, 1],
      [91.69, 35.12, 1],
      [35.13, -1.38, 1],
      [-91.69, -35.12, 1],
      [144.87, 1.38, 1],
      [-88.31, 35.12, 1],
      [-144.87, -1.38, 1],
      [-177.6, -54.85, 1],
      [2.4, -54.85, 1],
      [157.93, 82.01, 1],
      [86.98, -7.4, 1],
      [-22.07, 82.01, 1],
      [-7.41, 2.99, 1],
      [93.02, 7.4, 1],
      [7.41, -2.99, 1],
      [-93.02, -7.4, 1],
      [172.59, 2.99, 1],
      [-86.98, 7.4, 1],
      [-172.59, -2.99, 1],
      [-157.93, -82.01, 1],
      [22.07, -82.01, 1],
      [42.48, -13.21, 1],
      [-19.17, 45.89, 1],
      [-137.52, -13.21, 1],
      [107.66, 41.11, 1],
      [-160.83, -45.89, 1],
      [-107.66, -41.11, 1],
      [160.83, 45.89, 1],
      [-72.34, 41.11, 1],
      [19.17, -45.89, 1],
      [72.34, -41.11, 1],
      [-42.48, 13.21, 1],
      [137.52, 13.21, 1],
      [28.48, 10.9, 1],
      [21.99, 59.68, 1],
      [-151.52, 10.9, 1],
      [77.65, 27.92, 1],
      [158.01, -59.68, 1],
      [-77.65, -27.92, 1],
      [-158.01, 59.68, 1],
      [-102.35, 27.92, 1],
      [-21.99, -59.68, 1],
      [102.35, -27.92, 1],
      [-28.48, -10.9, 1],
      [151.52, -10.9, 1],
      [-33.79, 21.61, 1],
      [144.53, 50.59, 1],
      [146.21, 21.61, 1],
      [64.51, -31.14, 1],
      [35.47, -50.59, 1],
      [-64.51, 31.14, 1],
      [-35.47, 50.59, 1],
      [-115.49, -31.14, 1],
      [-144.53, -50.59, 1],
      [115.49, 31.14, 1],
      [33.79, -21.61, 1],
      [-146.21, -21.61, 1],
      [-175.53, -31.74, 1],
      [-97.19, -57.98, 1],
      [4.47, -31.74, 1],
      [-121.82, -3.8, 1],
      [-82.81, 57.98, 1],
      [121.82, 3.8, 1],
      [82.81, -57.98, 1],
      [58.18, -3.8, 1],
      [97.19, 57.98, 1],
      [-58.18, 3.8, 1],
      [175.53, 31.74, 1],
      [-4.47, 31.74, 1],
      [89.4, 19.43, 1],
      [19.43, 0.56, 1],
      [-90.6, 19.43, 1],
      [1.69, 70.56, 1],
      [160.57, -0.56, 1],
      [-1.69, -70.56, 1],
      [-160.57, 0.56, 1],
      [-178.31, 70.56, 1],
      [-19.43, -0.56, 1],
      [178.31, -70.56, 1],
      [-89.4, -19.43, 1],
      [90.6, -19.43, 1],
      [-27.28, -27.88, 1],
      [-130.91, 51.78, 1],
      [152.72, -27.88, 1],
      [120.76, -23.9, 1],
      [-49.09, -51.78, 1],
      [-120.76, 23.9, 1],
      [49.09, 51.78, 1],
      [-59.24, -23.9, 1],
      [130.91, -51.78, 1],
      [59.24, 23.9, 1],
      [27.28, 27.88, 1],
      [-152.72, 27.88, 1],
      [139.9, -15.44, 1],
      [-23.21, -47.5, 1],
      [-40.1, -15.44, 1],
      [-109.85, 38.38, 1],
      [-156.79, 47.5, 1],
      [109.85, -38.38, 1],
      [156.79, -47.5, 1],
      [70.15, 38.38, 1],
      [23.21, 47.5, 1],
      [-70.15, -38.38, 1],
      [-139.9, 15.44, 1],
      [40.1, 15.44, 1],
      [-2.17, -43.33, 1],
      [-92.29, 46.62, 1],
      [177.83, -43.33, 1],
      [133.35, -1.58, 1],
      [-87.71, -46.62, 1],
      [-133.35, 1.58, 1],
      [87.71, 46.62, 1],
      [-46.65, -1.58, 1],
      [92.29, -46.62, 1],
      [46.65, 1.58, 1],
      [2.17, 43.33, 1],
      [-177.83, 43.33, 1],
      [41.12, 27.96, 1],
      [38.91, 41.71, 1],
      [-138.88, 27.96, 1],
      [54.83, 35.51, 1],
      [141.09, -41.71, 1],
      [-54.83, -35.51, 1],
      [-141.09, 41.71, 1],
      [-125.17, 35.51, 1],
      [-38.91, -41.71, 1],
      [125.17, -35.51, 1],
      [-41.12, -27.96, 1],
      [138.88, -27.96, 1],
      [-126.67, 13.75, 1],
      [163.04, -35.46, 1],
      [53.33, 13.75, 1],
      [-67.73, -51.18, 1],
      [16.96, 35.46, 1],
      [67.73, 51.18, 1],
      [-16.96, -35.46, 1],
      [112.27, -51.18, 1],
      [-163.04, 35.46, 1],
      [-112.27, 51.18, 1],
      [126.67, -13.75, 1],
      [-53.33, -13.75, 1],
      [6.02, -15.42, 1],
      [-69.18, 73.47, 1],
      [-173.98, -15.42, 1],
      [105.51, 5.8, 1],
      [-110.82, -73.47, 1],
      [-105.51, -5.8, 1],
      [110.82, 73.47, 1],
      [-74.49, 5.8, 1],
      [69.18, -73.47, 1],
      [74.49, -5.8, 1],
      [-6.02, 15.42, 1],
      [173.98, 15.42, 1],
      [160.08, 33.45, 1],
      [62.71, -51.67, 1],
      [-19.92, 33.45, 1],
      [-54.9, 16.52, 1],
      [117.29, 51.67, 1],
      [54.9, -16.52, 1],
      [-117.29, -51.67, 1],
      [125.1, 16.52, 1],
      [-62.71, 51.67, 1],
      [-125.1, -16.52, 1],
      [-160.08, -33.45, 1],
      [19.92, -33.45, 1],
      [80.34, 6.51, 1],
      [6.61, 9.59, 1],
      [-99.66, 6.51, 1],
      [55.76, 78.37, 1],
      [173.39, -9.59, 1],
      [-55.76, -78.37, 1],
      [-173.39, 9.59, 1],
      [-124.24, 78.37, 1],
      [-6.61, -9.59, 1],
      [124.24, -78.37, 1],
      [-80.34, -6.51, 1],
      [99.66, -6.51, 1],
      [6.25, 24.64, 1],
      [76.64, 64.63, 1],
      [-173.75, 24.64, 1],
      [65.23, 5.68, 1],
      [103.36, -64.63, 1],
      [-65.23, -5.68, 1],
      [-103.36, 64.63, 1],
      [-114.77, 5.68, 1],
      [-76.64, -64.63, 1],
      [114.77, -5.68, 1],
      [-6.25, -24.64, 1],
      [173.75, -24.64, 1],
      [51.41, -63.45, 1],
      [-68.67, 16.19, 1],
      [-128.59, -63.45, 1],
      [162.69, 20.45, 1],
      [-111.33, -16.19, 1],
      [-162.69, -20.45, 1],
      [111.33, 16.19, 1],
      [-17.31, 20.45, 1],
      [68.67, -16.19, 1],
      [17.31, -20.45, 1],
      [-51.41, 63.45, 1],
      [128.59, 63.45, 1],
      [-50.6, 28.85, 1],
      [144.51, 33.77, 1],
      [129.4, 28.85, 1],
      [49.04, -42.6, 1],
      [35.49, -33.77, 1],
      [-49.04, 42.6, 1],
      [-35.49, 33.77, 1],
      [-130.96, -42.6, 1],
      [-144.51, -33.77, 1],
      [130.96, 42.6, 1],
      [50.6, -28.85, 1],
      [-129.4, -28.85, 1]
    ]
  ], n = t[M - 1];
  return n;
}
module.exports.getAmbisonicDecMtx = getAmbisonicDecMtx;
module.exports.getTdesign = getTdesign;
module.exports.deg2rad = deg2rad;
module.exports.rad2deg = rad2deg;
module.exports.createNearestLookup = createNearestLookup;
module.exports.findNearest = findNearest;
const _utils = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  createNearestLookup,
  deg2rad,
  findNearest,
  getAmbisonicDecMtx,
  getCircHarmonics,
  getColumn,
  getTdesign,
  rad2deg,
  sampleCircle
}, Symbol.toStringTag, { value: "Module" }));
function computeEncodingCoefficients(M, t, n) {
  const r = getAmbisonicChannelCount(n), i = degreesToRadians(M), s = degreesToRadians(t), e = computeRealSH_1(n, [[i, s]]), c = new Float32Array(r);
  for (let f = 0; f < r; f++)
    c[f] = e[f][0];
  return c;
}
function computeEncodingCoefficients2D(M, t) {
  const n = getAmbisonicChannelCount2D(t), r = getCircHarmonics(t, [M]), i = new Float32Array(n);
  for (let s = 0; s < n; s++)
    i[s] = r[s][0];
  return i;
}
function encodeBuffer(M, t, n, r) {
  const i = getAmbisonicChannelCount(r), s = M.length, e = computeEncodingCoefficients(t, n, r), c = new Array(i);
  for (let f = 0; f < i; f++) {
    c[f] = new Float32Array(s);
    const o = e[f];
    for (let l = 0; l < s; l++)
      c[f][l] = M[l] * o;
  }
  return c;
}
function encodeBuffer2D(M, t, n) {
  const r = getAmbisonicChannelCount2D(n), i = M.length, s = computeEncodingCoefficients2D(t, n), e = new Array(r);
  for (let c = 0; c < r; c++) {
    e[c] = new Float32Array(i);
    const f = s[c];
    for (let o = 0; o < i; o++)
      e[c][o] = M[o] * f;
  }
  return e;
}
function encodeBufferFromDirection(M, t, n, r, i, s = "ambisonics") {
  let e = t, c = n, f = r;
  s === "threejs" && (e = r, c = -t, f = n);
  const [[o, l]] = convertCart2Sph_1([[e, c, f]], 1), u = o * 180 / Math.PI, y = l * 180 / Math.PI;
  return encodeBuffer(M, u, y, i);
}
function encodeBuffer2DFromDirection(M, t, n, r, i, s = "ambisonics") {
  let e = t, c = n;
  s === "threejs" && (e = r, c = -t);
  const f = Math.atan2(c, e) * 180 / Math.PI;
  return encodeBuffer2D(M, f, i);
}
function encodeAndSumBuffers(M, t) {
  if (M.length === 0) {
    const s = getAmbisonicChannelCount(t);
    return Array.from({ length: s }, () => new Float32Array(0));
  }
  const n = Math.max(...M.map((s) => s.samples.length)), r = getAmbisonicChannelCount(t), i = Array.from(
    { length: r },
    () => new Float32Array(n)
  );
  for (const s of M) {
    const e = encodeBuffer(s.samples, s.azim, s.elev, t);
    for (let c = 0; c < r; c++)
      for (let f = 0; f < s.samples.length; f++)
        i[c][f] += e[c][f];
  }
  return i;
}
class monoEncoder {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.azim = 0, this.elev = 0, this.gains = new Array(this.nCh), this.gainNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gainNodes[r] = this.ctx.createGain(), this.gainNodes[r].channelCountMode = "explicit", this.gainNodes[r].channelCount = 1;
    this.updateGains();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.gainNodes[r]), this.gainNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateGains() {
    const t = computeRealSH_1(this.order, [
      [degreesToRadians(this.azim), degreesToRadians(this.elev)]
    ]);
    for (let n = 0; n < this.nCh; n++)
      this.gains[n] = t[n][0], this.gainNodes[n].gain.value = this.gains[n];
  }
  /**
   * Set the encoding direction from a Cartesian direction vector.
   * The vector does not need to be normalized.
   *
   * Note: A zero-length vector (0, 0, 0) results in undefined behavior
   * from the underlying spherical harmonic library.
   *
   * @param x - X component of direction vector
   * @param y - Y component of direction vector
   * @param z - Z component of direction vector
   * @param coords - Coordinate system convention (default: 'ambisonics')
   *   - 'ambisonics': +X forward, +Y left, +Z up
   *   - 'threejs': +Z forward, +Y up, +X right
   */
  setDirection(t, n, r, i = "ambisonics") {
    let s = t, e = n, c = r;
    i === "threejs" && (s = r, e = -t, c = n);
    const [[f, o]] = convertCart2Sph_1([[s, e, c]], 1);
    this.azim = radiansToDegrees(f), this.elev = radiansToDegrees(o), this.updateGains();
  }
  /**
   * Get the current encoding direction as a Cartesian unit vector.
   *
   * @param coords - Coordinate system convention (default: 'ambisonics')
   * @returns Direction as [x, y, z] unit vector
   */
  getDirection(t = "ambisonics") {
    const n = degreesToRadians(this.azim), r = degreesToRadians(this.elev), i = Math.cos(r), s = i * Math.cos(n), e = i * Math.sin(n), c = Math.sin(r);
    return t === "threejs" ? [-e, c, s] : [s, e, c];
  }
}
class monoEncoder2D {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.azim = 0, this.elev = 0, this.gainNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gainNodes[r] = this.ctx.createGain(), this.gainNodes[r].channelCountMode = "explicit", this.gainNodes[r].channelCount = 1;
    this.updateGains();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.gainNodes[r]), this.gainNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateGains() {
    const t = getCircHarmonics(this.order, [this.azim]);
    for (let n = 0; n < this.nCh; n++)
      this.gainNodes[n].gain.value = t[n][0];
  }
  /**
   * Set the encoding direction from a Cartesian direction vector.
   * Only the horizontal plane (x, y) components are used; z is ignored.
   * The vector does not need to be normalized.
   *
   * Note: A zero-length vector (0, 0, 0) or a purely vertical vector (0, 0, z)
   * results in azimuth 0 (front direction).
   *
   * @param x - X component of direction vector
   * @param y - Y component of direction vector
   * @param z - Z component (ignored for 2D encoding)
   * @param coords - Coordinate system convention (default: 'ambisonics')
   *   - 'ambisonics': +X forward, +Y left, +Z up
   *   - 'threejs': +Z forward, +Y up, +X right
   */
  setDirection(t, n, r, i = "ambisonics") {
    let s = t, e = n;
    i === "threejs" && (s = r, e = -t), this.azim = radiansToDegrees(Math.atan2(e, s)), this.elev = 0, this.updateGains();
  }
  /**
   * Get the current encoding direction as a Cartesian unit vector.
   * The z component will always be 0 for 2D encoding.
   *
   * @param coords - Coordinate system convention (default: 'ambisonics')
   * @returns Direction as [x, y, z] unit vector (z always 0)
   */
  getDirection(t = "ambisonics") {
    const n = degreesToRadians(this.azim), r = Math.cos(n), i = Math.sin(n);
    return t === "threejs" ? [-i, 0, r] : [r, i, 0];
  }
}
class orderLimiter {
  // Implement AmbisonicProcessor interface
  get order() {
    return this.orderOut;
  }
  get nCh() {
    return this.nChOut;
  }
  constructor(t, n, r) {
    this.ctx = t, this.orderIn = n, this.orderOut = r < n ? r : n, this.nChIn = getAmbisonicChannelCount(this.orderIn), this.nChOut = getAmbisonicChannelCount(this.orderOut), this.in = this.ctx.createChannelSplitter(this.nChIn), this.out = this.ctx.createChannelMerger(this.nChOut);
    for (let i = 0; i < this.nChOut; i++)
      this.in.connect(this.out, i, i);
  }
  updateOrder(t) {
    if (!(t > this.orderIn)) {
      this.orderOut = t, this.nChOut = getAmbisonicChannelCount(this.orderOut), this.out.disconnect(), this.out = this.ctx.createChannelMerger(this.nChOut);
      for (let n = 0; n < this.nChOut; n++)
        this.in.connect(this.out, n, n);
    }
  }
}
class orderLimiter2D {
  // Implement AmbisonicProcessor interface
  get order() {
    return this.orderOut;
  }
  get nCh() {
    return this.nChOut;
  }
  constructor(t, n, r) {
    this.ctx = t, this.orderIn = n, this.orderOut = r < n ? r : n, this.nChIn = getAmbisonicChannelCount2D(this.orderIn), this.nChOut = getAmbisonicChannelCount2D(this.orderOut), this.in = this.ctx.createChannelSplitter(this.nChIn), this.out = this.ctx.createChannelMerger(this.nChOut);
    for (let i = 0; i < this.nChOut; i++)
      this.in.connect(this.out, i, i);
  }
  updateOrder(t) {
    if (!(t > this.orderIn)) {
      this.orderOut = t, this.nChOut = getAmbisonicChannelCount2D(this.orderOut), this.out.disconnect(), this.out = this.ctx.createChannelMerger(this.nChOut);
      for (let n = 0; n < this.nChOut; n++)
        this.in.connect(this.out, n, n);
    }
  }
}
class orderWeight {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(this.order), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh), this.orderGains = new Array(this.order + 1), this.orderGains.fill(1);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  updateOrderGains() {
    for (let t = 0; t < this.nCh; t++) {
      const n = Math.floor(Math.sqrt(t));
      this.gains[t].gain.value = this.orderGains[n];
    }
  }
  computeMaxRECoeffs() {
    const t = this.order;
    this.orderGains[0] = 1;
    let n = 0, r = 0;
    for (let i = 1; i <= t; i++) {
      const s = recurseLegendrePoly_1(
        i,
        [Math.cos(2.406809 / (t + 1.51))],
        n,
        r
      );
      this.orderGains[i] = s[0][0], r = n, n = s;
    }
  }
}
class sceneRotator {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.yaw = 0, this.pitch = 0, this.roll = 0, this.rotMtx = numeric$2.identity(this.nCh), this.rotMtxNodes = new Array(this.order), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh);
    for (let i = 1; i <= this.order; i++) {
      const s = new Array(2 * i + 1);
      for (let e = 0; e < 2 * i + 1; e++) {
        s[e] = new Array(2 * i + 1);
        for (let c = 0; c < 2 * i + 1; c++)
          s[e][c] = this.ctx.createGain(), s[e][c].gain.value = e === c ? 1 : 0;
      }
      this.rotMtxNodes[i - 1] = s;
    }
    this.in.connect(this.out, 0, 0);
    let r = 1;
    for (let i = 1; i <= this.order; i++) {
      for (let s = 0; s < 2 * i + 1; s++)
        for (let e = 0; e < 2 * i + 1; e++)
          this.in.connect(this.rotMtxNodes[i - 1][s][e], r + e, 0), this.rotMtxNodes[i - 1][s][e].connect(this.out, 0, r + s);
      r = r + 2 * i + 1;
    }
  }
  updateRotMtx() {
    const t = degreesToRadians(this.yaw), n = degreesToRadians(this.pitch), r = degreesToRadians(this.roll);
    this.rotMtx = getSHrotMtx_1(
      yawPitchRoll2Rzyx_1(t, n, r),
      this.order
    );
    let i = 1;
    for (let s = 1; s < this.order + 1; s++) {
      for (let e = 0; e < 2 * s + 1; e++)
        for (let c = 0; c < 2 * s + 1; c++)
          this.rotMtxNodes[s - 1][e][c].gain.value = this.rotMtx[i + e][i + c];
      i = i + 2 * s + 1;
    }
  }
}
class sceneRotator2D {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.yaw = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.rotMtxNodes = new Array(2 * this.order), this.in.connect(this.out, 0, 0);
    for (let r = 0; r < 2 * this.order; r = r + 2) {
      const i = [
        this.ctx.createGain(),
        this.ctx.createGain()
      ], s = [
        this.ctx.createGain(),
        this.ctx.createGain()
      ];
      this.rotMtxNodes[r] = i, this.rotMtxNodes[r + 1] = s, this.in.connect(this.rotMtxNodes[r][0], r + 1, 0), this.rotMtxNodes[r][0].connect(this.out, 0, r + 1), this.in.connect(this.rotMtxNodes[r][1], r + 2, 0), this.rotMtxNodes[r][1].connect(this.out, 0, r + 1), this.in.connect(this.rotMtxNodes[r + 1][0], r + 1, 0), this.rotMtxNodes[r + 1][0].connect(this.out, 0, r + 2), this.in.connect(this.rotMtxNodes[r + 1][1], r + 2, 0), this.rotMtxNodes[r + 1][1].connect(this.out, 0, r + 2);
    }
    this.updateRotMtx();
  }
  updateRotMtx() {
    const t = degreesToRadians(this.yaw);
    let n = 1;
    for (let r = 0; r < 2 * this.order; r = r + 2)
      this.rotMtxNodes[r][0].gain.value = Math.cos(n * t), this.rotMtxNodes[r][1].gain.value = Math.sin(n * t), this.rotMtxNodes[r + 1][0].gain.value = -Math.sin(n * t), this.rotMtxNodes[r + 1][1].gain.value = Math.cos(n * t), n++;
  }
}
class sceneMirror {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.mirrorPlane = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1, this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  reset() {
    for (let t = 0; t < this.nCh; t++)
      this.gains[t].gain.value = 1;
  }
  mirror(t) {
    switch (t) {
      case 0:
        this.mirrorPlane = 0, this.reset();
        break;
      case 1:
        this.reset(), this.mirrorPlane = 1;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            (r < 0 && r % 2 === 0 || r > 0 && r % 2 === 1) && (this.gains[i].gain.value = -1);
          }
        break;
      case 2:
        this.reset(), this.mirrorPlane = 2;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            r < 0 && (this.gains[i].gain.value = -1);
          }
        break;
      case 3:
        this.reset(), this.mirrorPlane = 3;
        for (let n = 0; n <= this.order; n++)
          for (let r = -n; r <= n; r++) {
            const i = n * n + n + r;
            (r + n) % 2 === 1 && (this.gains[i].gain.value = -1);
          }
        break;
      default:
        console.log(
          "The mirroring planes can be either 1 (yz), 2 (xz), 3 (xy), or 0 (no mirroring). Value set to 0."
        ), this.mirrorPlane = 0, this.reset();
    }
  }
}
class sceneMirror2D {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.mirrorPlane = 0, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1, this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
  }
  reset() {
    for (let t = 0; t < this.nCh; t++)
      this.gains[t].gain.value = 1;
  }
  mirror(t) {
    switch (t) {
      case 0:
        this.mirrorPlane = 0, this.reset();
        break;
      case 1:
        this.reset(), this.mirrorPlane = 1;
        for (let n = 2; n < this.nCh; n++)
          this.gains[n].gain.value = -1, n % 2 !== 0 && (n = n + 2);
        break;
      case 2:
        this.reset(), this.mirrorPlane = 2;
        for (let n = 0; n < this.nCh; n++)
          n % 2 !== 0 && (this.gains[n].gain.value = -1);
        break;
      case 3:
        console.log("up-down mirroring in 2D mode not possible");
        break;
      default:
        console.log(
          "The mirroring planes can be either 1 (yz), 2 (xz) or 0 (no mirroring). Value set to 0."
        ), this.mirrorPlane = 0, this.reset();
    }
  }
}
class binDecoder {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.decFilters = new Array(this.nCh), this.decFilterNodes = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(2), this.out.channelCountMode = "explicit", this.out.channelCount = 1, this.gainMid = this.ctx.createGain(), this.gainSide = this.ctx.createGain(), this.invertSide = this.ctx.createGain(), this.gainMid.gain.value = 1, this.gainSide.gain.value = 1, this.invertSide.gain.value = -1;
    for (let r = 0; r < this.nCh; r++)
      this.decFilterNodes[r] = this.ctx.createConvolver(), this.decFilterNodes[r].normalize = !1;
    this.resetFilters();
    for (let r = 0; r < this.nCh; r++) {
      this.in.connect(this.decFilterNodes[r], r, 0);
      const i = Math.floor(Math.sqrt(r));
      r - i * i - i >= 0 ? this.decFilterNodes[r].connect(this.gainMid) : this.decFilterNodes[r].connect(this.gainSide);
    }
    this.gainMid.connect(this.out, 0, 0), this.gainSide.connect(this.out, 0, 0), this.gainMid.connect(this.out, 0, 1), this.gainSide.connect(this.invertSide, 0, 0), this.invertSide.connect(this.out, 0, 1), this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.decFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.decFilters[n].getChannelData(0).set(t.getChannelData(n)), this.decFilterNodes[n].buffer = this.decFilters[n];
  }
  resetFilters() {
    const t = new Array(this.nCh);
    t.fill(0), t[0] = 0.5, t[1] = 0.5 / Math.sqrt(3);
    for (let n = 0; n < this.nCh; n++) {
      this.decFilters[n] = this.ctx.createBuffer(1, 64, this.ctx.sampleRate);
      for (let r = 0; r < 64; r++)
        this.decFilters[n].getChannelData(0)[r] = 0;
      this.decFilters[n].getChannelData(0)[0] = t[n], this.decFilterNodes[n].buffer = this.decFilters[n];
    }
  }
}
class binDecoder2D {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.decFilters = new Array(this.nCh), this.decFilterNodes = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(2), this.out.channelCountMode = "explicit", this.out.channelCount = 1, this.gainMid = this.ctx.createGain(), this.gainSide = this.ctx.createGain(), this.invertSide = this.ctx.createGain(), this.gainMid.gain.value = 1, this.gainSide.gain.value = 1, this.invertSide.gain.value = -1;
    for (let r = 0; r < this.nCh; r++)
      this.decFilterNodes[r] = this.ctx.createConvolver(), this.decFilterNodes[r].normalize = !1;
    this.resetFilters();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.decFilterNodes[r], r, 0), r % 2 === 0 ? this.decFilterNodes[r].connect(this.gainMid) : this.decFilterNodes[r].connect(this.gainSide);
    this.gainMid.connect(this.out, 0, 0), this.gainSide.connect(this.out, 0, 0), this.gainMid.connect(this.out, 0, 1), this.gainSide.connect(this.invertSide, 0, 0), this.invertSide.connect(this.out, 0, 1), this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.decFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.decFilters[n].getChannelData(0).set(t.getChannelData(n)), this.decFilterNodes[n].buffer = this.decFilters[n];
  }
  resetFilters() {
    const t = new Array(this.nCh);
    t.fill(0), t[0] = 0.5, t[1] = 0.5 / Math.sqrt(3);
    for (let n = 0; n < this.nCh; n++) {
      this.decFilters[n] = this.ctx.createBuffer(1, 64, this.ctx.sampleRate);
      for (let r = 0; r < 64; r++)
        this.decFilters[n].getChannelData(0)[r] = 0;
      this.decFilters[n].getChannelData(0)[0] = t[n], this.decFilterNodes[n].buffer = this.decFilters[n];
    }
  }
}
class decoder {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.nSpk = 0, this._decodingMatrix = [], this._spkSphPosArray = [], this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(1), this._spkSphPosArray = this._getDefaultSpkConfig(this.order), this._updateDecodeMtx(this._spkSphPosArray);
  }
  // spkSphPosArray in spherical coordinates: [ [azim1, elev1, dist1], ... [azimN, elevN, distN] ]
  set speakerPos(t) {
    t === void 0 && (t = this._getDefaultSpkConfig(this.order)), this._spkSphPosArray = t, this.out.disconnect(), this._updateDecodeMtx(t);
  }
  get speakerPos() {
    return this._spkSphPosArray;
  }
  // internal method to calculate Ambisonic decoding matrix and define new ambisonic gain nodes and values
  _updateDecodeMtx(t) {
    this.nSpk = t.length, this.out = this.ctx.createChannelMerger(this.nSpk), this._decodingMatrix = getAmbisonicDecMtx(t, this.order), this.mtxGain = new Array(this.nCh);
    for (let n = 0; n < this.nCh; n++) {
      this.mtxGain[n] = new Array(this.nSpk);
      for (let r = 0; r < this.nSpk; r++) {
        const i = this.ctx.createGain();
        i.gain.value = this._decodingMatrix[r][n], this.in.connect(i, n, 0), i.connect(this.out, 0, r), this.mtxGain[n][r] = i;
      }
    }
  }
  // get default speaker configuration for orders 1, 2, 3
  _getDefaultSpkConfig(t) {
    let n = [];
    switch (t) {
      case 1:
        n = [
          [0, 0, 1],
          [90, 0, 1],
          [180, 0, 1],
          [270, 0, 1],
          [0, 90, 1],
          [0, -90, 1]
        ];
        break;
      case 2:
        n = [
          [180, -31.7161, 0.5878],
          [180, 31.7161, 0.5878],
          [-121.7161, 0, 0.5878],
          [121.7161, 0, 0.5878],
          [-90, -58.2839, 0.5878],
          [-90, 58.2839, 0.5878],
          [90, -58.2839, 0.5878],
          [90, 58.2839, 0.5878],
          [-58.2839, 0, 0.5878],
          [58.2839, 0, 0.5878],
          [0, -31.7161, 0.5878],
          [0, 31.7161, 0.5878]
        ];
        break;
      case 3:
        n = [
          [-159.0931, 0, 0.5352],
          [159.0931, 0, 0.5352],
          [-135, -35.2644, 0.5352],
          [-135, 35.2644, 0.5352],
          [135, -35.2644, 0.5352],
          [135, 35.2644, 0.5352],
          [180, -69.0931, 0.5352],
          [180, 69.0931, 0.5352],
          [-90, -20.9069, 0.5352],
          [-90, 20.9069, 0.5352],
          [90, -20.9069, 0.5352],
          [90, 20.9069, 0.5352],
          [0, -69.0931, 0.5352],
          [0, 69.0931, 0.5352],
          [-45, -35.2644, 0.5352],
          [-45, 35.2644, 0.5352],
          [45, -35.2644, 0.5352],
          [45, 35.2644, 0.5352],
          [-20.9069, 0, 0.5352],
          [20.9069, 0, 0.5352]
        ];
        break;
      default:
        console.error("unsupported default order:", t);
    }
    return n;
  }
}
class convolver {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.encFilters = new Array(this.nCh), this.encFilterNodes = new Array(this.nCh), this.in = this.ctx.createGain(), this.in.channelCountMode = "explicit", this.in.channelCount = 1, this.out = this.ctx.createChannelMerger(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.encFilterNodes[r] = this.ctx.createConvolver(), this.encFilterNodes[r].normalize = !1;
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.encFilterNodes[r]), this.encFilterNodes[r].connect(this.out, 0, r);
    this.initialized = !0;
  }
  updateFilters(t) {
    for (let n = 0; n < this.nCh; n++)
      this.encFilters[n] = this.ctx.createBuffer(
        1,
        t.length,
        t.sampleRate
      ), this.encFilters[n].getChannelData(0).set(t.getChannelData(n)), this.encFilterNodes[n].buffer = this.encFilters[n];
  }
}
class virtualMic {
  constructor(t, n) {
    this.initialized = !1, this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.azim = 0, this.elev = 0, this.vmicGains = new Array(this.nCh), this.vmicGainNodes = new Array(this.nCh), this.vmicCoeffs = new Array(this.order + 1), this.vmicPattern = "hypercardioid", this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createGain();
    for (let r = 0; r < this.nCh; r++)
      this.vmicGainNodes[r] = this.ctx.createGain();
    this.SHxyz = new Array(this.nCh), this.SHxyz.fill(0), this.updatePattern(), this.updateOrientation();
    for (let r = 0; r < this.nCh; r++)
      this.in.connect(this.vmicGainNodes[r], r, 0), this.vmicGainNodes[r].connect(this.out);
    this.initialized = !0;
  }
  updatePattern() {
    switch (this.vmicPattern) {
      case "cardioid":
        this.vmicCoeffs = this.computeCardioidCoeffs(this.order);
        break;
      case "supercardioid":
        this.vmicCoeffs = this.computeSupercardCoeffs(this.order);
        break;
      case "hypercardioid":
        this.vmicCoeffs = this.computeHypercardCoeffs(this.order);
        break;
      case "max_rE":
        this.vmicCoeffs = this.computeMaxRECoeffs(this.order);
        break;
      default:
        this.vmicPattern = "hypercardioid", this.vmicCoeffs = this.computeHypercardCoeffs(this.order);
    }
    this.updateGains();
  }
  updateOrientation() {
    const t = degreesToRadians(this.azim), n = degreesToRadians(this.elev), r = computeRealSH_1(this.order, [[t, n]]);
    for (let i = 0; i < this.nCh; i++)
      this.SHxyz[i] = r[i][0];
    this.updateGains();
  }
  updateGains() {
    for (let t = 0; t <= this.order; t++)
      for (let n = -t; n <= t; n++) {
        const r = t * t + t + n;
        this.vmicGains[r] = this.vmicCoeffs[t] * this.SHxyz[r];
      }
    for (let t = 0; t < this.nCh; t++)
      this.vmicGainNodes[t].gain.value = this.vmicGains[t];
  }
  computeCardioidCoeffs(t) {
    const n = new Array(t + 1);
    for (let r = 0; r <= t; r++)
      n[r] = factorial_1(t) * factorial_1(t) / (factorial_1(t + r + 1) * factorial_1(t - r));
    return n;
  }
  computeHypercardCoeffs(t) {
    const n = new Array(t + 1), r = (t + 1) * (t + 1);
    for (let i = 0; i <= t; i++)
      n[i] = 1 / r;
    return n;
  }
  computeSupercardCoeffs(t) {
    switch (t) {
      case 1:
        return [0.366, 0.2113];
      case 2:
        return [0.2362, 0.1562, 0.059];
      case 3:
        return [0.1768, 0.1281, 0.0633, 0.0175];
      case 4:
        return [0.1414, 0.1087, 0.0623, 0.0247, 54e-4];
      default:
        return console.error("Orders should be in the range of 1-4 at the moment."), [];
    }
  }
  computeMaxRECoeffs(t) {
    const n = new Array(t + 1);
    n[0] = 1;
    let r = 0, i = 0;
    for (let e = 1; e < t + 1; e++) {
      const c = recurseLegendrePoly_1(
        e,
        [Math.cos(2.406809 / (t + 1.51))],
        r,
        i
      );
      n[e] = c[0][0], i = r, r = c;
    }
    let s = 0;
    for (let e = 0; e <= t; e++)
      s += n[e] * (2 * e + 1);
    for (let e = 0; e <= t; e++)
      n[e] = n[e] / s;
    return n;
  }
}
if (commonjsGlobal.AnalyserNode && !commonjsGlobal.AnalyserNode.prototype.getFloatTimeDomainData) {
  var uint8 = new Uint8Array(2048);
  commonjsGlobal.AnalyserNode.prototype.getFloatTimeDomainData = function(M) {
    this.getByteTimeDomainData(uint8);
    for (var t = 0, n = M.length; t < n; t++)
      M[t] = (uint8[t] - 128) * 78125e-7;
  };
}
class rmsAnalyser {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.analysers = new Array(this.nCh), this.analBuffers = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++)
      this.analysers[r] = this.ctx.createAnalyser(), this.analysers[r].fftSize = this.fftSize, this.analysers[r].smoothingTimeConstant = 0, this.analBuffers[r] = new Float32Array(this.fftSize), this.in.connect(this.analysers[r], r, 0), this.analysers[r].connect(this.out, 0, r);
  }
  updateBuffers() {
    for (let t = 0; t < this.nCh; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeRMS() {
    const t = new Array(this.nCh);
    t.fill(0);
    for (let n = 0; n < this.nCh; n++) {
      for (let r = 0; r < this.fftSize; r++)
        t[n] = t[n] + this.analBuffers[n][r] * this.analBuffers[n][r];
      t[n] = Math.sqrt(t[n] / this.fftSize);
    }
    return t;
  }
}
class powermapAnalyser {
  constructor(t, n, r) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.fftSize = 2048, this.analysers = new Array(this.nCh), this.analBuffers = new Array(this.nCh), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh);
    for (let s = 0; s < this.nCh; s++)
      this.analysers[s] = this.ctx.createAnalyser(), this.analysers[s].fftSize = this.fftSize, this.analysers[s].smoothingTimeConstant = 0, this.analBuffers[s] = new Float32Array(this.fftSize);
    for (let s = 0; s < this.nCh; s++)
      this.in.connect(this.out, s, s), this.in.connect(this.analysers[s], s, 0);
    const i = getTdesign(4 * n);
    this.td_dirs_rad = deg2rad(i), this.SHmtx = computeRealSH_1(this.order, this.td_dirs_rad), this.mode = r;
  }
  updateBuffers() {
    for (let t = 0; t < this.nCh; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computePowermap() {
    const t = this.td_dirs_rad.length, n = numeric$2.dot(
      numeric$2.transpose(this.SHmtx),
      this.analBuffers
    ), r = new Array(t);
    for (let i = 0; i < t; i++) {
      let s = 0;
      for (let e = 0; e < this.fftSize; e++)
        s = s + n[i][e] * n[i][e];
      s = s / this.fftSize, r[i] = [
        this.td_dirs_rad[i][0],
        this.td_dirs_rad[i][1],
        s
      ];
    }
    return this.mode === 0 ? r : forwardSHT_1(
      2 * this.order,
      r,
      1,
      0
    );
  }
}
class intensityAnalyser {
  constructor(t) {
    this.ctx = t, this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(3);
    for (let n = 0; n < 3; n++)
      this.gains[n] = this.ctx.createGain(), this.gains[n].gain.value = 1 / Math.sqrt(3);
    this.analysers = new Array(4), this.analBuffers = new Array(4);
    for (let n = 0; n < 4; n++)
      this.analysers[n] = this.ctx.createAnalyser(), this.analysers[n].fftSize = this.fftSize, this.analysers[n].smoothingTimeConstant = 0, this.analBuffers[n] = new Float32Array(this.fftSize);
    this.in.connect(this.out, 0, 0), this.in.connect(this.analysers[0], 0, 0), this.in.connect(this.gains[1], 1, 0), this.in.connect(this.gains[2], 2, 0), this.in.connect(this.gains[0], 3, 0);
    for (let n = 0; n < 3; n++)
      this.gains[n].connect(this.analysers[n + 1], 0, 0), this.gains[n].connect(this.out, 0, n + 1);
  }
  updateBuffers() {
    for (let t = 0; t < 4; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeIntensity() {
    let t = 0, n = 0, r = 0, i = 0, s = 0, e = 0, c = 0;
    for (let m = 0; m < this.fftSize; m++)
      t = t + this.analBuffers[0][m] * this.analBuffers[1][m], n = n + this.analBuffers[0][m] * this.analBuffers[2][m], r = r + this.analBuffers[0][m] * this.analBuffers[3][m], i = i + this.analBuffers[0][m] * this.analBuffers[0][m], s = s + this.analBuffers[1][m] * this.analBuffers[1][m], e = e + this.analBuffers[2][m] * this.analBuffers[2][m], c = c + this.analBuffers[3][m] * this.analBuffers[3][m];
    const f = [t, n, r], o = Math.sqrt(f[0] * f[0] + f[1] * f[1] + f[2] * f[2]), l = (i + s + e + c) / 2, u = 1 - o / (l + 1e-7), y = radiansToDegrees(Math.atan2(n, t)), v = radiansToDegrees(
      Math.atan2(f[2], Math.sqrt(f[0] * f[0] + f[1] * f[1]))
    );
    return [y, v, u, l];
  }
}
class intensityAnalyser2D {
  constructor(t) {
    this.ctx = t, this.fftSize = 2048, this.in = this.ctx.createChannelSplitter(3), this.out = this.ctx.createChannelMerger(3), this.gains = new Array(2);
    for (let n = 0; n < 2; n++)
      this.gains[n] = this.ctx.createGain(), this.gains[n].gain.value = 1 / Math.sqrt(3);
    this.analysers = new Array(3), this.analBuffers = new Array(3);
    for (let n = 0; n < 3; n++)
      this.analysers[n] = this.ctx.createAnalyser(), this.analysers[n].fftSize = this.fftSize, this.analysers[n].smoothingTimeConstant = 0, this.analBuffers[n] = new Float32Array(this.fftSize);
    this.in.connect(this.out, 0, 0), this.in.connect(this.analysers[0], 0, 0), this.in.connect(this.gains[1], 1, 0), this.in.connect(this.gains[0], 2, 0);
    for (let n = 0; n < 2; n++)
      this.gains[n].connect(this.analysers[n + 1], 0, 0), this.gains[n].connect(this.out, 0, n + 1);
  }
  updateBuffers() {
    for (let t = 0; t < 3; t++)
      this.analysers[t].getFloatTimeDomainData(this.analBuffers[t]);
  }
  computeIntensity() {
    let t = 0, n = 0, r = 0, i = 0, s = 0;
    for (let y = 0; y < this.fftSize; y++)
      t = t + this.analBuffers[0][y] * this.analBuffers[1][y], n = n + this.analBuffers[0][y] * this.analBuffers[2][y], r = r + this.analBuffers[0][y] * this.analBuffers[0][y], i = i + this.analBuffers[1][y] * this.analBuffers[1][y], s = s + this.analBuffers[2][y] * this.analBuffers[2][y];
    const e = [t, n], c = Math.sqrt(e[0] * e[0] + e[1] * e[1]), f = (r + i + s) / 2, o = 1 - c / (f + 1e-7);
    return [-radiansToDegrees(Math.atan2(n, t)), 0, o, f];
  }
}
function pad(M, t) {
  return ("000000000" + M).substr(-2);
}
class HOAloader {
  constructor(t, n, r, i) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.nChGroups = Math.ceil(this.nCh / 8), this.buffers = new Array(), this.loadCount = 0, this.loaded = !1, this.onLoad = i, this.urls = new Array(this.nChGroups), this.concatBuffer = null;
    const s = r.slice(r.length - 3, r.length);
    this.fileExt = s;
    for (let e = 0; e < this.nChGroups; e++)
      e === this.nChGroups - 1 ? this.urls[e] = r.slice(0, r.length - 4) + "_" + pad(e * 8 + 1) + "-" + pad(this.nCh) + "ch." + s : this.urls[e] = r.slice(0, r.length - 4) + "_" + pad(e * 8 + 1) + "-" + pad(e * 8 + 8) + "ch." + s;
  }
  loadBuffers(t, n) {
    const r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "arraybuffer";
    const i = this;
    r.onload = function() {
      i.context.decodeAudioData(
        r.response,
        function(s) {
          if (!s) {
            alert("error decoding file data: " + t);
            return;
          }
          i.buffers[n] = s, i.loadCount++, i.loadCount === i.nChGroups && (i.loaded = !0, i.concatBuffers(), console.log("HOAloader: all buffers loaded and concatenated"), i.onLoad(i.concatBuffer));
        },
        function(s) {
          alert(
            "Browser cannot decode audio data:  " + t + `

Error: ` + s + `

(If you re using Safari and get a null error, this is most likely due to Apple's shady plan going on to stop the .ogg format from easing web developer's life :)`
          );
        }
      );
    }, r.onerror = function() {
      alert("HOAloader: XHR error");
    }, r.send();
  }
  load() {
    for (let t = 0; t < this.nChGroups; ++t) this.loadBuffers(this.urls[t], t);
  }
  concatBuffers() {
    if (!this.loaded) return;
    const t = this.nCh, n = this.nChGroups;
    let r = this.buffers[0].length;
    this.buffers.forEach((e) => {
      r = Math.max(r, e.length);
    });
    const i = this.buffers[0].sampleRate;
    let s = [1, 2, 3, 4, 5, 6, 7, 8];
    this.fileExt.toLowerCase() === "ogg" && (console.log(
      "Loading of 8chan OGG files [Chrome/Firefox]: remap channels to correct order!"
    ), s = [1, 3, 2, 7, 8, 5, 6, 4]), this.concatBuffer = this.context.createBuffer(t, r, i);
    for (let e = 0; e < n; e++)
      for (let c = 0; c < this.buffers[e].numberOfChannels; c++)
        this.concatBuffer.getChannelData(e * 8 + c).set(this.buffers[e].getChannelData(s[c] - 1));
  }
}
class HRIRloader_local {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.onLoad = r, this.vls_dirs_deg = getTdesign(2 * this.order), this.nVLS = this.vls_dirs_deg.length, this.nearestLookupRes = [5, 5], this.fs = 0, this.nSamples = 0, this.hrir_dirs_deg = [], this.hrirs = [], this.nearestLookup = [], this.nearest_dirs_deg = [], this.vls_hrirs = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    const n = this, r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "json", r.onload = function() {
      n.parseHrirFromJSON(r.response), n.nearestLookup = createNearestLookup(
        n.hrir_dirs_deg,
        n.nearestLookupRes
      );
      const i = findNearest(
        n.vls_dirs_deg,
        n.nearestLookup,
        n.nearestLookupRes
      );
      n.nearest_dirs_deg = n.getClosestDirs(i, n.hrir_dirs_deg), n.vls_hrirs = n.getClosestHrirFilters(i, n.hrirs), n.computeDecFilters();
    }, r.send();
  }
  parseHrirFromJSON(t) {
    const n = this;
    this.fs = t.leaves[6].data[0], this.nSamples = t.leaves[8].data[0][1].length, this.hrir_dirs_deg = [], t.leaves[4].data.forEach(function(r) {
      n.hrir_dirs_deg.push([r[0], r[1]]);
    }), this.hrirs = [], t.leaves[8].data.forEach(function(r) {
      const i = new Float64Array(r[0]), s = new Float64Array(r[1]);
      n.hrirs.push([i, s]);
    });
  }
  getClosestDirs(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  getClosestHrirFilters(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  computeDecFilters() {
    this.decodingMatrix = getAmbisonicDecMtx(
      this.nearest_dirs_deg,
      this.order
    ), this.hoaBuffer = this.getHoaFilterFromHrirFilter(
      this.nCh,
      this.nSamples,
      this.fs,
      this.vls_hrirs,
      this.decodingMatrix
    ), this.onLoad(this.hoaBuffer);
  }
  getHoaFilterFromHrirFilter(t, n, r, i, s) {
    n > i[0][0].length && (n = i[0][0].length);
    const e = this.context.createBuffer(t, n, r);
    for (let c = 0; c < t; c++) {
      const f = new Float32Array(n);
      for (let o = 0; o < i.length; o++)
        for (let l = 0; l < n; l++)
          f[l] += s[o][c] * i[o][0][l];
      e.getChannelData(c).set(f);
    }
    return e;
  }
}
class HRIRloader2D_local {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount2D(n), this.onLoad = r, this.vls_dirs_deg = sampleCircle(2 * this.order + 2), this.nVLS = this.vls_dirs_deg.length, this.nearestLookupRes = [5, 5], this.fs = 0, this.nSamples = 0, this.hrir_dirs_deg = [], this.hrirs = [], this.nearestLookup = [], this.vls_hrirs = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    const n = this, r = new XMLHttpRequest();
    r.open("GET", t, !0), r.responseType = "json", r.onload = function() {
      n.parseHrirFromJSON(r.response), n.nearestLookup = createNearestLookup(
        n.hrir_dirs_deg,
        n.nearestLookupRes
      );
      const i = findNearest(
        n.vls_dirs_deg,
        n.nearestLookup,
        n.nearestLookupRes
      );
      n.getClosestDirs(i, n.hrir_dirs_deg), n.vls_hrirs = n.getClosestHrirFilters(i, n.hrirs), n.computeDecFilters();
    }, r.send();
  }
  parseHrirFromJSON(t) {
    const n = this;
    this.fs = t.leaves[6].data[0], this.nSamples = t.leaves[8].data[0][1].length, this.hrir_dirs_deg = [], t.leaves[4].data.forEach(function(r) {
      n.hrir_dirs_deg.push([r[0], r[1]]);
    }), this.hrirs = [], t.leaves[8].data.forEach(function(r) {
      const i = new Float64Array(r[0]), s = new Float64Array(r[1]);
      n.hrirs.push([i, s]);
    });
  }
  getClosestDirs(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  getClosestHrirFilters(t, n) {
    const r = t.length, i = [];
    for (let s = 0; s < r; s++)
      i.push(n[t[s]]);
    return i;
  }
  computeDecFilters() {
    const t = [];
    t.push(1);
    for (let r = 1; r < this.order + 1; r++)
      t.push(Math.cos(r * Math.PI / (2 * this.order + 2))), t.push(Math.cos(r * Math.PI / (2 * this.order + 2)));
    const n = numeric$2.diag(t);
    this.decodingMatrix = numeric$2.transpose(
      getCircHarmonics(
        this.order,
        getColumn(this.vls_dirs_deg, 0)
      )
    ), this.decodingMatrix = numeric$2.dot(
      this.decodingMatrix,
      n
    ), this.decodingMatrix = numeric$2.mul(
      2 * Math.PI / this.vls_dirs_deg.length,
      this.decodingMatrix
    ), this.hoaBuffer = this.getHoaFilterFromHrirFilter(
      this.nCh,
      this.nSamples,
      this.fs,
      this.vls_hrirs,
      this.decodingMatrix
    ), this.onLoad(this.hoaBuffer);
  }
  getHoaFilterFromHrirFilter(t, n, r, i, s) {
    n > i[0][0].length && (n = i[0][0].length);
    const e = this.context.createBuffer(t, n, r);
    for (let c = 0; c < t; c++) {
      const f = new Float32Array(n);
      for (let o = 0; o < i.length; o++)
        for (let l = 0; l < n; l++)
          f[l] += s[o][c] * i[o][0][l];
      e.getChannelData(c).set(f);
    }
    return e;
  }
}
function commonjsRequire(M) {
  throw new Error('Could not dynamically require "' + M + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var serveSofaHrir = { exports: {} };
(function(M, t) {
  (function(n) {
    M.exports = n();
  })(function() {
    return function n(r, i, s) {
      function e(o, l) {
        if (!i[o]) {
          if (!r[o]) {
            var u = typeof commonjsRequire == "function" && commonjsRequire;
            if (!l && u) return u(o, !0);
            if (c) return c(o, !0);
            var y = new Error("Cannot find module '" + o + "'");
            throw y.code = "MODULE_NOT_FOUND", y;
          }
          var v = i[o] = { exports: {} };
          r[o][0].call(v.exports, function(m) {
            var p = r[o][1][m];
            return e(p || m);
          }, v, v.exports, n, r, i, s);
        }
        return i[o].exports;
      }
      for (var c = typeof commonjsRequire == "function" && commonjsRequire, f = 0; f < s.length; f++) e(s[f]);
      return e;
    }({ 1: [function(n, r, i) {
      r.exports = { default: n("core-js/library/fn/object/define-property"), __esModule: !0 };
    }, { "core-js/library/fn/object/define-property": 4 }], 2: [function(n, r, i) {
      i.default = function(s, e) {
        if (!(s instanceof e))
          throw new TypeError("Cannot call a class as a function");
      }, i.__esModule = !0;
    }, {}], 3: [function(n, r, i) {
      var s = n("babel-runtime/core-js/object/define-property").default;
      i.default = /* @__PURE__ */ function() {
        function e(c, f) {
          for (var o = 0; o < f.length; o++) {
            var l = f[o];
            l.enumerable = l.enumerable || !1, l.configurable = !0, "value" in l && (l.writable = !0), s(c, l.key, l);
          }
        }
        return function(c, f, o) {
          return f && e(c.prototype, f), o && e(c, o), c;
        };
      }(), i.__esModule = !0;
    }, { "babel-runtime/core-js/object/define-property": 1 }], 4: [function(n, r, i) {
      var s = n("../../modules/$");
      r.exports = function(c, f, o) {
        return s.setDesc(c, f, o);
      };
    }, { "../../modules/$": 5 }], 5: [function(n, r, i) {
      var s = Object;
      r.exports = {
        create: s.create,
        getProto: s.getPrototypeOf,
        isEnum: {}.propertyIsEnumerable,
        getDesc: s.getOwnPropertyDescriptor,
        setDesc: s.defineProperty,
        setDescs: s.defineProperties,
        getKeys: s.keys,
        getNames: s.getOwnPropertyNames,
        getSymbols: s.getOwnPropertySymbols,
        each: [].forEach
      };
    }, {}], 6: [function(n, r, i) {
      var s = n("babel-runtime/helpers/create-class").default, e = n("babel-runtime/helpers/class-call-check").default;
      Object.defineProperty(i, "__esModule", {
        value: !0
      });
      var c = function() {
        function f(o, l) {
          e(this, f), this.delayTime = 0, this.posRead = 0, this.posWrite = 0, this.fracXi1 = 0, this.fracYi1 = 0, this.intDelay = 0, this.fracDelay = 0, this.a1 = void 0, this.sampleRate = o, this.maxDelayTime = l || 1, this.bufferSize = this.maxDelayTime * this.sampleRate, this.bufferSize % 1 !== 0 && (this.bufferSize = parseInt(this.bufferSize) + 1), this.buffer = new Float32Array(this.bufferSize);
        }
        return s(f, [{
          key: "setDelay",
          value: function(l) {
            if (l < this.maxDelayTime) {
              this.delayTime = l;
              var u = l * this.sampleRate;
              this.intDelay = parseInt(u), this.fracDelay = u - this.intDelay, this.resample(), this.fracDelay !== 0 && this.updateThiranCoefficient();
            } else
              throw new Error("delayTime > maxDelayTime");
          }
          /**
           * Update delay value
           * @public
           */
        }, {
          key: "getDelay",
          value: function() {
            return this.delayTime;
          }
          /**
           * Process method, where the output is calculated.
           * @param inputBuffer Input Array
           * @public
           */
        }, {
          key: "process",
          value: function(l) {
            for (var u = new Float32Array(l.length), y = 0; y < l.length; y = y + 1)
              this.buffer[this.posWrite] = l[y], u[y] = this.buffer[this.posRead], this.updatePointers();
            return this.fracDelay === 0 || (u = new Float32Array(this.fractionalThiranProcess(u))), u;
          }
          /**
           * Update the value of posRead and posWrite pointers inside the circular buffer
           * @private
           */
        }, {
          key: "updatePointers",
          value: function() {
            this.posWrite === this.buffer.length - 1 ? this.posWrite = 0 : this.posWrite = this.posWrite + 1, this.posRead === this.buffer.length - 1 ? this.posRead = 0 : this.posRead = this.posRead + 1;
          }
          /**
           * Update Thiran coefficient (1st order Thiran)
           * @private
           */
        }, {
          key: "updateThiranCoefficient",
          value: function() {
            this.a1 = (1 - this.fracDelay) / (1 + this.fracDelay);
          }
          /**
           * Update the pointer posRead value when the delay value is changed
           * @private
           */
        }, {
          key: "resample",
          value: function() {
            if (this.posWrite - this.intDelay < 0) {
              var l = this.intDelay - this.posWrite;
              this.posRead = this.buffer.length - l;
            } else
              this.posRead = this.posWrite - this.intDelay;
          }
          /**
           * Fractional process method.
           * @private
           * @param inputBuffer Input Array
           */
        }, {
          key: "fractionalThiranProcess",
          value: function(l) {
            for (var u = new Float32Array(l.length), y, v, m = this.fracXi1, p = this.fracYi1, D = 0; D < l.length; D = D + 1)
              y = l[D], v = this.a1 * y + m - this.a1 * p, m = y, p = v, u[D] = v;
            return this.fracXi1 = m, this.fracYi1 = p, u;
          }
        }]), f;
      }();
      i.default = c, r.exports = i.default;
    }, { "babel-runtime/helpers/class-call-check": 2, "babel-runtime/helpers/create-class": 3 }], 7: [function(n, r, i) {
      r.exports = n("./dist/fractional-delay");
    }, { "./dist/fractional-delay": 6 }], 8: [function(n, r, i) {
      (function(e, c) {
        if (typeof i == "object" && typeof r == "object")
          r.exports = c();
        else {
          var f = c();
          for (var o in f) (typeof i == "object" ? i : e)[o] = f[o];
        }
      })(this, function() {
        return (
          /******/
          function(s) {
            var e = {};
            function c(f) {
              if (e[f])
                return e[f].exports;
              var o = e[f] = {
                /******/
                i: f,
                /******/
                l: !1,
                /******/
                exports: {}
                /******/
              };
              return s[f].call(o.exports, o, o.exports, c), o.l = !0, o.exports;
            }
            return c.m = s, c.c = e, c.d = function(f, o, l) {
              c.o(f, o) || Object.defineProperty(f, o, {
                /******/
                configurable: !1,
                /******/
                enumerable: !0,
                /******/
                get: l
                /******/
              });
            }, c.n = function(f) {
              var o = f && f.__esModule ? (
                /******/
                function() {
                  return f.default;
                }
              ) : (
                /******/
                function() {
                  return f;
                }
              );
              return c.d(o, "a", o), o;
            }, c.o = function(f, o) {
              return Object.prototype.hasOwnProperty.call(f, o);
            }, c.p = "", c(c.s = 4);
          }([
            /* 0 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.setMatrixArrayType = o, e.toRadian = u, e.equals = y;
              var f = e.EPSILON = 1e-6;
              e.ARRAY_TYPE = typeof Float32Array < "u" ? Float32Array : Array, e.RANDOM = Math.random;
              function o(v) {
                e.ARRAY_TYPE = v;
              }
              var l = Math.PI / 180;
              function u(v) {
                return v * l;
              }
              function y(v, m) {
                return Math.abs(v - m) <= f * Math.max(1, Math.abs(v), Math.abs(m));
              }
            },
            /* 1 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.fromMat4 = y, e.clone = v, e.copy = m, e.fromValues = p, e.set = D, e.identity = _, e.transpose = L, e.invert = F, e.adjoint = x, e.determinant = O, e.multiply = R, e.translate = I, e.rotate = h, e.scale = b, e.fromTranslation = Z, e.fromRotation = G, e.fromScaling = J, e.fromMat2d = ee, e.fromQuat = se, e.normalFromMat4 = Se, e.projection = De, e.str = _e, e.frob = N, e.add = w, e.subtract = z, e.multiplyScalar = te, e.multiplyScalarAndAdd = ie, e.exactEquals = ce, e.equals = ge;
              var f = c(0), o = l(f);
              function l(S) {
                if (S && S.__esModule)
                  return S;
                var d = {};
                if (S != null)
                  for (var E in S)
                    Object.prototype.hasOwnProperty.call(S, E) && (d[E] = S[E]);
                return d.default = S, d;
              }
              function u() {
                var S = new o.ARRAY_TYPE(9);
                return S[0] = 1, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = 1, S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function y(S, d) {
                return S[0] = d[0], S[1] = d[1], S[2] = d[2], S[3] = d[4], S[4] = d[5], S[5] = d[6], S[6] = d[8], S[7] = d[9], S[8] = d[10], S;
              }
              function v(S) {
                var d = new o.ARRAY_TYPE(9);
                return d[0] = S[0], d[1] = S[1], d[2] = S[2], d[3] = S[3], d[4] = S[4], d[5] = S[5], d[6] = S[6], d[7] = S[7], d[8] = S[8], d;
              }
              function m(S, d) {
                return S[0] = d[0], S[1] = d[1], S[2] = d[2], S[3] = d[3], S[4] = d[4], S[5] = d[5], S[6] = d[6], S[7] = d[7], S[8] = d[8], S;
              }
              function p(S, d, E, Q, j, X, $, he, de) {
                var q = new o.ARRAY_TYPE(9);
                return q[0] = S, q[1] = d, q[2] = E, q[3] = Q, q[4] = j, q[5] = X, q[6] = $, q[7] = he, q[8] = de, q;
              }
              function D(S, d, E, Q, j, X, $, he, de, q) {
                return S[0] = d, S[1] = E, S[2] = Q, S[3] = j, S[4] = X, S[5] = $, S[6] = he, S[7] = de, S[8] = q, S;
              }
              function _(S) {
                return S[0] = 1, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = 1, S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function L(S, d) {
                if (S === d) {
                  var E = d[1], Q = d[2], j = d[5];
                  S[1] = d[3], S[2] = d[6], S[3] = E, S[5] = d[7], S[6] = Q, S[7] = j;
                } else
                  S[0] = d[0], S[1] = d[3], S[2] = d[6], S[3] = d[1], S[4] = d[4], S[5] = d[7], S[6] = d[2], S[7] = d[5], S[8] = d[8];
                return S;
              }
              function F(S, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = d[4], he = d[5], de = d[6], q = d[7], K = d[8], ne = K * $ - he * q, fe = -K * X + he * de, le = q * X - $ * de, a = E * ne + Q * fe + j * le;
                return a ? (a = 1 / a, S[0] = ne * a, S[1] = (-K * Q + j * q) * a, S[2] = (he * Q - j * $) * a, S[3] = fe * a, S[4] = (K * E - j * de) * a, S[5] = (-he * E + j * X) * a, S[6] = le * a, S[7] = (-q * E + Q * de) * a, S[8] = ($ * E - Q * X) * a, S) : null;
              }
              function x(S, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = d[4], he = d[5], de = d[6], q = d[7], K = d[8];
                return S[0] = $ * K - he * q, S[1] = j * q - Q * K, S[2] = Q * he - j * $, S[3] = he * de - X * K, S[4] = E * K - j * de, S[5] = j * X - E * he, S[6] = X * q - $ * de, S[7] = Q * de - E * q, S[8] = E * $ - Q * X, S;
              }
              function O(S) {
                var d = S[0], E = S[1], Q = S[2], j = S[3], X = S[4], $ = S[5], he = S[6], de = S[7], q = S[8];
                return d * (q * X - $ * de) + E * (-q * j + $ * he) + Q * (de * j - X * he);
              }
              function R(S, d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], he = d[4], de = d[5], q = d[6], K = d[7], ne = d[8], fe = E[0], le = E[1], a = E[2], g = E[3], Y = E[4], H = E[5], re = E[6], ae = E[7], oe = E[8];
                return S[0] = fe * Q + le * $ + a * q, S[1] = fe * j + le * he + a * K, S[2] = fe * X + le * de + a * ne, S[3] = g * Q + Y * $ + H * q, S[4] = g * j + Y * he + H * K, S[5] = g * X + Y * de + H * ne, S[6] = re * Q + ae * $ + oe * q, S[7] = re * j + ae * he + oe * K, S[8] = re * X + ae * de + oe * ne, S;
              }
              function I(S, d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], he = d[4], de = d[5], q = d[6], K = d[7], ne = d[8], fe = E[0], le = E[1];
                return S[0] = Q, S[1] = j, S[2] = X, S[3] = $, S[4] = he, S[5] = de, S[6] = fe * Q + le * $ + q, S[7] = fe * j + le * he + K, S[8] = fe * X + le * de + ne, S;
              }
              function h(S, d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], he = d[4], de = d[5], q = d[6], K = d[7], ne = d[8], fe = Math.sin(E), le = Math.cos(E);
                return S[0] = le * Q + fe * $, S[1] = le * j + fe * he, S[2] = le * X + fe * de, S[3] = le * $ - fe * Q, S[4] = le * he - fe * j, S[5] = le * de - fe * X, S[6] = q, S[7] = K, S[8] = ne, S;
              }
              function b(S, d, E) {
                var Q = E[0], j = E[1];
                return S[0] = Q * d[0], S[1] = Q * d[1], S[2] = Q * d[2], S[3] = j * d[3], S[4] = j * d[4], S[5] = j * d[5], S[6] = d[6], S[7] = d[7], S[8] = d[8], S;
              }
              function Z(S, d) {
                return S[0] = 1, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = 1, S[5] = 0, S[6] = d[0], S[7] = d[1], S[8] = 1, S;
              }
              function G(S, d) {
                var E = Math.sin(d), Q = Math.cos(d);
                return S[0] = Q, S[1] = E, S[2] = 0, S[3] = -E, S[4] = Q, S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function J(S, d) {
                return S[0] = d[0], S[1] = 0, S[2] = 0, S[3] = 0, S[4] = d[1], S[5] = 0, S[6] = 0, S[7] = 0, S[8] = 1, S;
              }
              function ee(S, d) {
                return S[0] = d[0], S[1] = d[1], S[2] = 0, S[3] = d[2], S[4] = d[3], S[5] = 0, S[6] = d[4], S[7] = d[5], S[8] = 1, S;
              }
              function se(S, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = E + E, he = Q + Q, de = j + j, q = E * $, K = Q * $, ne = Q * he, fe = j * $, le = j * he, a = j * de, g = X * $, Y = X * he, H = X * de;
                return S[0] = 1 - ne - a, S[3] = K - H, S[6] = fe + Y, S[1] = K + H, S[4] = 1 - q - a, S[7] = le - g, S[2] = fe - Y, S[5] = le + g, S[8] = 1 - q - ne, S;
              }
              function Se(S, d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3], $ = d[4], he = d[5], de = d[6], q = d[7], K = d[8], ne = d[9], fe = d[10], le = d[11], a = d[12], g = d[13], Y = d[14], H = d[15], re = E * he - Q * $, ae = E * de - j * $, oe = E * q - X * $, ue = Q * de - j * he, ve = Q * q - X * he, me = j * q - X * de, ye = K * g - ne * a, Ce = K * Y - fe * a, Me = K * H - le * a, we = ne * Y - fe * g, xe = ne * H - le * g, Ae = fe * H - le * Y, pe = re * Ae - ae * xe + oe * we + ue * Me - ve * Ce + me * ye;
                return pe ? (pe = 1 / pe, S[0] = (he * Ae - de * xe + q * we) * pe, S[1] = (de * Me - $ * Ae - q * Ce) * pe, S[2] = ($ * xe - he * Me + q * ye) * pe, S[3] = (j * xe - Q * Ae - X * we) * pe, S[4] = (E * Ae - j * Me + X * Ce) * pe, S[5] = (Q * Me - E * xe - X * ye) * pe, S[6] = (g * me - Y * ve + H * ue) * pe, S[7] = (Y * oe - a * me - H * ae) * pe, S[8] = (a * ve - g * oe + H * re) * pe, S) : null;
              }
              function De(S, d, E) {
                return S[0] = 2 / d, S[1] = 0, S[2] = 0, S[3] = 0, S[4] = -2 / E, S[5] = 0, S[6] = -1, S[7] = 1, S[8] = 1, S;
              }
              function _e(S) {
                return "mat3(" + S[0] + ", " + S[1] + ", " + S[2] + ", " + S[3] + ", " + S[4] + ", " + S[5] + ", " + S[6] + ", " + S[7] + ", " + S[8] + ")";
              }
              function N(S) {
                return Math.sqrt(Math.pow(S[0], 2) + Math.pow(S[1], 2) + Math.pow(S[2], 2) + Math.pow(S[3], 2) + Math.pow(S[4], 2) + Math.pow(S[5], 2) + Math.pow(S[6], 2) + Math.pow(S[7], 2) + Math.pow(S[8], 2));
              }
              function w(S, d, E) {
                return S[0] = d[0] + E[0], S[1] = d[1] + E[1], S[2] = d[2] + E[2], S[3] = d[3] + E[3], S[4] = d[4] + E[4], S[5] = d[5] + E[5], S[6] = d[6] + E[6], S[7] = d[7] + E[7], S[8] = d[8] + E[8], S;
              }
              function z(S, d, E) {
                return S[0] = d[0] - E[0], S[1] = d[1] - E[1], S[2] = d[2] - E[2], S[3] = d[3] - E[3], S[4] = d[4] - E[4], S[5] = d[5] - E[5], S[6] = d[6] - E[6], S[7] = d[7] - E[7], S[8] = d[8] - E[8], S;
              }
              function te(S, d, E) {
                return S[0] = d[0] * E, S[1] = d[1] * E, S[2] = d[2] * E, S[3] = d[3] * E, S[4] = d[4] * E, S[5] = d[5] * E, S[6] = d[6] * E, S[7] = d[7] * E, S[8] = d[8] * E, S;
              }
              function ie(S, d, E, Q) {
                return S[0] = d[0] + E[0] * Q, S[1] = d[1] + E[1] * Q, S[2] = d[2] + E[2] * Q, S[3] = d[3] + E[3] * Q, S[4] = d[4] + E[4] * Q, S[5] = d[5] + E[5] * Q, S[6] = d[6] + E[6] * Q, S[7] = d[7] + E[7] * Q, S[8] = d[8] + E[8] * Q, S;
              }
              function ce(S, d) {
                return S[0] === d[0] && S[1] === d[1] && S[2] === d[2] && S[3] === d[3] && S[4] === d[4] && S[5] === d[5] && S[6] === d[6] && S[7] === d[7] && S[8] === d[8];
              }
              function ge(S, d) {
                var E = S[0], Q = S[1], j = S[2], X = S[3], $ = S[4], he = S[5], de = S[6], q = S[7], K = S[8], ne = d[0], fe = d[1], le = d[2], a = d[3], g = d[4], Y = d[5], H = d[6], re = d[7], ae = d[8];
                return Math.abs(E - ne) <= o.EPSILON * Math.max(1, Math.abs(E), Math.abs(ne)) && Math.abs(Q - fe) <= o.EPSILON * Math.max(1, Math.abs(Q), Math.abs(fe)) && Math.abs(j - le) <= o.EPSILON * Math.max(1, Math.abs(j), Math.abs(le)) && Math.abs(X - a) <= o.EPSILON * Math.max(1, Math.abs(X), Math.abs(a)) && Math.abs($ - g) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(g)) && Math.abs(he - Y) <= o.EPSILON * Math.max(1, Math.abs(he), Math.abs(Y)) && Math.abs(de - H) <= o.EPSILON * Math.max(1, Math.abs(de), Math.abs(H)) && Math.abs(q - re) <= o.EPSILON * Math.max(1, Math.abs(q), Math.abs(re)) && Math.abs(K - ae) <= o.EPSILON * Math.max(1, Math.abs(K), Math.abs(ae));
              }
              e.mul = R, e.sub = z;
            },
            /* 2 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = u, e.clone = y, e.length = v, e.fromValues = m, e.copy = p, e.set = D, e.add = _, e.subtract = L, e.multiply = F, e.divide = x, e.ceil = O, e.floor = R, e.min = I, e.max = h, e.round = b, e.scale = Z, e.scaleAndAdd = G, e.distance = J, e.squaredDistance = ee, e.squaredLength = se, e.negate = Se, e.inverse = De, e.normalize = _e, e.dot = N, e.cross = w, e.lerp = z, e.hermite = te, e.bezier = ie, e.random = ce, e.transformMat4 = ge, e.transformMat3 = S, e.transformQuat = d, e.rotateX = E, e.rotateY = Q, e.rotateZ = j, e.angle = X, e.str = $, e.exactEquals = he, e.equals = de;
              var f = c(0), o = l(f);
              function l(q) {
                if (q && q.__esModule)
                  return q;
                var K = {};
                if (q != null)
                  for (var ne in q)
                    Object.prototype.hasOwnProperty.call(q, ne) && (K[ne] = q[ne]);
                return K.default = q, K;
              }
              function u() {
                var q = new o.ARRAY_TYPE(3);
                return q[0] = 0, q[1] = 0, q[2] = 0, q;
              }
              function y(q) {
                var K = new o.ARRAY_TYPE(3);
                return K[0] = q[0], K[1] = q[1], K[2] = q[2], K;
              }
              function v(q) {
                var K = q[0], ne = q[1], fe = q[2];
                return Math.sqrt(K * K + ne * ne + fe * fe);
              }
              function m(q, K, ne) {
                var fe = new o.ARRAY_TYPE(3);
                return fe[0] = q, fe[1] = K, fe[2] = ne, fe;
              }
              function p(q, K) {
                return q[0] = K[0], q[1] = K[1], q[2] = K[2], q;
              }
              function D(q, K, ne, fe) {
                return q[0] = K, q[1] = ne, q[2] = fe, q;
              }
              function _(q, K, ne) {
                return q[0] = K[0] + ne[0], q[1] = K[1] + ne[1], q[2] = K[2] + ne[2], q;
              }
              function L(q, K, ne) {
                return q[0] = K[0] - ne[0], q[1] = K[1] - ne[1], q[2] = K[2] - ne[2], q;
              }
              function F(q, K, ne) {
                return q[0] = K[0] * ne[0], q[1] = K[1] * ne[1], q[2] = K[2] * ne[2], q;
              }
              function x(q, K, ne) {
                return q[0] = K[0] / ne[0], q[1] = K[1] / ne[1], q[2] = K[2] / ne[2], q;
              }
              function O(q, K) {
                return q[0] = Math.ceil(K[0]), q[1] = Math.ceil(K[1]), q[2] = Math.ceil(K[2]), q;
              }
              function R(q, K) {
                return q[0] = Math.floor(K[0]), q[1] = Math.floor(K[1]), q[2] = Math.floor(K[2]), q;
              }
              function I(q, K, ne) {
                return q[0] = Math.min(K[0], ne[0]), q[1] = Math.min(K[1], ne[1]), q[2] = Math.min(K[2], ne[2]), q;
              }
              function h(q, K, ne) {
                return q[0] = Math.max(K[0], ne[0]), q[1] = Math.max(K[1], ne[1]), q[2] = Math.max(K[2], ne[2]), q;
              }
              function b(q, K) {
                return q[0] = Math.round(K[0]), q[1] = Math.round(K[1]), q[2] = Math.round(K[2]), q;
              }
              function Z(q, K, ne) {
                return q[0] = K[0] * ne, q[1] = K[1] * ne, q[2] = K[2] * ne, q;
              }
              function G(q, K, ne, fe) {
                return q[0] = K[0] + ne[0] * fe, q[1] = K[1] + ne[1] * fe, q[2] = K[2] + ne[2] * fe, q;
              }
              function J(q, K) {
                var ne = K[0] - q[0], fe = K[1] - q[1], le = K[2] - q[2];
                return Math.sqrt(ne * ne + fe * fe + le * le);
              }
              function ee(q, K) {
                var ne = K[0] - q[0], fe = K[1] - q[1], le = K[2] - q[2];
                return ne * ne + fe * fe + le * le;
              }
              function se(q) {
                var K = q[0], ne = q[1], fe = q[2];
                return K * K + ne * ne + fe * fe;
              }
              function Se(q, K) {
                return q[0] = -K[0], q[1] = -K[1], q[2] = -K[2], q;
              }
              function De(q, K) {
                return q[0] = 1 / K[0], q[1] = 1 / K[1], q[2] = 1 / K[2], q;
              }
              function _e(q, K) {
                var ne = K[0], fe = K[1], le = K[2], a = ne * ne + fe * fe + le * le;
                return a > 0 && (a = 1 / Math.sqrt(a), q[0] = K[0] * a, q[1] = K[1] * a, q[2] = K[2] * a), q;
              }
              function N(q, K) {
                return q[0] * K[0] + q[1] * K[1] + q[2] * K[2];
              }
              function w(q, K, ne) {
                var fe = K[0], le = K[1], a = K[2], g = ne[0], Y = ne[1], H = ne[2];
                return q[0] = le * H - a * Y, q[1] = a * g - fe * H, q[2] = fe * Y - le * g, q;
              }
              function z(q, K, ne, fe) {
                var le = K[0], a = K[1], g = K[2];
                return q[0] = le + fe * (ne[0] - le), q[1] = a + fe * (ne[1] - a), q[2] = g + fe * (ne[2] - g), q;
              }
              function te(q, K, ne, fe, le, a) {
                var g = a * a, Y = g * (2 * a - 3) + 1, H = g * (a - 2) + a, re = g * (a - 1), ae = g * (3 - 2 * a);
                return q[0] = K[0] * Y + ne[0] * H + fe[0] * re + le[0] * ae, q[1] = K[1] * Y + ne[1] * H + fe[1] * re + le[1] * ae, q[2] = K[2] * Y + ne[2] * H + fe[2] * re + le[2] * ae, q;
              }
              function ie(q, K, ne, fe, le, a) {
                var g = 1 - a, Y = g * g, H = a * a, re = Y * g, ae = 3 * a * Y, oe = 3 * H * g, ue = H * a;
                return q[0] = K[0] * re + ne[0] * ae + fe[0] * oe + le[0] * ue, q[1] = K[1] * re + ne[1] * ae + fe[1] * oe + le[1] * ue, q[2] = K[2] * re + ne[2] * ae + fe[2] * oe + le[2] * ue, q;
              }
              function ce(q, K) {
                K = K || 1;
                var ne = o.RANDOM() * 2 * Math.PI, fe = o.RANDOM() * 2 - 1, le = Math.sqrt(1 - fe * fe) * K;
                return q[0] = Math.cos(ne) * le, q[1] = Math.sin(ne) * le, q[2] = fe * K, q;
              }
              function ge(q, K, ne) {
                var fe = K[0], le = K[1], a = K[2], g = ne[3] * fe + ne[7] * le + ne[11] * a + ne[15];
                return g = g || 1, q[0] = (ne[0] * fe + ne[4] * le + ne[8] * a + ne[12]) / g, q[1] = (ne[1] * fe + ne[5] * le + ne[9] * a + ne[13]) / g, q[2] = (ne[2] * fe + ne[6] * le + ne[10] * a + ne[14]) / g, q;
              }
              function S(q, K, ne) {
                var fe = K[0], le = K[1], a = K[2];
                return q[0] = fe * ne[0] + le * ne[3] + a * ne[6], q[1] = fe * ne[1] + le * ne[4] + a * ne[7], q[2] = fe * ne[2] + le * ne[5] + a * ne[8], q;
              }
              function d(q, K, ne) {
                var fe = K[0], le = K[1], a = K[2], g = ne[0], Y = ne[1], H = ne[2], re = ne[3], ae = re * fe + Y * a - H * le, oe = re * le + H * fe - g * a, ue = re * a + g * le - Y * fe, ve = -g * fe - Y * le - H * a;
                return q[0] = ae * re + ve * -g + oe * -H - ue * -Y, q[1] = oe * re + ve * -Y + ue * -g - ae * -H, q[2] = ue * re + ve * -H + ae * -Y - oe * -g, q;
              }
              function E(q, K, ne, fe) {
                var le = [], a = [];
                return le[0] = K[0] - ne[0], le[1] = K[1] - ne[1], le[2] = K[2] - ne[2], a[0] = le[0], a[1] = le[1] * Math.cos(fe) - le[2] * Math.sin(fe), a[2] = le[1] * Math.sin(fe) + le[2] * Math.cos(fe), q[0] = a[0] + ne[0], q[1] = a[1] + ne[1], q[2] = a[2] + ne[2], q;
              }
              function Q(q, K, ne, fe) {
                var le = [], a = [];
                return le[0] = K[0] - ne[0], le[1] = K[1] - ne[1], le[2] = K[2] - ne[2], a[0] = le[2] * Math.sin(fe) + le[0] * Math.cos(fe), a[1] = le[1], a[2] = le[2] * Math.cos(fe) - le[0] * Math.sin(fe), q[0] = a[0] + ne[0], q[1] = a[1] + ne[1], q[2] = a[2] + ne[2], q;
              }
              function j(q, K, ne, fe) {
                var le = [], a = [];
                return le[0] = K[0] - ne[0], le[1] = K[1] - ne[1], le[2] = K[2] - ne[2], a[0] = le[0] * Math.cos(fe) - le[1] * Math.sin(fe), a[1] = le[0] * Math.sin(fe) + le[1] * Math.cos(fe), a[2] = le[2], q[0] = a[0] + ne[0], q[1] = a[1] + ne[1], q[2] = a[2] + ne[2], q;
              }
              function X(q, K) {
                var ne = m(q[0], q[1], q[2]), fe = m(K[0], K[1], K[2]);
                _e(ne, ne), _e(fe, fe);
                var le = N(ne, fe);
                return le > 1 ? 0 : le < -1 ? Math.PI : Math.acos(le);
              }
              function $(q) {
                return "vec3(" + q[0] + ", " + q[1] + ", " + q[2] + ")";
              }
              function he(q, K) {
                return q[0] === K[0] && q[1] === K[1] && q[2] === K[2];
              }
              function de(q, K) {
                var ne = q[0], fe = q[1], le = q[2], a = K[0], g = K[1], Y = K[2];
                return Math.abs(ne - a) <= o.EPSILON * Math.max(1, Math.abs(ne), Math.abs(a)) && Math.abs(fe - g) <= o.EPSILON * Math.max(1, Math.abs(fe), Math.abs(g)) && Math.abs(le - Y) <= o.EPSILON * Math.max(1, Math.abs(le), Math.abs(Y));
              }
              e.sub = L, e.mul = F, e.div = x, e.dist = J, e.sqrDist = ee, e.len = v, e.sqrLen = se, e.forEach = function() {
                var q = u();
                return function(K, ne, fe, le, a, g) {
                  var Y = void 0, H = void 0;
                  for (ne || (ne = 3), fe || (fe = 0), le ? H = Math.min(le * ne + fe, K.length) : H = K.length, Y = fe; Y < H; Y += ne)
                    q[0] = K[Y], q[1] = K[Y + 1], q[2] = K[Y + 2], a(q, q, g), K[Y] = q[0], K[Y + 1] = q[1], K[Y + 2] = q[2];
                  return K;
                };
              }();
            },
            /* 3 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.len = e.sqrDist = e.dist = e.div = e.mul = e.sub = void 0, e.create = u, e.clone = y, e.fromValues = v, e.copy = m, e.set = p, e.add = D, e.subtract = _, e.multiply = L, e.divide = F, e.ceil = x, e.floor = O, e.min = R, e.max = I, e.round = h, e.scale = b, e.scaleAndAdd = Z, e.distance = G, e.squaredDistance = J, e.length = ee, e.squaredLength = se, e.negate = Se, e.inverse = De, e.normalize = _e, e.dot = N, e.lerp = w, e.random = z, e.transformMat4 = te, e.transformQuat = ie, e.str = ce, e.exactEquals = ge, e.equals = S;
              var f = c(0), o = l(f);
              function l(d) {
                if (d && d.__esModule)
                  return d;
                var E = {};
                if (d != null)
                  for (var Q in d)
                    Object.prototype.hasOwnProperty.call(d, Q) && (E[Q] = d[Q]);
                return E.default = d, E;
              }
              function u() {
                var d = new o.ARRAY_TYPE(4);
                return d[0] = 0, d[1] = 0, d[2] = 0, d[3] = 0, d;
              }
              function y(d) {
                var E = new o.ARRAY_TYPE(4);
                return E[0] = d[0], E[1] = d[1], E[2] = d[2], E[3] = d[3], E;
              }
              function v(d, E, Q, j) {
                var X = new o.ARRAY_TYPE(4);
                return X[0] = d, X[1] = E, X[2] = Q, X[3] = j, X;
              }
              function m(d, E) {
                return d[0] = E[0], d[1] = E[1], d[2] = E[2], d[3] = E[3], d;
              }
              function p(d, E, Q, j, X) {
                return d[0] = E, d[1] = Q, d[2] = j, d[3] = X, d;
              }
              function D(d, E, Q) {
                return d[0] = E[0] + Q[0], d[1] = E[1] + Q[1], d[2] = E[2] + Q[2], d[3] = E[3] + Q[3], d;
              }
              function _(d, E, Q) {
                return d[0] = E[0] - Q[0], d[1] = E[1] - Q[1], d[2] = E[2] - Q[2], d[3] = E[3] - Q[3], d;
              }
              function L(d, E, Q) {
                return d[0] = E[0] * Q[0], d[1] = E[1] * Q[1], d[2] = E[2] * Q[2], d[3] = E[3] * Q[3], d;
              }
              function F(d, E, Q) {
                return d[0] = E[0] / Q[0], d[1] = E[1] / Q[1], d[2] = E[2] / Q[2], d[3] = E[3] / Q[3], d;
              }
              function x(d, E) {
                return d[0] = Math.ceil(E[0]), d[1] = Math.ceil(E[1]), d[2] = Math.ceil(E[2]), d[3] = Math.ceil(E[3]), d;
              }
              function O(d, E) {
                return d[0] = Math.floor(E[0]), d[1] = Math.floor(E[1]), d[2] = Math.floor(E[2]), d[3] = Math.floor(E[3]), d;
              }
              function R(d, E, Q) {
                return d[0] = Math.min(E[0], Q[0]), d[1] = Math.min(E[1], Q[1]), d[2] = Math.min(E[2], Q[2]), d[3] = Math.min(E[3], Q[3]), d;
              }
              function I(d, E, Q) {
                return d[0] = Math.max(E[0], Q[0]), d[1] = Math.max(E[1], Q[1]), d[2] = Math.max(E[2], Q[2]), d[3] = Math.max(E[3], Q[3]), d;
              }
              function h(d, E) {
                return d[0] = Math.round(E[0]), d[1] = Math.round(E[1]), d[2] = Math.round(E[2]), d[3] = Math.round(E[3]), d;
              }
              function b(d, E, Q) {
                return d[0] = E[0] * Q, d[1] = E[1] * Q, d[2] = E[2] * Q, d[3] = E[3] * Q, d;
              }
              function Z(d, E, Q, j) {
                return d[0] = E[0] + Q[0] * j, d[1] = E[1] + Q[1] * j, d[2] = E[2] + Q[2] * j, d[3] = E[3] + Q[3] * j, d;
              }
              function G(d, E) {
                var Q = E[0] - d[0], j = E[1] - d[1], X = E[2] - d[2], $ = E[3] - d[3];
                return Math.sqrt(Q * Q + j * j + X * X + $ * $);
              }
              function J(d, E) {
                var Q = E[0] - d[0], j = E[1] - d[1], X = E[2] - d[2], $ = E[3] - d[3];
                return Q * Q + j * j + X * X + $ * $;
              }
              function ee(d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3];
                return Math.sqrt(E * E + Q * Q + j * j + X * X);
              }
              function se(d) {
                var E = d[0], Q = d[1], j = d[2], X = d[3];
                return E * E + Q * Q + j * j + X * X;
              }
              function Se(d, E) {
                return d[0] = -E[0], d[1] = -E[1], d[2] = -E[2], d[3] = -E[3], d;
              }
              function De(d, E) {
                return d[0] = 1 / E[0], d[1] = 1 / E[1], d[2] = 1 / E[2], d[3] = 1 / E[3], d;
              }
              function _e(d, E) {
                var Q = E[0], j = E[1], X = E[2], $ = E[3], he = Q * Q + j * j + X * X + $ * $;
                return he > 0 && (he = 1 / Math.sqrt(he), d[0] = Q * he, d[1] = j * he, d[2] = X * he, d[3] = $ * he), d;
              }
              function N(d, E) {
                return d[0] * E[0] + d[1] * E[1] + d[2] * E[2] + d[3] * E[3];
              }
              function w(d, E, Q, j) {
                var X = E[0], $ = E[1], he = E[2], de = E[3];
                return d[0] = X + j * (Q[0] - X), d[1] = $ + j * (Q[1] - $), d[2] = he + j * (Q[2] - he), d[3] = de + j * (Q[3] - de), d;
              }
              function z(d, E) {
                return E = E || 1, d[0] = o.RANDOM(), d[1] = o.RANDOM(), d[2] = o.RANDOM(), d[3] = o.RANDOM(), _e(d, d), b(d, d, E), d;
              }
              function te(d, E, Q) {
                var j = E[0], X = E[1], $ = E[2], he = E[3];
                return d[0] = Q[0] * j + Q[4] * X + Q[8] * $ + Q[12] * he, d[1] = Q[1] * j + Q[5] * X + Q[9] * $ + Q[13] * he, d[2] = Q[2] * j + Q[6] * X + Q[10] * $ + Q[14] * he, d[3] = Q[3] * j + Q[7] * X + Q[11] * $ + Q[15] * he, d;
              }
              function ie(d, E, Q) {
                var j = E[0], X = E[1], $ = E[2], he = Q[0], de = Q[1], q = Q[2], K = Q[3], ne = K * j + de * $ - q * X, fe = K * X + q * j - he * $, le = K * $ + he * X - de * j, a = -he * j - de * X - q * $;
                return d[0] = ne * K + a * -he + fe * -q - le * -de, d[1] = fe * K + a * -de + le * -he - ne * -q, d[2] = le * K + a * -q + ne * -de - fe * -he, d[3] = E[3], d;
              }
              function ce(d) {
                return "vec4(" + d[0] + ", " + d[1] + ", " + d[2] + ", " + d[3] + ")";
              }
              function ge(d, E) {
                return d[0] === E[0] && d[1] === E[1] && d[2] === E[2] && d[3] === E[3];
              }
              function S(d, E) {
                var Q = d[0], j = d[1], X = d[2], $ = d[3], he = E[0], de = E[1], q = E[2], K = E[3];
                return Math.abs(Q - he) <= o.EPSILON * Math.max(1, Math.abs(Q), Math.abs(he)) && Math.abs(j - de) <= o.EPSILON * Math.max(1, Math.abs(j), Math.abs(de)) && Math.abs(X - q) <= o.EPSILON * Math.max(1, Math.abs(X), Math.abs(q)) && Math.abs($ - K) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(K));
              }
              e.sub = _, e.mul = L, e.div = F, e.dist = G, e.sqrDist = J, e.len = ee, e.sqrLen = se, e.forEach = function() {
                var d = u();
                return function(E, Q, j, X, $, he) {
                  var de = void 0, q = void 0;
                  for (Q || (Q = 4), j || (j = 0), X ? q = Math.min(X * Q + j, E.length) : q = E.length, de = j; de < q; de += Q)
                    d[0] = E[de], d[1] = E[de + 1], d[2] = E[de + 2], d[3] = E[de + 3], $(d, d, he), E[de] = d[0], E[de + 1] = d[1], E[de + 2] = d[2], E[de + 3] = d[3];
                  return E;
                };
              }();
            },
            /* 4 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.vec4 = e.vec3 = e.vec2 = e.quat = e.mat4 = e.mat3 = e.mat2d = e.mat2 = e.glMatrix = void 0;
              var f = c(0), o = Z(f), l = c(5), u = Z(l), y = c(6), v = Z(y), m = c(1), p = Z(m), D = c(7), _ = Z(D), L = c(8), F = Z(L), x = c(9), O = Z(x), R = c(2), I = Z(R), h = c(3), b = Z(h);
              function Z(G) {
                if (G && G.__esModule)
                  return G;
                var J = {};
                if (G != null)
                  for (var ee in G)
                    Object.prototype.hasOwnProperty.call(G, ee) && (J[ee] = G[ee]);
                return J.default = G, J;
              }
              e.glMatrix = o, e.mat2 = u, e.mat2d = v, e.mat3 = p, e.mat4 = _, e.quat = F, e.vec2 = O, e.vec3 = I, e.vec4 = b;
            },
            /* 5 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.clone = y, e.copy = v, e.identity = m, e.fromValues = p, e.set = D, e.transpose = _, e.invert = L, e.adjoint = F, e.determinant = x, e.multiply = O, e.rotate = R, e.scale = I, e.fromRotation = h, e.fromScaling = b, e.str = Z, e.frob = G, e.LDU = J, e.add = ee, e.subtract = se, e.exactEquals = Se, e.equals = De, e.multiplyScalar = _e, e.multiplyScalarAndAdd = N;
              var f = c(0), o = l(f);
              function l(w) {
                if (w && w.__esModule)
                  return w;
                var z = {};
                if (w != null)
                  for (var te in w)
                    Object.prototype.hasOwnProperty.call(w, te) && (z[te] = w[te]);
                return z.default = w, z;
              }
              function u() {
                var w = new o.ARRAY_TYPE(4);
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function y(w) {
                var z = new o.ARRAY_TYPE(4);
                return z[0] = w[0], z[1] = w[1], z[2] = w[2], z[3] = w[3], z;
              }
              function v(w, z) {
                return w[0] = z[0], w[1] = z[1], w[2] = z[2], w[3] = z[3], w;
              }
              function m(w) {
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function p(w, z, te, ie) {
                var ce = new o.ARRAY_TYPE(4);
                return ce[0] = w, ce[1] = z, ce[2] = te, ce[3] = ie, ce;
              }
              function D(w, z, te, ie, ce) {
                return w[0] = z, w[1] = te, w[2] = ie, w[3] = ce, w;
              }
              function _(w, z) {
                if (w === z) {
                  var te = z[1];
                  w[1] = z[2], w[2] = te;
                } else
                  w[0] = z[0], w[1] = z[2], w[2] = z[1], w[3] = z[3];
                return w;
              }
              function L(w, z) {
                var te = z[0], ie = z[1], ce = z[2], ge = z[3], S = te * ge - ce * ie;
                return S ? (S = 1 / S, w[0] = ge * S, w[1] = -ie * S, w[2] = -ce * S, w[3] = te * S, w) : null;
              }
              function F(w, z) {
                var te = z[0];
                return w[0] = z[3], w[1] = -z[1], w[2] = -z[2], w[3] = te, w;
              }
              function x(w) {
                return w[0] * w[3] - w[2] * w[1];
              }
              function O(w, z, te) {
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = te[0], E = te[1], Q = te[2], j = te[3];
                return w[0] = ie * d + ge * E, w[1] = ce * d + S * E, w[2] = ie * Q + ge * j, w[3] = ce * Q + S * j, w;
              }
              function R(w, z, te) {
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E + ge * d, w[1] = ce * E + S * d, w[2] = ie * -d + ge * E, w[3] = ce * -d + S * E, w;
              }
              function I(w, z, te) {
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = te[0], E = te[1];
                return w[0] = ie * d, w[1] = ce * d, w[2] = ge * E, w[3] = S * E, w;
              }
              function h(w, z) {
                var te = Math.sin(z), ie = Math.cos(z);
                return w[0] = ie, w[1] = te, w[2] = -te, w[3] = ie, w;
              }
              function b(w, z) {
                return w[0] = z[0], w[1] = 0, w[2] = 0, w[3] = z[1], w;
              }
              function Z(w) {
                return "mat2(" + w[0] + ", " + w[1] + ", " + w[2] + ", " + w[3] + ")";
              }
              function G(w) {
                return Math.sqrt(Math.pow(w[0], 2) + Math.pow(w[1], 2) + Math.pow(w[2], 2) + Math.pow(w[3], 2));
              }
              function J(w, z, te, ie) {
                return w[2] = ie[2] / ie[0], te[0] = ie[0], te[1] = ie[1], te[3] = ie[3] - w[2] * te[1], [w, z, te];
              }
              function ee(w, z, te) {
                return w[0] = z[0] + te[0], w[1] = z[1] + te[1], w[2] = z[2] + te[2], w[3] = z[3] + te[3], w;
              }
              function se(w, z, te) {
                return w[0] = z[0] - te[0], w[1] = z[1] - te[1], w[2] = z[2] - te[2], w[3] = z[3] - te[3], w;
              }
              function Se(w, z) {
                return w[0] === z[0] && w[1] === z[1] && w[2] === z[2] && w[3] === z[3];
              }
              function De(w, z) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = z[0], d = z[1], E = z[2], Q = z[3];
                return Math.abs(te - S) <= o.EPSILON * Math.max(1, Math.abs(te), Math.abs(S)) && Math.abs(ie - d) <= o.EPSILON * Math.max(1, Math.abs(ie), Math.abs(d)) && Math.abs(ce - E) <= o.EPSILON * Math.max(1, Math.abs(ce), Math.abs(E)) && Math.abs(ge - Q) <= o.EPSILON * Math.max(1, Math.abs(ge), Math.abs(Q));
              }
              function _e(w, z, te) {
                return w[0] = z[0] * te, w[1] = z[1] * te, w[2] = z[2] * te, w[3] = z[3] * te, w;
              }
              function N(w, z, te, ie) {
                return w[0] = z[0] + te[0] * ie, w[1] = z[1] + te[1] * ie, w[2] = z[2] + te[2] * ie, w[3] = z[3] + te[3] * ie, w;
              }
              e.mul = O, e.sub = se;
            },
            /* 6 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.clone = y, e.copy = v, e.identity = m, e.fromValues = p, e.set = D, e.invert = _, e.determinant = L, e.multiply = F, e.rotate = x, e.scale = O, e.translate = R, e.fromRotation = I, e.fromScaling = h, e.fromTranslation = b, e.str = Z, e.frob = G, e.add = J, e.subtract = ee, e.multiplyScalar = se, e.multiplyScalarAndAdd = Se, e.exactEquals = De, e.equals = _e;
              var f = c(0), o = l(f);
              function l(N) {
                if (N && N.__esModule)
                  return N;
                var w = {};
                if (N != null)
                  for (var z in N)
                    Object.prototype.hasOwnProperty.call(N, z) && (w[z] = N[z]);
                return w.default = N, w;
              }
              function u() {
                var N = new o.ARRAY_TYPE(6);
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = 0, N[5] = 0, N;
              }
              function y(N) {
                var w = new o.ARRAY_TYPE(6);
                return w[0] = N[0], w[1] = N[1], w[2] = N[2], w[3] = N[3], w[4] = N[4], w[5] = N[5], w;
              }
              function v(N, w) {
                return N[0] = w[0], N[1] = w[1], N[2] = w[2], N[3] = w[3], N[4] = w[4], N[5] = w[5], N;
              }
              function m(N) {
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = 0, N[5] = 0, N;
              }
              function p(N, w, z, te, ie, ce) {
                var ge = new o.ARRAY_TYPE(6);
                return ge[0] = N, ge[1] = w, ge[2] = z, ge[3] = te, ge[4] = ie, ge[5] = ce, ge;
              }
              function D(N, w, z, te, ie, ce, ge) {
                return N[0] = w, N[1] = z, N[2] = te, N[3] = ie, N[4] = ce, N[5] = ge, N;
              }
              function _(N, w) {
                var z = w[0], te = w[1], ie = w[2], ce = w[3], ge = w[4], S = w[5], d = z * ce - te * ie;
                return d ? (d = 1 / d, N[0] = ce * d, N[1] = -te * d, N[2] = -ie * d, N[3] = z * d, N[4] = (ie * S - ce * ge) * d, N[5] = (te * ge - z * S) * d, N) : null;
              }
              function L(N) {
                return N[0] * N[3] - N[1] * N[2];
              }
              function F(N, w, z) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = z[0], Q = z[1], j = z[2], X = z[3], $ = z[4], he = z[5];
                return N[0] = te * E + ce * Q, N[1] = ie * E + ge * Q, N[2] = te * j + ce * X, N[3] = ie * j + ge * X, N[4] = te * $ + ce * he + S, N[5] = ie * $ + ge * he + d, N;
              }
              function x(N, w, z) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = Math.sin(z), Q = Math.cos(z);
                return N[0] = te * Q + ce * E, N[1] = ie * Q + ge * E, N[2] = te * -E + ce * Q, N[3] = ie * -E + ge * Q, N[4] = S, N[5] = d, N;
              }
              function O(N, w, z) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = z[0], Q = z[1];
                return N[0] = te * E, N[1] = ie * E, N[2] = ce * Q, N[3] = ge * Q, N[4] = S, N[5] = d, N;
              }
              function R(N, w, z) {
                var te = w[0], ie = w[1], ce = w[2], ge = w[3], S = w[4], d = w[5], E = z[0], Q = z[1];
                return N[0] = te, N[1] = ie, N[2] = ce, N[3] = ge, N[4] = te * E + ce * Q + S, N[5] = ie * E + ge * Q + d, N;
              }
              function I(N, w) {
                var z = Math.sin(w), te = Math.cos(w);
                return N[0] = te, N[1] = z, N[2] = -z, N[3] = te, N[4] = 0, N[5] = 0, N;
              }
              function h(N, w) {
                return N[0] = w[0], N[1] = 0, N[2] = 0, N[3] = w[1], N[4] = 0, N[5] = 0, N;
              }
              function b(N, w) {
                return N[0] = 1, N[1] = 0, N[2] = 0, N[3] = 1, N[4] = w[0], N[5] = w[1], N;
              }
              function Z(N) {
                return "mat2d(" + N[0] + ", " + N[1] + ", " + N[2] + ", " + N[3] + ", " + N[4] + ", " + N[5] + ")";
              }
              function G(N) {
                return Math.sqrt(Math.pow(N[0], 2) + Math.pow(N[1], 2) + Math.pow(N[2], 2) + Math.pow(N[3], 2) + Math.pow(N[4], 2) + Math.pow(N[5], 2) + 1);
              }
              function J(N, w, z) {
                return N[0] = w[0] + z[0], N[1] = w[1] + z[1], N[2] = w[2] + z[2], N[3] = w[3] + z[3], N[4] = w[4] + z[4], N[5] = w[5] + z[5], N;
              }
              function ee(N, w, z) {
                return N[0] = w[0] - z[0], N[1] = w[1] - z[1], N[2] = w[2] - z[2], N[3] = w[3] - z[3], N[4] = w[4] - z[4], N[5] = w[5] - z[5], N;
              }
              function se(N, w, z) {
                return N[0] = w[0] * z, N[1] = w[1] * z, N[2] = w[2] * z, N[3] = w[3] * z, N[4] = w[4] * z, N[5] = w[5] * z, N;
              }
              function Se(N, w, z, te) {
                return N[0] = w[0] + z[0] * te, N[1] = w[1] + z[1] * te, N[2] = w[2] + z[2] * te, N[3] = w[3] + z[3] * te, N[4] = w[4] + z[4] * te, N[5] = w[5] + z[5] * te, N;
              }
              function De(N, w) {
                return N[0] === w[0] && N[1] === w[1] && N[2] === w[2] && N[3] === w[3] && N[4] === w[4] && N[5] === w[5];
              }
              function _e(N, w) {
                var z = N[0], te = N[1], ie = N[2], ce = N[3], ge = N[4], S = N[5], d = w[0], E = w[1], Q = w[2], j = w[3], X = w[4], $ = w[5];
                return Math.abs(z - d) <= o.EPSILON * Math.max(1, Math.abs(z), Math.abs(d)) && Math.abs(te - E) <= o.EPSILON * Math.max(1, Math.abs(te), Math.abs(E)) && Math.abs(ie - Q) <= o.EPSILON * Math.max(1, Math.abs(ie), Math.abs(Q)) && Math.abs(ce - j) <= o.EPSILON * Math.max(1, Math.abs(ce), Math.abs(j)) && Math.abs(ge - X) <= o.EPSILON * Math.max(1, Math.abs(ge), Math.abs(X)) && Math.abs(S - $) <= o.EPSILON * Math.max(1, Math.abs(S), Math.abs($));
              }
              e.mul = F, e.sub = ee;
            },
            /* 7 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.sub = e.mul = void 0, e.create = u, e.clone = y, e.copy = v, e.fromValues = m, e.set = p, e.identity = D, e.transpose = _, e.invert = L, e.adjoint = F, e.determinant = x, e.multiply = O, e.translate = R, e.scale = I, e.rotate = h, e.rotateX = b, e.rotateY = Z, e.rotateZ = G, e.fromTranslation = J, e.fromScaling = ee, e.fromRotation = se, e.fromXRotation = Se, e.fromYRotation = De, e.fromZRotation = _e, e.fromRotationTranslation = N, e.getTranslation = w, e.getScaling = z, e.getRotation = te, e.fromRotationTranslationScale = ie, e.fromRotationTranslationScaleOrigin = ce, e.fromQuat = ge, e.frustum = S, e.perspective = d, e.perspectiveFromFieldOfView = E, e.ortho = Q, e.lookAt = j, e.targetTo = X, e.str = $, e.frob = he, e.add = de, e.subtract = q, e.multiplyScalar = K, e.multiplyScalarAndAdd = ne, e.exactEquals = fe, e.equals = le;
              var f = c(0), o = l(f);
              function l(a) {
                if (a && a.__esModule)
                  return a;
                var g = {};
                if (a != null)
                  for (var Y in a)
                    Object.prototype.hasOwnProperty.call(a, Y) && (g[Y] = a[Y]);
                return g.default = a, g;
              }
              function u() {
                var a = new o.ARRAY_TYPE(16);
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function y(a) {
                var g = new o.ARRAY_TYPE(16);
                return g[0] = a[0], g[1] = a[1], g[2] = a[2], g[3] = a[3], g[4] = a[4], g[5] = a[5], g[6] = a[6], g[7] = a[7], g[8] = a[8], g[9] = a[9], g[10] = a[10], g[11] = a[11], g[12] = a[12], g[13] = a[13], g[14] = a[14], g[15] = a[15], g;
              }
              function v(a, g) {
                return a[0] = g[0], a[1] = g[1], a[2] = g[2], a[3] = g[3], a[4] = g[4], a[5] = g[5], a[6] = g[6], a[7] = g[7], a[8] = g[8], a[9] = g[9], a[10] = g[10], a[11] = g[11], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15], a;
              }
              function m(a, g, Y, H, re, ae, oe, ue, ve, me, ye, Ce, Me, we, xe, Ae) {
                var pe = new o.ARRAY_TYPE(16);
                return pe[0] = a, pe[1] = g, pe[2] = Y, pe[3] = H, pe[4] = re, pe[5] = ae, pe[6] = oe, pe[7] = ue, pe[8] = ve, pe[9] = me, pe[10] = ye, pe[11] = Ce, pe[12] = Me, pe[13] = we, pe[14] = xe, pe[15] = Ae, pe;
              }
              function p(a, g, Y, H, re, ae, oe, ue, ve, me, ye, Ce, Me, we, xe, Ae, pe) {
                return a[0] = g, a[1] = Y, a[2] = H, a[3] = re, a[4] = ae, a[5] = oe, a[6] = ue, a[7] = ve, a[8] = me, a[9] = ye, a[10] = Ce, a[11] = Me, a[12] = we, a[13] = xe, a[14] = Ae, a[15] = pe, a;
              }
              function D(a) {
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function _(a, g) {
                if (a === g) {
                  var Y = g[1], H = g[2], re = g[3], ae = g[6], oe = g[7], ue = g[11];
                  a[1] = g[4], a[2] = g[8], a[3] = g[12], a[4] = Y, a[6] = g[9], a[7] = g[13], a[8] = H, a[9] = ae, a[11] = g[14], a[12] = re, a[13] = oe, a[14] = ue;
                } else
                  a[0] = g[0], a[1] = g[4], a[2] = g[8], a[3] = g[12], a[4] = g[1], a[5] = g[5], a[6] = g[9], a[7] = g[13], a[8] = g[2], a[9] = g[6], a[10] = g[10], a[11] = g[14], a[12] = g[3], a[13] = g[7], a[14] = g[11], a[15] = g[15];
                return a;
              }
              function L(a, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[3], oe = g[4], ue = g[5], ve = g[6], me = g[7], ye = g[8], Ce = g[9], Me = g[10], we = g[11], xe = g[12], Ae = g[13], pe = g[14], be = g[15], Fe = Y * ue - H * oe, Be = Y * ve - re * oe, Ee = Y * me - ae * oe, Te = H * ve - re * ue, Pe = H * me - ae * ue, ke = re * me - ae * ve, qe = ye * Ae - Ce * xe, Le = ye * pe - Me * xe, ze = ye * be - we * xe, je = Ce * pe - Me * Ae, Oe = Ce * be - we * Ae, Ne = Me * be - we * pe, Re = Fe * Ne - Be * Oe + Ee * je + Te * ze - Pe * Le + ke * qe;
                return Re ? (Re = 1 / Re, a[0] = (ue * Ne - ve * Oe + me * je) * Re, a[1] = (re * Oe - H * Ne - ae * je) * Re, a[2] = (Ae * ke - pe * Pe + be * Te) * Re, a[3] = (Me * Pe - Ce * ke - we * Te) * Re, a[4] = (ve * ze - oe * Ne - me * Le) * Re, a[5] = (Y * Ne - re * ze + ae * Le) * Re, a[6] = (pe * Ee - xe * ke - be * Be) * Re, a[7] = (ye * ke - Me * Ee + we * Be) * Re, a[8] = (oe * Oe - ue * ze + me * qe) * Re, a[9] = (H * ze - Y * Oe - ae * qe) * Re, a[10] = (xe * Pe - Ae * Ee + be * Fe) * Re, a[11] = (Ce * Ee - ye * Pe - we * Fe) * Re, a[12] = (ue * Le - oe * je - ve * qe) * Re, a[13] = (Y * je - H * Le + re * qe) * Re, a[14] = (Ae * Be - xe * Te - pe * Fe) * Re, a[15] = (ye * Te - Ce * Be + Me * Fe) * Re, a) : null;
              }
              function F(a, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[3], oe = g[4], ue = g[5], ve = g[6], me = g[7], ye = g[8], Ce = g[9], Me = g[10], we = g[11], xe = g[12], Ae = g[13], pe = g[14], be = g[15];
                return a[0] = ue * (Me * be - we * pe) - Ce * (ve * be - me * pe) + Ae * (ve * we - me * Me), a[1] = -(H * (Me * be - we * pe) - Ce * (re * be - ae * pe) + Ae * (re * we - ae * Me)), a[2] = H * (ve * be - me * pe) - ue * (re * be - ae * pe) + Ae * (re * me - ae * ve), a[3] = -(H * (ve * we - me * Me) - ue * (re * we - ae * Me) + Ce * (re * me - ae * ve)), a[4] = -(oe * (Me * be - we * pe) - ye * (ve * be - me * pe) + xe * (ve * we - me * Me)), a[5] = Y * (Me * be - we * pe) - ye * (re * be - ae * pe) + xe * (re * we - ae * Me), a[6] = -(Y * (ve * be - me * pe) - oe * (re * be - ae * pe) + xe * (re * me - ae * ve)), a[7] = Y * (ve * we - me * Me) - oe * (re * we - ae * Me) + ye * (re * me - ae * ve), a[8] = oe * (Ce * be - we * Ae) - ye * (ue * be - me * Ae) + xe * (ue * we - me * Ce), a[9] = -(Y * (Ce * be - we * Ae) - ye * (H * be - ae * Ae) + xe * (H * we - ae * Ce)), a[10] = Y * (ue * be - me * Ae) - oe * (H * be - ae * Ae) + xe * (H * me - ae * ue), a[11] = -(Y * (ue * we - me * Ce) - oe * (H * we - ae * Ce) + ye * (H * me - ae * ue)), a[12] = -(oe * (Ce * pe - Me * Ae) - ye * (ue * pe - ve * Ae) + xe * (ue * Me - ve * Ce)), a[13] = Y * (Ce * pe - Me * Ae) - ye * (H * pe - re * Ae) + xe * (H * Me - re * Ce), a[14] = -(Y * (ue * pe - ve * Ae) - oe * (H * pe - re * Ae) + xe * (H * ve - re * ue)), a[15] = Y * (ue * Me - ve * Ce) - oe * (H * Me - re * Ce) + ye * (H * ve - re * ue), a;
              }
              function x(a) {
                var g = a[0], Y = a[1], H = a[2], re = a[3], ae = a[4], oe = a[5], ue = a[6], ve = a[7], me = a[8], ye = a[9], Ce = a[10], Me = a[11], we = a[12], xe = a[13], Ae = a[14], pe = a[15], be = g * oe - Y * ae, Fe = g * ue - H * ae, Be = g * ve - re * ae, Ee = Y * ue - H * oe, Te = Y * ve - re * oe, Pe = H * ve - re * ue, ke = me * xe - ye * we, qe = me * Ae - Ce * we, Le = me * pe - Me * we, ze = ye * Ae - Ce * xe, je = ye * pe - Me * xe, Oe = Ce * pe - Me * Ae;
                return be * Oe - Fe * je + Be * ze + Ee * Le - Te * qe + Pe * ke;
              }
              function O(a, g, Y) {
                var H = g[0], re = g[1], ae = g[2], oe = g[3], ue = g[4], ve = g[5], me = g[6], ye = g[7], Ce = g[8], Me = g[9], we = g[10], xe = g[11], Ae = g[12], pe = g[13], be = g[14], Fe = g[15], Be = Y[0], Ee = Y[1], Te = Y[2], Pe = Y[3];
                return a[0] = Be * H + Ee * ue + Te * Ce + Pe * Ae, a[1] = Be * re + Ee * ve + Te * Me + Pe * pe, a[2] = Be * ae + Ee * me + Te * we + Pe * be, a[3] = Be * oe + Ee * ye + Te * xe + Pe * Fe, Be = Y[4], Ee = Y[5], Te = Y[6], Pe = Y[7], a[4] = Be * H + Ee * ue + Te * Ce + Pe * Ae, a[5] = Be * re + Ee * ve + Te * Me + Pe * pe, a[6] = Be * ae + Ee * me + Te * we + Pe * be, a[7] = Be * oe + Ee * ye + Te * xe + Pe * Fe, Be = Y[8], Ee = Y[9], Te = Y[10], Pe = Y[11], a[8] = Be * H + Ee * ue + Te * Ce + Pe * Ae, a[9] = Be * re + Ee * ve + Te * Me + Pe * pe, a[10] = Be * ae + Ee * me + Te * we + Pe * be, a[11] = Be * oe + Ee * ye + Te * xe + Pe * Fe, Be = Y[12], Ee = Y[13], Te = Y[14], Pe = Y[15], a[12] = Be * H + Ee * ue + Te * Ce + Pe * Ae, a[13] = Be * re + Ee * ve + Te * Me + Pe * pe, a[14] = Be * ae + Ee * me + Te * we + Pe * be, a[15] = Be * oe + Ee * ye + Te * xe + Pe * Fe, a;
              }
              function R(a, g, Y) {
                var H = Y[0], re = Y[1], ae = Y[2], oe = void 0, ue = void 0, ve = void 0, me = void 0, ye = void 0, Ce = void 0, Me = void 0, we = void 0, xe = void 0, Ae = void 0, pe = void 0, be = void 0;
                return g === a ? (a[12] = g[0] * H + g[4] * re + g[8] * ae + g[12], a[13] = g[1] * H + g[5] * re + g[9] * ae + g[13], a[14] = g[2] * H + g[6] * re + g[10] * ae + g[14], a[15] = g[3] * H + g[7] * re + g[11] * ae + g[15]) : (oe = g[0], ue = g[1], ve = g[2], me = g[3], ye = g[4], Ce = g[5], Me = g[6], we = g[7], xe = g[8], Ae = g[9], pe = g[10], be = g[11], a[0] = oe, a[1] = ue, a[2] = ve, a[3] = me, a[4] = ye, a[5] = Ce, a[6] = Me, a[7] = we, a[8] = xe, a[9] = Ae, a[10] = pe, a[11] = be, a[12] = oe * H + ye * re + xe * ae + g[12], a[13] = ue * H + Ce * re + Ae * ae + g[13], a[14] = ve * H + Me * re + pe * ae + g[14], a[15] = me * H + we * re + be * ae + g[15]), a;
              }
              function I(a, g, Y) {
                var H = Y[0], re = Y[1], ae = Y[2];
                return a[0] = g[0] * H, a[1] = g[1] * H, a[2] = g[2] * H, a[3] = g[3] * H, a[4] = g[4] * re, a[5] = g[5] * re, a[6] = g[6] * re, a[7] = g[7] * re, a[8] = g[8] * ae, a[9] = g[9] * ae, a[10] = g[10] * ae, a[11] = g[11] * ae, a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15], a;
              }
              function h(a, g, Y, H) {
                var re = H[0], ae = H[1], oe = H[2], ue = Math.sqrt(re * re + ae * ae + oe * oe), ve = void 0, me = void 0, ye = void 0, Ce = void 0, Me = void 0, we = void 0, xe = void 0, Ae = void 0, pe = void 0, be = void 0, Fe = void 0, Be = void 0, Ee = void 0, Te = void 0, Pe = void 0, ke = void 0, qe = void 0, Le = void 0, ze = void 0, je = void 0, Oe = void 0, Ne = void 0, Re = void 0, Ie = void 0;
                return Math.abs(ue) < o.EPSILON ? null : (ue = 1 / ue, re *= ue, ae *= ue, oe *= ue, ve = Math.sin(Y), me = Math.cos(Y), ye = 1 - me, Ce = g[0], Me = g[1], we = g[2], xe = g[3], Ae = g[4], pe = g[5], be = g[6], Fe = g[7], Be = g[8], Ee = g[9], Te = g[10], Pe = g[11], ke = re * re * ye + me, qe = ae * re * ye + oe * ve, Le = oe * re * ye - ae * ve, ze = re * ae * ye - oe * ve, je = ae * ae * ye + me, Oe = oe * ae * ye + re * ve, Ne = re * oe * ye + ae * ve, Re = ae * oe * ye - re * ve, Ie = oe * oe * ye + me, a[0] = Ce * ke + Ae * qe + Be * Le, a[1] = Me * ke + pe * qe + Ee * Le, a[2] = we * ke + be * qe + Te * Le, a[3] = xe * ke + Fe * qe + Pe * Le, a[4] = Ce * ze + Ae * je + Be * Oe, a[5] = Me * ze + pe * je + Ee * Oe, a[6] = we * ze + be * je + Te * Oe, a[7] = xe * ze + Fe * je + Pe * Oe, a[8] = Ce * Ne + Ae * Re + Be * Ie, a[9] = Me * Ne + pe * Re + Ee * Ie, a[10] = we * Ne + be * Re + Te * Ie, a[11] = xe * Ne + Fe * Re + Pe * Ie, g !== a && (a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a);
              }
              function b(a, g, Y) {
                var H = Math.sin(Y), re = Math.cos(Y), ae = g[4], oe = g[5], ue = g[6], ve = g[7], me = g[8], ye = g[9], Ce = g[10], Me = g[11];
                return g !== a && (a[0] = g[0], a[1] = g[1], a[2] = g[2], a[3] = g[3], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a[4] = ae * re + me * H, a[5] = oe * re + ye * H, a[6] = ue * re + Ce * H, a[7] = ve * re + Me * H, a[8] = me * re - ae * H, a[9] = ye * re - oe * H, a[10] = Ce * re - ue * H, a[11] = Me * re - ve * H, a;
              }
              function Z(a, g, Y) {
                var H = Math.sin(Y), re = Math.cos(Y), ae = g[0], oe = g[1], ue = g[2], ve = g[3], me = g[8], ye = g[9], Ce = g[10], Me = g[11];
                return g !== a && (a[4] = g[4], a[5] = g[5], a[6] = g[6], a[7] = g[7], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a[0] = ae * re - me * H, a[1] = oe * re - ye * H, a[2] = ue * re - Ce * H, a[3] = ve * re - Me * H, a[8] = ae * H + me * re, a[9] = oe * H + ye * re, a[10] = ue * H + Ce * re, a[11] = ve * H + Me * re, a;
              }
              function G(a, g, Y) {
                var H = Math.sin(Y), re = Math.cos(Y), ae = g[0], oe = g[1], ue = g[2], ve = g[3], me = g[4], ye = g[5], Ce = g[6], Me = g[7];
                return g !== a && (a[8] = g[8], a[9] = g[9], a[10] = g[10], a[11] = g[11], a[12] = g[12], a[13] = g[13], a[14] = g[14], a[15] = g[15]), a[0] = ae * re + me * H, a[1] = oe * re + ye * H, a[2] = ue * re + Ce * H, a[3] = ve * re + Me * H, a[4] = me * re - ae * H, a[5] = ye * re - oe * H, a[6] = Ce * re - ue * H, a[7] = Me * re - ve * H, a;
              }
              function J(a, g) {
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = g[0], a[13] = g[1], a[14] = g[2], a[15] = 1, a;
              }
              function ee(a, g) {
                return a[0] = g[0], a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = g[1], a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = g[2], a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function se(a, g, Y) {
                var H = Y[0], re = Y[1], ae = Y[2], oe = Math.sqrt(H * H + re * re + ae * ae), ue = void 0, ve = void 0, me = void 0;
                return Math.abs(oe) < o.EPSILON ? null : (oe = 1 / oe, H *= oe, re *= oe, ae *= oe, ue = Math.sin(g), ve = Math.cos(g), me = 1 - ve, a[0] = H * H * me + ve, a[1] = re * H * me + ae * ue, a[2] = ae * H * me - re * ue, a[3] = 0, a[4] = H * re * me - ae * ue, a[5] = re * re * me + ve, a[6] = ae * re * me + H * ue, a[7] = 0, a[8] = H * ae * me + re * ue, a[9] = re * ae * me - H * ue, a[10] = ae * ae * me + ve, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a);
              }
              function Se(a, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return a[0] = 1, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = H, a[6] = Y, a[7] = 0, a[8] = 0, a[9] = -Y, a[10] = H, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function De(a, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return a[0] = H, a[1] = 0, a[2] = -Y, a[3] = 0, a[4] = 0, a[5] = 1, a[6] = 0, a[7] = 0, a[8] = Y, a[9] = 0, a[10] = H, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function _e(a, g) {
                var Y = Math.sin(g), H = Math.cos(g);
                return a[0] = H, a[1] = Y, a[2] = 0, a[3] = 0, a[4] = -Y, a[5] = H, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 1, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function N(a, g, Y) {
                var H = g[0], re = g[1], ae = g[2], oe = g[3], ue = H + H, ve = re + re, me = ae + ae, ye = H * ue, Ce = H * ve, Me = H * me, we = re * ve, xe = re * me, Ae = ae * me, pe = oe * ue, be = oe * ve, Fe = oe * me;
                return a[0] = 1 - (we + Ae), a[1] = Ce + Fe, a[2] = Me - be, a[3] = 0, a[4] = Ce - Fe, a[5] = 1 - (ye + Ae), a[6] = xe + pe, a[7] = 0, a[8] = Me + be, a[9] = xe - pe, a[10] = 1 - (ye + we), a[11] = 0, a[12] = Y[0], a[13] = Y[1], a[14] = Y[2], a[15] = 1, a;
              }
              function w(a, g) {
                return a[0] = g[12], a[1] = g[13], a[2] = g[14], a;
              }
              function z(a, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[4], oe = g[5], ue = g[6], ve = g[8], me = g[9], ye = g[10];
                return a[0] = Math.sqrt(Y * Y + H * H + re * re), a[1] = Math.sqrt(ae * ae + oe * oe + ue * ue), a[2] = Math.sqrt(ve * ve + me * me + ye * ye), a;
              }
              function te(a, g) {
                var Y = g[0] + g[5] + g[10], H = 0;
                return Y > 0 ? (H = Math.sqrt(Y + 1) * 2, a[3] = 0.25 * H, a[0] = (g[6] - g[9]) / H, a[1] = (g[8] - g[2]) / H, a[2] = (g[1] - g[4]) / H) : g[0] > g[5] & g[0] > g[10] ? (H = Math.sqrt(1 + g[0] - g[5] - g[10]) * 2, a[3] = (g[6] - g[9]) / H, a[0] = 0.25 * H, a[1] = (g[1] + g[4]) / H, a[2] = (g[8] + g[2]) / H) : g[5] > g[10] ? (H = Math.sqrt(1 + g[5] - g[0] - g[10]) * 2, a[3] = (g[8] - g[2]) / H, a[0] = (g[1] + g[4]) / H, a[1] = 0.25 * H, a[2] = (g[6] + g[9]) / H) : (H = Math.sqrt(1 + g[10] - g[0] - g[5]) * 2, a[3] = (g[1] - g[4]) / H, a[0] = (g[8] + g[2]) / H, a[1] = (g[6] + g[9]) / H, a[2] = 0.25 * H), a;
              }
              function ie(a, g, Y, H) {
                var re = g[0], ae = g[1], oe = g[2], ue = g[3], ve = re + re, me = ae + ae, ye = oe + oe, Ce = re * ve, Me = re * me, we = re * ye, xe = ae * me, Ae = ae * ye, pe = oe * ye, be = ue * ve, Fe = ue * me, Be = ue * ye, Ee = H[0], Te = H[1], Pe = H[2];
                return a[0] = (1 - (xe + pe)) * Ee, a[1] = (Me + Be) * Ee, a[2] = (we - Fe) * Ee, a[3] = 0, a[4] = (Me - Be) * Te, a[5] = (1 - (Ce + pe)) * Te, a[6] = (Ae + be) * Te, a[7] = 0, a[8] = (we + Fe) * Pe, a[9] = (Ae - be) * Pe, a[10] = (1 - (Ce + xe)) * Pe, a[11] = 0, a[12] = Y[0], a[13] = Y[1], a[14] = Y[2], a[15] = 1, a;
              }
              function ce(a, g, Y, H, re) {
                var ae = g[0], oe = g[1], ue = g[2], ve = g[3], me = ae + ae, ye = oe + oe, Ce = ue + ue, Me = ae * me, we = ae * ye, xe = ae * Ce, Ae = oe * ye, pe = oe * Ce, be = ue * Ce, Fe = ve * me, Be = ve * ye, Ee = ve * Ce, Te = H[0], Pe = H[1], ke = H[2], qe = re[0], Le = re[1], ze = re[2];
                return a[0] = (1 - (Ae + be)) * Te, a[1] = (we + Ee) * Te, a[2] = (xe - Be) * Te, a[3] = 0, a[4] = (we - Ee) * Pe, a[5] = (1 - (Me + be)) * Pe, a[6] = (pe + Fe) * Pe, a[7] = 0, a[8] = (xe + Be) * ke, a[9] = (pe - Fe) * ke, a[10] = (1 - (Me + Ae)) * ke, a[11] = 0, a[12] = Y[0] + qe - (a[0] * qe + a[4] * Le + a[8] * ze), a[13] = Y[1] + Le - (a[1] * qe + a[5] * Le + a[9] * ze), a[14] = Y[2] + ze - (a[2] * qe + a[6] * Le + a[10] * ze), a[15] = 1, a;
              }
              function ge(a, g) {
                var Y = g[0], H = g[1], re = g[2], ae = g[3], oe = Y + Y, ue = H + H, ve = re + re, me = Y * oe, ye = H * oe, Ce = H * ue, Me = re * oe, we = re * ue, xe = re * ve, Ae = ae * oe, pe = ae * ue, be = ae * ve;
                return a[0] = 1 - Ce - xe, a[1] = ye + be, a[2] = Me - pe, a[3] = 0, a[4] = ye - be, a[5] = 1 - me - xe, a[6] = we + Ae, a[7] = 0, a[8] = Me + pe, a[9] = we - Ae, a[10] = 1 - me - Ce, a[11] = 0, a[12] = 0, a[13] = 0, a[14] = 0, a[15] = 1, a;
              }
              function S(a, g, Y, H, re, ae, oe) {
                var ue = 1 / (Y - g), ve = 1 / (re - H), me = 1 / (ae - oe);
                return a[0] = ae * 2 * ue, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = ae * 2 * ve, a[6] = 0, a[7] = 0, a[8] = (Y + g) * ue, a[9] = (re + H) * ve, a[10] = (oe + ae) * me, a[11] = -1, a[12] = 0, a[13] = 0, a[14] = oe * ae * 2 * me, a[15] = 0, a;
              }
              function d(a, g, Y, H, re) {
                var ae = 1 / Math.tan(g / 2), oe = 1 / (H - re);
                return a[0] = ae / Y, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = ae, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = (re + H) * oe, a[11] = -1, a[12] = 0, a[13] = 0, a[14] = 2 * re * H * oe, a[15] = 0, a;
              }
              function E(a, g, Y, H) {
                var re = Math.tan(g.upDegrees * Math.PI / 180), ae = Math.tan(g.downDegrees * Math.PI / 180), oe = Math.tan(g.leftDegrees * Math.PI / 180), ue = Math.tan(g.rightDegrees * Math.PI / 180), ve = 2 / (oe + ue), me = 2 / (re + ae);
                return a[0] = ve, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = me, a[6] = 0, a[7] = 0, a[8] = -((oe - ue) * ve * 0.5), a[9] = (re - ae) * me * 0.5, a[10] = H / (Y - H), a[11] = -1, a[12] = 0, a[13] = 0, a[14] = H * Y / (Y - H), a[15] = 0, a;
              }
              function Q(a, g, Y, H, re, ae, oe) {
                var ue = 1 / (g - Y), ve = 1 / (H - re), me = 1 / (ae - oe);
                return a[0] = -2 * ue, a[1] = 0, a[2] = 0, a[3] = 0, a[4] = 0, a[5] = -2 * ve, a[6] = 0, a[7] = 0, a[8] = 0, a[9] = 0, a[10] = 2 * me, a[11] = 0, a[12] = (g + Y) * ue, a[13] = (re + H) * ve, a[14] = (oe + ae) * me, a[15] = 1, a;
              }
              function j(a, g, Y, H) {
                var re = void 0, ae = void 0, oe = void 0, ue = void 0, ve = void 0, me = void 0, ye = void 0, Ce = void 0, Me = void 0, we = void 0, xe = g[0], Ae = g[1], pe = g[2], be = H[0], Fe = H[1], Be = H[2], Ee = Y[0], Te = Y[1], Pe = Y[2];
                return Math.abs(xe - Ee) < o.EPSILON && Math.abs(Ae - Te) < o.EPSILON && Math.abs(pe - Pe) < o.EPSILON ? mat4.identity(a) : (ye = xe - Ee, Ce = Ae - Te, Me = pe - Pe, we = 1 / Math.sqrt(ye * ye + Ce * Ce + Me * Me), ye *= we, Ce *= we, Me *= we, re = Fe * Me - Be * Ce, ae = Be * ye - be * Me, oe = be * Ce - Fe * ye, we = Math.sqrt(re * re + ae * ae + oe * oe), we ? (we = 1 / we, re *= we, ae *= we, oe *= we) : (re = 0, ae = 0, oe = 0), ue = Ce * oe - Me * ae, ve = Me * re - ye * oe, me = ye * ae - Ce * re, we = Math.sqrt(ue * ue + ve * ve + me * me), we ? (we = 1 / we, ue *= we, ve *= we, me *= we) : (ue = 0, ve = 0, me = 0), a[0] = re, a[1] = ue, a[2] = ye, a[3] = 0, a[4] = ae, a[5] = ve, a[6] = Ce, a[7] = 0, a[8] = oe, a[9] = me, a[10] = Me, a[11] = 0, a[12] = -(re * xe + ae * Ae + oe * pe), a[13] = -(ue * xe + ve * Ae + me * pe), a[14] = -(ye * xe + Ce * Ae + Me * pe), a[15] = 1, a);
              }
              function X(a, g, Y, H) {
                var re = g[0], ae = g[1], oe = g[2], ue = H[0], ve = H[1], me = H[2], ye = re - Y[0], Ce = ae - Y[1], Me = oe - Y[2], we = ye * ye + Ce * Ce + Me * Me;
                we > 0 && (we = 1 / Math.sqrt(we), ye *= we, Ce *= we, Me *= we);
                var xe = ve * Me - me * Ce, Ae = me * ye - ue * Me, pe = ue * Ce - ve * ye;
                return a[0] = xe, a[1] = Ae, a[2] = pe, a[3] = 0, a[4] = Ce * pe - Me * Ae, a[5] = Me * xe - ye * pe, a[6] = ye * Ae - Ce * xe, a[7] = 0, a[8] = ye, a[9] = Ce, a[10] = Me, a[11] = 0, a[12] = re, a[13] = ae, a[14] = oe, a[15] = 1, a;
              }
              function $(a) {
                return "mat4(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + ")";
              }
              function he(a) {
                return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));
              }
              function de(a, g, Y) {
                return a[0] = g[0] + Y[0], a[1] = g[1] + Y[1], a[2] = g[2] + Y[2], a[3] = g[3] + Y[3], a[4] = g[4] + Y[4], a[5] = g[5] + Y[5], a[6] = g[6] + Y[6], a[7] = g[7] + Y[7], a[8] = g[8] + Y[8], a[9] = g[9] + Y[9], a[10] = g[10] + Y[10], a[11] = g[11] + Y[11], a[12] = g[12] + Y[12], a[13] = g[13] + Y[13], a[14] = g[14] + Y[14], a[15] = g[15] + Y[15], a;
              }
              function q(a, g, Y) {
                return a[0] = g[0] - Y[0], a[1] = g[1] - Y[1], a[2] = g[2] - Y[2], a[3] = g[3] - Y[3], a[4] = g[4] - Y[4], a[5] = g[5] - Y[5], a[6] = g[6] - Y[6], a[7] = g[7] - Y[7], a[8] = g[8] - Y[8], a[9] = g[9] - Y[9], a[10] = g[10] - Y[10], a[11] = g[11] - Y[11], a[12] = g[12] - Y[12], a[13] = g[13] - Y[13], a[14] = g[14] - Y[14], a[15] = g[15] - Y[15], a;
              }
              function K(a, g, Y) {
                return a[0] = g[0] * Y, a[1] = g[1] * Y, a[2] = g[2] * Y, a[3] = g[3] * Y, a[4] = g[4] * Y, a[5] = g[5] * Y, a[6] = g[6] * Y, a[7] = g[7] * Y, a[8] = g[8] * Y, a[9] = g[9] * Y, a[10] = g[10] * Y, a[11] = g[11] * Y, a[12] = g[12] * Y, a[13] = g[13] * Y, a[14] = g[14] * Y, a[15] = g[15] * Y, a;
              }
              function ne(a, g, Y, H) {
                return a[0] = g[0] + Y[0] * H, a[1] = g[1] + Y[1] * H, a[2] = g[2] + Y[2] * H, a[3] = g[3] + Y[3] * H, a[4] = g[4] + Y[4] * H, a[5] = g[5] + Y[5] * H, a[6] = g[6] + Y[6] * H, a[7] = g[7] + Y[7] * H, a[8] = g[8] + Y[8] * H, a[9] = g[9] + Y[9] * H, a[10] = g[10] + Y[10] * H, a[11] = g[11] + Y[11] * H, a[12] = g[12] + Y[12] * H, a[13] = g[13] + Y[13] * H, a[14] = g[14] + Y[14] * H, a[15] = g[15] + Y[15] * H, a;
              }
              function fe(a, g) {
                return a[0] === g[0] && a[1] === g[1] && a[2] === g[2] && a[3] === g[3] && a[4] === g[4] && a[5] === g[5] && a[6] === g[6] && a[7] === g[7] && a[8] === g[8] && a[9] === g[9] && a[10] === g[10] && a[11] === g[11] && a[12] === g[12] && a[13] === g[13] && a[14] === g[14] && a[15] === g[15];
              }
              function le(a, g) {
                var Y = a[0], H = a[1], re = a[2], ae = a[3], oe = a[4], ue = a[5], ve = a[6], me = a[7], ye = a[8], Ce = a[9], Me = a[10], we = a[11], xe = a[12], Ae = a[13], pe = a[14], be = a[15], Fe = g[0], Be = g[1], Ee = g[2], Te = g[3], Pe = g[4], ke = g[5], qe = g[6], Le = g[7], ze = g[8], je = g[9], Oe = g[10], Ne = g[11], Re = g[12], Ie = g[13], Ve = g[14], Ge = g[15];
                return Math.abs(Y - Fe) <= o.EPSILON * Math.max(1, Math.abs(Y), Math.abs(Fe)) && Math.abs(H - Be) <= o.EPSILON * Math.max(1, Math.abs(H), Math.abs(Be)) && Math.abs(re - Ee) <= o.EPSILON * Math.max(1, Math.abs(re), Math.abs(Ee)) && Math.abs(ae - Te) <= o.EPSILON * Math.max(1, Math.abs(ae), Math.abs(Te)) && Math.abs(oe - Pe) <= o.EPSILON * Math.max(1, Math.abs(oe), Math.abs(Pe)) && Math.abs(ue - ke) <= o.EPSILON * Math.max(1, Math.abs(ue), Math.abs(ke)) && Math.abs(ve - qe) <= o.EPSILON * Math.max(1, Math.abs(ve), Math.abs(qe)) && Math.abs(me - Le) <= o.EPSILON * Math.max(1, Math.abs(me), Math.abs(Le)) && Math.abs(ye - ze) <= o.EPSILON * Math.max(1, Math.abs(ye), Math.abs(ze)) && Math.abs(Ce - je) <= o.EPSILON * Math.max(1, Math.abs(Ce), Math.abs(je)) && Math.abs(Me - Oe) <= o.EPSILON * Math.max(1, Math.abs(Me), Math.abs(Oe)) && Math.abs(we - Ne) <= o.EPSILON * Math.max(1, Math.abs(we), Math.abs(Ne)) && Math.abs(xe - Re) <= o.EPSILON * Math.max(1, Math.abs(xe), Math.abs(Re)) && Math.abs(Ae - Ie) <= o.EPSILON * Math.max(1, Math.abs(Ae), Math.abs(Ie)) && Math.abs(pe - Ve) <= o.EPSILON * Math.max(1, Math.abs(pe), Math.abs(Ve)) && Math.abs(be - Ge) <= o.EPSILON * Math.max(1, Math.abs(be), Math.abs(Ge));
              }
              e.mul = O, e.sub = q;
            },
            /* 8 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.setAxes = e.sqlerp = e.rotationTo = e.equals = e.exactEquals = e.normalize = e.sqrLen = e.squaredLength = e.len = e.length = e.lerp = e.dot = e.scale = e.mul = e.add = e.set = e.copy = e.fromValues = e.clone = void 0, e.create = _, e.identity = L, e.setAxisAngle = F, e.getAxisAngle = x, e.multiply = O, e.rotateX = R, e.rotateY = I, e.rotateZ = h, e.calculateW = b, e.slerp = Z, e.invert = G, e.conjugate = J, e.fromMat3 = ee, e.fromEuler = se, e.str = Se;
              var f = c(0), o = D(f), l = c(1), u = D(l), y = c(2), v = D(y), m = c(3), p = D(m);
              function D(w) {
                if (w && w.__esModule)
                  return w;
                var z = {};
                if (w != null)
                  for (var te in w)
                    Object.prototype.hasOwnProperty.call(w, te) && (z[te] = w[te]);
                return z.default = w, z;
              }
              function _() {
                var w = new o.ARRAY_TYPE(4);
                return w[0] = 0, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function L(w) {
                return w[0] = 0, w[1] = 0, w[2] = 0, w[3] = 1, w;
              }
              function F(w, z, te) {
                te = te * 0.5;
                var ie = Math.sin(te);
                return w[0] = ie * z[0], w[1] = ie * z[1], w[2] = ie * z[2], w[3] = Math.cos(te), w;
              }
              function x(w, z) {
                var te = Math.acos(z[3]) * 2, ie = Math.sin(te / 2);
                return ie != 0 ? (w[0] = z[0] / ie, w[1] = z[1] / ie, w[2] = z[2] / ie) : (w[0] = 1, w[1] = 0, w[2] = 0), te;
              }
              function O(w, z, te) {
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = te[0], E = te[1], Q = te[2], j = te[3];
                return w[0] = ie * j + S * d + ce * Q - ge * E, w[1] = ce * j + S * E + ge * d - ie * Q, w[2] = ge * j + S * Q + ie * E - ce * d, w[3] = S * j - ie * d - ce * E - ge * Q, w;
              }
              function R(w, z, te) {
                te *= 0.5;
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E + S * d, w[1] = ce * E + ge * d, w[2] = ge * E - ce * d, w[3] = S * E - ie * d, w;
              }
              function I(w, z, te) {
                te *= 0.5;
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E - ge * d, w[1] = ce * E + S * d, w[2] = ge * E + ie * d, w[3] = S * E - ce * d, w;
              }
              function h(w, z, te) {
                te *= 0.5;
                var ie = z[0], ce = z[1], ge = z[2], S = z[3], d = Math.sin(te), E = Math.cos(te);
                return w[0] = ie * E + ce * d, w[1] = ce * E - ie * d, w[2] = ge * E + S * d, w[3] = S * E - ge * d, w;
              }
              function b(w, z) {
                var te = z[0], ie = z[1], ce = z[2];
                return w[0] = te, w[1] = ie, w[2] = ce, w[3] = Math.sqrt(Math.abs(1 - te * te - ie * ie - ce * ce)), w;
              }
              function Z(w, z, te, ie) {
                var ce = z[0], ge = z[1], S = z[2], d = z[3], E = te[0], Q = te[1], j = te[2], X = te[3], $ = void 0, he = void 0, de = void 0, q = void 0, K = void 0;
                return he = ce * E + ge * Q + S * j + d * X, he < 0 && (he = -he, E = -E, Q = -Q, j = -j, X = -X), 1 - he > 1e-6 ? ($ = Math.acos(he), de = Math.sin($), q = Math.sin((1 - ie) * $) / de, K = Math.sin(ie * $) / de) : (q = 1 - ie, K = ie), w[0] = q * ce + K * E, w[1] = q * ge + K * Q, w[2] = q * S + K * j, w[3] = q * d + K * X, w;
              }
              function G(w, z) {
                var te = z[0], ie = z[1], ce = z[2], ge = z[3], S = te * te + ie * ie + ce * ce + ge * ge, d = S ? 1 / S : 0;
                return w[0] = -te * d, w[1] = -ie * d, w[2] = -ce * d, w[3] = ge * d, w;
              }
              function J(w, z) {
                return w[0] = -z[0], w[1] = -z[1], w[2] = -z[2], w[3] = z[3], w;
              }
              function ee(w, z) {
                var te = z[0] + z[4] + z[8], ie = void 0;
                if (te > 0)
                  ie = Math.sqrt(te + 1), w[3] = 0.5 * ie, ie = 0.5 / ie, w[0] = (z[5] - z[7]) * ie, w[1] = (z[6] - z[2]) * ie, w[2] = (z[1] - z[3]) * ie;
                else {
                  var ce = 0;
                  z[4] > z[0] && (ce = 1), z[8] > z[ce * 3 + ce] && (ce = 2);
                  var ge = (ce + 1) % 3, S = (ce + 2) % 3;
                  ie = Math.sqrt(z[ce * 3 + ce] - z[ge * 3 + ge] - z[S * 3 + S] + 1), w[ce] = 0.5 * ie, ie = 0.5 / ie, w[3] = (z[ge * 3 + S] - z[S * 3 + ge]) * ie, w[ge] = (z[ge * 3 + ce] + z[ce * 3 + ge]) * ie, w[S] = (z[S * 3 + ce] + z[ce * 3 + S]) * ie;
                }
                return w;
              }
              function se(w, z, te, ie) {
                var ce = 0.5 * Math.PI / 180;
                z *= ce, te *= ce, ie *= ce;
                var ge = Math.sin(z), S = Math.cos(z), d = Math.sin(te), E = Math.cos(te), Q = Math.sin(ie), j = Math.cos(ie);
                return w[0] = ge * E * j - S * d * Q, w[1] = S * d * j + ge * E * Q, w[2] = S * E * Q - ge * d * j, w[3] = S * E * j + ge * d * Q, w;
              }
              function Se(w) {
                return "quat(" + w[0] + ", " + w[1] + ", " + w[2] + ", " + w[3] + ")";
              }
              e.clone = p.clone, e.fromValues = p.fromValues, e.copy = p.copy, e.set = p.set, e.add = p.add, e.mul = O, e.scale = p.scale, e.dot = p.dot, e.lerp = p.lerp;
              var De = e.length = p.length;
              e.len = De;
              var _e = e.squaredLength = p.squaredLength;
              e.sqrLen = _e;
              var N = e.normalize = p.normalize;
              e.exactEquals = p.exactEquals, e.equals = p.equals, e.rotationTo = function() {
                var w = v.create(), z = v.fromValues(1, 0, 0), te = v.fromValues(0, 1, 0);
                return function(ie, ce, ge) {
                  var S = v.dot(ce, ge);
                  return S < -0.999999 ? (v.cross(w, z, ce), v.len(w) < 1e-6 && v.cross(w, te, ce), v.normalize(w, w), F(ie, w, Math.PI), ie) : S > 0.999999 ? (ie[0] = 0, ie[1] = 0, ie[2] = 0, ie[3] = 1, ie) : (v.cross(w, ce, ge), ie[0] = w[0], ie[1] = w[1], ie[2] = w[2], ie[3] = 1 + S, N(ie, ie));
                };
              }(), e.sqlerp = function() {
                var w = _(), z = _();
                return function(te, ie, ce, ge, S, d) {
                  return Z(w, ie, S, d), Z(z, ce, ge, d), Z(te, w, z, 2 * d * (1 - d)), te;
                };
              }(), e.setAxes = function() {
                var w = u.create();
                return function(z, te, ie, ce) {
                  return w[0] = ie[0], w[3] = ie[1], w[6] = ie[2], w[1] = ce[0], w[4] = ce[1], w[7] = ce[2], w[2] = -te[0], w[5] = -te[1], w[8] = -te[2], N(z, ee(z, w));
                };
              }();
            },
            /* 9 */
            /***/
            function(s, e, c) {
              Object.defineProperty(e, "__esModule", {
                value: !0
              }), e.forEach = e.sqrLen = e.sqrDist = e.dist = e.div = e.mul = e.sub = e.len = void 0, e.create = u, e.clone = y, e.fromValues = v, e.copy = m, e.set = p, e.add = D, e.subtract = _, e.multiply = L, e.divide = F, e.ceil = x, e.floor = O, e.min = R, e.max = I, e.round = h, e.scale = b, e.scaleAndAdd = Z, e.distance = G, e.squaredDistance = J, e.length = ee, e.squaredLength = se, e.negate = Se, e.inverse = De, e.normalize = _e, e.dot = N, e.cross = w, e.lerp = z, e.random = te, e.transformMat2 = ie, e.transformMat2d = ce, e.transformMat3 = ge, e.transformMat4 = S, e.str = d, e.exactEquals = E, e.equals = Q;
              var f = c(0), o = l(f);
              function l(j) {
                if (j && j.__esModule)
                  return j;
                var X = {};
                if (j != null)
                  for (var $ in j)
                    Object.prototype.hasOwnProperty.call(j, $) && (X[$] = j[$]);
                return X.default = j, X;
              }
              function u() {
                var j = new o.ARRAY_TYPE(2);
                return j[0] = 0, j[1] = 0, j;
              }
              function y(j) {
                var X = new o.ARRAY_TYPE(2);
                return X[0] = j[0], X[1] = j[1], X;
              }
              function v(j, X) {
                var $ = new o.ARRAY_TYPE(2);
                return $[0] = j, $[1] = X, $;
              }
              function m(j, X) {
                return j[0] = X[0], j[1] = X[1], j;
              }
              function p(j, X, $) {
                return j[0] = X, j[1] = $, j;
              }
              function D(j, X, $) {
                return j[0] = X[0] + $[0], j[1] = X[1] + $[1], j;
              }
              function _(j, X, $) {
                return j[0] = X[0] - $[0], j[1] = X[1] - $[1], j;
              }
              function L(j, X, $) {
                return j[0] = X[0] * $[0], j[1] = X[1] * $[1], j;
              }
              function F(j, X, $) {
                return j[0] = X[0] / $[0], j[1] = X[1] / $[1], j;
              }
              function x(j, X) {
                return j[0] = Math.ceil(X[0]), j[1] = Math.ceil(X[1]), j;
              }
              function O(j, X) {
                return j[0] = Math.floor(X[0]), j[1] = Math.floor(X[1]), j;
              }
              function R(j, X, $) {
                return j[0] = Math.min(X[0], $[0]), j[1] = Math.min(X[1], $[1]), j;
              }
              function I(j, X, $) {
                return j[0] = Math.max(X[0], $[0]), j[1] = Math.max(X[1], $[1]), j;
              }
              function h(j, X) {
                return j[0] = Math.round(X[0]), j[1] = Math.round(X[1]), j;
              }
              function b(j, X, $) {
                return j[0] = X[0] * $, j[1] = X[1] * $, j;
              }
              function Z(j, X, $, he) {
                return j[0] = X[0] + $[0] * he, j[1] = X[1] + $[1] * he, j;
              }
              function G(j, X) {
                var $ = X[0] - j[0], he = X[1] - j[1];
                return Math.sqrt($ * $ + he * he);
              }
              function J(j, X) {
                var $ = X[0] - j[0], he = X[1] - j[1];
                return $ * $ + he * he;
              }
              function ee(j) {
                var X = j[0], $ = j[1];
                return Math.sqrt(X * X + $ * $);
              }
              function se(j) {
                var X = j[0], $ = j[1];
                return X * X + $ * $;
              }
              function Se(j, X) {
                return j[0] = -X[0], j[1] = -X[1], j;
              }
              function De(j, X) {
                return j[0] = 1 / X[0], j[1] = 1 / X[1], j;
              }
              function _e(j, X) {
                var $ = X[0], he = X[1], de = $ * $ + he * he;
                return de > 0 && (de = 1 / Math.sqrt(de), j[0] = X[0] * de, j[1] = X[1] * de), j;
              }
              function N(j, X) {
                return j[0] * X[0] + j[1] * X[1];
              }
              function w(j, X, $) {
                var he = X[0] * $[1] - X[1] * $[0];
                return j[0] = j[1] = 0, j[2] = he, j;
              }
              function z(j, X, $, he) {
                var de = X[0], q = X[1];
                return j[0] = de + he * ($[0] - de), j[1] = q + he * ($[1] - q), j;
              }
              function te(j, X) {
                X = X || 1;
                var $ = o.RANDOM() * 2 * Math.PI;
                return j[0] = Math.cos($) * X, j[1] = Math.sin($) * X, j;
              }
              function ie(j, X, $) {
                var he = X[0], de = X[1];
                return j[0] = $[0] * he + $[2] * de, j[1] = $[1] * he + $[3] * de, j;
              }
              function ce(j, X, $) {
                var he = X[0], de = X[1];
                return j[0] = $[0] * he + $[2] * de + $[4], j[1] = $[1] * he + $[3] * de + $[5], j;
              }
              function ge(j, X, $) {
                var he = X[0], de = X[1];
                return j[0] = $[0] * he + $[3] * de + $[6], j[1] = $[1] * he + $[4] * de + $[7], j;
              }
              function S(j, X, $) {
                var he = X[0], de = X[1];
                return j[0] = $[0] * he + $[4] * de + $[12], j[1] = $[1] * he + $[5] * de + $[13], j;
              }
              function d(j) {
                return "vec2(" + j[0] + ", " + j[1] + ")";
              }
              function E(j, X) {
                return j[0] === X[0] && j[1] === X[1];
              }
              function Q(j, X) {
                var $ = j[0], he = j[1], de = X[0], q = X[1];
                return Math.abs($ - de) <= o.EPSILON * Math.max(1, Math.abs($), Math.abs(de)) && Math.abs(he - q) <= o.EPSILON * Math.max(1, Math.abs(he), Math.abs(q));
              }
              e.len = ee, e.sub = _, e.mul = L, e.div = F, e.dist = G, e.sqrDist = J, e.sqrLen = se, e.forEach = function() {
                var j = u();
                return function(X, $, he, de, q, K) {
                  var ne = void 0, fe = void 0;
                  for ($ || ($ = 2), he || (he = 0), de ? fe = Math.min(de * $ + he, X.length) : fe = X.length, ne = he; ne < fe; ne += $)
                    j[0] = X[ne], j[1] = X[ne + 1], q(j, j, K), X[ne] = j[0], X[ne + 1] = j[1];
                  return X;
                };
              }();
            }
            /******/
          ])
        );
      });
    }, {}], 9: [function(n, r, i) {
      /**
       * AUTHOR OF INITIAL JS LIBRARY
       * k-d Tree JavaScript - V 1.0
       *
       * https://github.com/ubilabs/kd-tree-javascript
       *
       * @author Mircea Pricop <pricop@ubilabs.net>, 2012
       * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
       * @author Ubilabs http://ubilabs.net, 2012
       * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
       */
      function s(f, o, l) {
        this.obj = f, this.left = null, this.right = null, this.parent = l, this.dimension = o;
      }
      function e(f, o, l) {
        var u = this;
        function y(v, m, p) {
          var D = m % l.length, _, L;
          return v.length === 0 ? null : v.length === 1 ? new s(v[0], D, p) : (v.sort(function(F, x) {
            return F[l[D]] - x[l[D]];
          }), _ = Math.floor(v.length / 2), L = new s(v[_], D, p), L.left = y(v.slice(0, _), m + 1, L), L.right = y(v.slice(_ + 1), m + 1, L), L);
        }
        this.root = y(f, 0, null), this.insert = function(v) {
          function m(L, F) {
            if (L === null)
              return F;
            var x = l[L.dimension];
            return v[x] < L.obj[x] ? m(L.left, L) : m(L.right, L);
          }
          var p = m(this.root, null), D, _;
          if (p === null) {
            this.root = new s(v, 0, null);
            return;
          }
          D = new s(v, (p.dimension + 1) % l.length, p), _ = l[p.dimension], v[_] < p.obj[_] ? p.left = D : p.right = D;
        }, this.remove = function(v) {
          var m;
          function p(_) {
            if (_ === null)
              return null;
            if (_.obj === v)
              return _;
            var L = l[_.dimension];
            return v[L] < _.obj[L] ? p(_.left) : p(_.right);
          }
          function D(_) {
            var L, F, x;
            function O(I, h) {
              var b, Z, G, J, ee;
              return I === null ? null : (b = l[h], I.dimension === h ? I.right !== null ? O(I.right, h) : I : (Z = I.obj[b], G = O(I.left, h), J = O(I.right, h), ee = I, G !== null && G.obj[b] > Z && (ee = G), J !== null && J.obj[b] > ee.obj[b] && (ee = J), ee));
            }
            function R(I, h) {
              var b, Z, G, J, ee;
              return I === null ? null : (b = l[h], I.dimension === h ? I.left !== null ? R(I.left, h) : I : (Z = I.obj[b], G = R(I.left, h), J = R(I.right, h), ee = I, G !== null && G.obj[b] < Z && (ee = G), J !== null && J.obj[b] < ee.obj[b] && (ee = J), ee));
            }
            if (_.left === null && _.right === null) {
              if (_.parent === null) {
                u.root = null;
                return;
              }
              x = l[_.parent.dimension], _.obj[x] < _.parent.obj[x] ? _.parent.left = null : _.parent.right = null;
              return;
            }
            _.left !== null ? L = O(_.left, _.dimension) : L = R(_.right, _.dimension), F = L.obj, D(L), _.obj = F;
          }
          m = p(u.root), m !== null && D(m);
        }, this.nearest = function(v, m, p) {
          var D, _, L;
          L = new c(
            function(x) {
              return -x[1];
            }
          );
          function F(x) {
            if (!u.root)
              return [];
            var O, R = l[x.dimension], I = o(v, x.obj), h = {}, b, Z, G;
            function J(ee, se) {
              L.push([ee, se]), L.size() > m && L.pop();
            }
            for (G = 0; G < l.length; G += 1)
              G === x.dimension ? h[l[G]] = v[l[G]] : h[l[G]] = x.obj[l[G]];
            if (b = o(h, x.obj), x.right === null && x.left === null) {
              (L.size() < m || I < L.peek()[1]) && J(x, I);
              return;
            }
            x.right === null ? O = x.left : x.left === null ? O = x.right : v[R] < x.obj[R] ? O = x.left : O = x.right, F(O), (L.size() < m || I < L.peek()[1]) && J(x, I), (L.size() < m || Math.abs(b) < L.peek()[1]) && (O === x.left ? Z = x.right : Z = x.left, Z !== null && F(Z));
          }
          if (p)
            for (D = 0; D < m; D += 1)
              L.push([null, p]);
          for (F(u.root), _ = [], D = 0; D < m && D < L.content.length; D += 1)
            L.content[D][0] && _.push([L.content[D][0].obj, L.content[D][1]]);
          return _;
        }, this.balanceFactor = function() {
          function v(p) {
            return p === null ? 0 : Math.max(v(p.left), v(p.right)) + 1;
          }
          function m(p) {
            return p === null ? 0 : m(p.left) + m(p.right) + 1;
          }
          return v(u.root) / (Math.log(m(u.root)) / Math.log(2));
        };
      }
      function c(f) {
        this.content = [], this.scoreFunction = f;
      }
      c.prototype = {
        push: function(f) {
          this.content.push(f), this.bubbleUp(this.content.length - 1);
        },
        pop: function() {
          var f = this.content[0], o = this.content.pop();
          return this.content.length > 0 && (this.content[0] = o, this.sinkDown(0)), f;
        },
        peek: function() {
          return this.content[0];
        },
        remove: function(f) {
          for (var o = this.content.length, l = 0; l < o; l++)
            if (this.content[l] == f) {
              var u = this.content.pop();
              l != o - 1 && (this.content[l] = u, this.scoreFunction(u) < this.scoreFunction(f) ? this.bubbleUp(l) : this.sinkDown(l));
              return;
            }
          throw new Error("Node not found.");
        },
        size: function() {
          return this.content.length;
        },
        bubbleUp: function(f) {
          for (var o = this.content[f]; f > 0; ) {
            var l = Math.floor((f + 1) / 2) - 1, u = this.content[l];
            if (this.scoreFunction(o) < this.scoreFunction(u))
              this.content[l] = o, this.content[f] = u, f = l;
            else
              break;
          }
        },
        sinkDown: function(f) {
          for (var o = this.content.length, l = this.content[f], u = this.scoreFunction(l); ; ) {
            var y = (f + 1) * 2, v = y - 1, m = null;
            if (v < o) {
              var p = this.content[v], D = this.scoreFunction(p);
              D < u && (m = v);
            }
            if (y < o) {
              var _ = this.content[y], L = this.scoreFunction(_);
              L < (m == null ? u : D) && (m = y);
            }
            if (m != null)
              this.content[f] = this.content[m], this.content[m] = l, f = m;
            else
              break;
          }
        }
      }, r.exports = {
        createKdTree: function(f, o, l) {
          return new e(f, o, l);
        }
      };
    }, {}], 10: [function(n, r, i) {
      r.exports = {
        name: "serve-sofa-hrir",
        exports: "serveSofaHrir",
        version: "0.4.2",
        description: "Utility to fetch and shape sofa formated HRIR from server",
        main: "./dist/",
        standalone: "serveSofaHrir",
        scripts: {
          lint: "eslint ./src/ ./test/ && jscs --verbose ./src/ ./test/",
          "lint-examples": "eslint -c examples/.eslintrc ./examples/*.html",
          compile: "rm -rf ./dist && babel ./src/ --out-dir ./dist/",
          browserify: "browserify ./src/index.js -t [ babelify ] --standalone serveSofaHrir > serveSofaHrir.js",
          bundle: "npm run lint && npm run test && npm run doc && npm run compile && npm run browserify",
          doc: "esdoc -c esdoc.json",
          test: "browserify test/*/*.js -t [ babelify ] --exclude 'test/*/*_listen.js*' --exclude 'test/*/*_issues.js' | tape-run",
          "test-browser": "browserify test/*/*.js -t [ babelify ] --exclude 'test/*/*_listen.js*' --exclude 'test/*/*_issues.js' | testling -u",
          "test-listen": "browserify test/*/*_listen.js -t [ babelify ] | tape-run",
          "test-issues": "browserify test/*/*_issues.js -t [ babelify ] | tape-run",
          watch: "watch 'npm run browserify && echo $( date ): browserified' ./src/"
        },
        authors: [
          "Jean-Philippe.Lambert@ircam.fr",
          "Arnau Juli <arnau.julia@gmail.com>",
          "Samuel.Goldszmidt@ircam.fr",
          "David.Poirier-Quinot@ircam.fr"
        ],
        license: "BSD-3-Clause",
        dependencies: {
          "fractional-delay": "git://github.com/Ircam-RnD/fractional-delay#gh-pages",
          "gl-matrix": "^2.4.0",
          "kd.tree": "akshaylive/node-kdt#39bc780704a324393bca68a17cf7bc71be8544c6"
        },
        repository: {
          type: "git",
          url: "https://github.com/Ircam-RnD/serveSofaHrir"
        },
        engines: {
          node: "0.12 || 4",
          npm: ">=1.0.0 <3.0.0"
        },
        devDependencies: {
          "babel-cli": "^6.5.1",
          "babel-eslint": "^4.1.8",
          "babel-preset-es2015": "^6.5.0",
          babelify: "^7.2.0",
          "blue-tape": "^0.1.11",
          browserify: "^12.0.2",
          esdoc: "^0.4.6",
          eslint: "^1.10.3",
          "eslint-config-airbnb": "^1.0.2",
          "eslint-plugin-html": "^1.4.0",
          jscs: "2.11.0",
          "jscs-jsdoc": "^1.3.1",
          tape: "^4.4.0",
          "tape-run": "^2.1.2",
          testling: "^1.7.1",
          watch: "^0.17.1"
        }
      };
    }, {}], 11: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.resampleFloat32Array = f;
      var s = n("fractional-delay"), e = c(s);
      function c(o) {
        return o && o.__esModule ? o : { default: o };
      }
      function f() {
        var o = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, l = new Promise(function(u, y) {
          var v = o.inputSamples, m = o.inputSampleRate, p = typeof o.inputDelay < "u" ? o.inputDelay : 0, D = typeof o.outputSampleRate < "u" ? o.outputSampleRate : m;
          if (m === D && p === 0)
            u(new Float32Array(v));
          else
            try {
              var _ = Math.ceil(v.length * D / m), L = new window.OfflineAudioContext(1, _, D), F = L.createBuffer(1, v.length, m), x = 1, O = new e.default(m, x);
              O.setDelay(p / m), F.getChannelData(0).set(O.process(v));
              var R = L.createBufferSource();
              R.buffer = F, R.connect(L.destination), R.start(), L.oncomplete = function(I) {
                var h = I.renderedBuffer.getChannelData(0);
                u(h);
              }, L.startRendering();
            } catch (I) {
              y(new Error("Unable to re-sample Float32Array. " + I.message));
            }
        });
        return l;
      }
      /**
       * @fileOverview Audio utilities
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      i.default = {
        resampleFloat32Array: f
      };
    }, { "fractional-delay": 7 }], 12: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.tree = void 0, i.distanceSquared = f, i.distance = o;
      var s = n("kd.tree"), e = c(s);
      function c(l) {
        return l && l.__esModule ? l : { default: l };
      }
      i.tree = e.default;
      /**
       * @fileOverview Helpers for k-d tree.
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function f(l, u) {
        var y = u.x - l.x, v = u.y - l.y, m = u.z - l.z;
        return y * y + v * v + m * m;
      }
      function o(l, u) {
        return Math.sqrt(this.distanceSquared(l, u));
      }
      i.default = {
        distance: o,
        distanceSquared: f,
        tree: e.default
      };
    }, { "kd.tree": 9 }], 13: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.sofaCartesianToGl = f, i.glToSofaCartesian = o, i.sofaCartesianToSofaSpherical = l, i.sofaSphericalToSofaCartesian = u, i.sofaSphericalToGl = y, i.glToSofaSpherical = v, i.sofaToSofaCartesian = m, i.spat4CartesianToGl = p, i.glToSpat4Cartesian = D, i.spat4CartesianToSpat4Spherical = _, i.spat4SphericalToSpat4Cartesian = L, i.spat4SphericalToGl = F, i.glToSpat4Spherical = x, i.systemType = O, i.systemToGl = R, i.glToSystem = I;
      var s = n("./degree"), e = c(s);
      function c(h) {
        return h && h.__esModule ? h : { default: h };
      }
      function f(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = 0 - G, h[1] = J, h[2] = 0 - Z, h;
      }
      /**
       * @fileOverview Coordinate systems conversions. openGL, SOFA, and Spat4 (Ircam).
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function o(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = 0 - J, h[1] = 0 - Z, h[2] = G, h;
      }
      function l(h, b) {
        var Z = b[0], G = b[1], J = b[2], ee = Z * Z + G * G;
        return h[0] = (e.default.atan2(G, Z) + 360) % 360, h[1] = e.default.atan2(J, Math.sqrt(ee)), h[2] = Math.sqrt(ee + J * J), h;
      }
      function u(h, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return h[0] = J * ee * e.default.cos(Z), h[1] = J * ee * e.default.sin(Z), h[2] = J * e.default.sin(G), h;
      }
      function y(h, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return h[0] = 0 - J * ee * e.default.sin(Z), h[1] = J * e.default.sin(G), h[2] = 0 - J * ee * e.default.cos(Z), h;
      }
      function v(h, b) {
        var Z = 0 - b[2], G = 0 - b[0], J = b[1], ee = Z * Z + G * G;
        return h[0] = (e.default.atan2(G, Z) + 360) % 360, h[1] = e.default.atan2(J, Math.sqrt(ee)), h[2] = Math.sqrt(ee + J * J), h;
      }
      function m(h, b, Z) {
        switch (Z) {
          case "sofaCartesian":
            h[0] = b[0], h[1] = b[1], h[2] = b[2];
            break;
          case "sofaSpherical":
            u(h, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return h;
      }
      function p(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = Z, h[1] = J, h[2] = 0 - G, h;
      }
      function D(h, b) {
        var Z = b[0], G = b[1], J = b[2];
        return h[0] = Z, h[1] = 0 - J, h[2] = G, h;
      }
      function _(h, b) {
        var Z = b[0], G = b[1], J = b[2], ee = Z * Z + G * G;
        return h[0] = e.default.atan2(Z, G), h[1] = e.default.atan2(J, Math.sqrt(ee)), h[2] = Math.sqrt(ee + J * J), h;
      }
      function L(h, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return h[0] = J * ee * e.default.sin(Z), h[1] = J * ee * e.default.cos(Z), h[2] = J * e.default.sin(G), h;
      }
      function F(h, b) {
        var Z = b[0], G = b[1], J = b[2], ee = e.default.cos(G);
        return h[0] = J * ee * e.default.sin(Z), h[1] = J * e.default.sin(G), h[2] = 0 - J * ee * e.default.cos(Z), h;
      }
      function x(h, b) {
        var Z = b[0], G = 0 - b[2], J = b[1], ee = Z * Z + G * G;
        return h[0] = e.default.atan2(Z, G), h[1] = e.default.atan2(J, Math.sqrt(ee)), h[2] = Math.sqrt(ee + J * J), h;
      }
      function O(h) {
        var b = void 0;
        if (h === "sofaCartesian" || h === "spat4Cartesian" || h === "gl")
          b = "cartesian";
        else if (h === "sofaSpherical" || h === "spat4Spherical")
          b = "spherical";
        else
          throw new Error("Unknown coordinate system type " + h);
        return b;
      }
      function R(h, b, Z) {
        switch (Z) {
          case "gl":
            h[0] = b[0], h[1] = b[1], h[2] = b[2];
            break;
          case "sofaCartesian":
            f(h, b);
            break;
          case "sofaSpherical":
            y(h, b);
            break;
          case "spat4Cartesian":
            p(h, b);
            break;
          case "spat4Spherical":
            F(h, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return h;
      }
      function I(h, b, Z) {
        switch (Z) {
          case "gl":
            h[0] = b[0], h[1] = b[1], h[2] = b[2];
            break;
          case "sofaCartesian":
            o(h, b);
            break;
          case "sofaSpherical":
            v(h, b);
            break;
          case "spat4Cartesian":
            D(h, b);
            break;
          case "spat4Spherical":
            x(h, b);
            break;
          default:
            throw new Error("Bad coordinate system");
        }
        return h;
      }
      i.default = {
        glToSofaCartesian: o,
        glToSofaSpherical: v,
        glToSpat4Cartesian: D,
        glToSpat4Spherical: x,
        glToSystem: I,
        sofaCartesianToGl: f,
        sofaCartesianToSofaSpherical: l,
        sofaSphericalToGl: y,
        sofaSphericalToSofaCartesian: u,
        sofaToSofaCartesian: m,
        spat4CartesianToGl: p,
        spat4CartesianToSpat4Spherical: _,
        spat4SphericalToGl: F,
        spat4SphericalToSpat4Cartesian: L,
        systemToGl: R,
        systemType: O
      };
    }, { "./degree": 14 }], 14: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.toRadian = c, i.fromRadian = f, i.cos = o, i.sin = l, i.atan2 = u;
      /**
       * @fileOverview Convert to and from degree
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var s = i.toRadianFactor = Math.PI / 180, e = i.fromRadianFactor = 1 / s;
      function c(y) {
        return y * s;
      }
      function f(y) {
        return y * e;
      }
      function o(y) {
        return Math.cos(y * s);
      }
      function l(y) {
        return Math.sin(y * s);
      }
      function u(y, v) {
        return Math.atan2(y, v) * e;
      }
      i.default = {
        atan2: u,
        cos: o,
        fromRadian: f,
        fromRadianFactor: e,
        sin: l,
        toRadian: c,
        toRadianFactor: s
      };
    }, {}], 15: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.ServerDataBase = i.HrtfSet = void 0;
      var s = n("./sofa/HrtfSet"), e = o(s), c = n("./sofa/ServerDataBase"), f = o(c);
      function o(l) {
        return l && l.__esModule ? l : { default: l };
      }
      i.HrtfSet = e.default, i.ServerDataBase = f.default, i.default = {
        HrtfSet: e.default,
        ServerDataBase: f.default
      };
    }, { "./sofa/HrtfSet": 17, "./sofa/ServerDataBase": 18 }], 16: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.version = i.name = i.license = i.description = void 0;
      var s = n("../package.json"), e = c(s);
      function c(y) {
        return y && y.__esModule ? y : { default: y };
      }
      var f = e.default.description;
      /**
       * @fileOverview Information on the library, from the `package.json` file.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      i.description = f;
      var o = e.default.license;
      i.license = o;
      var l = e.default.name;
      i.name = l;
      var u = e.default.version;
      i.version = u, i.default = {
        description: f,
        license: o,
        name: l,
        version: u
      };
    }, { "../package.json": 10 }], 17: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.HrtfSet = void 0;
      var s = /* @__PURE__ */ function() {
        function R(I, h) {
          for (var b = 0; b < h.length; b++) {
            var Z = h[b];
            Z.enumerable = Z.enumerable || !1, Z.configurable = !0, "value" in Z && (Z.writable = !0), Object.defineProperty(I, Z.key, Z);
          }
        }
        return function(I, h, b) {
          return h && R(I.prototype, h), b && R(I, b), I;
        };
      }();
      /**
       * @fileOverview Container for HRTF set: load a set from an URL and get
       * filters from corresponding positions.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var e = n("gl-matrix"), c = L(e), f = n("../info"), o = _(f), l = n("./parseDataSet"), u = n("./parseSofa"), y = n("../geometry/coordinates"), v = _(y), m = n("../geometry/KdTree"), p = _(m), D = n("../audio/utilities");
      function _(R) {
        return R && R.__esModule ? R : { default: R };
      }
      function L(R) {
        if (R && R.__esModule)
          return R;
        var I = {};
        if (R != null)
          for (var h in R)
            Object.prototype.hasOwnProperty.call(R, h) && (I[h] = R[h]);
        return I.default = R, I;
      }
      function F(R) {
        if (Array.isArray(R)) {
          for (var I = 0, h = Array(R.length); I < R.length; I++)
            h[I] = R[I];
          return h;
        } else
          return Array.from(R);
      }
      function x(R, I) {
        if (!(R instanceof I))
          throw new TypeError("Cannot call a class as a function");
      }
      var O = i.HrtfSet = function() {
        function R() {
          var I = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          x(this, R), this._audioContext = I.audioContext, this._ready = !1, this.coordinateSystem = I.coordinateSystem, this.filterCoordinateSystem = I.filterCoordinateSystem, this.filterPositions = I.filterPositions, this.filterAfterLoad = I.filterAfterLoad;
        }
        return s(R, [{
          key: "applyFilterPositions",
          // ------------- public methods
          /**
           * Apply filter positions to an existing set of HRTF. (After a successful
           * load.)
           *
           * This is destructive.
           *
           * @see {@link HrtfSet#load}
           */
          value: function() {
            var h = this, b = this._filterPositions.map(function(Z) {
              return h._kdt.nearest({ x: Z[0], y: Z[1], z: Z[2] }, 1).pop()[0];
            });
            b = [].concat(F(new Set(b))), this._kdt = p.default.tree.createKdTree(b, p.default.distanceSquared, ["x", "y", "z"]);
          }
          /**
           * Load an URL and generate the corresponding set of IR buffers.
           *
           * @param {String} sourceUrl
           * @returns {Promise.<this|Error>} resolve when the URL sucessfully
           * loaded.
           */
        }, {
          key: "load",
          value: function(h) {
            var b = this, Z = h.split(".").pop(), G = Z === "sofa" ? h + ".json" : h, J = void 0, ee = typeof this._filterPositions < "u" && !this.filterAfterLoad && Z === "sofa";
            return ee ? J = Promise.all([this._loadMetaAndPositions(h), this._loadDataSet(h)]).then(function(se) {
              var Se = se[0], De = se[1];
              return b._loadSofaPartial(h, Se, De).then(function() {
                return b._ready = !0, b;
              });
            }).catch(function() {
              return b._loadSofaFull(G).then(function() {
                return b.applyFilterPositions(), b._ready = !0, b;
              });
            }) : J = this._loadSofaFull(G).then(function() {
              return typeof b._filterPositions < "u" && b.filterAfterLoad && b.applyFilterPositions(), b._ready = !0, b;
            }), J;
          }
          /**
           * Export the current HRTF set as a JSON string.
           *
           * When set, `this.filterPositions` reduce the actual number of filter, and
           * thus the exported set. The coordinate system of the export is
           * `this.filterCoordinateSystem`.
           *
           * @see {@link HrtfSet#filterCoordinateSystem}
           * @see {@link HrtfSet#filterPositions}
           *
           * @returns {String} as a SOFA JSON file.
           * @throws {Error} when this.filterCoordinateSystem is unknown.
           */
        }, {
          key: "export",
          value: function() {
            var h = this, b = void 0, Z = v.default.systemType(this.filterCoordinateSystem);
            switch (Z) {
              case "cartesian":
                b = this._sofaSourcePosition.map(function(J) {
                  return v.default.glToSofaCartesian([], J);
                });
                break;
              case "spherical":
                b = this._sofaSourcePosition.map(function(J) {
                  return v.default.glToSofaSpherical([], J);
                });
                break;
              default:
                throw new Error("Bad source position type " + Z + " for export.");
            }
            var G = this._sofaSourcePosition.map(function(J) {
              for (var ee = h._kdt.nearest({ x: J[0], y: J[1], z: J[2] }, 1).pop()[0].fir, se = [], Se = 0; Se < ee.numberOfChannels; ++Se)
                se.push([].concat(F(ee.getChannelData(Se))));
              return se;
            });
            return (0, u.stringifySofa)({
              name: this._sofaName,
              metaData: this._sofaMetaData,
              ListenerPosition: [0, 0, 0],
              ListenerPositionType: "cartesian",
              ListenerUp: [0, 0, 1],
              ListenerUpType: "cartesian",
              ListenerView: [1, 0, 0],
              ListenerViewType: "cartesian",
              SourcePositionType: Z,
              SourcePosition: b,
              DataSamplingRate: this._audioContext.sampleRate,
              DataDelay: this._sofaDelay,
              DataIR: G,
              RoomVolume: this._sofaRoomVolume
            });
          }
          /**
           * @typedef {Object} HrtfSet.nearestType
           * @property {Number} distance from the request
           * @property {AudioBuffer} fir 2-channels impulse response
           * @property {Number} index original index in the SOFA set
           * @property {Coordinates} position using coordinateSystem coordinates
           * system.
           */
          /**
           * Get the nearest point in the HRTF set, after a successful load.
           *
           * @see {@link HrtfSet#load}
           *
           * @param {Coordinates} positionRequest
           * @returns {HrtfSet.nearestType}
           */
        }, {
          key: "nearest",
          value: function(h) {
            var b = v.default.systemToGl([], h, this.coordinateSystem), Z = this._kdt.nearest({
              x: b[0],
              y: b[1],
              z: b[2]
            }, 1).pop(), G = Z[0];
            return v.default.glToSystem(b, [G.x, G.y, G.z], this.coordinateSystem), {
              distance: Z[1],
              fir: G.fir,
              index: G.index,
              position: b
            };
          }
          /**
           * Get the FIR AudioBuffer that corresponds to the closest position in
           * the set.
           * @param {Coordinates} positionRequest
           * @returns {AudioBuffer}
           */
        }, {
          key: "nearestFir",
          value: function(h) {
            return this.nearest(h).fir;
          }
          // ----------- private methods
          /**
           * Creates a kd-tree out of the specified indices, positions, and FIR.
           *
           * @private
           *
           * @param {Array} indicesPositionsFirs
           * @returns {this}
           */
        }, {
          key: "_createKdTree",
          value: function(h) {
            var b = this, Z = h.map(function(G) {
              var J = G[2], ee = b._audioContext.createBuffer(J.length, J[0].length, b._audioContext.sampleRate);
              return J.forEach(function(se, Se) {
                ee.getChannelData(Se).set(se);
              }), {
                index: G[0],
                x: G[1][0],
                y: G[1][1],
                z: G[1][2],
                fir: ee
              };
            });
            return this._sofaSourcePosition = Z.map(function(G) {
              return [G.x, G.y, G.z];
            }), this._kdt = p.default.tree.createKdTree(Z, p.default.distanceSquared, ["x", "y", "z"]), this;
          }
          /**
           * Asynchronously create Float32Arrays, with possible re-sampling.
           *
           * @private
           *
           * @param {Array.<Number>} indices
           * @param {Array.<Coordinates>} positions
           * @param {Array.<Float32Array>} firs
           * @returns {Promise.<Array|Error>}
           * @throws {Error} assertion that the channel count is 2
           */
        }, {
          key: "_generateIndicesPositionsFirs",
          value: function(h, b, Z, G) {
            var J = this, ee = Z.map(function(se, Se) {
              var De = se.length;
              if (De !== 2)
                throw new Error("Bad number of channels" + (" for IR index " + h[Se]) + (" (" + De + " instead of 2)"));
              if (G[0].length !== 2)
                throw new Error("Bad delay format" + (" for IR index " + h[Se]) + (" (first element in Data.Delay is " + G[0]) + " instead of [[delayL, delayR]] )");
              var _e = typeof G[Se] < "u" ? G[Se] : G[0], N = se.map(function(w, z) {
                if (_e[z] < 0)
                  throw new Error("Negative delay detected (not handled at the moment):" + (" delay index " + h[Se]) + (" channel " + z));
                return (0, D.resampleFloat32Array)({
                  inputSamples: w,
                  inputDelay: _e[z],
                  inputSampleRate: J._sofaSampleRate,
                  outputSampleRate: J._audioContext.sampleRate
                });
              });
              return Promise.all(N).then(function(w) {
                return [h[Se], b[Se], w];
              }).catch(function(w) {
                throw new Error("Unable to re-sample impulse response " + Se + ". " + w.message);
              });
            });
            return Promise.all(ee);
          }
          /**
           * Try to load a data set from a SOFA URL.
           *
           * @private
           *
           * @param {String} sourceUrl
           * @returns {Promise.<Object|Error>}
           */
        }, {
          key: "_loadDataSet",
          value: function(h) {
            var b = new Promise(function(Z, G) {
              var J = h + ".dds", ee = new window.XMLHttpRequest();
              ee.open("GET", J), ee.onerror = function() {
                G(new Error("Unable to GET " + J + ", status " + ee.status + " " + ("" + ee.responseText)));
              }, ee.onload = function() {
                if (ee.status < 200 || ee.status >= 300) {
                  ee.onerror();
                  return;
                }
                try {
                  var se = (0, l.parseDataSet)(ee.response);
                  Z(se);
                } catch (Se) {
                  G(new Error("Unable to parse " + J + ". " + Se.message));
                }
              }, ee.send();
            });
            return b;
          }
          /**
           * Try to load meta-data and positions from a SOFA URL, to get the
           * indices closest to the filter positions.
           *
           * @private
           *
           * @param {String} sourceUrl
           * @returns {Promise.<Array.<Number>|Error>}
           */
        }, {
          key: "_loadMetaAndPositions",
          value: function(h) {
            var b = this, Z = new Promise(function(G, J) {
              var ee = h + ".json?ListenerPosition,ListenerUp,ListenerView,SourcePosition,Data.Delay,Data.SamplingRate,EmitterPosition,ReceiverPosition,RoomVolume", se = new window.XMLHttpRequest();
              se.open("GET", ee), se.onerror = function() {
                J(new Error("Unable to GET " + ee + ", status " + se.status + " " + ("" + se.responseText)));
              }, se.onload = function() {
                if (se.status < 200 || se.status >= 300) {
                  se.onerror();
                  return;
                }
                try {
                  var Se = (0, u.parseSofa)(se.response);
                  b._setMetaData(Se, h);
                  var De = b._sourcePositionsToGl(Se), _e = De.map(function(z, te) {
                    return {
                      x: z[0],
                      y: z[1],
                      z: z[2],
                      index: te
                    };
                  }), N = p.default.tree.createKdTree(_e, p.default.distanceSquared, ["x", "y", "z"]), w = b._filterPositions.map(function(z) {
                    return N.nearest({ x: z[0], y: z[1], z: z[2] }, 1).pop()[0].index;
                  });
                  w = [].concat(F(new Set(w))), b._sofaUrl = h, G(w);
                } catch (z) {
                  J(new Error("Unable to parse " + ee + ". " + z.message));
                }
              }, se.send();
            });
            return Z;
          }
          /**
           * Try to load full SOFA URL.
           *
           * @private
           *
           * @param {String} url
           * @returns {Promise.<this|Error>}
           */
        }, {
          key: "_loadSofaFull",
          value: function(h) {
            var b = this, Z = new Promise(function(G, J) {
              var ee = new window.XMLHttpRequest();
              ee.open("GET", h), ee.onerror = function() {
                J(new Error("Unable to GET " + h + ", status " + ee.status + " " + ("" + ee.responseText)));
              }, ee.onload = function() {
                if (ee.status < 200 || ee.status >= 300) {
                  ee.onerror();
                  return;
                }
                try {
                  var se = (0, u.parseSofa)(ee.response);
                  b._setMetaData(se, h);
                  var Se = b._sourcePositionsToGl(se);
                  b._generateIndicesPositionsFirs(
                    Se.map(function(De, _e) {
                      return _e;
                    }),
                    // full
                    Se,
                    se["Data.IR"].data,
                    se["Data.Delay"].data
                  ).then(function(De) {
                    b._createKdTree(De), b._sofaUrl = h, G(b);
                  });
                } catch (De) {
                  J(new Error("Unable to parse " + h + ". " + De.message));
                }
              }, ee.send();
            });
            return Z;
          }
          /**
           * Try to load partial data from a SOFA URL.
           *
           * @private
           *
           * @param {Array.<String>} sourceUrl
           * @param {Array.<Number>} indices
           * @param {Object} dataSet
           * @returns {Promise.<this|Error>}
           */
        }, {
          key: "_loadSofaPartial",
          value: function(h, b, Z) {
            var G = this, J = b.map(function(ee) {
              var se = new Promise(function(Se, De) {
                var _e = h + ".json?" + ("SourcePosition[" + ee + "][0:1:" + (Z.SourcePosition.C - 1) + "],") + ("Data.IR[" + ee + "][0:1:" + (Z["Data.IR"].R - 1) + "]") + ("[0:1:" + (Z["Data.IR"].N - 1) + "]"), N = new window.XMLHttpRequest();
                N.open("GET", _e), N.onerror = function() {
                  De(new Error("Unable to GET " + _e + ", status " + N.status + " " + ("" + N.responseText)));
                }, N.onload = function() {
                  (N.status < 200 || N.status >= 300) && N.onerror();
                  try {
                    var w = (0, u.parseSofa)(N.response), z = G._sourcePositionsToGl(w);
                    G._generateIndicesPositionsFirs([ee], z, w["Data.IR"].data, w["Data.Delay"].data).then(function(te) {
                      Se(te[0]);
                    });
                  } catch (te) {
                    De(new Error("Unable to parse " + _e + ". " + te.message));
                  }
                }, N.send();
              });
              return se;
            });
            return Promise.all(J).then(function(ee) {
              return G._createKdTree(ee), G;
            });
          }
          /**
           * Set meta-data, and assert for supported HRTF type.
           *
           * @private
           *
           * @param {Object} data
           * @param {String} sourceUrl
           * @throws {Error} assertion for FIR data.
           */
        }, {
          key: "_setMetaData",
          value: function(h, b) {
            if (typeof h.metaData.DataType < "u" && h.metaData.DataType !== "FIR")
              throw new Error("According to meta-data, SOFA data type is not FIR");
            var Z = (/* @__PURE__ */ new Date()).toISOString();
            this._sofaName = typeof h.name < "u" ? "" + h.name : "HRTF.sofa", this._sofaMetaData = typeof h.metaData < "u" ? h.metaData : {}, typeof b < "u" && (this._sofaMetaData.OriginalUrl = b), this._sofaMetaData.Converter = "Ircam " + o.default.name + " " + o.default.version + " javascript API ", this._sofaMetaData.DateConverted = Z, this._sofaSampleRate = typeof h["Data.SamplingRate"] < "u" ? h["Data.SamplingRate"].data[0] : 48e3, this._sofaSampleRate !== this._audioContext.sampleRate && (this._sofaMetaData.OriginalSampleRate = this._sofaSampleRate), this._sofaDelay = typeof h["Data.Delay"] < "u" ? h["Data.Delay"].data : [0, 0], this._sofaRoomVolume = typeof h.RoomVolume < "u" ? h.RoomVolume.data[0] : void 0;
            var G = v.default.sofaToSofaCartesian([], h.ListenerPosition.data[0], (0, u.conformSofaCoordinateSystem)(h.ListenerPosition.Type || "cartesian")), J = v.default.sofaToSofaCartesian([], h.ListenerView.data[0], (0, u.conformSofaCoordinateSystem)(h.ListenerView.Type || "cartesian")), ee = v.default.sofaToSofaCartesian([], h.ListenerUp.data[0], (0, u.conformSofaCoordinateSystem)(h.ListenerUp.Type || "cartesian"));
            this._sofaToGl = c.mat4.lookAt([], G, J, ee);
          }
          /**
           * Convert to GL coordinates, in-place.
           *
           * @private
           *
           * @param {Object} data
           * @returns {Array.<Coordinates>}
           * @throws {Error}
           */
        }, {
          key: "_sourcePositionsToGl",
          value: function(h) {
            var b = this, Z = h.SourcePosition.data, G = typeof h.SourcePosition.Type < "u" ? h.SourcePosition.Type : "spherical";
            switch (G) {
              case "cartesian":
                Z.forEach(function(J) {
                  c.vec3.transformMat4(J, J, b._sofaToGl);
                });
                break;
              case "spherical":
                Z.forEach(function(J) {
                  v.default.sofaSphericalToSofaCartesian(J, J), c.vec3.transformMat4(J, J, b._sofaToGl);
                });
                break;
              default:
                throw new Error("Bad source position type");
            }
            return Z;
          }
        }, {
          key: "coordinateSystem",
          set: function(h) {
            this._coordinateSystem = typeof h < "u" ? h : "gl";
          },
          get: function() {
            return this._coordinateSystem;
          }
          /**
           * Set coordinate system for filter positions.
           *
           * @param {CoordinateSystem} [system] undefined to use coordinateSystem
           */
        }, {
          key: "filterCoordinateSystem",
          set: function(h) {
            this._filterCoordinateSystem = typeof h < "u" ? h : this.coordinateSystem;
          },
          get: function() {
            return this._filterCoordinateSystem;
          }
          /**
           * Set filter positions.
           *
           * @param {Array.<Coordinates>} [positions] undefined for no filtering.
           */
        }, {
          key: "filterPositions",
          set: function(h) {
            if (typeof h > "u")
              this._filterPositions = void 0;
            else
              switch (this.filterCoordinateSystem) {
                case "gl":
                  this._filterPositions = h.map(function(b) {
                    return b.slice(0);
                  });
                  break;
                case "sofaCartesian":
                  this._filterPositions = h.map(function(b) {
                    return v.default.sofaCartesianToGl([], b);
                  });
                  break;
                case "sofaSpherical":
                  this._filterPositions = h.map(function(b) {
                    return v.default.sofaSphericalToGl([], b);
                  });
                  break;
                default:
                  throw new Error("Bad filter coordinate system");
              }
          },
          get: function() {
            var h = void 0;
            if (typeof this._filterPositions < "u")
              switch (this.filterCoordinateSystem) {
                case "gl":
                  h = this._filterPositions.map(function(b) {
                    return b.slice(0);
                  });
                  break;
                case "sofaCartesian":
                  h = this._filterPositions.map(function(b) {
                    return v.default.glToSofaCartesian([], b);
                  });
                  break;
                case "sofaSpherical":
                  h = this._filterPositions.map(function(b) {
                    return v.default.glToSofaSpherical([], b);
                  });
                  break;
                default:
                  throw new Error("Bad filter coordinate system");
              }
            return h;
          }
          /**
           * Set post-filtering flag. When false, try to load a partial set of
           * HRTF.
           *
           * @param {Boolean} [post=false]
           */
        }, {
          key: "filterAfterLoad",
          set: function(h) {
            this._filterAfterLoad = typeof h < "u" ? h : !1;
          },
          get: function() {
            return this._filterAfterLoad;
          }
          /**
           * Test whether an HRTF set is actually loaded.
           *
           * @see {@link HrtfSet#load}
           *
           * @returns {Boolean} false before any successful load, true after.
           *
           */
        }, {
          key: "isReady",
          get: function() {
            return this._ready;
          }
          /**
           * Get the original name of the HRTF set.
           *
           * @returns {String} that is undefined before a successfully load.
           */
        }, {
          key: "sofaName",
          get: function() {
            return this._sofaName;
          }
          /**
           * Get the URL used to actually load the HRTF set.
           *
           * @returns {String} that is undefined before a successfully load.
           */
        }, {
          key: "sofaUrl",
          get: function() {
            return this._sofaUrl;
          }
          /**
           * Get the original sample-rate from the SOFA URL already loaded.
           *
           * @returns {Number} that is undefined before a successfully load.
           */
        }, {
          key: "sofaSampleRate",
          get: function() {
            return this._sofaSampleRate;
          }
          /**
           * Get the meta-data from the SOFA URL already loaded.
           *
           * @returns {Object} that is undefined before a successfully load.
           */
        }, {
          key: "sofaMetaData",
          get: function() {
            return this._sofaMetaData;
          }
        }]), R;
      }();
      i.default = O;
    }, { "../audio/utilities": 11, "../geometry/KdTree": 12, "../geometry/coordinates": 13, "../info": 16, "./parseDataSet": 19, "./parseSofa": 20, "gl-matrix": 8 }], 18: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.ServerDataBase = void 0;
      var s = /* @__PURE__ */ function() {
        function y(v, m) {
          for (var p = 0; p < m.length; p++) {
            var D = m[p];
            D.enumerable = D.enumerable || !1, D.configurable = !0, "value" in D && (D.writable = !0), Object.defineProperty(v, D.key, D);
          }
        }
        return function(v, m, p) {
          return m && y(v.prototype, m), p && y(v, p), v;
        };
      }();
      /**
       * @fileOverview Access a remote catalogue from a SOFA server, and get URLs
       * with filtering.
       *
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var e = n("./parseXml"), c = o(e), f = n("./parseDataSet");
      function o(y) {
        return y && y.__esModule ? y : { default: y };
      }
      function l(y, v) {
        if (!(y instanceof v))
          throw new TypeError("Cannot call a class as a function");
      }
      var u = i.ServerDataBase = function() {
        function y() {
          var v = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          if (l(this, y), this._server = v.serverUrl, typeof this._server > "u") {
            var m = window.location.protocol === "https:" ? "https:" : "http:";
            this._server = m + "//bili2.ircam.fr";
          }
          this._catalogue = {}, this._urls = [];
        }
        return s(y, [{
          key: "loadCatalogue",
          value: function() {
            var m = this, p = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this._server + "/catalog.xml", D = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this._catalogue, _ = new Promise(function(L, F) {
              var x = new window.XMLHttpRequest();
              x.open("GET", p), x.onerror = function() {
                F(new Error("Unable to GET " + p + ", status " + x.status + " " + ("" + x.responseText)));
              }, x.onload = function() {
                if (x.status < 200 || x.status >= 300) {
                  x.onerror();
                  return;
                }
                var O = (0, c.default)(x.response), R = O.querySelector("dataset"), I = O.querySelectorAll("dataset > catalogRef");
                if (I.length === 0) {
                  D.urls = [];
                  for (var h = O.querySelectorAll("dataset > dataset"), b = 0; b < h.length; ++b) {
                    var Z = m._server + R.getAttribute("name") + "/" + h[b].getAttribute("name");
                    m._urls.push(Z), D.urls.push(Z);
                  }
                  L(p);
                } else {
                  for (var G = [], J = 0; J < I.length; ++J) {
                    var ee = I[J].getAttribute("name"), se = m._server + R.getAttribute("name") + "/" + I[J].getAttribute("xlink:href");
                    D[ee] = {}, G.push(m.loadCatalogue(se, D[ee]));
                  }
                  Promise.all(G).then(function() {
                    m._urls.sort(), L(p);
                  }).catch(function(Se) {
                    F(Se);
                  });
                }
              }, x.send();
            });
            return _;
          }
          /**
           * Get URLs, possibly filtered.
           *
           * Any filter can be partial, and is case-insensitive. The result must
           * match every supplied filter. Undefined filters are not applied. For
           * any filter, `|` is the or operator.
           *
           * @param {Object} [options] optional filters
           * @param {String} [options.convention] 'HRIR' or 'SOS'
           * @param {String} [options.dataBase] 'LISTEN', 'BILI', etc.
           * @param {String} [options.equalisation] 'RAW','COMPENSATED'
           * @param {String} [options.sampleRate] in Hertz
           * @param {String} [options.sosOrder] '12order' or '24order'
           * @param {String} [options.freePattern] any pattern matched
           * globally. Use separators (spaces, tabs, etc.) to combine multiple
           * patterns: '44100 listen' will restrict on URLs matching '44100' and
           * 'listen'; '44100|48000 bili|listen' matches ('44100' or '48000') and
           * ('bili' or 'listen').
           * @returns {Array.<String>} URLs that match every filter.
           */
        }, {
          key: "getUrls",
          value: function() {
            var m = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, p = [m.convention, m.dataBase, m.equalisation, m.sampleRate, m.sosOrder], D = typeof m.freePattern == "number" ? m.freePattern.toString() : m.freePattern, _ = p.reduce(function(O, R) {
              return O + "/" + (typeof R < "u" ? "[^/]*(?:" + R + ")[^/]*" : "[^/]*");
            }, ""), L = new RegExp(_, "i"), F = this._urls.filter(function(O) {
              return L.test(O);
            });
            if (typeof D < "u") {
              var x = D.split(/\s+/);
              x.forEach(function(O) {
                L = new RegExp(O, "i"), F = F.filter(function(R) {
                  return L.test(R);
                });
              });
            }
            return F;
          }
          /**
           * Get the data-set definitions of a given URL.
           *
           * @param {String} sourceUrl is the complete SOFA URL, with the
           * server, like
           * 'http://bili2.ircam.fr/SimpleFreeFieldHRIR/BILI/COMPENSATED/44100/IRC_1100_C_HRIR.sofa'
           *
           * @returns {Promise.<Object|String>} The promise will resolve after
           * successfully loading, with definitions as * `{definition: {key: values}}`
           * objects; the promise will reject is the transfer fails, with an error.
           */
        }, {
          key: "getDataSetDefinitions",
          value: function(m) {
            var p = new Promise(function(D, _) {
              var L = m + ".dds", F = new window.XMLHttpRequest();
              F.open("GET", L), F.onerror = function() {
                _(new Error("Unable to GET " + L + ", status " + F.status + " " + ("" + F.responseText)));
              }, F.onload = function() {
                if (F.status < 200 || F.status >= 300) {
                  F.onerror();
                  return;
                }
                D((0, f.parseDataSet)(F.response));
              }, F.send();
            });
            return p;
          }
          /**
           * Get all source positions of a given URL.
           *
           * @param {String} sourceUrl is the complete SOFA URL, with the
           * server, like
           * 'http://bili2.ircam.fr/SimpleFreeFieldHRIR/BILI/COMPENSATED/44100/IRC_1100_C_HRIR.sofa'
           *
           * @returns {Promise.<Array<Array.<Number>>|Error>} The promise will resolve
           * after successfully loading, with an array of positions (which are
           * arrays of 3 numbers); the promise will reject is the transfer fails,
           * with an error.
           */
        }, {
          key: "getSourcePositions",
          value: function(m) {
            var p = new Promise(function(D, _) {
              var L = m + ".json?SourcePosition", F = new window.XMLHttpRequest();
              F.open("GET", L), F.onerror = function() {
                _(new Error("Unable to GET " + L + ", status " + F.status + " " + ("" + F.responseText)));
              }, F.onload = function() {
                if (F.status < 200 || F.status >= 300) {
                  F.onerror();
                  return;
                }
                try {
                  var x = JSON.parse(F.response);
                  if (x.leaves[0].name !== "SourcePosition")
                    throw new Error("SourcePosition not found");
                  D(x.leaves[0].data);
                } catch (O) {
                  _(new Error("Unable to parse response from " + L + ". " + O.message));
                }
              }, F.send();
            });
            return p;
          }
        }]), y;
      }();
      i.default = u;
    }, { "./parseDataSet": 19, "./parseXml": 21 }], 19: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i._parseDimension = v, i._parseDefinition = m, i.parseDataSet = p;
      /**
       * @fileOverview Parser for DDS files
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var s = "\\[\\s*(\\w+)\\s*=\\s*(\\d+)\\s*\\]", e = new RegExp(s, "g"), c = new RegExp(s), f = "\\s*(\\w+)\\s*([\\w.]+)\\s*((?:\\[[^\\]]+\\]\\s*)+);\\s*", o = new RegExp(f, "g"), l = new RegExp(f), u = "\\s*Dataset\\s*\\{\\s*((?:[^;]+;\\s*)*)\\s*\\}\\s*[\\w.]+\\s*;\\s*", y = new RegExp(u);
      function v(D) {
        var _ = [], L = D.match(e);
        return L !== null && L.forEach(function(F) {
          var x = c.exec(F);
          x !== null && x.length > 2 && _.push([x[1], Number(x[2])]);
        }), _;
      }
      function m(D) {
        var _ = [], L = D.match(o);
        return L !== null && L.forEach(function(F) {
          var x = l.exec(F);
          if (x !== null && x.length > 3) {
            var O = [];
            O[0] = x[2], O[1] = {}, O[1].type = x[1], v(x[3]).forEach(function(R) {
              O[1][R[0]] = R[1];
            }), _.push(O);
          }
        }), _;
      }
      function p(D) {
        var _ = {}, L = y.exec(D);
        return L !== null && L.length > 1 && m(L[1]).forEach(function(F) {
          _[F[0]] = F[1];
        }), _;
      }
      i.default = p;
    }, {}], 20: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      }), i.parseSofa = s, i.stringifySofa = e, i.conformSofaCoordinateSystem = c;
      /**
       * @fileOverview Parser functions for SOFA files
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      function s(f) {
        try {
          var o = JSON.parse(f), l = {};
          if (l.name = o.name, typeof o.attributes < "u") {
            l.metaData = {};
            var u = o.attributes.find(function(v) {
              return v.name === "NC_GLOBAL";
            });
            typeof u < "u" && u.attributes.forEach(function(v) {
              l.metaData[v.name] = v.value[0];
            });
          }
          if (typeof o.leaves < "u") {
            var y = o.leaves;
            y.forEach(function(v) {
              l[v.name] = {}, v.attributes.forEach(function(m) {
                l[v.name][m.name] = m.value[0];
              }), l[v.name].shape = v.shape, l[v.name].data = v.data;
            });
          }
          return l;
        } catch (v) {
          throw new Error("Unable to parse SOFA string. " + v.message);
        }
      }
      function e(f) {
        var o = {};
        if (typeof f.name < "u" && (o.name = f.name), typeof f.metaData < "u") {
          o.attributes = [];
          var l = {
            name: "NC_GLOBAL",
            attributes: []
          };
          for (var u in f.metaData)
            f.metaData.hasOwnProperty(u) && l.attributes.push({
              name: u,
              value: [f.metaData[u]]
            });
          o.attributes.push(l);
        }
        var y = "Float64", v = void 0;
        if (o.leaves = [], [["ListenerPosition", "ListenerPositionType"], ["ListenerUp", "ListenerUpType"], ["ListenerView", "ListenerViewType"]].forEach(function(m) {
          var p = m[0], D = f[p], _ = f[m[1]];
          if (typeof D < "u") {
            switch (_) {
              case "cartesian":
                v = [{ name: "Type", value: ["cartesian"] }, { name: "Units", value: ["metre, metre, metre"] }];
                break;
              case "spherical":
                v = [{ name: "Type", value: ["spherical"] }, { name: "Units", value: ["degree, degree, metre"] }];
                break;
              default:
                throw new Error("Unknown coordinate system type " + (_ + " for " + D));
            }
            o.leaves.push({
              name: p,
              type: y,
              attributes: v,
              shape: [1, 3],
              data: [D]
            });
          }
        }), typeof f.SourcePosition < "u") {
          switch (f.SourcePositionType) {
            case "cartesian":
              v = [{ name: "Type", value: ["cartesian"] }, { name: "Units", value: ["metre, metre, metre"] }];
              break;
            case "spherical":
              v = [{ name: "Type", value: ["spherical"] }, { name: "Units", value: ["degree, degree, metre"] }];
              break;
            default:
              throw new Error("Unknown coordinate system type " + ("" + f.SourcePositionType));
          }
          o.leaves.push({
            name: "SourcePosition",
            type: y,
            attributes: v,
            shape: [f.SourcePosition.length, f.SourcePosition[0].length],
            data: f.SourcePosition
          });
        }
        if (typeof f.DataSamplingRate < "u")
          o.leaves.push({
            name: "Data.SamplingRate",
            type: y,
            attributes: [{ name: "Unit", value: "hertz" }],
            shape: [1],
            data: [f.DataSamplingRate]
          });
        else
          throw new Error("No data sampling-rate");
        if (typeof f.DataDelay < "u" && o.leaves.push({
          name: "Data.Delay",
          type: y,
          attributes: [],
          shape: [1, f.DataDelay.length],
          data: f.DataDelay
        }), typeof f.DataIR < "u")
          o.leaves.push({
            name: "Data.IR",
            type: y,
            attributes: [],
            shape: [f.DataIR.length, f.DataIR[0].length, f.DataIR[0][0].length],
            data: f.DataIR
          });
        else
          throw new Error("No data IR");
        return typeof f.RoomVolume < "u" && o.leaves.push({
          name: "RoomVolume",
          type: y,
          attributes: [{ name: "Units", value: ["cubic metre"] }],
          shape: [1],
          data: [f.RoomVolume]
        }), o.nodes = [], JSON.stringify(o);
      }
      function c(f) {
        var o = void 0;
        switch (f) {
          case "cartesian":
            o = "sofaCartesian";
            break;
          case "spherical":
            o = "sofaSpherical";
            break;
          default:
            throw new Error("Bad SOFA type " + f);
        }
        return o;
      }
      i.default = {
        parseSofa: s,
        conformSofaCoordinateSystem: c
      };
    }, {}], 21: [function(n, r, i) {
      Object.defineProperty(i, "__esModule", {
        value: !0
      });
      /**
       * @fileOverview Simple XML parser, as a DOM parser.
       * @author Jean-Philippe.Lambert@ircam.fr
       * @copyright 2015-2016 IRCAM, Paris, France
       * @license BSD-3-Clause
       */
      var s = i.parseXml = void 0;
      if (typeof window.DOMParser < "u")
        i.parseXml = s = function(c) {
          return new window.DOMParser().parseFromString(c, "text/xml");
        };
      else if (typeof window.ActiveXObject < "u" && new window.ActiveXObject("Microsoft.XMLDOM"))
        i.parseXml = s = function(c) {
          var f = new window.ActiveXObject("Microsoft.XMLDOM");
          return f.async = "false", f.loadXML(c), f;
        };
      else
        throw new Error("No XML parser found");
      i.default = s;
    }, {}] }, {}, [15])(15);
  });
})(serveSofaHrir);
var serveSofaHrirExports = serveSofaHrir.exports;
class HRIRloader_ircam {
  constructor(t, n, r) {
    this.context = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.onLoad = r, this.hrtfSet = new serveSofaHrirExports.HrtfSet({
      audioContext: this.context,
      coordinateSystem: "sofaSpherical"
    }), this.wishedSpeakerPos = getTdesign(2 * this.order), this.hrirBuffer = [], this.decodingMatrix = [], this.hoaBuffer = null;
  }
  load(t) {
    this.hrtfSet.load(t).then(() => {
      const n = [];
      this.hrirBuffer = [];
      for (let i = 0; i < this.wishedSpeakerPos.length; i++)
        n.push(this.hrtfSet.nearest(this.wishedSpeakerPos[i]).position), this.hrirBuffer.push(this.hrtfSet.nearest(this.wishedSpeakerPos[i]).fir);
      let r = 0;
      for (let i = 0; i < this.wishedSpeakerPos.length; i++)
        this.wishedSpeakerPos[i][0] < 0 && (this.wishedSpeakerPos[i][0] += 360), r += Math.sqrt(
          Math.pow(this.wishedSpeakerPos[i][0] - n[i][0], 2) + Math.pow(this.wishedSpeakerPos[i][1] - n[i][1], 2)
        );
      console.log(
        "summed / average angular dist between asked and present pos:",
        Math.round(r * 100) / 100,
        "deg /",
        Math.round(r / this.wishedSpeakerPos.length * 100) / 100,
        "deg"
      ), this.decodingMatrix = getAmbisonicDecMtx(n, this.order), this.hoaBuffer = this.getHoaFilterFromHrirFilter(), this.onLoad(this.hoaBuffer);
    });
  }
  getHoaFilterFromHrirFilter() {
    const t = this.hrirBuffer[0].length, n = this.hrirBuffer[0].sampleRate, r = this.context.createBuffer(
      this.nCh,
      t,
      n
    );
    for (let i = 0; i < this.nCh; i++) {
      const s = new Float32Array(t);
      for (let e = 0; e < this.hrirBuffer.length; e++)
        for (let c = 0; c < t; c++)
          s[c] += this.decodingMatrix[e][i] * this.hrirBuffer[e].getChannelData(0)[c];
      r.getChannelData(i).set(s);
    }
    return r;
  }
}
class wxyz2acn {
  constructor(t) {
    this.ctx = t, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(4);
    for (let n = 0; n < 4; n++)
      this.gains[n] = this.ctx.createGain(), n === 0 ? this.gains[n].gain.value = Math.SQRT2 : this.gains[n].gain.value = Math.sqrt(3), this.gains[n].connect(this.out, 0, n);
    this.in.connect(this.gains[0], 0, 0), this.in.connect(this.gains[3], 1, 0), this.in.connect(this.gains[1], 2, 0), this.in.connect(this.gains[2], 3, 0);
  }
}
class acn2wxyz {
  constructor(t) {
    this.ctx = t, this.in = this.ctx.createChannelSplitter(4), this.out = this.ctx.createChannelMerger(4), this.gains = new Array(4);
    for (let n = 0; n < 4; n++)
      this.gains[n] = this.ctx.createGain(), n === 0 ? this.gains[n].gain.value = Math.SQRT1_2 : this.gains[n].gain.value = 1 / Math.sqrt(3), this.gains[n].connect(this.out, 0, n);
    this.in.connect(this.gains[0], 0, 0), this.in.connect(this.gains[2], 1, 0), this.in.connect(this.gains[3], 2, 0), this.in.connect(this.gains[1], 3, 0);
  }
}
class sn3d2n3d {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++) {
      const i = Math.floor(Math.sqrt(r));
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = Math.sqrt(2 * i + 1), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
    }
  }
}
class n3d2sn3d {
  constructor(t, n) {
    this.ctx = t, this.order = n, this.nCh = getAmbisonicChannelCount(n), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = new Array(this.nCh);
    for (let r = 0; r < this.nCh; r++) {
      const i = Math.floor(Math.sqrt(r));
      this.gains[r] = this.ctx.createGain(), this.gains[r].gain.value = 1 / Math.sqrt(2 * i + 1), this.in.connect(this.gains[r], r, 0), this.gains[r].connect(this.out, 0, r);
    }
  }
}
class fuma2acn {
  constructor(t, n) {
    let r = n;
    r > 3 && (console.log("FuMa specifiction is supported up to 3rd order"), r = 3);
    const i = [
      Math.sqrt(2),
      // W
      Math.sqrt(3),
      // Y
      Math.sqrt(3),
      // Z
      Math.sqrt(3),
      // X
      Math.sqrt(15) / 2,
      // V
      Math.sqrt(15) / 2,
      // T
      Math.sqrt(5),
      // R
      Math.sqrt(15) / 2,
      // S
      Math.sqrt(15) / 2,
      // U
      Math.sqrt(35 / 8),
      // Q
      Math.sqrt(35) / 3,
      // O
      Math.sqrt(224 / 45),
      // M
      Math.sqrt(7),
      // K
      Math.sqrt(224 / 45),
      // L
      Math.sqrt(35) / 3,
      // N
      Math.sqrt(35 / 8)
      // P
    ];
    if (this.ctx = t, this.order = r, this.nCh = getAmbisonicChannelCount(r), this.in = this.ctx.createChannelSplitter(this.nCh), this.out = this.ctx.createChannelMerger(this.nCh), this.gains = [], this.remapArray = [], this.remapArray.push(0, 2, 3, 1), r > 1) {
      let s = 0, e;
      for (let c = 0; c < this.nCh; c++)
        if (e = [], c >= (s + 1) * (s + 1)) {
          s += 1;
          for (let f = (s + 1) * (s + 1); f < (s + 2) * (s + 2); f++)
            (f + s % 2) % 2 === 0 ? e.push(f) : e.unshift(f);
          this.remapArray = this.remapArray.concat(e);
        }
    }
    for (let s = 0; s < this.nCh; s++)
      this.gains[s] = this.ctx.createGain(), this.gains[s].gain.value = i[s], this.in.connect(this.gains[s], this.remapArray[s], 0), this.gains[s].connect(this.out, 0, s);
  }
}
const _converters = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  acn2wxyz,
  fuma2acn,
  n3d2sn3d,
  sn3d2n3d,
  wxyz2acn
}, Symbol.toStringTag, { value: "Module" })), converters = _converters, utils = _utils;
export {
  HOAloader,
  HRIRloader2D_local,
  HRIRloader_ircam,
  HRIRloader_local,
  binDecoder,
  binDecoder2D,
  computeEncodingCoefficients,
  computeEncodingCoefficients2D,
  converters,
  convolver,
  decoder,
  degreesToRadians,
  encodeAndSumBuffers,
  encodeBuffer,
  encodeBuffer2D,
  encodeBuffer2DFromDirection,
  encodeBufferFromDirection,
  getAmbisonicChannelCount,
  getAmbisonicChannelCount2D,
  intensityAnalyser,
  intensityAnalyser2D,
  monoEncoder,
  monoEncoder2D,
  orderLimiter,
  orderLimiter2D,
  orderWeight,
  powermapAnalyser,
  radiansToDegrees,
  rmsAnalyser,
  sceneMirror,
  sceneMirror2D,
  sceneRotator,
  sceneRotator2D,
  utils,
  virtualMic
};
//# sourceMappingURL=ambisonics.es.min.js.map
